const themes=["420","56chan","adaptive","amoled","army-green","cancer","chaos","choc","clear","cybhub","darkblue","digi","favela","gurochan","indiachan","iwakura","lain","miku","mushroom","navy","pink","ptchan","rei-zero","robot","solarized-dark","solarized-light","tchan","teletext","tempus-cozette","tomorrow","tomorrow2","vapor","warosu","win95","yotsuba-b","yotsuba"],codeThemes=["a11y-dark","a11y-dark.min","a11y-light","a11y-light.min","agate","agate.min","an-old-hope","an-old-hope.min","androidstudio","androidstudio.min","arduino-light","arduino-light.min","arta","arta.min","ascetic","ascetic.min","atom-one-dark-reasonable","atom-one-dark-reasonable.min","atom-one-dark","atom-one-dark.min","atom-one-light","atom-one-light.min","brown-paper","brown-paper.min","codepen-embed","codepen-embed.min","color-brewer","color-brewer.min","dark","dark.min","default","default.min","devibeans","devibeans.min","docco","docco.min","far","far.min","felipec","felipec.min","foundation","foundation.min","github-dark-dimmed","github-dark-dimmed.min","github-dark","github-dark.min","github","github.min","gml","gml.min","googlecode","googlecode.min","gradient-dark","gradient-dark.min","gradient-light","gradient-light.min","grayscale","grayscale.min","hybrid","hybrid.min","idea","idea.min","intellij-light","intellij-light.min","ir-black","ir-black.min","isbl-editor-dark","isbl-editor-dark.min","isbl-editor-light","isbl-editor-light.min","kimbie-dark","kimbie-dark.min","kimbie-light","kimbie-light.min","lightfair","lightfair.min","lioshi","lioshi.min","magula","magula.min","mono-blue","mono-blue.min","monokai-sublime","monokai-sublime.min","monokai","monokai.min","night-owl","night-owl.min","nnfx-dark","nnfx-dark.min","nnfx-light","nnfx-light.min","nord","nord.min","obsidian","obsidian.min","panda-syntax-dark","panda-syntax-dark.min","panda-syntax-light","panda-syntax-light.min","paraiso-dark","paraiso-dark.min","paraiso-light","paraiso-light.min","pojoaque","pojoaque.min","purebasic","purebasic.min","qtcreator-dark","qtcreator-dark.min","qtcreator-light","qtcreator-light.min","rainbow","rainbow.min","routeros","routeros.min","school-book","school-book.min","shades-of-purple","shades-of-purple.min","srcery","srcery.min","stackoverflow-dark","stackoverflow-dark.min","stackoverflow-light","stackoverflow-light.min","sunburst","sunburst.min","tokyo-night-dark","tokyo-night-dark.min","tokyo-night-light","tokyo-night-light.min","tomorrow-night-blue","tomorrow-night-blue.min","tomorrow-night-bright","tomorrow-night-bright.min","vs","vs.min","vs2015","vs2015.min","xcode","xcode.min","xt256","xt256.min"],captchaOptions={grid:{size:4,question:"Select the solid/filled icons"},type:"text"},SERVER_TIMEZONE="America/Martinique",settings={embedsEnabled:!0,heightUnlimit:!1,hideRecursive:!0,crispImages:!1,hideThumbnails:!1,nonColorIds:!1,alwaysShowSpoilers:!1,hidePostStubs:!1,smoothScrolling:!0,threadWatcher:!0,defaultVolume:100,loop:!0,imageLoadingBars:!0,live:!0,scrollToPosts:!1,localTime:!0,hour24Time:!1,relativeTime:!0,notificationsEnabled:!1,notificationsYousOnly:!0,showYous:!0,hideDeletedPostContent:!1,tegakiWidth:500,tegakiHeight:500},extraLocals={meta:{siteName:"",url:""},reverseImageLinksURL:"https://tineye.com/search?url=%s",ethereumLinksURL:"https://etherscan.io/address/%s"},pluralMap={1:"one"},__=(e,t=null)=>{const r=TRANSLATIONS[e]||e;return null!==t?r.replace("%s",t):r},__n=(e,t)=>{const r=pluralMap[t]||"other",i=TRANSLATIONS[e];if(!i)return e;return(i[r]||i.other).replace("%s",t)},isCatalog=/^\/(\w+\/(manage\/)?)?catalog.html/.test(window.location.pathname),isThread=/\/\w+\/thread\/\d+.html/.test(window.location.pathname),isModView=/\/\w+\/manage\/(thread\/)?(index|\d+).html/.test(window.location.pathname),isManage=/\/(\w+\/manage|globalmanage)\/(recent|reports|bans|boards|(global)?logs|settings|banners|accounts|roles|news|filters|custompages).html/.test(window.location.pathname),isGlobalRecent="/globalmanage/recent.html"===window.location.pathname,isRecent=isGlobalRecent||window.location.pathname.endsWith("/manage/recent.html");function setLocalStorage(e,t){try{localStorage.setItem(e,t)}catch(e){deleteStartsWith()}finally{localStorage.setItem(e,t)}}function appendLocalStorageArray(e,t){const r=JSON.parse(localStorage.getItem(e));r.push(t),setLocalStorage(e,JSON.stringify(r))}function deleteStartsWith(e="hovercache"){const t=Object.keys(localStorage).filter((t=>t.startsWith(e)));for(let e=0;e<t.length;e++)localStorage.removeItem(t[e])}function setDefaultLocalStorage(e,t){localStorage.getItem(e)||setLocalStorage(e,t)}const localStorageDefaults={volume:settings.defaultVolume,loop:settings.loop,imageloadingbars:settings.imageLoadingBars,live:settings.live,scroll:settings.scrollToPosts,localtime:settings.localTime,relative:settings.relativeTime,"24hour":settings.hour24Time,notifications:settings.notificationsEnabled,"notification-yous-only":settings.notificationsYousOnly,"yous-setting":settings.showYous,threadwatcher:settings.threadWatcher,"threadwatcher-minimise":!1,disableboardcss:!1,"tegakiwidth-setting":settings.tegakiWidth,"tegakiheight-setting":settings.tegakiHeight,filters1:"[]",yous:"[]",watchlist:"[]",name:"",theme:"default",codetheme:"default",customcss:"",overboardsettings:'{"add":"","rem":"","include_default":true}'};function pug_attr(e,t,r,i){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(i?e:e+'="'+e+'"');var n=typeof t;return"object"!==n&&"function"!==n||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),r||-1===t.indexOf('"'))?(r&&(t=pug_escape(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function pug_classes(e,t){return Array.isArray(e)?pug_classes_array(e,t):e&&"object"==typeof e?pug_classes_object(e):e||""}function pug_classes_array(e,t){for(var r,i="",n="",s=Array.isArray(t),a=0;a<e.length;a++)(r=pug_classes(e[a]))&&(s&&t[a]&&(r=pug_escape(r)),i=i+n+r,n=" ");return i}function pug_classes_object(e){var t="",r="";for(var i in e)i&&e[i]&&pug_has_own_property.call(e,i)&&(t=t+r+i,r=" ");return t}function pug_escape(e){var t=""+e,r=pug_match_html.exec(t);if(!r)return e;var i,n,s,a="";for(i=r.index,n=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}n!==i&&(a+=t.substring(n,i)),n=i+1,a+=s}return n!==i?a+t.substring(n,i):a}Object.entries(localStorageDefaults).map((e=>setDefaultLocalStorage(e[0],e[1])));var pug_has_own_property=Object.prototype.hasOwnProperty,pug_match_html=/["&<>]/;function pug_style(e){if(!e)return"";if("object"==typeof e){var t="";for(var r in e)pug_has_own_property.call(e,r)&&(t=t+r+":"+e[r]+";");return t}return e+""}function modal(e){var t,r="",i={},n=e||{};return function(e,n,s,a,o,c,l,d,u,h,p,f,g,m,y,v,b,T,_,k,E){i.report=t=function(i,n=!1){this&&this.block,this&&this.attributes;r=r+'<div class="reports post-container"><input class="post-check" type="checkbox" name="checkedreports"'+pug_attr("value",i.id,!0,!1)+"/> ";const a=!0===k?i.ip.raw:i.ip.cloak;r=r+'<a class="bold"'+pug_attr("href",`${n?"recent.html":""}?ip=${d(a)}`,!0,!1)+">["+pug_escape(null==(t=a)?"":t)+"]</a> ";const o=new e(i.date);r=r+'<time class="reltime"'+pug_attr("datetime",o.toISOString(),!0,!1)+">"+pug_escape(null==(t=o.toLocaleString(b,{hourCycle:"h23"}))?"":t)+"</time> | "+pug_escape(null==(t=s("Reason"))?"":t)+": "+pug_escape(null==(t=i.reason)?"":t)+"</div>"},i.banmessage=t=function(e){this&&this.block,this&&this.attributes;r=r+'<p class="ban"><span class="message">'+pug_escape(null==(t=s("USER WAS BANNED FOR THIS POST"))?"":t)+'</span> <span class="reason"'+pug_attr("data-reason",e,!0,!1)+">"+pug_escape(null==(t=e)?"":t)+"</span></p>"},i.web3signature=t=function(e,i){this&&this.block,this&&this.attributes;r=r+'<div class="mv-5 ml-5"><a class="web3-address"'+pug_attr("href",u.replace("%s",d(i)),!0,!1)+' rel="nofollow" referrerpolicy="same-origin" target="_blank">'+pug_escape(null==(t=i.substring(0,5))?"":t)+"…"+pug_escape(null==(t=i.substring(38,42))?"":t)+'</a><details class="dummy-link"><summary>'+pug_escape(null==(t=s("Signature"))?"":t)+'</summary><div class="web3-signature">'+pug_escape(null==(t=e)?"":t)+"</div></details></div>"},i.post=t=function(c,l,u=!1,h=!1,p=!1,m=!1){this&&this.block,this&&this.attributes;r=r+'<div class="anchor"'+pug_attr("id",c.postId,!0,!1)+"></div><div"+(pug_attr("class",pug_classes(["post-container "+(c.thread||!0===p?"":"op")],[!0]),!1,!1)+pug_attr("data-board",c.board,!0,!1)+pug_attr("data-post-id",c.postId,!0,!1)+pug_attr("data-user-id",c.userId,!0,!1)+pug_attr("data-name",c.name,!0,!1)+pug_attr("data-tripcode",c.tripcode,!0,!1)+pug_attr("data-subject",c.subject,!0,!1)+pug_attr("data-email",c.email,!0,!1)+pug_attr("data-flag",c.country&&c.country.code,!0,!1))+">";const E=`/${c.board}/${y||u||h?"manage/":""}thread/${c.thread||c.postId}.html`;if(r+='<div class="post-info"><span><label>',m||(h?r=r+'<input class="post-check" type="checkbox" name="globalcheckedposts"'+pug_attr("value",c._id,!0,!1)+"/>":p||(r=r+'<input class="post-check" type="checkbox" name="checkedposts"'+pug_attr("value",c.postId,!0,!1)+"/>"),r+=" "),u){const e=!0===k?c.ip.raw:c.ip.cloak;r=r+'<a class="bold"'+pug_attr("href",`${_?"../":""}recent.html?ip=${d(e)}`,!0,!1)+">["+pug_escape(null==(t=e)?"":t)+"]</a>"}else if(y)r=r+'<a class="bold"'+pug_attr("href",`${_?"../":""}recent.html?postid=${c.postId}`,!0,!1)+">[+]</a>";else if(h){r=r+'<a class="bold post-board"'+pug_attr("href",`/${c.board}/manage/index.html`,!0,!1)+">/"+pug_escape(null==(t=c.board)?"":t)+"/</a> ";const e=!0===k?c.ip.raw:c.ip.cloak;r=r+'<a class="bold"'+pug_attr("href",`?ip=${d(e)}`,!0,!1)+">["+pug_escape(null==(t=e)?"":t)+"]</a>"}r+=" ",c.thread||(c.sticky||c.bumplocked||c.locked||c.cyclic)&&(r+='<span class="post-icons">',c.sticky&&(r=r+'<img src="/file/sticky.png" height="14" width="14"'+pug_attr("title",`${s("Sticky")} (${c.sticky})`,!0,!1)+"/> "),c.bumplocked&&(r=r+'<img src="/file/bumplock.png" height="14" width="14"'+pug_attr("title",s("Bumplocked"),!0,!1)+"/> "),c.locked&&(r=r+'<img src="/file/lock.png" height="14" width="14"'+pug_attr("title",s("Locked"),!0,!1)+"/> "),c.cyclic&&(r=r+'<img src="/file/cyclic.png" height="14" width="14"'+pug_attr("title",s("Cyclic"),!0,!1)+"/> "),r+="</span>"),c.subject&&(r=r+'<span class="post-subject">'+pug_escape(null==(t=c.subject)?"":t)+"</span> "),r=c.email?r+'<a class="post-name"'+pug_attr("href",`mailto:${c.email}`,!0,!1)+">"+pug_escape(null==(t=c.name)?"":t)+"</a>":r+'<span class="post-name">'+pug_escape(null==(t=c.name)?"":t)+"</span>",r+=" </label>",c.country&&c.country.code&&(r=!0===c.country.custom?r+"<span"+pug_attr("title",c.country.name,!0,!1)+'><img class="customflag"'+pug_attr("src",`/flag/${c.board}/${c.country.src}`,!0,!1)+' alt=" " loading="lazy"/></span> ':r+"<span"+(pug_attr("class",pug_classes([`flag flag-${c.country.code.toLowerCase()}`],[!0]),!1,!1)+pug_attr("title",c.country.name,!0,!1)+pug_attr("alt",c.country.name,!0,!1))+"></span> "),c.tripcode&&(r=r+'<span class="post-tripcode">'+pug_escape(null==(t=c.tripcode)?"":t)+"</span> "),c.capcode&&(r=r+'<span class="post-capcode"'+pug_attr("data-cap",c.capcode,!0,!1)+">"+pug_escape(null==(t=c.capcode)?"":t)+"</span> ");const w=new e(c.date);r=r+'<time class="post-date reltime"'+pug_attr("datetime",w.toISOString(),!0,!1)+">"+pug_escape(null==(t=w.toLocaleString(b,{hourCycle:"h23"}))?"":t)+"</time> ",c.userId&&(r=r+'<span class="user-id"'+pug_attr("style",pug_style(`background-color: #${c.userId}`),!0,!1)+">"+pug_escape(null==(t=c.userId)?"":t)+"</span> "),r=r+'</span><span class="post-links"><a class="noselect no-decoration"'+pug_attr("href",`${E}#${c.postId}`,!0,!1)+">"+pug_escape(null==(t=s("No."))?"":t)+'</a><span class="post-quoters"><a class="no-decoration"'+pug_attr("href",`${E}#postform`,!0,!1)+">"+pug_escape(null==(t=c.postId)?"":t)+"</a></span> ",!c.thread&&(l||u||h)&&(r=r+' <span class="noselect"><a'+pug_attr("href",`${E}`,!0,!1)+">["+pug_escape(null==(t=s("Open"))?"":t)+"]</a></span>"),r=r+'<select class="jsonly postmenu"><option value="single">'+pug_escape(null==(t=s("Hide"))?"":t)+"</option>",c.userId&&(r=r+'<option value="fid">'+pug_escape(null==(t=s("Filter ID"))?"":t)+"</option>"),c.name&&(r=r+'<option value="fname">'+pug_escape(null==(t=s("Filter Name"))?"":t)+"</option>"),c.tripcode&&(r=r+'<option value="ftrip">'+pug_escape(null==(t=s("Filter Tripcode"))?"":t)+"</option>"),c.subject&&(r=r+'<option value="fsub">'+pug_escape(null==(t=s("Filter Subject"))?"":t)+"</option>"),c.country&&c.country.code&&(r=r+'<option value="fflag">'+pug_escape(null==(t=s("Filter Flag"))?"":t)+"</option>"),m||p||(r=r+'<option value="moderate">'+pug_escape(null==(t=s("Moderate"))?"":t)+"</option>"),!p&&(y||u||h)&&(r=r+'<option value="edit">'+pug_escape(null==(t=s("Edit"))?"":t)+"</option>"),c.thread||(r=r+'<option value="watch">'+pug_escape(null==(t=s("Watch"))?"":t)+'</option><option value="playlist">'+pug_escape(null==(t=s("Playlist"))?"":t)+"</option>"),r+='</select></span></div><div class="post-data">',c.files.length>0&&(r=r+"<div"+pug_attr("class",pug_classes(["post-files",c.files.length>1?"fn":""],[!1,!0]),!1,!1)+">",function(){var e=c.files;if("number"==typeof e.length)for(var i=0,n=e.length;i<n;i++){if("tegaki/replay"===(a=e[i]).mimetype&&c.files.some((e=>e.originalFilename.slice(0,-3)===a.originalFilename.slice(0,-4))))continue;r+='<div class="post-file">';const n=a.mimetype.split("/")[0];if(r=r+'<span class="post-file-info"><span><a class="filename"'+pug_attr("href","/file/"+a.filename,!0,!1)+pug_attr("title","Download "+a.originalFilename,!0,!1)+pug_attr("download",a.originalFilename,!0,!1)+">"+pug_escape(null==(t=c.spoiler||a.spoiler?s("Spoiler File"):a.originalFilename)?"":t)+"</a></span><br/>",h&&null!=a.phash&&(r=r+"<span>"+pug_escape(null==(t=a.phash)?"":t)+"</span><br/>"),a.attachment||c.spoiler||a.spoiler||(r=r+'<span class="jsonly"><b>[</b><a class="dummy-link hide-image noselect"'+pug_attr("data-src",`/file/${a.hasThumb?"thumb/"+a.hash+a.thumbextension:a.filename}`,!0,!1)+">"+pug_escape(null==(t=s("Hide"))?"":t)+"</a><b>]</b></span>"),r=r+"<span>  ("+pug_escape(null==(t=a.sizeString)?"":t),a.geometryString&&(r=r+", "+pug_escape(null==(t=a.geometryString)?"":t)),a.durationString&&(r=r+", "+pug_escape(null==(t=a.durationString)?"":t)),r+=")</span>","image"===n&&((o&&!0===o.settings.reverseImageSearchLinks||m&&!0===v||u||h)&&(r=r+" <span><a"+pug_attr("href",`${T.replace("%s",d(g.url+"/file/"+a.filename))}`,!0,!1)+' rel="nofollow" referrerpolicy="same-origin"'+pug_attr("title",s("Reverse Image Search"),!0,!1)+' target="_blank">'+pug_escape(null==(t=s("Reverse"))?"":t)+"</a></span>"),a.originalFilename.endsWith("-tegaki.png"))){const e=c.files.find((e=>e.originalFilename.slice(0,-4)===a.originalFilename.slice(0,-3)));void 0!==e&&(r=r+' <span><a class="dummy-link replay-tegaki noselect"'+pug_attr("href",`/file/${e.filename}`,!0,!1)+pug_attr("download",e.originalFilename,!0,!1)+">"+pug_escape(null==(t=s("Replay"))?"":t)+"</a></span>")}"tegaki/replay"===a.mimetype&&(r=r+' <span class="jsonly"><a class="dummy-link replay-tegaki noselect"'+pug_attr("href",`/file/${a.filename}`,!0,!1)+pug_attr("download",a.originalFilename,!0,!1)+">"+pug_escape(null==(t=s("Replay"))?"":t)+"</a></span>"),r=r+'</span><div class="post-file-src"'+pug_attr("data-type",n,!0,!1)+pug_attr("data-attachment",a.attachment?"true":"false",!0,!1)+'><a target="_blank"'+pug_attr("href",`/file/${a.filename}`,!0,!1)+">",c.spoiler||a.spoiler?r+='<div class="spoilerimg file-thumb"></div>':a.hasThumb?r=r+'<img class="file-thumb"'+pug_attr("src",`/file/thumb/${a.hash}${a.thumbextension}`,!0,!1)+pug_attr("height",a.geometry.thumbheight,!0,!1)+pug_attr("width",a.geometry.thumbwidth,!0,!1)+' loading="lazy"/>':a.attachment?r=r+'<div class="attachmentimg file-thumb"'+pug_attr("data-mimetype",a.mimetype,!0,!1)+"></div>":"audio"===n?r+='<div class="audioimg file-thumb"></div>':r=r+'<img class="file-thumb"'+pug_attr("src",`/file/${a.filename}`,!0,!1)+pug_attr("height",a.geometry.height,!0,!1)+pug_attr("width",a.geometry.width,!0,!1)+' loading="lazy"/>',r+="</a></div></div>"}else{n=0;for(var i in e){var a;if(n++,"tegaki/replay"===(a=e[i]).mimetype&&c.files.some((e=>e.originalFilename.slice(0,-3)===a.originalFilename.slice(0,-4))))continue;r+='<div class="post-file">';const l=a.mimetype.split("/")[0];if(r=r+'<span class="post-file-info"><span><a class="filename"'+pug_attr("href","/file/"+a.filename,!0,!1)+pug_attr("title","Download "+a.originalFilename,!0,!1)+pug_attr("download",a.originalFilename,!0,!1)+">"+pug_escape(null==(t=c.spoiler||a.spoiler?s("Spoiler File"):a.originalFilename)?"":t)+"</a></span><br/>",h&&null!=a.phash&&(r=r+"<span>"+pug_escape(null==(t=a.phash)?"":t)+"</span><br/>"),a.attachment||c.spoiler||a.spoiler||(r=r+'<span class="jsonly"><b>[</b><a class="dummy-link hide-image noselect"'+pug_attr("data-src",`/file/${a.hasThumb?"thumb/"+a.hash+a.thumbextension:a.filename}`,!0,!1)+">"+pug_escape(null==(t=s("Hide"))?"":t)+"</a><b>]</b></span>"),r=r+"<span>  ("+pug_escape(null==(t=a.sizeString)?"":t),a.geometryString&&(r=r+", "+pug_escape(null==(t=a.geometryString)?"":t)),a.durationString&&(r=r+", "+pug_escape(null==(t=a.durationString)?"":t)),r+=")</span>","image"===l&&((o&&!0===o.settings.reverseImageSearchLinks||m&&!0===v||u||h)&&(r=r+" <span><a"+pug_attr("href",`${T.replace("%s",d(g.url+"/file/"+a.filename))}`,!0,!1)+' rel="nofollow" referrerpolicy="same-origin"'+pug_attr("title",s("Reverse Image Search"),!0,!1)+' target="_blank">'+pug_escape(null==(t=s("Reverse"))?"":t)+"</a></span>"),a.originalFilename.endsWith("-tegaki.png"))){const e=c.files.find((e=>e.originalFilename.slice(0,-4)===a.originalFilename.slice(0,-3)));void 0!==e&&(r=r+' <span><a class="dummy-link replay-tegaki noselect"'+pug_attr("href",`/file/${e.filename}`,!0,!1)+pug_attr("download",e.originalFilename,!0,!1)+">"+pug_escape(null==(t=s("Replay"))?"":t)+"</a></span>")}"tegaki/replay"===a.mimetype&&(r=r+' <span class="jsonly"><a class="dummy-link replay-tegaki noselect"'+pug_attr("href",`/file/${a.filename}`,!0,!1)+pug_attr("download",a.originalFilename,!0,!1)+">"+pug_escape(null==(t=s("Replay"))?"":t)+"</a></span>"),r=r+'</span><div class="post-file-src"'+pug_attr("data-type",l,!0,!1)+pug_attr("data-attachment",a.attachment?"true":"false",!0,!1)+'><a target="_blank"'+pug_attr("href",`/file/${a.filename}`,!0,!1)+">",c.spoiler||a.spoiler?r+='<div class="spoilerimg file-thumb"></div>':a.hasThumb?r=r+'<img class="file-thumb"'+pug_attr("src",`/file/thumb/${a.hash}${a.thumbextension}`,!0,!1)+pug_attr("height",a.geometry.thumbheight,!0,!1)+pug_attr("width",a.geometry.thumbwidth,!0,!1)+' loading="lazy"/>':a.attachment?r=r+'<div class="attachmentimg file-thumb"'+pug_attr("data-mimetype",a.mimetype,!0,!1)+"></div>":"audio"===l?r+='<div class="audioimg file-thumb"></div>':r=r+'<img class="file-thumb"'+pug_attr("src",`/file/${a.filename}`,!0,!1)+pug_attr("height",a.geometry.height,!0,!1)+pug_attr("width",a.geometry.width,!0,!1)+' loading="lazy"/>',r+="</a></div></div>"}}}.call(this),r+="</div>"),c.message&&y&&(c.message=c.message.replace(new n(`<a class="quote" href="/${c.board}/`,"g"),`<a class="quote" href="/${c.board}/manage/`));let A=c.message;if(c.message)if(l){const e=c.message.split("\n");if(e.length>15)A=e.slice(0,15).join("\n");else if(c.message.length>1500){A=c.message.substring(0,1500).replace(/<([\w]+)?([^>]*)?$/,"");const e=A.lastIndexOf("<a"),t=A.lastIndexOf("</a>");e>=0&&(-1===t||t<e)&&(A+="</a>")}r=r+'<pre class="post-message">'+(null==(t=A)?"":t)+"</pre>"}else r=r+'<pre class="post-message">'+(null==(t=c.message)?"":t)+"</pre>";if(c.message||0!==c.files.length||(r=r+"<p>"+pug_escape(null==(t=s("No message or files."))?"":t)+"</p>"),c.signature&&c.address&&i.web3signature(c.signature,c.address),c.edited){const i=new e(c.edited.date);r+='<small class="cb mv-5 ml-5 edited">',f=s("Last edited | by %s",c.edited.username||s("Hidden User")).split("|"),r=r+pug_escape(null==(t=f[0])?"":t)+'<time class="reltime"'+pug_attr("datetime",i.toISOString(),!0,!1)+">"+pug_escape(null==(t=i.toLocaleString(b,{hourCycle:"h23"}))?"":t)+"</time>"+pug_escape(null==(t=f[1])?"":t)+"</small>"}if(c.banmessage&&i.banmessage(c.banmessage),A!==c.message&&(r=r+'<div class="cb mt-5 ml-5">'+pug_escape(null==(t=s("Message too long."))?"":t)+' <a class="viewfulltext"'+pug_attr("href",`${E}#${c.postId}`,!0,!1)+">"+pug_escape(null==(t=s("View the full text"))?"":t)+"</a></div>"),c.omittedposts||c.omittedfiles){r=r+'<div class="cb mt-5 ml-5"><img class="jsonly dummy-link expand-omitted" height="12" width="12"'+pug_attr("data-shown",c.replies.length,!0,!1)+pug_attr("data-board",c.board,!0,!1)+pug_attr("data-thread",c.postId,!0,!1)+' src="/file/plus.png"/>';const e=c.omittedposts,i=c.omittedfiles;r=r+"<span>"+pug_escape(null==(t=s(`${e>1?"%s":e} repl${e>1?"ies":"y"}${i>0?` and ${i>1?"%s":i} file${i>1?"s":""}`:""} omitted.`,e>1?e:i,i))?"":t)+" </span><a"+pug_attr("href",E,!0,!1)+">"+pug_escape(null==(t=s("View the full thread"))?"":t)+"</a></div>"}if(null!=c.previewbacklinks){if(c.previewbacklinks.length>0){if(r=r+'<div class="replies mt-5 ml-5">'+pug_escape(null==(t=a("Replies",2))?"":t)+": ",function(){var e=c.previewbacklinks;if("number"==typeof e.length)for(var i=0,n=e.length;i<n;i++){var s=e[i];r=r+'<a class="quote"'+pug_attr("href",`${E}#${s.postId}`,!0,!1)+">&gt;&gt;"+pug_escape(null==(t=s.postId)?"":t)+"</a> "}else{n=0;for(var i in e){n++;s=e[i];r=r+'<a class="quote"'+pug_attr("href",`${E}#${s.postId}`,!0,!1)+">&gt;&gt;"+pug_escape(null==(t=s.postId)?"":t)+"</a> "}}}.call(this),c.previewbacklinks.length<c.backlinks.length){const e=c.backlinks.length-c.previewbacklinks.length;r=r+"+ <a"+pug_attr("href",`${E}#${c.postId}`,!0,!1)+">"+pug_escape(null==(t=s("%s earlier",e))?"":t)+"</a>\n "}r+="</div>"}}else c.backlinks&&c.backlinks.length>0&&(r=r+'<div class="replies mt-5 ml-5">'+pug_escape(null==(t=a("Replies",2))?"":t)+": ",function(){var e=c.backlinks;if("number"==typeof e.length)for(var i=0,n=e.length;i<n;i++){var s=e[i];r=r+'<a class="quote"'+pug_attr("href",`${E}#${s.postId}`,!0,!1)+">&gt;&gt;"+pug_escape(null==(t=s.postId)?"":t)+"</a> "}else{n=0;for(var i in e){n++;s=e[i];r=r+'<a class="quote"'+pug_attr("href",`${E}#${s.postId}`,!0,!1)+">&gt;&gt;"+pug_escape(null==(t=s.postId)?"":t)+"</a> "}}}.call(this),r+="</div>");r+="</div></div>",!0===u&&function(){var e=c.reports;if("number"==typeof e.length)for(var t=0,r=e.length;t<r;t++){var n=e[t];i.report(n,!0)}else{r=0;for(var t in e){r++;n=e[t];i.report(n,!0)}}}.call(this),!0===h&&function(){var e=c.globalreports;if("number"==typeof e.length)for(var t=0,r=e.length;t<r;t++){var n=e[t];i.report(n)}else{r=0;for(var t in e){r++;n=e[t];i.report(n)}}}.call(this)},i.ban=t=function(n,a){this&&this.block,this&&this.attributes;r+="<tr><td>",(!a||null==n.appeal&&!0===n.allowAppeal)&&(r=r+'<input class="post-check" type="checkbox" name="checkedbans"'+pug_attr("value",n._id,!0,!1)+"/>"),r+="</td><td>",n.board?r=r+"<a"+pug_attr("href",`/${n.board}/`,!0,!1)+">/"+pug_escape(null==(t=n.board)?"":t)+"/</a>":r+=pug_escape(null==(t=s("Global"))?"":t),r=r+"</td><td>"+pug_escape(null==(t=n.reason)?"":t)+"</td>";const o=!0===k?n.ip.raw:n.ip.cloak;r=(r=!0===k?r+"<td>"+pug_escape(null==(t=o)?"":t)+"</td>":r+"<td>"+pug_escape(null==(t=o)?"":t)+pug_escape(null==(t=".*".repeat(n.range))?"":t)+"</td>")+"<td>"+pug_escape(null==(t=s(["IPV4","IPV6","Bypass","Pruned IP"][n.ip.type]))?"":t)+"</td><td>"+pug_escape(null==(t=s(["Single","Narrow","Wide"][n.range]))?"":t)+"</td><td>"+pug_escape(null==(t=a&&!0!==n.showUser?s("Hidden User"):n.issuer)?"":t)+"</td>";const c=new e(n.date);r=r+'<td><time class="right reltime"'+pug_attr("datetime",c.toISOString(),!0,!1)+">"+pug_escape(null==(t=c.toLocaleString(b,{hourCycle:"h23"}))?"":t)+"</time></td>";const l=new e(n.expireAt);r=r+'<td><time class="right reltime"'+pug_attr("datetime",l.toISOString(),!0,!1)+">"+pug_escape(null==(t=l.toLocaleString(b,{hourCycle:"h23"}))?"":t)+'</time></td><td class="banposts">',n.posts&&n.posts.length>0?(r=r+pug_escape(null==(t=s("Hover to view"))?"":t)+'<div class="thread">',function(){var e=n.posts;if("number"==typeof e.length)for(var t=0,r=e.length;t<r;t++){var s=e[t];i.post(s,!1,!1,!1,!0)}else{r=0;for(var t in e){r++;s=e[t];i.post(s,!1,!1,!1,!0)}}}.call(this),r+="</div>"):r+=pug_escape(null==(t=s("Posts not shown"))?"":t),r+="</td><td>",n.seen?r+="&#10003;":r+="&#10799;",r+="</td><td>",n.allowAppeal&&!n.appeal?r+="&#10003;":r+="&#10799;",r+="</td><td>",n.appeal?r=r+'<textarea rows="1" disabled="true">'+pug_escape(null==(t=n.appeal)?"":t)+"</textarea>":n.allowAppeal?r+=pug_escape(null==(t=s("No appeal submitted"))?"":t):r+="-",r+="</td><td>",n.note?r+=pug_escape(null==(t=n.note)?"":t):r+="-",r+="</td></tr>"},i.modal=t=function(e){this&&this.block,this&&this.attributes;if(r=r+'<div class="modal-bg"'+pug_attr("style",pug_style(e.hidden?"display:none":""),!0,!1)+'></div><div class="modal"'+pug_attr("id",e.settings?"settingsmodal":"",!0,!1)+pug_attr("style",pug_style(e.hidden?"display:none":""),!0,!1)+'><div class="row"><p class="bold">'+pug_escape(null==(t=e.title)?"":t)+'</p><a class="close postform-style" id="modalclose">×</a></div>',e.bans){r=r+'<h1 class="board-title">'+pug_escape(null==(t=s("Banned!"))?"":t)+'</h1><div class="row" id="modalbanned">';const n=e.bans;r=r+'<form class="form-post" action="/forms/appeal" enctype="application/x-www-form-urlencoded" method="POST" data-captcha-preload="true"><div class="table-container mv-10 text-center horscroll"><table class="bantable"><tr><th></th><th>'+pug_escape(null==(t=s("Board"))?"":t)+"</th><th>"+pug_escape(null==(t=s("Reason"))?"":t)+"</th><th>"+pug_escape(null==(t=s("IP/ID"))?"":t)+"</th><th>"+pug_escape(null==(t=s("Type"))?"":t)+"</th><th>"+pug_escape(null==(t=s("Range"))?"":t)+"</th><th>"+pug_escape(null==(t=s("Issuer"))?"":t)+"</th><th>"+pug_escape(null==(t=s("Issue Date"))?"":t)+"</th><th>"+pug_escape(null==(t=s("Expiry"))?"":t)+"</th><th>"+pug_escape(null==(t=s("Post(s)"))?"":t)+"</th><th>"+pug_escape(null==(t=s("Seen?"))?"":t)+"</th><th>"+pug_escape(null==(t=s("Appealable?"))?"":t)+"</th><th>"+pug_escape(null==(t=s("Appeal"))?"":t)+"</th><th>"+pug_escape(null==(t=s("Note"))?"":t),function(){var e=n;if("number"==typeof e.length)for(var t=0,r=e.length;t<r;t++){var s=e[t];i.ban(s,!0)}else{r=0;for(var t in e){r++;s=e[t];i.ban(s,!0)}}}.call(this),r+="</th></tr></table></div>";if(!0===n.filter((e=>!0===e.allowAppeal&&!e.appeal)).length>0){if(r=r+'<h4 class="no-m-p">'+pug_escape(null==(t=s("Appeal"))?"":t)+':<div class="form-wrapper flexleft mt-10"><input type="hidden" name="_csrf"'+pug_attr("value",l,!0,!1)+'/><div class="row"><div class="label">'+pug_escape(null==(t=s("Message"))?"":t)+'</div><textarea rows="5" name="message"'+pug_attr("required",!0,!0,!1)+"></textarea></div>","text"===c.type){switch(r=r+'<section class="row"><div class="label"><span>'+pug_escape(null==(t=s("Captcha"))?"":t)+'<span class="required">*</span></span></div><div class="col p-0">',c.type){case"google":r=r+'<div class="g-recaptcha"'+pug_attr("data-sitekey",`${h}`,!0,!1)+' data-theme="dark" data-size="compact" data-callback="recaptchaCallback"></div><noscript>'+pug_escape(null==(t=s("Please enable JavaScript to solve the captcha."))?"":t)+"</noscript>";break;case"hcaptcha":r=r+'<div class="h-captcha"'+pug_attr("data-sitekey",`${p}`,!0,!1)+' data-theme="dark" data-size="compact" data-callback="recaptchaCallback"></div><noscript>'+pug_escape(null==(t=s("Please enable JavaScript to solve the captcha."))?"":t)+"</noscript>";break;case"yandex":r=r+'<div class="smart-captcha"'+pug_attr("data-sitekey",`${E}`,!0,!1)+' data-callback="recaptchaCallback"></div><noscript>'+pug_escape(null==(t=s("Please enable JavaScript to solve the captcha."))?"":t)+"</noscript>";break;case"text":r=r+'<noscript class="no-m-p"><iframe class="captcha" src="/captcha.html"'+pug_attr("width=210",!0,!0,!1)+' height="80" scrolling="no" loading="lazy"></iframe></noscript><div class="jsonly captcha" style="display:none;"></div><input class="captchafield" type="text" name="captcha" autocomplete="off"'+pug_attr("placeholder",s("Captcha text"),!0,!1)+' pattern=".{6}"'+pug_attr("required",!0,!0,!1)+pug_attr("title",a("%s characters",6),!0,!1)+"/>";break;case"grid":case"grid2":r=r+'<span class="text-center">'+pug_escape(null==(t=c.grid.question)?"":t)+'</span><div class="catalog"><noscript class="no-m-p"><iframe class="captcha" src="/captcha.html" width="150" height="150" scrolling="no" loading="lazy"></iframe></noscript><div class="jsonly captcha" style="display:none"></div><div class="captchafield noselect">';for(let e=0;e<c.grid.size**2;e++)r=r+'<label class="captchachecklabel"><input type="checkbox" name="captcha"'+pug_attr("value",e,!0,!1)+'/><span class="captchacheckbox"></span></label>';r+="</div></div>"}r+="</div></section>"}else{switch(r=r+'<div class="row label mr-0"><div class="pv-5">'+pug_escape(null==(t=s("Captcha"))?"":t)+'<span class="required">*</span></div>',c.type){case"google":r=r+'<div class="g-recaptcha"'+pug_attr("data-sitekey",`${h}`,!0,!1)+' data-theme="dark" data-size="compact" data-callback="recaptchaCallback"></div><noscript>'+pug_escape(null==(t=s("Please enable JavaScript to solve the captcha."))?"":t)+"</noscript>";break;case"hcaptcha":r=r+'<div class="h-captcha"'+pug_attr("data-sitekey",`${p}`,!0,!1)+' data-theme="dark" data-size="compact" data-callback="recaptchaCallback"></div><noscript>'+pug_escape(null==(t=s("Please enable JavaScript to solve the captcha."))?"":t)+"</noscript>";break;case"yandex":r=r+'<div class="smart-captcha"'+pug_attr("data-sitekey",`${E}`,!0,!1)+' data-callback="recaptchaCallback"></div><noscript>'+pug_escape(null==(t=s("Please enable JavaScript to solve the captcha."))?"":t)+"</noscript>";break;case"text":r=r+'<noscript class="no-m-p"><iframe class="captcha" src="/captcha.html"'+pug_attr("width=210",!0,!0,!1)+' height="80" scrolling="no" loading="lazy"></iframe></noscript><div class="jsonly captcha" style="display:none;"></div><input class="captchafield" type="text" name="captcha" autocomplete="off"'+pug_attr("placeholder",s("Captcha text"),!0,!1)+' pattern=".{6}"'+pug_attr("required",!0,!0,!1)+pug_attr("title",a("%s characters",6),!0,!1)+"/>";break;case"grid":case"grid2":r=r+'<span class="text-center">'+pug_escape(null==(t=c.grid.question)?"":t)+'</span><div class="catalog"><noscript class="no-m-p"><iframe class="captcha" src="/captcha.html" width="150" height="150" scrolling="no" loading="lazy"></iframe></noscript><div class="jsonly captcha" style="display:none"></div><div class="captchafield noselect">';for(let e=0;e<c.grid.size**2;e++)r=r+'<label class="captchachecklabel"><input type="checkbox" name="captcha"'+pug_attr("value",e,!0,!1)+'/><span class="captchacheckbox"></span></label>';r+="</div></div>"}r+="</div>"}r=r+'<input type="submit"'+pug_attr("value",s("Submit"),!0,!1)+"/></div></h4>"}r+="</form></div>"}(e.message||e.messages||e.error||e.errors)&&(r+='<div class="row"><ul class="nomarks">',e.message&&(r=r+"<li>"+pug_escape(null==(t=e.message)?"":t)+"</li>"),e.error&&(r=r+"<li>"+pug_escape(null==(t=e.error)?"":t)+"</li>"),e.messages&&function(){var i=e.messages;if("number"==typeof i.length)for(var n=0,s=i.length;n<s;n++){var a=i[n];r=r+"<li>"+pug_escape(null==(t=a)?"":t)+"</li>"}else{s=0;for(var n in i){s++;a=i[n];r=r+"<li>"+pug_escape(null==(t=a)?"":t)+"</li>"}}}.call(this),e.errors&&function(){var i=e.errors;if("number"==typeof i.length)for(var n=0,s=i.length;n<s;n++){var a=i[n];r=r+"<li>"+pug_escape(null==(t=a)?"":t)+"</li>"}else{s=0;for(var n in i){s++;a=i[n];r=r+"<li>"+pug_escape(null==(t=a)?"":t)+"</li>"}}}.call(this),r+="</ul></div>"),e.frame?r=r+'<div class="row f1"><iframe class="bypass" id="modalframe"'+pug_attr("src",e.frame,!0,!1)+' frameborder="0" scrolling="no"></iframe></div>':e.link?r=r+'<div class="row"><a class="button mv-0"'+pug_attr("href",e.link.href,!0,!1)+' target="_blank">'+pug_escape(null==(t=e.link.text)?"":t)+"</a></div>":e.redirect&&e.title===s("Success")?r=r+'<div class="row"><a class="button mv-0"'+pug_attr("href",e.redirect,!0,!1)+">"+pug_escape(null==(t=s("OK"))?"":t)+"</a></div>":e.settings&&(r=r+'<div class="row"><div class="form-wrapper flexleft mt-10"><div class="row wrap sb"><div class="col mr-5"><div class="row"><label class="postform-style ph-5"><input id="live-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Live posts"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="notification-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Notifications"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="notification-yous-only" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Only notify (You)s"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="scroll-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Scroll to new posts"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="localtime-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Local time"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="24hour-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("24h time"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="relative-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Show relative time"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="noncolorids-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Non-color IDs"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="hidepoststubs-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Hide post stubs"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="hidedeletedpostcontent-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Hide deleted post content"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="disableboardcss-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Disable board custom CSS"))?"":t)+'</div></div></div><div class="col"><div class="row"><label class="postform-style ph-5"><input id="hidethumbnails-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Hide thumbnails"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="hiderecursive-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Recursive post hide"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="loop-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Loop audio/video"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="heightlimit-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Unlimit media height"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="crispimages-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Crisp image rendering"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="imageloadingbars-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Image loading bars"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="alwaysshowspoilers-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Always reveal text spoilers"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="yous-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Show (You)s"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="smoothscrolling-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Smooth scrolling"))?"":t)+'</div></div><div class="row"><label class="postform-style ph-5"><input id="threadwatcher-setting" type="checkbox"/></label><div class="rlabel">'+pug_escape(null==(t=s("Thread watcher"))?"":t)+'</div></div></div></div><div class="row wrap sb mt-5"><div class="col mr-5"><div class="row"><div class="label">'+pug_escape(null==(t=s("Video/Audio volume"))?"":t)+'</div><label class="postform-style ph-5"><input id="volume-setting" type="range" min="0" max="100"/></label></div><div class="row"><div class="label">'+pug_escape(null==(t=s("Default name"))?"":t)+'</div><input id="name-setting" type="text" name="name"/></div><div class="row"><div class="label">'+pug_escape(null==(t=s("Post password"))?"":t)+'</div><input id="postpassword-setting" type="password" name="postpassword" autocomplete="new-password"/></div><div class="row"><div class="label">'+pug_escape(null==(t=s("Theme"))?"":t)+'</div><select id="theme-setting"><option value="default">default</option>',function(){var i=e.settings.themes;if("number"==typeof i.length)for(var n=0,s=i.length;n<s;n++){var a=i[n];r=r+"<option"+pug_attr("value",a,!0,!1)+">"+pug_escape(null==(t=a)?"":t)+"</option>"}else{s=0;for(var n in i){s++;a=i[n];r=r+"<option"+pug_attr("value",a,!0,!1)+">"+pug_escape(null==(t=a)?"":t)+"</option>"}}}.call(this),r=r+'</select></div><div class="row"><div class="label">'+pug_escape(null==(t=s("Code theme"))?"":t)+'</div><select id="codetheme-setting"><option value="default">default</option>',function(){var i=e.settings.codeThemes;if("number"==typeof i.length)for(var n=0,s=i.length;n<s;n++){var a=i[n];r=r+"<option"+pug_attr("value",a,!0,!1)+">"+pug_escape(null==(t=a)?"":t)+"</option>"}else{s=0;for(var n in i){s++;a=i[n];r=r+"<option"+pug_attr("value",a,!0,!1)+">"+pug_escape(null==(t=a)?"":t)+"</option>"}}}.call(this),r=r+'</select></div></div><div class="col"><div class="row"><div class="label">'+pug_escape(null==(t=s("(You)s"))?"":t)+'</div><input class="mr-1" id="youslist-setting" type="text"'+pug_attr("readonly",!0,!0,!1)+'/><input id="youslist-clear" type="button"'+pug_attr("value",s("Clear"),!0,!1)+'/></div><div class="row"><div class="label">'+pug_escape(null==(t=s("Watchlist"))?"":t)+'</div><input class="mr-1" id="watchlist-setting" type="text"'+pug_attr("readonly",!0,!0,!1)+'/><input id="watchlist-clear" type="button"'+pug_attr("value",s("Clear"),!0,!1)+'/></div><div class="row"><div class="label">'+pug_escape(null==(t=s("Hidden images"))?"":t)+'</div><input class="mr-1" id="hiddenimages-setting" type="text"'+pug_attr("readonly",!0,!0,!1)+'/><input id="hiddenimages-clear" type="button"'+pug_attr("value",s("Clear"),!0,!1)+'/></div><div class="row"><div class="label">'+pug_escape(null==(t=s("Cache"))?"":t)+'</div><input class="mr-1" id="hovercachelist-setting" type="text"'+pug_attr("readonly",!0,!0,!1)+'/><input id="hovercachelist-clear" type="button"'+pug_attr("value",s("Clear"),!0,!1)+'/></div><div class="row"><div class="label">'+pug_escape(null==(t=s("Tegaki Size"))?"":t)+'</div><input class="mr-1 w50" id="tegakiwidth-setting" type="number"/><div class="postform-style ph-5 mr-1">× </div><input class="mr-1 w50" id="tegakiheight-setting" type="number"/></div></div></div><details class="fw mt-5"><summary class="label more">More</summary><div class="row mt-5"><div class="label">'+pug_escape(null==(t=s("Custom CSS"))?"":t)+'</div><textarea id="customcss-setting" rows="7"></textarea></div><div class="row mt-5"><form class="text-center" id="filter-form"><table class="fw"><tbody id="advancedfilters"><tr><th colspan="4">'+pug_escape(null==(t=s("Post Filters"))?"":t)+"</th></tr><tr><td>"+pug_escape(null==(t=s("Type"))?"":t)+"</td><td>"+pug_escape(null==(t=s("Value"))?"":t)+"</td><td>"+pug_escape(null==(t=s("Regex?"))?"":t)+'</td><td><input class="right" id="filters-clear" type="button"'+pug_attr("value",s("Clear"),!0,!1)+'/></td></tr><tr><td><select name="type"><option value="fname">'+pug_escape(null==(t=s("Name"))?"":t)+'</option><option value="ftrip">'+pug_escape(null==(t=s("Tripcode"))?"":t)+'</option><option value="fsub">'+pug_escape(null==(t=s("Subject"))?"":t)+'</option><option value="fmsg">'+pug_escape(null==(t=s("Message"))?"":t)+'</option><option value="fflag">'+pug_escape(null==(t=s("Flag"))?"":t)+'</option></select></td><td><input id="filter-value-input"'+pug_attr("required",!0,!0,!1)+' type="text" name="value"/></td><td><input type="checkbox" name="regex"/></td><td><input class="right" type="submit"'+pug_attr("value",s("Add"),!0,!1)+'/></td></tr></tbody></table></form></div><div class="row mt-5"><div class="label">'+pug_escape(null==(t=s("Import/Export Settings"))?"":t)+'<small class="title">'+pug_escape(null==(t=s("Do NOT import untrusted settings data!"))?"":t)+"</small><small>"+pug_escape(null==(t=s("Export does not include post password or (You)'s"))?"":t)+'</small></div><textarea id="import-export-setting" type="text"></textarea></div><div class="row"><input class="mr-1" id="export-setting" type="button"'+pug_attr("value",s("Export"),!0,!1)+'/><input id="import-setting" type="button"'+pug_attr("value",s("Import"),!0,!1)+"/></div></details></div></div>"),r+="</div>"},i.modal(m)}.call(this,"Date"in n?n.Date:"undefined"!=typeof Date?Date:void 0,"RegExp"in n?n.RegExp:"undefined"!=typeof RegExp?RegExp:void 0,"__"in n?n.__:void 0!==__?__:void 0,"__n"in n?n.__n:void 0!==__n?__n:void 0,"board"in n?n.board:"undefined"!=typeof board?board:void 0,"captchaOptions"in n?n.captchaOptions:void 0!==captchaOptions?captchaOptions:void 0,"csrf"in n?n.csrf:"undefined"!=typeof csrf?csrf:void 0,"encodeURIComponent"in n?n.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"ethereumLinksURL"in n?n.ethereumLinksURL:"undefined"!=typeof ethereumLinksURL?ethereumLinksURL:void 0,"googleRecaptchaSiteKey"in n?n.googleRecaptchaSiteKey:"undefined"!=typeof googleRecaptchaSiteKey?googleRecaptchaSiteKey:void 0,"hcaptchaSiteKey"in n?n.hcaptchaSiteKey:"undefined"!=typeof hcaptchaSiteKey?hcaptchaSiteKey:void 0,"lastEdited"in n?n.lastEdited:"undefined"!=typeof lastEdited?lastEdited:void 0,"meta"in n?n.meta:"undefined"!=typeof meta?meta:void 0,"modal"in n?n.modal:void 0!==modal?modal:void 0,"modview"in n?n.modview:"undefined"!=typeof modview?modview:void 0,"overboardReverseLinks"in n?n.overboardReverseLinks:"undefined"!=typeof overboardReverseLinks?overboardReverseLinks:void 0,"pageLanguage"in n?n.pageLanguage:"undefined"!=typeof pageLanguage?pageLanguage:void 0,"reverseImageLinksURL"in n?n.reverseImageLinksURL:"undefined"!=typeof reverseImageLinksURL?reverseImageLinksURL:void 0,"upLevel"in n?n.upLevel:"undefined"!=typeof upLevel?upLevel:void 0,"viewRawIp"in n?n.viewRawIp:"undefined"!=typeof viewRawIp?viewRawIp:void 0,"yandexSiteKey"in n?n.yandexSiteKey:"undefined"!=typeof yandexSiteKey?yandexSiteKey:void 0),r}function pug_attr(e,t,r,i){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(i?e:e+'="'+e+'"');var n=typeof t;return"object"!==n&&"function"!==n||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),r||-1===t.indexOf('"'))?(r&&(t=pug_escape(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function pug_escape(e){var t=""+e,r=pug_match_html.exec(t);if(!r)return e;var i,n,s,a="";for(i=r.index,n=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}n!==i&&(a+=t.substring(n,i)),n=i+1,a+=s}return n!==i?a+t.substring(n,i):a}pug_match_html=/["&<>]/;function pugfilters(e){var t,r="",i={},n=e||{};return function(e,n){i.filters=t=function(i){this&&this.block,this&&this.attributes;const n={single:e("Single"),fid:e("ID"),fname:e("Name"),ftrip:e("Tripcode"),fnamer:e("Name"),ftripr:e("Tripcode"),fsub:e("Subject"),fsubr:e("Subject"),fmsg:e("Message"),fmsgr:e("Message"),fflag:e("Flag"),fflagr:e("Flag")};i.length>0?function(){var e=i;if("number"==typeof e.length)for(var s=0,a=e.length;s<a;s++){var o=e[s];r=r+"<tr><td>"+pug_escape(null==(t=n[o.type])?"":t)+"</td><td>"+pug_escape(null==(t=o.val.toString())?"":t)+"</td><td><input"+pug_attr("disabled",!0,!0,!1)+' type="checkbox"'+pug_attr("checked",o.type.endsWith("r"),!0,!1)+'/></td><td><a class="right close"'+pug_attr("data-type",o.type,!0,!1)+pug_attr("data-data",o.val,!0,!1)+">×</a></td></tr>"}else{a=0;for(var s in e){a++;o=e[s];r=r+"<tr><td>"+pug_escape(null==(t=n[o.type])?"":t)+"</td><td>"+pug_escape(null==(t=o.val.toString())?"":t)+"</td><td><input"+pug_attr("disabled",!0,!0,!1)+' type="checkbox"'+pug_attr("checked",o.type.endsWith("r"),!0,!1)+'/></td><td><a class="right close"'+pug_attr("data-type",o.type,!0,!1)+pug_attr("data-data",o.val,!0,!1)+">×</a></td></tr>"}}}.call(this):r=r+'<td colspan="4">'+pug_escape(null==(t=e("No Filters"))?"":t)+"</td>"},i.filters(n)}.call(this,"__"in n?n.__:void 0!==__?__:void 0,"filterArr"in n?n.filterArr:"undefined"!=typeof filterArr?filterArr:void 0),r}function pug_attr(e,t,r,i){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(i?e:e+'="'+e+'"');var n=typeof t;return"object"!==n&&"function"!==n||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),r||-1===t.indexOf('"'))?(r&&(t=pug_escape(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function pug_escape(e){var t=""+e,r=pug_match_html.exec(t);if(!r)return e;var i,n,s,a="";for(i=r.index,n=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}n!==i&&(a+=t.substring(n,i)),n=i+1,a+=s}return n!==i?a+t.substring(n,i):a}pug_match_html=/["&<>]/;function banmessage(e){var t,r="",i={},n=e||{};return function(e,n){i.banmessage=t=function(i){this&&this.block,this&&this.attributes;r=r+'<p class="ban"><span class="message">'+pug_escape(null==(t=e("USER WAS BANNED FOR THIS POST"))?"":t)+'</span> <span class="reason"'+pug_attr("data-reason",i,!0,!1)+">"+pug_escape(null==(t=i)?"":t)+"</span></p>"},i.banmessage(n)}.call(this,"__"in n?n.__:void 0!==__?__:void 0,"banmessage"in n?n.banmessage:void 0!==banmessage?banmessage:void 0),r}function pug_attr(e,t,r,i){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(i?e:e+'="'+e+'"');var n=typeof t;return"object"!==n&&"function"!==n||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),r||-1===t.indexOf('"'))?(r&&(t=pug_escape(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function pug_classes(e,t){return Array.isArray(e)?pug_classes_array(e,t):e&&"object"==typeof e?pug_classes_object(e):e||""}function pug_classes_array(e,t){for(var r,i="",n="",s=Array.isArray(t),a=0;a<e.length;a++)(r=pug_classes(e[a]))&&(s&&t[a]&&(r=pug_escape(r)),i=i+n+r,n=" ");return i}function pug_classes_object(e){var t="",r="";for(var i in e)i&&e[i]&&pug_has_own_property.call(e,i)&&(t=t+r+i,r=" ");return t}function pug_escape(e){var t=""+e,r=pug_match_html.exec(t);if(!r)return e;var i,n,s,a="";for(i=r.index,n=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}n!==i&&(a+=t.substring(n,i)),n=i+1,a+=s}return n!==i?a+t.substring(n,i):a}pug_has_own_property=Object.prototype.hasOwnProperty,pug_match_html=/["&<>]/;function pug_style(e){if(!e)return"";if("object"==typeof e){var t="";for(var r in e)pug_has_own_property.call(e,r)&&(t=t+r+":"+e[r]+";");return t}return e+""}function post(e){var t,r="",i={},n=e||{};return function(e,n,s,a,o,c,l,d,u,h,p,f,g,m,y,v,b,T){i.report=t=function(i,n=!1){this&&this.block,this&&this.attributes;r=r+'<div class="reports post-container"><input class="post-check" type="checkbox" name="checkedreports"'+pug_attr("value",i.id,!0,!1)+"/> ";const a=!0===T?i.ip.raw:i.ip.cloak;r=r+'<a class="bold"'+pug_attr("href",`${n?"recent.html":""}?ip=${c(a)}`,!0,!1)+">["+pug_escape(null==(t=a)?"":t)+"]</a> ";const o=new e(i.date);r=r+'<time class="reltime"'+pug_attr("datetime",o.toISOString(),!0,!1)+">"+pug_escape(null==(t=o.toLocaleString(m,{hourCycle:"h23"}))?"":t)+"</time> | "+pug_escape(null==(t=s("Reason"))?"":t)+": "+pug_escape(null==(t=i.reason)?"":t)+"</div>"},i.banmessage=t=function(e){this&&this.block,this&&this.attributes;r=r+'<p class="ban"><span class="message">'+pug_escape(null==(t=s("USER WAS BANNED FOR THIS POST"))?"":t)+'</span> <span class="reason"'+pug_attr("data-reason",e,!0,!1)+">"+pug_escape(null==(t=e)?"":t)+"</span></p>"},i.web3signature=t=function(e,i){this&&this.block,this&&this.attributes;r=r+'<div class="mv-5 ml-5"><a class="web3-address"'+pug_attr("href",l.replace("%s",c(i)),!0,!1)+' rel="nofollow" referrerpolicy="same-origin" target="_blank">'+pug_escape(null==(t=i.substring(0,5))?"":t)+"…"+pug_escape(null==(t=i.substring(38,42))?"":t)+'</a><details class="dummy-link"><summary>'+pug_escape(null==(t=s("Signature"))?"":t)+'</summary><div class="web3-signature">'+pug_escape(null==(t=e)?"":t)+"</div></details></div>"},i.post=t=function(l,d,h=!1,y=!1,_=!1,k=!1){this&&this.block,this&&this.attributes;r=r+'<div class="anchor"'+pug_attr("id",l.postId,!0,!1)+"></div><div"+(pug_attr("class",pug_classes(["post-container "+(l.thread||!0===_?"":"op")],[!0]),!1,!1)+pug_attr("data-board",l.board,!0,!1)+pug_attr("data-post-id",l.postId,!0,!1)+pug_attr("data-user-id",l.userId,!0,!1)+pug_attr("data-name",l.name,!0,!1)+pug_attr("data-tripcode",l.tripcode,!0,!1)+pug_attr("data-subject",l.subject,!0,!1)+pug_attr("data-email",l.email,!0,!1)+pug_attr("data-flag",l.country&&l.country.code,!0,!1))+">";const E=`/${l.board}/${f||h||y?"manage/":""}thread/${l.thread||l.postId}.html`;if(r+='<div class="post-info"><span><label>',k||(y?r=r+'<input class="post-check" type="checkbox" name="globalcheckedposts"'+pug_attr("value",l._id,!0,!1)+"/>":_||(r=r+'<input class="post-check" type="checkbox" name="checkedposts"'+pug_attr("value",l.postId,!0,!1)+"/>"),r+=" "),h){const e=!0===T?l.ip.raw:l.ip.cloak;r=r+'<a class="bold"'+pug_attr("href",`${b?"../":""}recent.html?ip=${c(e)}`,!0,!1)+">["+pug_escape(null==(t=e)?"":t)+"]</a>"}else if(f)r=r+'<a class="bold"'+pug_attr("href",`${b?"../":""}recent.html?postid=${l.postId}`,!0,!1)+">[+]</a>";else if(y){r=r+'<a class="bold post-board"'+pug_attr("href",`/${l.board}/manage/index.html`,!0,!1)+">/"+pug_escape(null==(t=l.board)?"":t)+"/</a> ";const e=!0===T?l.ip.raw:l.ip.cloak;r=r+'<a class="bold"'+pug_attr("href",`?ip=${c(e)}`,!0,!1)+">["+pug_escape(null==(t=e)?"":t)+"]</a>"}r+=" ",l.thread||(l.sticky||l.bumplocked||l.locked||l.cyclic)&&(r+='<span class="post-icons">',l.sticky&&(r=r+'<img src="/file/sticky.png" height="14" width="14"'+pug_attr("title",`${s("Sticky")} (${l.sticky})`,!0,!1)+"/> "),l.bumplocked&&(r=r+'<img src="/file/bumplock.png" height="14" width="14"'+pug_attr("title",s("Bumplocked"),!0,!1)+"/> "),l.locked&&(r=r+'<img src="/file/lock.png" height="14" width="14"'+pug_attr("title",s("Locked"),!0,!1)+"/> "),l.cyclic&&(r=r+'<img src="/file/cyclic.png" height="14" width="14"'+pug_attr("title",s("Cyclic"),!0,!1)+"/> "),r+="</span>"),l.subject&&(r=r+'<span class="post-subject">'+pug_escape(null==(t=l.subject)?"":t)+"</span> "),r=l.email?r+'<a class="post-name"'+pug_attr("href",`mailto:${l.email}`,!0,!1)+">"+pug_escape(null==(t=l.name)?"":t)+"</a>":r+'<span class="post-name">'+pug_escape(null==(t=l.name)?"":t)+"</span>",r+=" </label>",l.country&&l.country.code&&(r=!0===l.country.custom?r+"<span"+pug_attr("title",l.country.name,!0,!1)+'><img class="customflag"'+pug_attr("src",`/flag/${l.board}/${l.country.src}`,!0,!1)+' alt=" " loading="lazy"/></span> ':r+"<span"+(pug_attr("class",pug_classes([`flag flag-${l.country.code.toLowerCase()}`],[!0]),!1,!1)+pug_attr("title",l.country.name,!0,!1)+pug_attr("alt",l.country.name,!0,!1))+"></span> "),l.tripcode&&(r=r+'<span class="post-tripcode">'+pug_escape(null==(t=l.tripcode)?"":t)+"</span> "),l.capcode&&(r=r+'<span class="post-capcode"'+pug_attr("data-cap",l.capcode,!0,!1)+">"+pug_escape(null==(t=l.capcode)?"":t)+"</span> ");const w=new e(l.date);r=r+'<time class="post-date reltime"'+pug_attr("datetime",w.toISOString(),!0,!1)+">"+pug_escape(null==(t=w.toLocaleString(m,{hourCycle:"h23"}))?"":t)+"</time> ",l.userId&&(r=r+'<span class="user-id"'+pug_attr("style",pug_style(`background-color: #${l.userId}`),!0,!1)+">"+pug_escape(null==(t=l.userId)?"":t)+"</span> "),r=r+'</span><span class="post-links"><a class="noselect no-decoration"'+pug_attr("href",`${E}#${l.postId}`,!0,!1)+">"+pug_escape(null==(t=s("No."))?"":t)+'</a><span class="post-quoters"><a class="no-decoration"'+pug_attr("href",`${E}#postform`,!0,!1)+">"+pug_escape(null==(t=l.postId)?"":t)+"</a></span> ",!l.thread&&(d||h||y)&&(r=r+' <span class="noselect"><a'+pug_attr("href",`${E}`,!0,!1)+">["+pug_escape(null==(t=s("Open"))?"":t)+"]</a></span>"),r=r+'<select class="jsonly postmenu"><option value="single">'+pug_escape(null==(t=s("Hide"))?"":t)+"</option>",l.userId&&(r=r+'<option value="fid">'+pug_escape(null==(t=s("Filter ID"))?"":t)+"</option>"),l.name&&(r=r+'<option value="fname">'+pug_escape(null==(t=s("Filter Name"))?"":t)+"</option>"),l.tripcode&&(r=r+'<option value="ftrip">'+pug_escape(null==(t=s("Filter Tripcode"))?"":t)+"</option>"),l.subject&&(r=r+'<option value="fsub">'+pug_escape(null==(t=s("Filter Subject"))?"":t)+"</option>"),l.country&&l.country.code&&(r=r+'<option value="fflag">'+pug_escape(null==(t=s("Filter Flag"))?"":t)+"</option>"),k||_||(r=r+'<option value="moderate">'+pug_escape(null==(t=s("Moderate"))?"":t)+"</option>"),!_&&(f||h||y)&&(r=r+'<option value="edit">'+pug_escape(null==(t=s("Edit"))?"":t)+"</option>"),l.thread||(r=r+'<option value="watch">'+pug_escape(null==(t=s("Watch"))?"":t)+'</option><option value="playlist">'+pug_escape(null==(t=s("Playlist"))?"":t)+"</option>"),r+='</select></span></div><div class="post-data">',l.files.length>0&&(r=r+"<div"+pug_attr("class",pug_classes(["post-files",l.files.length>1?"fn":""],[!1,!0]),!1,!1)+">",function(){var e=l.files;if("number"==typeof e.length)for(var i=0,n=e.length;i<n;i++){if("tegaki/replay"===(a=e[i]).mimetype&&l.files.some((e=>e.originalFilename.slice(0,-3)===a.originalFilename.slice(0,-4))))continue;r+='<div class="post-file">';const n=a.mimetype.split("/")[0];if(r=r+'<span class="post-file-info"><span><a class="filename"'+pug_attr("href","/file/"+a.filename,!0,!1)+pug_attr("title","Download "+a.originalFilename,!0,!1)+pug_attr("download",a.originalFilename,!0,!1)+">"+pug_escape(null==(t=l.spoiler||a.spoiler?s("Spoiler File"):a.originalFilename)?"":t)+"</a></span><br/>",y&&null!=a.phash&&(r=r+"<span>"+pug_escape(null==(t=a.phash)?"":t)+"</span><br/>"),a.attachment||l.spoiler||a.spoiler||(r=r+'<span class="jsonly"><b>[</b><a class="dummy-link hide-image noselect"'+pug_attr("data-src",`/file/${a.hasThumb?"thumb/"+a.hash+a.thumbextension:a.filename}`,!0,!1)+">"+pug_escape(null==(t=s("Hide"))?"":t)+"</a><b>]</b></span>"),r=r+"<span>  ("+pug_escape(null==(t=a.sizeString)?"":t),a.geometryString&&(r=r+", "+pug_escape(null==(t=a.geometryString)?"":t)),a.durationString&&(r=r+", "+pug_escape(null==(t=a.durationString)?"":t)),r+=")</span>","image"===n&&((o&&!0===o.settings.reverseImageSearchLinks||k&&!0===g||h||y)&&(r=r+" <span><a"+pug_attr("href",`${v.replace("%s",c(p.url+"/file/"+a.filename))}`,!0,!1)+' rel="nofollow" referrerpolicy="same-origin"'+pug_attr("title",s("Reverse Image Search"),!0,!1)+' target="_blank">'+pug_escape(null==(t=s("Reverse"))?"":t)+"</a></span>"),a.originalFilename.endsWith("-tegaki.png"))){const e=l.files.find((e=>e.originalFilename.slice(0,-4)===a.originalFilename.slice(0,-3)));void 0!==e&&(r=r+' <span><a class="dummy-link replay-tegaki noselect"'+pug_attr("href",`/file/${e.filename}`,!0,!1)+pug_attr("download",e.originalFilename,!0,!1)+">"+pug_escape(null==(t=s("Replay"))?"":t)+"</a></span>")}"tegaki/replay"===a.mimetype&&(r=r+' <span class="jsonly"><a class="dummy-link replay-tegaki noselect"'+pug_attr("href",`/file/${a.filename}`,!0,!1)+pug_attr("download",a.originalFilename,!0,!1)+">"+pug_escape(null==(t=s("Replay"))?"":t)+"</a></span>"),r=r+'</span><div class="post-file-src"'+pug_attr("data-type",n,!0,!1)+pug_attr("data-attachment",a.attachment?"true":"false",!0,!1)+'><a target="_blank"'+pug_attr("href",`/file/${a.filename}`,!0,!1)+">",l.spoiler||a.spoiler?r+='<div class="spoilerimg file-thumb"></div>':a.hasThumb?r=r+'<img class="file-thumb"'+pug_attr("src",`/file/thumb/${a.hash}${a.thumbextension}`,!0,!1)+pug_attr("height",a.geometry.thumbheight,!0,!1)+pug_attr("width",a.geometry.thumbwidth,!0,!1)+' loading="lazy"/>':a.attachment?r=r+'<div class="attachmentimg file-thumb"'+pug_attr("data-mimetype",a.mimetype,!0,!1)+"></div>":"audio"===n?r+='<div class="audioimg file-thumb"></div>':r=r+'<img class="file-thumb"'+pug_attr("src",`/file/${a.filename}`,!0,!1)+pug_attr("height",a.geometry.height,!0,!1)+pug_attr("width",a.geometry.width,!0,!1)+' loading="lazy"/>',r+="</a></div></div>"}else{n=0;for(var i in e){var a;if(n++,"tegaki/replay"===(a=e[i]).mimetype&&l.files.some((e=>e.originalFilename.slice(0,-3)===a.originalFilename.slice(0,-4))))continue;r+='<div class="post-file">';const d=a.mimetype.split("/")[0];if(r=r+'<span class="post-file-info"><span><a class="filename"'+pug_attr("href","/file/"+a.filename,!0,!1)+pug_attr("title","Download "+a.originalFilename,!0,!1)+pug_attr("download",a.originalFilename,!0,!1)+">"+pug_escape(null==(t=l.spoiler||a.spoiler?s("Spoiler File"):a.originalFilename)?"":t)+"</a></span><br/>",y&&null!=a.phash&&(r=r+"<span>"+pug_escape(null==(t=a.phash)?"":t)+"</span><br/>"),a.attachment||l.spoiler||a.spoiler||(r=r+'<span class="jsonly"><b>[</b><a class="dummy-link hide-image noselect"'+pug_attr("data-src",`/file/${a.hasThumb?"thumb/"+a.hash+a.thumbextension:a.filename}`,!0,!1)+">"+pug_escape(null==(t=s("Hide"))?"":t)+"</a><b>]</b></span>"),r=r+"<span>  ("+pug_escape(null==(t=a.sizeString)?"":t),a.geometryString&&(r=r+", "+pug_escape(null==(t=a.geometryString)?"":t)),a.durationString&&(r=r+", "+pug_escape(null==(t=a.durationString)?"":t)),r+=")</span>","image"===d&&((o&&!0===o.settings.reverseImageSearchLinks||k&&!0===g||h||y)&&(r=r+" <span><a"+pug_attr("href",`${v.replace("%s",c(p.url+"/file/"+a.filename))}`,!0,!1)+' rel="nofollow" referrerpolicy="same-origin"'+pug_attr("title",s("Reverse Image Search"),!0,!1)+' target="_blank">'+pug_escape(null==(t=s("Reverse"))?"":t)+"</a></span>"),a.originalFilename.endsWith("-tegaki.png"))){const e=l.files.find((e=>e.originalFilename.slice(0,-4)===a.originalFilename.slice(0,-3)));void 0!==e&&(r=r+' <span><a class="dummy-link replay-tegaki noselect"'+pug_attr("href",`/file/${e.filename}`,!0,!1)+pug_attr("download",e.originalFilename,!0,!1)+">"+pug_escape(null==(t=s("Replay"))?"":t)+"</a></span>")}"tegaki/replay"===a.mimetype&&(r=r+' <span class="jsonly"><a class="dummy-link replay-tegaki noselect"'+pug_attr("href",`/file/${a.filename}`,!0,!1)+pug_attr("download",a.originalFilename,!0,!1)+">"+pug_escape(null==(t=s("Replay"))?"":t)+"</a></span>"),r=r+'</span><div class="post-file-src"'+pug_attr("data-type",d,!0,!1)+pug_attr("data-attachment",a.attachment?"true":"false",!0,!1)+'><a target="_blank"'+pug_attr("href",`/file/${a.filename}`,!0,!1)+">",l.spoiler||a.spoiler?r+='<div class="spoilerimg file-thumb"></div>':a.hasThumb?r=r+'<img class="file-thumb"'+pug_attr("src",`/file/thumb/${a.hash}${a.thumbextension}`,!0,!1)+pug_attr("height",a.geometry.thumbheight,!0,!1)+pug_attr("width",a.geometry.thumbwidth,!0,!1)+' loading="lazy"/>':a.attachment?r=r+'<div class="attachmentimg file-thumb"'+pug_attr("data-mimetype",a.mimetype,!0,!1)+"></div>":"audio"===d?r+='<div class="audioimg file-thumb"></div>':r=r+'<img class="file-thumb"'+pug_attr("src",`/file/${a.filename}`,!0,!1)+pug_attr("height",a.geometry.height,!0,!1)+pug_attr("width",a.geometry.width,!0,!1)+' loading="lazy"/>',r+="</a></div></div>"}}}.call(this),r+="</div>"),l.message&&f&&(l.message=l.message.replace(new n(`<a class="quote" href="/${l.board}/`,"g"),`<a class="quote" href="/${l.board}/manage/`));let A=l.message;if(l.message)if(d){const e=l.message.split("\n");if(e.length>15)A=e.slice(0,15).join("\n");else if(l.message.length>1500){A=l.message.substring(0,1500).replace(/<([\w]+)?([^>]*)?$/,"");const e=A.lastIndexOf("<a"),t=A.lastIndexOf("</a>");e>=0&&(-1===t||t<e)&&(A+="</a>")}r=r+'<pre class="post-message">'+(null==(t=A)?"":t)+"</pre>"}else r=r+'<pre class="post-message">'+(null==(t=l.message)?"":t)+"</pre>";if(l.message||0!==l.files.length||(r=r+"<p>"+pug_escape(null==(t=s("No message or files."))?"":t)+"</p>"),l.signature&&l.address&&i.web3signature(l.signature,l.address),l.edited){const i=new e(l.edited.date);r+='<small class="cb mv-5 ml-5 edited">',u=s("Last edited | by %s",l.edited.username||s("Hidden User")).split("|"),r=r+pug_escape(null==(t=u[0])?"":t)+'<time class="reltime"'+pug_attr("datetime",i.toISOString(),!0,!1)+">"+pug_escape(null==(t=i.toLocaleString(m,{hourCycle:"h23"}))?"":t)+"</time>"+pug_escape(null==(t=u[1])?"":t)+"</small>"}if(l.banmessage&&i.banmessage(l.banmessage),A!==l.message&&(r=r+'<div class="cb mt-5 ml-5">'+pug_escape(null==(t=s("Message too long."))?"":t)+' <a class="viewfulltext"'+pug_attr("href",`${E}#${l.postId}`,!0,!1)+">"+pug_escape(null==(t=s("View the full text"))?"":t)+"</a></div>"),l.omittedposts||l.omittedfiles){r=r+'<div class="cb mt-5 ml-5"><img class="jsonly dummy-link expand-omitted" height="12" width="12"'+pug_attr("data-shown",l.replies.length,!0,!1)+pug_attr("data-board",l.board,!0,!1)+pug_attr("data-thread",l.postId,!0,!1)+' src="/file/plus.png"/>';const e=l.omittedposts,i=l.omittedfiles;r=r+"<span>"+pug_escape(null==(t=s(`${e>1?"%s":e} repl${e>1?"ies":"y"}${i>0?` and ${i>1?"%s":i} file${i>1?"s":""}`:""} omitted.`,e>1?e:i,i))?"":t)+" </span><a"+pug_attr("href",E,!0,!1)+">"+pug_escape(null==(t=s("View the full thread"))?"":t)+"</a></div>"}if(null!=l.previewbacklinks){if(l.previewbacklinks.length>0){if(r=r+'<div class="replies mt-5 ml-5">'+pug_escape(null==(t=a("Replies",2))?"":t)+": ",function(){var e=l.previewbacklinks;if("number"==typeof e.length)for(var i=0,n=e.length;i<n;i++){var s=e[i];r=r+'<a class="quote"'+pug_attr("href",`${E}#${s.postId}`,!0,!1)+">&gt;&gt;"+pug_escape(null==(t=s.postId)?"":t)+"</a> "}else{n=0;for(var i in e){n++;s=e[i];r=r+'<a class="quote"'+pug_attr("href",`${E}#${s.postId}`,!0,!1)+">&gt;&gt;"+pug_escape(null==(t=s.postId)?"":t)+"</a> "}}}.call(this),l.previewbacklinks.length<l.backlinks.length){const e=l.backlinks.length-l.previewbacklinks.length;r=r+"+ <a"+pug_attr("href",`${E}#${l.postId}`,!0,!1)+">"+pug_escape(null==(t=s("%s earlier",e))?"":t)+"</a>\n "}r+="</div>"}}else l.backlinks&&l.backlinks.length>0&&(r=r+'<div class="replies mt-5 ml-5">'+pug_escape(null==(t=a("Replies",2))?"":t)+": ",function(){var e=l.backlinks;if("number"==typeof e.length)for(var i=0,n=e.length;i<n;i++){var s=e[i];r=r+'<a class="quote"'+pug_attr("href",`${E}#${s.postId}`,!0,!1)+">&gt;&gt;"+pug_escape(null==(t=s.postId)?"":t)+"</a> "}else{n=0;for(var i in e){n++;s=e[i];r=r+'<a class="quote"'+pug_attr("href",`${E}#${s.postId}`,!0,!1)+">&gt;&gt;"+pug_escape(null==(t=s.postId)?"":t)+"</a> "}}}.call(this),r+="</div>");r+="</div></div>",!0===h&&function(){var e=l.reports;if("number"==typeof e.length)for(var t=0,r=e.length;t<r;t++){var n=e[t];i.report(n,!0)}else{r=0;for(var t in e){r++;n=e[t];i.report(n,!0)}}}.call(this),!0===y&&function(){var e=l.globalreports;if("number"==typeof e.length)for(var t=0,r=e.length;t<r;t++){var n=e[t];i.report(n)}else{r=0;for(var t in e){r++;n=e[t];i.report(n)}}}.call(this)},i.post(y,!1,h,d)}.call(this,"Date"in n?n.Date:"undefined"!=typeof Date?Date:void 0,"RegExp"in n?n.RegExp:"undefined"!=typeof RegExp?RegExp:void 0,"__"in n?n.__:void 0!==__?__:void 0,"__n"in n?n.__n:void 0!==__n?__n:void 0,"board"in n?n.board:"undefined"!=typeof board?board:void 0,"encodeURIComponent"in n?n.encodeURIComponent:"undefined"!=typeof encodeURIComponent?encodeURIComponent:void 0,"ethereumLinksURL"in n?n.ethereumLinksURL:"undefined"!=typeof ethereumLinksURL?ethereumLinksURL:void 0,"globalmanage"in n?n.globalmanage:"undefined"!=typeof globalmanage?globalmanage:void 0,"lastEdited"in n?n.lastEdited:"undefined"!=typeof lastEdited?lastEdited:void 0,"manage"in n?n.manage:"undefined"!=typeof manage?manage:void 0,"meta"in n?n.meta:"undefined"!=typeof meta?meta:void 0,"modview"in n?n.modview:"undefined"!=typeof modview?modview:void 0,"overboardReverseLinks"in n?n.overboardReverseLinks:"undefined"!=typeof overboardReverseLinks?overboardReverseLinks:void 0,"pageLanguage"in n?n.pageLanguage:"undefined"!=typeof pageLanguage?pageLanguage:void 0,"post"in n?n.post:void 0!==post?post:void 0,"reverseImageLinksURL"in n?n.reverseImageLinksURL:"undefined"!=typeof reverseImageLinksURL?reverseImageLinksURL:void 0,"upLevel"in n?n.upLevel:"undefined"!=typeof upLevel?upLevel:void 0,"viewRawIp"in n?n.viewRawIp:"undefined"!=typeof viewRawIp?viewRawIp:void 0),r}window.addEventListener("DOMContentLoaded",(()=>{let e,t;const r=()=>{e.style.display="none",t.style.display="none"},i=()=>{e.style.display="unset",t.style.display="unset"},n=modal({modal:{title:"Settings",settings:{themes:themes,codeThemes:codeThemes},hidden:!0}});document.body.insertAdjacentHTML("afterbegin",n),t=document.getElementsByClassName("modal-bg")[0],e=document.getElementsByClassName("modal")[0],t.onclick=r,e.getElementsByClassName("close")[0].onclick=r;const s=document.getElementById("settings");s&&(s.onclick=i),window.dispatchEvent(new CustomEvent("settingsReady"))}));let socket,socketPingInterval,forceUpdate,newPost,liveEnabled="true"==localStorage.getItem("live"),scrollEnabled="true"==localStorage.getItem("scroll");window.addEventListener("settingsReady",(function(){let e="WebSocket"in window||"MozWebSocket"in window;const t=document.getElementById("livecolor"),r=document.getElementById("livetext"),i=(isThread||isRecent)&&r?r.childNodes[1]:null;let n=r&&r.dataset.room;const s=r&&"true"===r.dataset.viewRawIp,a=document.getElementById("updatepostsbutton"),o=(e,r)=>{t.style.backgroundColor=r,i.nodeValue=`${e}`};let c,l,d={};const u=document.getElementsByClassName("post-container");for(let e=0;e<u.length;e++){const t=u[e],{board:r,postId:i}=t.dataset;d[r]=Math.max(d[r]||0,i)}const h=e=>{console.log("got mark post message",e);const t=document.getElementById(e.postId),r=t.nextSibling,i=r&&r.classList.contains("op");let n,s=!1,a=!1;switch(e.type){case"delete":n=__("Deleted"),s=!0,a=!0;break;case"move":n=__("Moved"),s=!0,a=!0;break;case"banmessage":case"edit":break;default:return}if(n&&(r.classList.add("marked"),r.setAttribute("data-mark",n)),i&&!0===s){const e=document.getElementsByClassName("post-container");Array.from(e).forEach((e=>{e.classList.add("marked"),e.setAttribute("data-mark",n)}))}if(i&&!0===a){document.getElementById("postform").remove();const e=document.getElementsByClassName("post-button");Array.from(e).forEach((e=>e.remove())),!0===socket.connected&&socket.disconnect()}if("edit"===e.type){let i=r.nextSibling,n="beforeBegin";i||(i=r.parentElement,n="beforeEnd"),t.remove(),r.remove(),newPost(e,{nonotify:!0,insertPoint:i,insertPosition:n})}else if("banmessage"===e.type){const t=banmessage({banmessage:e.banmessage}),i=r.querySelector(".ban");i?(i.insertAdjacentHTML("afterend",t),i.remove()):r.insertAdjacentHTML("beforeend",t)}};newPost=(e,t={})=>{const r=e;d[r.board]=Math.max(d[r.board]||0,r.postId);const i=post({viewRawIp:s,post:r,modview:isModView,manage:isRecent&&!isGlobalRecent,globalmanage:isGlobalRecent,upLevel:isThread,...extraLocals});let n;if(t.insertPoint)n=t.insertPoint;else if(isRecent){const e=document.querySelector("hr"),t=document.createElement("hr"),r=document.createElement("div");r.classList.add("thread"),n=r,e.insertAdjacentElement("beforebegin",t),t.insertAdjacentElement("afterend",r)}else n=document.querySelector(".thread");n.insertAdjacentHTML(t.insertPosition||"beforeend",i),isRecent&&Array.from(document.getElementsByClassName("thread")).slice(20).forEach((e=>{e.previousSibling.remove(),e.remove()}));for(let e=0;e<r.quotes.length;e++){const t=r.quotes[e],i=document.querySelector(`.post-container[data-post-id="${t.postId}"][data-board="${r.board}"]`);if(i){let e=i.querySelector(".replies");if(!e){const t=i.querySelector(".post-data"),r=document.createElement("div");r.textContent="Replies: ",r.classList.add("replies","mt-5","ml-5"),t.appendChild(r),e=r}if(new RegExp(`>>${r.postId}(\\s|$)`).test(e.innerText))continue;const t=document.createElement("a"),n=document.createTextNode(" ");t.href=`/${r.board}/${isModView||isRecent?"manage/":""}thread/${r.thread||r.postId}.html#${r.postId}`,t.textContent=`>>${r.postId}`,t.classList.add("quote"),e.appendChild(t),e.appendChild(n)}}const a=document.getElementById(r.postId),o=a.nextSibling;scrollEnabled&&(isGlobalRecent?window.scrollTo(0,0):a.scrollIntoView());const c=new CustomEvent("addPost",{detail:{nonotify:t.nonotify,post:o,postId:r.postId,json:r}});setTimeout((()=>{window.dispatchEvent(c)}),50)};let p,f=window.location.pathname.replace(/\.html$/,".json").split("/");isModView&&f.splice(2,1),p=f.join("/");const g=async()=>{let e;console.log("fetching posts from api"),o(__("Fetching posts..."),"yellow");let t=[];try{e=await fetch(p).then((e=>e.json()))}catch(e){console.error(e)}const r=e&&e.replies?e.replies:e;if(r&&Array.isArray(r)&&r.length>0&&(t=r.filter((e=>e.postId>(d[e.board]||0))),t.length>0))for(let e=0;e<t.length;e++)newPost(t[e]);return o(__("Updated"),"green"),t.length};let m,y=5e3;forceUpdate=async()=>{a.disabled=!0,clearTimeout(c),y=await g()>0?5e3:Math.min(2*y,9e4),setTimeout((()=>{a.disabled=!1}),1e4),liveEnabled&&(m=Date.now(),c=setTimeout(forceUpdate,y))},setInterval((()=>{if(liveEnabled&&m){const e=Math.abs((y-(Date.now()-m))/1e3);a.value=`Update (${e.toFixed(0)}s)`}}),1e3);const v=()=>{if(e){if(a.style.display="none",!n){const e=window.location.pathname.replace(/\.html$/,"").split("/");n=`${e[1]}-${e[e.length-1]}`}socket=io({transports:["websocket"],reconnectionAttempts:3,reconnectionDelay:3e3,reconnectionDelayMax:15e3});const t=()=>{const e=Date.now();socket.volatile.emit("ping",(()=>{const t=Date.now()-e;o(__("Connected for live posts (%sms)",t),"#0de600")}))},r=()=>{console.log("falling back to polling"),socket.close(),e=!1,v(),clearTimeout(l),l=setTimeout((()=>{e=!0,v()}),6e3)};socket.on("connect",(async()=>{console.log("socket connected"),await g(),socket.emit("room",n),clearInterval(socketPingInterval),socketPingInterval=setInterval(t,2e4)})),socket.on("message",(e=>{console.log(e,n),"joined"===e&&(o(__("Connected for live posts"),"#0de600"),t())})),socket.on("reconnect_attempt",(()=>{o(__("Attempting to reconnect..."),"yellow")})),socket.on("disconnect",(()=>{console.log("lost connection to room"),o(__("Disconnected"),"red")})),socket.on("reconnect",(()=>{console.log("reconnected to room"),g()})),socket.on("error",(e=>{o(__("Socket error"),"orange"),console.error(e)})),socket.on("connect_error",(e=>{o(__("Error connecting"),"orange"),console.error(e),r()})),socket.on("reconnect_error",(e=>{o(__("Error reconnecting"),"orange"),console.error(e)})),socket.on("reconnect_failed",(e=>{o(__("Failed reconnecting"),"orange"),console.error(e),r()})),socket.on("newPost",newPost),socket.on("markPost",h)}else a.removeAttribute("style"),forceUpdate()},b=()=>{a.value="Update",a.removeAttribute("style"),clearTimeout(c),socket&&e&&socket.disconnect(),o(__("Live posts off"),"darkgray")},T=document.getElementById("live-setting");T.checked=liveEnabled,T.addEventListener("change",(()=>{liveEnabled=!liveEnabled,liveEnabled?v():b(),console.log("toggling live posts",liveEnabled),setLocalStorage("live",liveEnabled)}),!1);const _=document.getElementById("scroll-setting");_.checked=scrollEnabled,_.addEventListener("change",(()=>{scrollEnabled=!scrollEnabled,console.log("toggling post scrolling",scrollEnabled),setLocalStorage("scroll",scrollEnabled)}),!1),(isThread||isRecent)&&a&&(a.addEventListener("click",forceUpdate),liveEnabled?v():b())}));const captchaCookieRegex=/captchaid=(.[^;]*)/gi;class CaptchaController{constructor(){this.captchaFields=[],this.refreshing=!1}init(){this.captchaFields=document.getElementsByClassName("captchafield"),this.refreshing=!1;for(let e of this.captchaFields)this.setupCaptchaField(e)}captchaAge(){const e=document.cookie.match(captchaCookieRegex);if(!e)return;const t=new URLSearchParams(e[0]).get("captchaid");if(t){const e=new Date(1e3*parseInt(t.slice(0,8),16));return Date.now()-e}}startRefreshTimer(){clearTimeout(this.refreshTimer);const e=this.captchaAge();null!=e&&(console.log("Refreshing captcha in ",3e5-e),this.refreshTimer=setTimeout((()=>{this.refreshCaptchas()}),3e5-e))}setupCaptchaField(e){if("true"==e.closest("form").dataset.captchaPreload)return this.loadCaptcha(e);if("grid"===captchaOptions.type||"grid2"===captchaOptions.type){(e.closest("details")||e).addEventListener("mouseover",(()=>this.loadCaptcha(e)),{once:!0})}else e.placeholder=__("focus to load captcha"),e.addEventListener("focus",(()=>this.loadCaptcha(e)),{once:!0})}refreshCaptchas(e){if(this.refreshing)return null;this.refreshing=!0,e&&e.target.classList.add("spin");for(let e of document.querySelectorAll('input[name="captcha"]'))e.checked=!1;document.cookie="captchaid=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;";const t=new XMLHttpRequest;t.onload=()=>{this.startRefreshTimer();for(let e of this.captchaFields){e.previousSibling.children[0]?e.previousSibling.children[0].src=t.responseURL:this.loadCaptcha(e,t.responseURL)}this.refreshing=!1,e&&e.target.classList.remove("spin")},t.onerror=()=>{this.refreshing=!1,e&&e.target.classList.remove("spin")},t.open("GET","/captcha",!0),t.send(null)}removeCaptcha(){const e=document.getElementById("postform").querySelector(".captcha");if(e){e.closest(".row").remove()}}addMissingCaptcha(){const e=document.getElementById("submitpost"),t=captchaformsection({captchaOptions:captchaOptions});e.insertAdjacentHTML("beforebegin",t);const r=e.previousSibling.querySelector(".captchafield");this.loadCaptcha(r)}loadCaptcha(e,t="/captcha"){const r=e.previousSibling;if(r.children.length>0)return;const i=document.createElement("img"),n=document.createElement("div");r.style.display="",i.style.margin="0 auto",i.style.display="flex",n.classList.add("captcharefresh","noselect"),n.addEventListener("click",(e=>this.refreshCaptchas(e)),!0),n.textContent="↻","text"===captchaOptions.type&&(e.placeholder=__("loading")),i.src=t,i.onload=()=>{"text"===captchaOptions.type&&(e.placeholder=__("Captcha text")),r.appendChild(i),r.appendChild(n),this.startRefreshTimer()}}}const captchaController=new CaptchaController;window.addEventListener("DOMContentLoaded",(()=>{captchaController.init()}));var TegakiStrings={badDimensions:__("Invalid dimensions."),promptWidth:__("Canvas width in pixels"),promptHeight:__("Canvas height in pixels"),confirmDelLayers:__("Delete selected layers?"),confirmMergeLayers:__("Merge selected layers?"),tooManyLayers:__("Layer limit reached."),errorLoadImage:__("Could not load the image."),noActiveLayer:__("No active layer."),hiddenActiveLayer:__("The active layer is not visible."),confirmCancel:__("Are you sure? Your work will be lost."),confirmChangeCanvas:__("Are you sure? Changing the canvas will clear all layers and history and disable replay recording."),color:__("Color"),size:__("Size"),alpha:__("Opacity"),flow:__("Flow"),zoom:__("Zoom"),layers:__("Layers"),switchPalette:__("Switch color palette"),paletteSlotReplace:__("Right click to replace with the current color"),layer:__("Layer"),addLayer:__("Add layer"),delLayers:__("Delete layers"),mergeLayers:__("Merge layers"),moveLayerUp:__("Move up"),moveLayerDown:__("Move down"),toggleVisibility:__("Toggle visibility"),newCanvas:__("New"),open:__("Open"),save:__("Save"),saveAs:__("Save As"),export:__("Export"),undo:__("Undo"),redo:__("Redo"),close:__("Close"),finish:__("Finish"),tip:__("Tip"),pressure:__("Pressure"),preserveAlpha:__("Preserve Alpha"),pen:__("Pen"),pencil:__("Pencil"),airbrush:__("Airbrush"),pipette:__("Pipette"),blur:__("Blur"),eraser:__("Eraser"),bucket:__("Bucket"),tone:__("Tone"),gapless:__("Gapless"),play:__("Play"),pause:__("Pause"),rewind:__("Rewind"),slower:__("Slower"),faster:__("Faster"),recordingEnabled:__("Recording replay"),errorLoadReplay:__("Could not load the replay: "),loadingReplay:__("Loading replay…")};class TegakiTool{constructor(){this.id=0,this.name=null,this.keybind=null,this.useFlow=!1,this.useSizeDynamics=!1,this.useAlphaDynamics=!1,this.useFlowDynamics=!1,this.usePreserveAlpha=!1,this.step=0,this.size=1,this.alpha=1,this.flow=1,this.useSize=!0,this.useAlpha=!0,this.useFlow=!0,this.noCursor=!1,this.color="#000000",this.rgb=[0,0,0],this.brushSize=0,this.brushAlpha=0,this.brushFlow=0,this.stepSize=0,this.center=0,this.sizeDynamicsEnabled=!1,this.alphaDynamicsEnabled=!1,this.flowDynamicsEnabled=!1,this.preserveAlphaEnabled=!1,this.tip=-1,this.tipList=null,this.stepAcc=0,this.shapeCache=null,this.kernel=null}brushFn(e,t,r,i){}start(e,t){}commit(){}draw(e,t){}usesDynamics(){return this.useSizeDynamics||this.useAlphaDynamics||this.useFlowDynamics}enabledDynamics(){return this.sizeDynamicsEnabled||this.alphaDynamicsEnabled||this.flowDynamicsEnabled}setSize(e){this.size=e}setAlpha(e){this.alpha=e,this.brushAlpha=e}setFlow(e){this.flow=e,this.brushFlow=this.easeFlow(e)}easeFlow(e){return e}setColor(e){this.rgb=$T.hexToRgb(e)}setSizeDynamics(e){this.useSizeDynamics&&(e||this.setSize(this.size),this.sizeDynamicsEnabled=e)}setAlphaDynamics(e){this.useAlphaDynamics&&(e||this.setAlpha(this.alpha),this.alphaDynamicsEnabled=e)}setFlowDynamics(e){this.useFlowDynamics&&(e||this.setFlow(this.flow),this.flowDynamicsEnabled=e)}setPreserveAlpha(e){this.preserveAlphaEnabled=e}set(){this.setAlpha(this.alpha),this.setFlow(this.flow),this.setSize(this.size),this.setColor(Tegaki.toolColor),Tegaki.onToolChanged(this)}}class TegakiBrush extends TegakiTool{constructor(){super()}generateShape(e){}brushFn(e,t,r,i){var n,s,a,o,c,l,d,u,h,p,f,g,m,y,v,b,T,_,k,E,w,A,I,R,S,C,x,P,O;for(O=this.preserveAlphaEnabled,l=this.kernel,x=this.brushAlpha,P=this.brushFlow,C=this.brushSize,n=Tegaki.activeLayer.imageData.data,s=Tegaki.ghostBuffer.data,a=Tegaki.blendBuffer.data,o=Tegaki.baseWidth,c=Tegaki.baseHeight,o,v=this.rgb[0],b=this.rgb[1],T=this.rgb[2],u=0;u<C;++u)if(!((p=t+u+i)<0||p>=c))for(d=0;d<C;++d)(h=e+d+r)<0||h>=o||(g=l[4*(u*C+d)+3]/255)<=0||(y=a[(R=4*(p*o+h))+3]/255,y+=g*P*(x-y),(S=Math.ceil(255*y))>a[R+3]&&(0===a[R]&&(s[R]=n[R],s[R+1]=n[R+1],s[R+2]=n[R+2],s[R+3]=n[R+3]),a[R]=1,a[R+3]=S,w=s[R],A=s[R+1],I=s[R+2],_=(v*y+w*(f=s[R+3]/255)*(1-y))/(m=f+y-f*y),k=(b*y+A*f*(1-y))/m,E=(T*y+I*f*(1-y))/m,n[R]=v>w?Math.ceil(_):Math.floor(_),n[R+1]=b>A?Math.ceil(k):Math.floor(k),n[R+2]=T>I?Math.ceil(E):Math.floor(E),O||(n[R+3]=Math.ceil(255*m))))}generateShapeCache(e){var t,r;if(this.shapeCache||(this.shapeCache=new Array(Tegaki.maxSize)),!this.shapeCache[0]||e)for(t=0;t<Tegaki.maxSize;++t)r=this.generateShape(t+1),this.shapeCache[t]=r,this.setShape(r)}updateDynamics(e){var t,r,i;if(t=TegakiPressure.lerp(e),this.sizeDynamicsEnabled){if(0===(i=Math.ceil(t*this.size)))return!1;r=this.shapeCache[i-1],this.setShape(r)}if(this.alphaDynamicsEnabled){if((i=this.alpha*t)<=0)return!1;this.brushAlpha=i}if(this.flowDynamicsEnabled){if((i=this.flow*t)<=0)return!1;this.brushFlow=this.easeFlow(i)}return!0}start(e,t){var r,i;this.stepAcc=0,this.posX=e,this.posY=t,this.enabledDynamics()&&!this.updateDynamics(1)||(r=e-this.center,i=t-this.center,this.readImageData(r,i,this.brushSize,this.brushSize),this.brushFn(0,0,r,i),this.writeImageData(r,i,this.brushSize,this.brushSize))}commit(){Tegaki.clearBuffers()}draw(e,t){var r,i,n,s,a,o,c,l,d,u,h,p,f,g,m,y,v,b,T,_,k;for(h=this.stepAcc,(n=this.posX)<e?(c=e-n,a=n,r=1):(c=n-e,a=e,r=-1),(s=this.posY)<t?(l=t-s,o=s,i=1):(l=s-t,o=t,i=-1),this.enabledDynamics()&&(g=Math.sqrt((e-n)*(e-n)+(t-s)*(t-s))),this.sizeDynamicsEnabled?(y=(m=this.shapeCache[this.size-1]).center,v=m.brushSize):(y=this.center,v=this.brushSize),a-=y,o-=y,_=c+v,k=l+v,this.readImageData(a,o,_,k),d=(c>l?c:0!==l?-l:0)/2,0!==c&&(c=-c),T=!1,p=n,f=s;h+=Math.max(Math.abs(p-n),Math.abs(f-s)),p=n,f=s,h>=this.stepSize&&(this.enabledDynamics()?(b=g>0?1-Math.sqrt((e-n)*(e-n)+(t-s)*(t-s))/g:0,this.updateDynamics(b)&&(this.brushFn(n-this.center-a,s-this.center-o,a,o),T=!0)):(this.brushFn(n-this.center-a,s-this.center-o,a,o),T=!0),h=0),n!==e||s!==t;)(u=d)>c&&(d-=l,n+=r),u<l&&(d-=c,s+=i);this.stepAcc=h,this.posX=e,this.posY=t,T&&this.writeImageData(a,o,_,k)}writeImageData(e,t,r,i){Tegaki.activeLayer.ctx.putImageData(Tegaki.activeLayer.imageData,0,0,e,t,r,i)}readImageData(e,t,r,i){}setShape(e){this.center=e.center,this.stepSize=e.stepSize,this.brushSize=e.brushSize,this.kernel=e.kernel}setSize(e){this.size=e,this.sizeDynamicsEnabled?this.generateShapeCache():this.setShape(this.generateShape(e))}setSizeDynamics(e){this.useSizeDynamics&&this.sizeDynamicsEnabled!==e&&(e?this.generateShapeCache():this.setShape(this.generateShape(this.size)),this.sizeDynamicsEnabled=e)}setTip(e){this.tipId=e,this.sizeDynamicsEnabled?this.generateShapeCache(!0):this.setShape(this.generateShape(this.size))}}class TegakiPencil extends TegakiBrush{constructor(){super(),this.id=1,this.name="pencil",this.keybind="b",this.step=.01,this.useFlow=!1,this.size=1,this.alpha=1,this.useSizeDynamics=!0,this.useAlphaDynamics=!0,this.usePreserveAlpha=!0}generateShape(e){var t,r,i,n,s,a,o,c,l;for(c=0|e/2,l=0|(e+1)%2,n=new ImageData(e,e),s=new Uint32Array(n.data.buffer),o=4278190080,r=c,i=0,t=1-c,a=c;r>=i;)s[a+r-l+(a+i-l)*e]=o,s[a+i-l+(a+r-l)*e]=o,s[a-i+(a+r-l)*e]=o,s[a-r+(a+i-l)*e]=o,s[a-i+(a-r)*e]=o,s[a-r+(a-i)*e]=o,s[a+i-l+(a-r)*e]=o,s[a+r-l+(a-i)*e]=o,++i,t+=t<=0?2*i+1:2*(i- --r)+1;return c>0&&Tegaki.tools.bucket.fill(n,c,c,this.rgb,1),{center:c,stepSize:Math.ceil(e*this.step),brushSize:e,kernel:n.data}}}class TegakiAirbrush extends TegakiBrush{constructor(){super(),this.id=3,this.name="airbrush",this.keybind="a",this.step=.1,this.size=32,this.alpha=1,this.useSizeDynamics=!0,this.useAlphaDynamics=!0,this.useFlowDynamics=!0,this.usePreserveAlpha=!0}easeFlow(e){return 1-Math.sqrt(1-e)}generateShape(e){var t,r,i,n,s,a,o,c,l,d,u,h;for(r=e,e*=2,i=new ImageData(e,e).data,n=e*e*4,a=Math.sqrt(r*r),c=l=-(o=Math.round(r)),t=0;t<n;)c>=o?(c=-o,++l):((d=c)<0&&(d=-d),(u=l)<0&&(u=-u),(s=Math.sqrt(d*d+u*u))>=a?h=0:0===s?h=255:((h=s/a+.1)>1&&(h=1),h=255*(1-Math.exp(1-1/h)/h)),i[t+3]=h,t+=4,++c);return{center:r,stepSize:Math.ceil(e*this.step),brushSize:e,kernel:i}}}class TegakiPen extends TegakiBrush{constructor(){super(),this.id=2,this.name="pen",this.keybind="p",this.step=.05,this.size=8,this.alpha=1,this.flow=1,this.useSizeDynamics=!0,this.useAlphaDynamics=!0,this.useFlowDynamics=!0,this.usePreserveAlpha=!0}easeFlow(e){return 1-Math.sqrt(1-Math.pow(e,3))}generateShape(e){var t,r,i,n,s,a,o,c,l,d,u,h,p,f,g,m;for(g=Math.floor(e/2)+1,4,16,d=4*(m=e+2),c=Math.floor(d/2),l=Math.floor((d+1)%2),n=new ImageData(d,d),u=new Uint32Array(n.data.buffer),o=1426063360,r=c,i=0,t=1-c,a=c;r>=i;)u[a+r-l+(a+i-l)*d]=o,u[a+i-l+(a+r-l)*d]=o,u[a-i+(a+r-l)*d]=o,u[a-r+(a+i-l)*d]=o,u[a-i+(a-r)*d]=o,u[a-r+(a-i)*d]=o,u[a+i-l+(a-r)*d]=o,u[a+r-l+(a-i)*d]=o,++i,t+=t<=0?2*i+1:2*(i- --r)+1;for(o=4278190080,r=c-3,i=0,t=1-c,a=c;r>=i;)u[a+r-l+(a+i-l)*d]=o,u[a+i-l+(a+r-l)*d]=o,u[a-i+(a+r-l)*d]=o,u[a-r+(a+i-l)*d]=o,u[a-i+(a-r)*d]=o,u[a-r+(a-i)*d]=o,u[a+i-l+(a-r)*d]=o,u[a+r-l+(a-i)*d]=o,++i,t+=t<=0?2*i+1:2*(i- --r)+1;for(c>0&&Tegaki.tools.bucket.fill(n,c,c,this.rgb,1),u=n.data,s=new ImageData(m,m).data,r=0;r<m;++r)for(i=0;i<m;++i){for(h=4*(i*m+r)+3,o=0,p=0;p<4;++p)for(f=0;f<4;++f)o+=u[4*((f+4*i)*d+(p+4*r))+3];s[h]=o/16}return{center:g,stepSize:Math.ceil(e*this.step),brushSize:m,kernel:s}}}class TegakiBucket extends TegakiTool{constructor(){super(),this.id=4,this.name="bucket",this.keybind="g",this.step=100,this.useSize=!1,this.useFlow=!1,this.noCursor=!0}fill(e,t,r,i,n){var s,a,o,c,l,d,u,h,p,f,g,m,y,v,b,T,_,k,E,w,A;for(w=e.width,A=e.height,s=i[0],a=i[1],o=i[2],c=4*(r*w+t),l=(E=e.data)[c],d=E[c+1],u=E[c+2],h=E[c+3],f=new Uint8Array(w*A*4),(p=[])[0]=t,p[1]=r;p.length;){for(b=(g=p.pop())*w,T=(y=g-1)*w,_=(v=g+1)*w,k=m=p.pop();k>=0&&(c=4*(b+k),this.testPixel(E,c,f,l,d,u,h));)this.blendPixel(E,c,s,a,o,n),f[c]=1,y>=0&&(c=4*(T+k),this.testPixel(E,c,f,l,d,u,h)&&(p.push(k),p.push(y))),v<A&&(c=4*(_+k),this.testPixel(E,c,f,l,d,u,h)&&(p.push(k),p.push(v))),k--;for(k=m+1;k<w&&(c=4*(b+k),this.testPixel(E,c,f,l,d,u,h));)this.blendPixel(E,c,s,a,o,n),f[c]=1,y>=0&&(c=4*(T+k),this.testPixel(E,c,f,l,d,u,h)&&(p.push(k),p.push(y))),v<A&&(c=4*(_+k),this.testPixel(E,c,f,l,d,u,h)&&(p.push(k),p.push(v))),++k}}brushFn(e,t){e<0||t<0||e>=Tegaki.baseWidth||t>=Tegaki.baseHeight||(this.fill(Tegaki.activeLayer.imageData,e,t,this.rgb,this.alpha),Tegaki.activeLayer.ctx.putImageData(Tegaki.activeLayer.imageData,0,0))}blendPixel(e,t,r,i,n,s){var a,o,c,l,d,u,h,p;a=e[t],o=e[t+1],c=e[t+2],d=(r*s+a*(l=e[t+3]/255)*(1-s))/(p=l+s-l*s),u=(i*s+o*l*(1-s))/p,h=(n*s+c*l*(1-s))/p,e[t]=r>a?Math.ceil(d):Math.floor(d),e[t+1]=i>o?Math.ceil(u):Math.floor(u),e[t+2]=n>c?Math.ceil(h):Math.floor(h),e[t+3]=Math.ceil(255*p)}testPixel(e,t,r,i,n,s,a){return!r[t]&&e[t]==i&&e[++t]==n&&e[++t]==s&&e[++t]==a}start(e,t){this.brushFn(e,t)}draw(e,t){this.brushFn(e,t)}setSize(e){}}class TegakiTone extends TegakiPencil{constructor(){super(),this.id=5,this.name="tone",this.keybind="t",this.step=.01,this.useFlow=!1,this.size=8,this.alpha=.5,this.useSizeDynamics=!0,this.useAlphaDynamics=!0,this.usePreserveAlpha=!0,this.matrix=[[0,8,2,10],[12,4,14,6],[3,11,1,9],[15,7,13,5]],this.mapCache=null,this.mapWidth=0,this.mapHeight=0}start(e,t){this.mapWidth===Tegaki.baseWidth&&this.mapHeight===Tegaki.baseHeight||this.generateMapCache(!0),super.start(e,t)}brushFn(e,t,r,i){var n,s,a,o,c,l,d,u,h,p,f,g,m,y;if(n=Tegaki.activeLayer.imageData.data,m=Tegaki.baseWidth,y=Tegaki.baseHeight,s=this.kernel,a=this.brushSize,this.mapWidth,l=this.preserveAlphaEnabled,!((c=Math.round(16*this.brushAlpha)-1)<0))for(o=this.mapCache[c],p=0;p<a;++p)if(!((g=t+p+i)<0||g>=y))for(h=0;h<a;++h)(f=e+h+r)<0||f>=m||0!==s[4*(p*a+h)+3]&&(d=4*(u=g*m+f),0===o[u]&&(n[d]=this.rgb[0],n[d+1]=this.rgb[1],n[d+2]=this.rgb[2],l||(n[d+3]=255)))}generateMap(e,t,r){var i,n,s;for(i=new Uint8Array(e*t),s=0;s<t;++s)for(n=0;n<e;++n)r<this.matrix[s%4][n%4]&&(i[e*s+n]=1);return i}generateMapCache(e){var t,r;if(r=this.matrix.length*this.matrix[0].length,this.mapCache||(this.mapCache=new Array(r)),e||!this.mapCache[0]||this.mapWidth!==Tegaki.baseWidth||this.mapHeight!==Tegaki.baseHeight)for(this.mapWidth=Tegaki.baseWidth,this.mapHeight=Tegaki.baseHeight,t=0;t<r;++t)this.mapCache[t]=this.generateMap(this.mapWidth,this.mapHeight,t)}setAlpha(e){super.setAlpha(e),this.generateMapCache()}}class TegakiPipette extends TegakiTool{constructor(){super(),this.id=6,this.name="pipette",this.keybind="i",this.step=100,this.useSize=!1,this.useAlpha=!1,this.useFlow=!1,this.noCursor=!0}start(e,t){this.draw(e,t)}draw(e,t){var r,i;i=Tegaki.flatten().getContext("2d"),r=$T.getColorAt(i,e,t),Tegaki.setToolColor(r)}set(){Tegaki.onToolChanged(this)}commit(){}setSize(){}setAlpha(){}}class TegakiBlur extends TegakiBrush{constructor(){super(),this.id=7,this.name="blur",this.step=.25,this.useFlow=!1,this.size=32,this.alpha=.5,this.useAlphaDynamics=!0,this.usePreserveAlpha=!1}writeImageData(e,t,r,i){var n,s,a,o,c,l,d;for(l=Tegaki.activeLayer.imageData.data,d=Tegaki.blendBuffer.data,c=Tegaki.baseWidth,n=0;n<r;++n)for(a=e+n,s=0;s<i;++s)l[o=4*((t+s)*c+a)]=d[o],l[o+1]=d[o+1],l[o+2]=d[o+2],l[o+3]=d[o+3];super.writeImageData(e,t,r,i)}readImageData(e,t,r,i){var n,s,a,o,c,l,d;for(l=Tegaki.activeLayer.imageData.data,d=Tegaki.blendBuffer.data,c=Tegaki.baseWidth,n=0;n<r;++n)for(a=e+n,s=0;s<i;++s)d[o=4*((t+s)*c+a)]=l[o],d[o+1]=l[o+1],d[o+2]=l[o+2],d[o+3]=l[o+3]}brushFn(e,t,r,i){var n,s,a,o,c,l,d,u,h,p,f,g,m,y,v,b,T,_,k,E,w,A,I,R,S;if(!((u=(h=this.brushAlpha)*h*h)<=0))for(s=this.brushSize,d=this.kernel,a=Tegaki.activeLayer.imageData.data,o=Tegaki.blendBuffer.data,c=(g=Tegaki.baseWidth)-1,l=(m=Tegaki.baseHeight)-1,y=0;y<s;++y)if(!((p=e+y+r)<0||p>=g))for(v=0;v<s;++v)if(!((f=t+v+i)<0||f>=m||(A=4*(f*g+p),0===d[4*(v*s+y)+3]||p<=0||f<=0||p>=c||f>=l))){for(b=T=_=k=R=0,E=-1;E<2;++E)for(w=-1;w<2;++w)I=a[(n=4*((f-w)*g+(p-E)))+3],0===E&&0===w?(S=I*h,R+=h):(S=I*u,R+=u),b+=a[n]*S,T+=a[++n]*S,_+=a[++n]*S,k+=S;(k/=R)<=0||(o[A]=Math.round(b/R/k),o[A+1]=Math.round(T/R/k),o[A+2]=Math.round(_/R/k),o[A+3]=Math.round(k))}}}TegakiBlur.prototype.generateShape=TegakiPencil.prototype.generateShape;class TegakiEraser extends TegakiBrush{constructor(){super(),this.id=8,this.name="eraser",this.keybind="e",this.step=.1,this.size=8,this.alpha=1,this.useFlow=!1,this.useSizeDynamics=!0,this.useAlphaDynamics=!0,this.usePreserveAlpha=!1,this.tipId=0,this.tipList=["pencil","pen","airbrush"]}brushFn(e,t,r,i){var n,s,a,o,c,l,d,u,h,p,f,g,m,y,v;for(v=this.brushAlpha,y=this.brushSize,o=this.kernel,n=Tegaki.activeLayer.imageData.data,a=Tegaki.ghostBuffer.data,s=Tegaki.blendBuffer.data,c=Tegaki.baseWidth,l=Tegaki.baseHeight,f=0;f<y;++f)if(!((m=t+f+i)<0||m>=l))for(p=0;p<y;++p)(g=e+p+r)<0||g>=c||(d=o[4*(f*y+p)+3]/255,0===a[h=4*(m*c+g)+3]&&(a[h]=n[h]),u=s[h]/255,u+=d*(v-u),s[h]=Math.floor(255*u),n[h]=Math.floor(a[h]*(1-u)))}generateShape(e){return 0===this.tipId?this.generateShapePencil(e):1===this.tipId?this.generateShapePen(e):this.generateShapeAirbrush(e)}}TegakiEraser.prototype.generateShapePencil=TegakiPencil.prototype.generateShape,TegakiEraser.prototype.generateShapePen=TegakiPen.prototype.generateShape,TegakiEraser.prototype.generateShapeAirbrush=TegakiAirbrush.prototype.generateShape;var $T={docEl:document.documentElement,id:function(e){return document.getElementById(e)},cls:function(e,t){return(t||document).getElementsByClassName(e)},on:function(e,t,r){e.addEventListener(t,r,!1)},off:function(e,t,r){e.removeEventListener(t,r,!1)},el:function(e){return document.createElement(e)},frag:function(){return document.createDocumentFragment()},copyImageData:e=>new ImageData(new Uint8ClampedArray(e.data),e.width),copyCanvas:function(e,t){var r;return t?r=e.cloneNode(!1):((r=$T.el("canvas")).width=e.width,r.height=e.height),r.getContext("2d").drawImage(e,0,0),r},clearCtx:function(e){e.clearRect(0,0,e.canvas.width,e.canvas.height)},hexToRgb:function(e){var t=e.match(/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null},RgbToHex:function(e,t,r){return"#"+((1<<24)+(e<<16)+(t<<8)+r).toString(16).slice(1)},getColorAt:function(e,t,r){var i=e.getImageData(t,r,1,1).data;return"#"+("0"+i[0].toString(16)).slice(-2)+("0"+i[1].toString(16)).slice(-2)+("0"+i[2].toString(16)).slice(-2)},generateFilename:function(){return"tegaki_"+(new Date).toISOString().split(".")[0].replace(/[^0-9]/g,"_")},sortAscCb:function(e,t){return e>t?1:e<t?-1:0},sortDescCb:function(e,t){return e>t?-1:e<t?1:0},msToHms:function(e){var t,r,i,n;return i=(i=0|e/1e3)-3600*(t=0|i/3600)-60*(r=0|(i-3600*t)/60),n=[],t&&n.push(t<10?"0"+t:t),r?n.push(r<10?"0"+r:r):n.push("00"),i?n.push(i<10?"0"+i:i):n.push("00"),n.join(":")},calcThumbSize(e,t,r){var i;return e>r&&(i=r/e,e=r,t*=i),t>r&&(i=r/t,t=r,e*=i),[Math.ceil(e),Math.ceil(t)]}};class TegakiBinReader{constructor(e){this.pos=0,this.view=new DataView(e),this.buf=e}readInt8(){var e=this.view.getInt8(this.pos);return this.pos+=1,e}readUint8(){var e=this.view.getUint8(this.pos);return this.pos+=1,e}readInt16(){var e=this.view.getInt16(this.pos);return this.pos+=2,e}readUint16(){var e=this.view.getUint16(this.pos);return this.pos+=2,e}readUint32(){var e=this.view.getUint32(this.pos);return this.pos+=4,e}readFloat32(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e}}class TegakiBinWriter{constructor(e){this.pos=0,this.view=new DataView(e),this.buf=e}writeInt8(e){this.view.setInt8(this.pos,e),this.pos+=1}writeUint8(e){this.view.setUint8(this.pos,e),this.pos+=1}writeInt16(e){this.view.setInt16(this.pos,e),this.pos+=2}writeUint16(e){this.view.setUint16(this.pos,e),this.pos+=2}writeUint32(e){this.view.setUint32(this.pos,e),this.pos+=4}writeFloat32(e){this.view.setFloat32(this.pos,e),this.pos+=4}}var TegakiCursor={size:0,radius:0,points:null,cursorCtx:null,offsetX:0,offsetY:0,lastX:0,lastY:0,lastSize:0,init:function(e,t){var r;(r=$T.el("canvas")).id="tegaki-cursor-layer",[r.width,r.height]=TegakiCursor.getMaxCanvasSize(),Tegaki.canvasCnt.appendChild(r),this.offsetX=r.offsetLeft,this.offsetY=r.offsetTop,this.cursorCtx=r.getContext("2d")},getCanvas:function(){return this.cursorCtx?this.cursorCtx.canvas:null},getMaxCanvasSize:function(){let e=Tegaki.canvasCnt.offsetWidth,t=Tegaki.canvasCnt.offsetHeight,[r,i]=Tegaki.getScrollbarSizes();return[e-r,t-i]},updateCanvasSize:function(){let e=this.cursorCtx.canvas,[t,r]=this.getMaxCanvasSize();t===e.width&&r===e.height||(e.width=t,e.height=r,this.offsetX=e.offsetLeft,this.offsetY=e.offsetTop)},render:function(e,t){var r,i,n,s,a;for(r=e-this.offsetX-this.radius,i=t-this.offsetY-this.radius,this.clear(),this.lastX=r,this.lastY=i,this.lastSize=this.size,s=this.cursorCtx.createImageData(this.size,this.size),a=new Uint32Array(s.data.buffer),n=0;n<this.points.length;++n)a[this.points[n]]=4294967167;this.cursorCtx.putImageData(s,r,i)},clear:function(){this.cursorCtx.clearRect(this.lastX,this.lastY,this.lastSize,this.lastSize)},clearAll:function(){var e=this.cursorCtx.canvas;this.cursorCtx.clearRect(0,0,e.width,e.height)},destroy(){this.size=0,this.radius=0,this.offsetX=0,this.offsetY=0,this.lastX=0,this.lastY=0,this.lastSize=0,this.points=null,this.cursorCtx=null},generate:function(e){var t,r,i,n,s,a,o;if((e=0|e*Tegaki.zoomFactor)<2)return!1;for(a=0|(e+1)%2,o=[],r=s=0|e/2,i=0,t=1-s,n=s;r>=i;)o.push(n+r-a+(n+i-a)*e),o.push(n+i-a+(n+r-a)*e),o.push(n-i+(n+r-a)*e),o.push(n-r+(n+i-a)*e),o.push(n-i+(n-r)*e),o.push(n-r+(n-i)*e),o.push(n+i-a+(n-r)*e),o.push(n+r-a+(n-i)*e),++i,t+=t<=0?2*i+1:2*(i- --r)+1;return this.size=e,this.radius=s,this.points=o,!0}},TegakiHistory={maxSize:50,undoStack:[],redoStack:[],pendingAction:null,clear:function(){this.undoStack=[],this.redoStack=[],this.pendingAction=null,this.onChange(0)},push:function(e){e&&(e.coalesce&&this.undoStack[this.undoStack.length-1]instanceof e.constructor&&this.undoStack[this.undoStack.length-1].coalesce(e)||(this.undoStack.push(e),this.undoStack.length>this.maxSize&&this.undoStack.shift(),this.redoStack.length>0&&(this.redoStack=[]),this.onChange(0)))},undo:function(){var e;this.undoStack.length&&((e=this.undoStack.pop()).undo(),this.redoStack.push(e),this.onChange(-1))},redo:function(){var e;this.redoStack.length&&((e=this.redoStack.pop()).redo(),this.undoStack.push(e),this.onChange(1))},onChange:function(e){Tegaki.onHistoryChange(this.undoStack.length,this.redoStack.length,e)},sortPosLayerCallback:function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0}},TegakiHistoryActions={Dummy:function(){this.undo=function(){},this.redo=function(){}},Draw:function(e){this.coalesce=!1,this.imageDataBefore=null,this.imageDataAfter=null,this.layerId=e},DeleteLayers:function(e,t){var r;for(r of(this.coalesce=!1,this.layerPosMap=[],e.sort(TegakiHistory.sortPosLayerCallback)))r[1]=TegakiLayers.cloneLayer(r[1]),this.layerPosMap.push(r);if(this.tgtLayerId=null,this.aLayerIdBefore=null,this.aLayerIdAfter=null,this.imageDataBefore=null,this.imageDataAfter=null,this.mergeDown=!1,t)for(let e in t)this[e]=t[e]},AddLayer:function(e,t,r){this.coalesce=!1,this.layer=e,this.layerId=e.id,this.aLayerIdBefore=t,this.aLayerIdAfter=r},MoveLayers:function(e,t,r){this.coalesce=!1,this.layers=e,this.belowPos=t,this.aLayerId=r},SetLayersAlpha:function(e,t){this.layerAlphas=e,this.newAlpha=t},SetLayerName:function(e,t,r){this.layerId=e,this.oldName=t,this.newName=r}};TegakiHistoryActions.Draw.prototype.addCanvasState=function(e,t){t?this.imageDataAfter=$T.copyImageData(e):this.imageDataBefore=$T.copyImageData(e)},TegakiHistoryActions.Draw.prototype.exec=function(e){var t=TegakiLayers.getLayerById(this.layerId);e?(t.ctx.putImageData(this.imageDataAfter,0,0),TegakiLayers.syncLayerImageData(t,this.imageDataAfter)):(t.ctx.putImageData(this.imageDataBefore,0,0),TegakiLayers.syncLayerImageData(t,this.imageDataBefore)),TegakiUI.updateLayerPreview(t),TegakiLayers.setActiveLayer(this.layerId)},TegakiHistoryActions.Draw.prototype.undo=function(){this.exec(0)},TegakiHistoryActions.Draw.prototype.redo=function(){this.exec(1)},TegakiHistoryActions.DeleteLayers.prototype.undo=function(){var e,t,r,i,n,s;for(e=0,t=this.layerPosMap.length;e<t;++e)[n,i]=this.layerPosMap[e],i=TegakiLayers.cloneLayer(i),(r=Tegaki.layers[n])?((s=TegakiLayers.getLayerBelowId(r.id))&&(s=s.id),TegakiUI.updateLayersGridAdd(i,s),TegakiUI.updateLayerPreview(i),Tegaki.layersCnt.insertBefore(i.canvas,r.canvas),Tegaki.layers.splice(n,0,i)):(r=Tegaki.layers[0]?Tegaki.layers[Tegaki.layers.length-1].canvas:Tegaki.layersCnt.children[0],TegakiUI.updateLayersGridAdd(i,TegakiLayers.getTopLayerId()),TegakiUI.updateLayerPreview(i),Tegaki.layersCnt.insertBefore(i.canvas,r.nextElementSibling),Tegaki.layers.push(i));this.tgtLayerId&&((i=TegakiLayers.getLayerById(this.tgtLayerId)).ctx.putImageData(this.imageDataBefore,0,0),TegakiLayers.syncLayerImageData(i,this.imageDataBefore),TegakiLayers.setLayerAlpha(i,this.tgtLayerAlpha),TegakiUI.updateLayerPreview(i)),TegakiLayers.setActiveLayer(this.aLayerIdBefore)},TegakiHistoryActions.DeleteLayers.prototype.redo=function(){var e,t=[];for(e of this.layerPosMap)t.unshift(e[1].id);this.tgtLayerId?(this.mergeDown||t.unshift(this.tgtLayerId),TegakiLayers.mergeLayers(new Set(t))):TegakiLayers.deleteLayers(t),TegakiLayers.setActiveLayer(this.aLayerIdAfter)},TegakiHistoryActions.MoveLayers.prototype.undo=function(){var e,t,r,i,n;for(t of(new Array(Tegaki.layers.length),i={},this.layers))i[t[1].id]=t[0];for(e=0,n=Tegaki.layers.length;e<n;++e)void 0!==i[(t=Tegaki.layers[e]).id]&&(Tegaki.layers.splice(e,1),Tegaki.layers.splice(i[t.id],0,t));for(TegakiUI.updayeLayersGridOrder(),r=Tegaki.layersCnt.children[0],e=Tegaki.layers.length-1;e>=0;e--)t=Tegaki.layers[e],Tegaki.layersCnt.insertBefore(t.canvas,r.nextElementSibling);TegakiLayers.setActiveLayer(this.aLayerId)},TegakiHistoryActions.MoveLayers.prototype.redo=function(){var e,t=new Set;for(e of this.layers.slice().reverse())t.add(e[1].id);TegakiLayers.setActiveLayer(this.aLayerId),TegakiLayers.moveLayers(t,this.belowPos)},TegakiHistoryActions.AddLayer.prototype.undo=function(){TegakiLayers.deleteLayers([this.layer.id]),TegakiLayers.setActiveLayer(this.aLayerIdBefore),Tegaki.layerCounter--},TegakiHistoryActions.AddLayer.prototype.redo=function(){TegakiLayers.setActiveLayer(this.aLayerIdBefore),TegakiLayers.addLayer(this.layer),TegakiLayers.setActiveLayer(this.aLayerIdAfter)},TegakiHistoryActions.SetLayersAlpha.prototype.undo=function(){var e,t,r;for(t of this.layerAlphas)[e,t]=t,(r=TegakiLayers.getLayerById(e))&&TegakiLayers.setLayerAlpha(r,t);TegakiUI.updateLayerAlphaOpt()},TegakiHistoryActions.SetLayersAlpha.prototype.redo=function(){var e,t,r;for(t of this.layerAlphas)[e,t]=t,(r=TegakiLayers.getLayerById(e))&&TegakiLayers.setLayerAlpha(r,this.newAlpha);TegakiUI.updateLayerAlphaOpt()},TegakiHistoryActions.SetLayersAlpha.prototype.coalesce=function(e){var t;if(this.layerAlphas.length!==e.layerAlphas.length)return!1;for(t=0;t<this.layerAlphas.length;++t)if(this.layerAlphas[t][0]!==e.layerAlphas[t][0])return!1;return this.newAlpha=e.newAlpha,!0},TegakiHistoryActions.SetLayerName.prototype.exec=function(e){var t=TegakiLayers.getLayerById(this.layerId);t&&(t.name=e?this.newName:this.oldName,TegakiUI.updateLayerName(t))},TegakiHistoryActions.SetLayerName.prototype.undo=function(){this.exec(0)},TegakiHistoryActions.SetLayerName.prototype.redo=function(){this.exec(1)};var TegakiKeybinds={keyMap:{},captionMap:{},clear:function(){this.keyMap={},this.captionMap={}},bind:function(e,t,r,i,n){this.keyMap[e]=[t,r],i&&(this.captionMap[i]=n)},getCaption(e){return this.captionMap[e]},resolve:function(e){var t,r,i,n;("INPUT"!=(n=e.target).nodeName||"text"!==n.type&&"number"!==n.type)&&(r=[],e.ctrlKey&&r.push("ctrl"),e.shiftKey&&r.push("shift"),i=e.key.toLowerCase(),r[0]&&(i=r.join("+")+"+"+i),!(t=TegakiKeybinds.keyMap[i])||e.altKey||e.metaKey||(e.preventDefault(),e.stopPropagation(),t[0][t[1]]()))}},TegakiLayers={cloneLayer:function(e){var t=Object.assign({},e);return t.canvas=$T.copyCanvas(e.canvas,!0),t.ctx=t.canvas.getContext("2d"),t.imageData=$T.copyImageData(e.imageData),t},getCanvasById:function(e){return $T.id("tegaki-canvas-"+e)},getActiveLayer:function(){return Tegaki.activeLayer},getLayerPosById:function(e){var t,r=Tegaki.layers;for(t=0;t<r.length;++t)if(r[t].id===e)return t;return-1},getTopFencedLayerId:function(){var e,t,r=Tegaki.layers;for(e=r.length-1;e>=0&&!TegakiLayers.selectedLayersHas(r[e].id);e--);for(e-=1;e>=0&&TegakiLayers.selectedLayersHas(r[e].id);e--);return(t=r[e])?t.id:0},getSelectedEdgeLayerPos:function(e){var t,r=Tegaki.layers;if(e)for(t=Tegaki.layers.length-1;t>=0&&!TegakiLayers.selectedLayersHas(r[t].id);t--);else{for(t=0;t<r.length&&!TegakiLayers.selectedLayersHas(r[t].id);++t);t>=r.length&&(t=-1)}return t},getTopLayer:function(){return Tegaki.layers[Tegaki.layers.length-1]},getTopLayerId:function(){var e=TegakiLayers.getTopLayer();return e?e.id:0},getLayerBelowId:function(e){var t;return(t=TegakiLayers.getLayerPosById(e))<1?null:Tegaki.layers[t-1]},getLayerById:function(e){return Tegaki.layers[TegakiLayers.getLayerPosById(e)]},isSameLayerOrder:function(e,t){var r,i;if(e.length!==t.length)return!1;for(r=0;i=e[r];++r)if(i.id!==t[r].id)return!1;return!0},addLayer:function(e={}){var t,r,i,n,s,a,o,c,l;for(i in Tegaki.activeLayer?(c=Tegaki.activeLayer.id,o=TegakiLayers.getLayerPosById(Tegaki.activeLayer.id),a=$T.cls("tegaki-layer",Tegaki.layersCnt)[o]):(o=-1,a=null),a||(a=Tegaki.layersCnt.firstElementChild),(r=$T.el("canvas")).className="tegaki-layer",r.width=Tegaki.baseWidth,r.height=Tegaki.baseHeight,t=++Tegaki.layerCounter,r.id="tegaki-canvas-"+t,r.setAttribute("data-id",t),n={name:TegakiStrings.layer+" "+t,visible:!0,alpha:1},l=r.getContext("2d"),s={id:t,canvas:r,ctx:l,imageData:l.getImageData(0,0,r.width,r.height)},n)void 0!==e[i]&&(n[i]=e[i]),s[i]=n[i];return Tegaki.layers.splice(o+1,0,s),TegakiUI.updateLayersGridAdd(s,c),Tegaki.layersCnt.insertBefore(r,a.nextElementSibling),Tegaki.onLayerStackChanged(),new TegakiHistoryActions.AddLayer(s,c,t)},deleteLayers:function(e,t){var r,i,n,s,a,o;for(r of(o={aLayerIdBefore:Tegaki.activeLayer?Tegaki.activeLayer.id:-1,aLayerIdAfter:TegakiLayers.getTopFencedLayerId()},s=[],a=[],e))i=TegakiLayers.getLayerPosById(r),n=Tegaki.layers[i],s.push([i,n]),Tegaki.layersCnt.removeChild(n.canvas),a.push(i),TegakiUI.updateLayersGridRemove(r),TegakiUI.deleteLayerPreviewCtx(n);for(i of a=a.sort($T.sortDescCb))Tegaki.layers.splice(i,1);return t&&Object.assign(o,t),Tegaki.onLayerStackChanged(),new TegakiHistoryActions.DeleteLayers(s,o)},mergeLayers:function(e){var t,r,i,n,s,a,o,c,l,d;for(o of(c=[],Tegaki.layers))e.has(o.id)&&c.push(o);if(!(c.length<1)){if(1===c.length){if(!(s=TegakiLayers.getLayerBelowId(c[0].id)))return;c.unshift(s),d=!0}else s=c[c.length-1],d=!1;for(o of((t=$T.el("canvas")).width=Tegaki.baseWidth,t.height=Tegaki.baseHeight,r=t.getContext("2d"),n=$T.copyImageData(s.imageData),l=[],c))o.id!==s.id&&l.push(o.id),r.globalAlpha=o.alpha,r.drawImage(o.canvas,0,0);return $T.clearCtx(s.ctx),s.ctx.drawImage(t,0,0),TegakiLayers.syncLayerImageData(s),i=$T.copyImageData(s.imageData),a=TegakiLayers.deleteLayers(l,{tgtLayerId:s.id,tgtLayerAlpha:s.alpha,aLayerIdAfter:s.id,imageDataBefore:n,imageDataAfter:i,mergeDown:d}),TegakiLayers.setLayerAlpha(s,1),TegakiUI.updateLayerAlphaOpt(),TegakiUI.updateLayerPreview(s),Tegaki.onLayerStackChanged(),a}},moveLayers:function(e,t){var r,i,n,s,a,o,c;if(e.size&&Tegaki.layers.length){for(i of(o=t>=Tegaki.layers.length?TegakiLayers.getTopLayer().canvas.nextElementSibling:(i=Tegaki.layers[t]).canvas,n=[],s=[],a=[],c=t,r=0,Tegaki.layers))e.has(i.id)?(t>0&&r<=t&&c--,n.push([r,i]),a.push(i)):s.push(i),++r;if(s.splice(c,0,...a),!TegakiLayers.isSameLayerOrder(s,Tegaki.layers)){for(i of(Tegaki.layers=s,n))Tegaki.layersCnt.insertBefore(i[1].canvas,o);return TegakiUI.updayeLayersGridOrder(),Tegaki.onLayerStackChanged(),new TegakiHistoryActions.MoveLayers(n,t,Tegaki.activeLayer?Tegaki.activeLayer.id:-1)}}},setLayerVisibility:function(e,t){e.visible=t,t?e.canvas.classList.remove("tegaki-hidden"):e.canvas.classList.add("tegaki-hidden"),Tegaki.onLayerStackChanged(),TegakiUI.updateLayersGridVisibility(e.id,t)},setLayerAlpha:function(e,t){e.alpha=t,e.canvas.style.opacity=t},setActiveLayer:function(e){var t,r;e||(e=TegakiLayers.getTopLayerId())?(t=TegakiLayers.getLayerPosById(e))<0||(r=Tegaki.layers[t],Tegaki.activeLayer&&Tegaki.copyContextState(Tegaki.activeLayer.ctx,r.ctx),Tegaki.activeLayer=r,TegakiLayers.selectedLayersClear(),TegakiLayers.selectedLayersAdd(e),TegakiUI.updateLayersGridActive(e),TegakiUI.updateLayerAlphaOpt(),Tegaki.onLayerStackChanged()):Tegaki.activeLayer=null},syncLayerImageData(e,t=null){e.imageData=t?$T.copyImageData(t):e.ctx.getImageData(0,0,Tegaki.baseWidth,Tegaki.baseHeight)},selectedLayersHas:function(e){return Tegaki.selectedLayers.has(+e)},selectedLayersClear:function(){Tegaki.selectedLayers.clear(),TegakiUI.updateLayerAlphaOpt(),TegakiUI.updateLayersGridSelectedClear()},selectedLayersAdd:function(e){Tegaki.selectedLayers.add(+e),TegakiUI.updateLayerAlphaOpt(),TegakiUI.updateLayersGridSelectedSet(e,!0)},selectedLayersRemove:function(e){Tegaki.selectedLayers.delete(+e),TegakiUI.updateLayerAlphaOpt(),TegakiUI.updateLayersGridSelectedSet(e,!1)},selectedLayersToggle:function(e){TegakiLayers.selectedLayersHas(e)?TegakiLayers.selectedLayersRemove(e):TegakiLayers.selectedLayersAdd(e)}},Tegaki={VERSION:"0.9.2",startTimeStamp:0,bg:null,canvas:null,ctx:null,layers:[],layersCnt:null,canvasCnt:null,ghostBuffer:null,blendBuffer:null,ghostBuffer32:null,blendBuffer32:null,activeLayer:null,layerCounter:0,selectedLayers:new Set,activePointerId:0,activePointerIsPen:!1,isPainting:!1,offsetX:0,offsetY:0,zoomLevel:0,zoomFactor:1,zoomFactorList:[.5,1,2,4,8,16],zoomBaseLevel:1,hasCustomCanvas:!1,TWOPI:2*Math.PI,toolList:[TegakiPencil,TegakiPen,TegakiAirbrush,TegakiBucket,TegakiTone,TegakiPipette,TegakiBlur,TegakiEraser],tools:{},tool:null,colorPaletteId:0,toolColor:"#000000",defaultTool:"pencil",bgColor:"#ffffff",maxSize:64,maxLayers:25,baseWidth:0,baseHeight:0,replayRecorder:null,replayViewer:null,onDoneCb:null,onCancelCb:null,replayMode:!1,saveReplay:!1,open:function(e={}){var t=Tegaki;if(t.bg){if(t.replayMode===!!e.replayMode)return void t.resume();t.destroy()}t.startTimeStamp=Date.now(),e.bgColor&&(t.bgColor=e.bgColor),t.hasCustomCanvas=!1,t.saveReplay=!!e.saveReplay,t.replayMode=!!e.replayMode,t.onDoneCb=e.onDone,t.onCancelCb=e.onCancel,t.baseWidth=e.width||0,t.baseHeight=e.height||0,t.createTools(),t.initKeybinds(),[t.bg,t.canvasCnt,t.layersCnt]=TegakiUI.buildUI(),document.body.appendChild(t.bg),document.body.classList.add("tegaki-backdrop"),t.replayMode?(TegakiUI.setReplayMode(!0),t.replayViewer=new TegakiReplayViewer,e.replayURL&&t.loadReplayFromURL(e.replayURL)):(t.init(),t.setTool(t.defaultTool),t.saveReplay&&(t.replayRecorder=new TegakiReplayRecorder,t.replayRecorder.start()))},init:function(){var e=Tegaki;e.createCanvas(),e.updateLayersCntSize(),e.createBuffers(),e.updatePosOffset(),e.resetLayers(),TegakiCursor.init(e.baseWidth,e.baseHeight),e.bindGlobalEvents(),TegakiUI.updateUndoRedo(0,0),TegakiUI.updateZoomLevel()},initFromReplay:function(){var e,t;t=(e=Tegaki).replayViewer,e.initToolsFromReplay(),e.baseWidth=t.canvasWidth,e.baseHeight=t.canvasHeight,e.bgColor=$T.RgbToHex(...t.bgColor),e.toolColor=$T.RgbToHex(...t.toolColor)},initToolsFromReplay:function(){var e,t,r,i,n,s;for(r in t=(e=Tegaki).replayViewer,e.tools){for(s of((i=e.tools[r]).id===t.toolId&&(e.defaultTool=r),n=t.toolMap[i.id],["step","size","alpha","flow","tipId"]))void 0!==n[s]&&(i[s]=n[s]);for(s of["sizeDynamicsEnabled","alphaDynamicsEnabled","flowDynamicsEnabled","usePreserveAlpha"])void 0!==n[s]&&(i[s]=!!n[s])}},resetLayers:function(){var e,t;if(Tegaki.layers.length){for(e=0,t=Tegaki.layers.length;e<t;++e)Tegaki.layersCnt.removeChild(Tegaki.layers[e].canvas);Tegaki.layers=[],Tegaki.layerCounter=0,TegakiUI.updateLayersGridClear()}TegakiLayers.addLayer(),TegakiLayers.setActiveLayer(0)},createCanvas:function(){var e,t=Tegaki;(e=$T.el("canvas")).id="tegaki-canvas",e.width=t.baseWidth,e.height=t.baseHeight,t.canvas=e,t.ctx=e.getContext("2d"),t.ctx.fillStyle=t.bgColor,t.ctx.fillRect(0,0,t.baseWidth,t.baseHeight),t.layersCnt.appendChild(e)},createTools:function(){var e,t;for(e of Tegaki.toolList)t=new e,Tegaki.tools[t.name]=t},bindGlobalEvents:function(){var e=Tegaki;if(e.replayMode)$T.on(document,"visibilitychange",Tegaki.onVisibilityChange);else{let t=TegakiCursor.getCanvas();$T.on(t,"pointermove",e.onPointerMove),$T.on(t,"pointerdown",e.onPointerDown),$T.on(t,"pointerout",e.onPointerOut),$T.on(document,"pointerup",e.onPointerUp),$T.on(document,"pointercancel",e.onPointerUp),$T.on(document,"keydown",TegakiKeybinds.resolve),$T.on(window,"beforeunload",Tegaki.onTabClose)}$T.on(e.bg,"contextmenu",e.onDummy),$T.on(window,"resize",e.onWindowResized),$T.on(window,"scroll",e.updatePosOffset)},unBindGlobalEvents:function(){var e=Tegaki;if(e.replayMode)$T.off(document,"visibilitychange",Tegaki.onVisibilityChange);else{let t=TegakiCursor.getCanvas();$T.off(t,"pointermove",e.onPointerMove),$T.off(t,"pointerdown",e.onPointerDown),$T.off(t,"pointerout",e.onPointerOut),$T.off(document,"pointerup",e.onPointerUp),$T.off(document,"pointercancel",e.onPointerUp),$T.off(document,"keydown",TegakiKeybinds.resolve),$T.off(window,"beforeunload",Tegaki.onTabClose)}$T.off(e.bg,"contextmenu",e.onDummy),$T.off(window,"resize",e.onWindowResized),$T.off(window,"scroll",e.updatePosOffset)},createBuffers(){Tegaki.ghostBuffer=new ImageData(Tegaki.baseWidth,Tegaki.baseHeight),Tegaki.blendBuffer=new ImageData(Tegaki.baseWidth,Tegaki.baseHeight),Tegaki.ghostBuffer32=new Uint32Array(Tegaki.ghostBuffer.data.buffer),Tegaki.blendBuffer32=new Uint32Array(Tegaki.blendBuffer.data.buffer)},clearBuffers(){Tegaki.ghostBuffer32.fill(0),Tegaki.blendBuffer32.fill(0)},destroyBuffers(){Tegaki.ghostBuffer=null,Tegaki.blendBuffer=null,Tegaki.ghostBuffer32=null,Tegaki.blendBuffer32=null},disableSmoothing:function(e){e.mozImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,e.imageSmoothingEnabled=!1},updateLayersCntSize:function(){var e=Tegaki.layersCnt.style;e.width=Tegaki.baseWidth+"px",e.height=Tegaki.baseHeight+"px"},onTabClose:function(e){e.preventDefault(),e.returnValue=""},onVisibilityChange:function(e){Tegaki.replayMode&&("visible"===document.visibilityState?Tegaki.replayViewer.autoPaused&&Tegaki.replayViewer.play():Tegaki.replayViewer.playing&&Tegaki.replayViewer.autoPause())},onWindowResized:function(){Tegaki.updatePosOffset(),TegakiCursor.updateCanvasSize()},initKeybinds:function(){var e,t;if(!Tegaki.replayMode)for(t in TegakiKeybinds.bind("ctrl+z",TegakiHistory,"undo","undo","Ctrl+Z"),TegakiKeybinds.bind("ctrl+y",TegakiHistory,"redo","redo","Ctrl+Y"),TegakiKeybinds.bind("+",Tegaki,"setToolSizeUp","toolSize","Numpad +/-"),TegakiKeybinds.bind("-",Tegaki,"setToolSizeDown"),Tegaki.tools)(e=Tegaki.tools[t]).keybind&&TegakiKeybinds.bind(e.keybind,e,"set")},getPointerPos:function(e,t){return 0===t?0|(e.clientX+window.pageXOffset+Tegaki.canvasCnt.scrollLeft-Tegaki.offsetX)/Tegaki.zoomFactor:0|(e.clientY+window.pageYOffset+Tegaki.canvasCnt.scrollTop-Tegaki.offsetY)/Tegaki.zoomFactor},resume:function(){Tegaki.saveReplay&&Tegaki.replayRecorder.start(),Tegaki.bg.classList.remove("tegaki-hidden"),document.body.classList.add("tegaki-backdrop"),Tegaki.setZoom(0),Tegaki.updateLayersCntSize(),Tegaki.updatePosOffset(),TegakiCursor.updateCanvasSize(),Tegaki.bindGlobalEvents()},hide:function(){Tegaki.saveReplay&&Tegaki.replayRecorder.stop(),Tegaki.bg.classList.add("tegaki-hidden"),document.body.classList.remove("tegaki-backdrop"),Tegaki.unBindGlobalEvents()},destroy:function(){Tegaki.unBindGlobalEvents(),TegakiKeybinds.clear(),TegakiHistory.clear(),Tegaki.bg.parentNode.removeChild(Tegaki.bg),document.body.classList.remove("tegaki-backdrop"),Tegaki.startTimeStamp=0,Tegaki.bg=null,Tegaki.canvasCnt=null,Tegaki.layersCnt=null,Tegaki.canvas=null,Tegaki.ctx=null,Tegaki.layers=[],Tegaki.layerCounter=0,Tegaki.zoomLevel=0,Tegaki.zoomFactor=1,Tegaki.activeLayer=null,Tegaki.tool=null,TegakiCursor.destroy(),Tegaki.replayRecorder=null,Tegaki.replayViewer=null,Tegaki.destroyBuffers()},flatten:function(e){var t,r,i,n;for(e?i=e.canvas:e=(i=$T.el("canvas")).getContext("2d"),i.width=Tegaki.canvas.width,i.height=Tegaki.canvas.height,e.drawImage(Tegaki.canvas,0,0),t=0,n=Tegaki.layers.length;t<n;++t)(r=Tegaki.layers[t]).visible&&(e.globalAlpha=r.alpha,e.drawImage(r.canvas,0,0));return i},onReplayLoaded:function(){TegakiUI.clearMsg(),Tegaki.initFromReplay(),Tegaki.init(),Tegaki.setTool(Tegaki.defaultTool),TegakiUI.updateReplayControls(),TegakiUI.updateReplayTime(!0),TegakiUI.enableReplayControls(!0),Tegaki.replayViewer.play()},onReplayGaplessClick:function(){Tegaki.replayViewer.toggleGapless(),TegakiUI.updateReplayGapless()},onReplayPlayPauseClick:function(){Tegaki.replayViewer.togglePlayPause()},onReplayRewindClick:function(){Tegaki.replayViewer.rewind()},onReplaySlowDownClick:function(){Tegaki.replayViewer.slowDown(),TegakiUI.updateReplaySpeed()},onReplaySpeedUpClick:function(){Tegaki.replayViewer.speedUp(),TegakiUI.updateReplaySpeed()},onReplayTimeChanged:function(){TegakiUI.updateReplayTime()},onReplayPlayPauseChanged:function(){TegakiUI.updateReplayPlayPause()},onReplayReset:function(){Tegaki.initFromReplay(),Tegaki.setTool(Tegaki.defaultTool),Tegaki.resizeCanvas(Tegaki.baseWidth,Tegaki.baseHeight),TegakiUI.updateReplayControls(),TegakiUI.updateReplayTime()},onMainColorClick:function(e){e.preventDefault(),$T.id("tegaki-colorpicker").click()},onPaletteColorClick:function(e){2===e.button?(this.style.backgroundColor=Tegaki.toolColor,this.setAttribute("data-color",Tegaki.toolColor)):0===e.button&&Tegaki.setToolColor(this.getAttribute("data-color"))},onColorPicked:function(e){$T.id("tegaki-color").style.backgroundColor=this.value,Tegaki.setToolColor(this.value)},onSwitchPaletteClick:function(e){var t;t=e.target.hasAttribute("data-prev")?Tegaki.colorPaletteId-1:Tegaki.colorPaletteId+1,Tegaki.setColorPalette(t)},setColorPalette:function(e){e<0||e>=TegakiColorPalettes.length||(Tegaki.colorPaletteId=e,TegakiUI.updateColorPalette())},setToolSizeUp:function(){Tegaki.setToolSize(Tegaki.tool.size+1)},setToolSizeDown:function(){Tegaki.setToolSize(Tegaki.tool.size-1)},setToolSize:function(e){e>0&&e<=Tegaki.maxSize&&(Tegaki.tool.setSize(e),Tegaki.updateCursorStatus(),Tegaki.recordEvent(TegakiEventSetToolSize,performance.now(),e),TegakiUI.updateToolSize())},setToolAlpha:function(e){(e=Math.fround(e))>=0&&e<=1&&(Tegaki.tool.setAlpha(e),Tegaki.recordEvent(TegakiEventSetToolAlpha,performance.now(),e),TegakiUI.updateToolAlpha())},setToolFlow:function(e){(e=Math.fround(e))>=0&&e<=1&&(Tegaki.tool.setFlow(e),Tegaki.recordEvent(TegakiEventSetToolFlow,performance.now(),e),TegakiUI.updateToolFlow())},setToolColor:function(e){Tegaki.toolColor=e,$T.id("tegaki-color").style.backgroundColor=e,$T.id("tegaki-colorpicker").value=e,Tegaki.tool.setColor(e),Tegaki.recordEvent(TegakiEventSetColor,performance.now(),Tegaki.tool.rgb)},setToolColorRGB:function(e,t,r){Tegaki.setToolColor($T.RgbToHex(e,t,r))},setTool:function(e){Tegaki.tools[e].set()},setToolById:function(e){var t;for(t in Tegaki.tools)if(Tegaki.tools[t].id===e)return void Tegaki.setTool(t)},setZoom:function(e){var t;(t=e+Tegaki.zoomBaseLevel)>=Tegaki.zoomFactorList.length||t<0||!Tegaki.canvas||(Tegaki.zoomLevel=e,Tegaki.zoomFactor=Tegaki.zoomFactorList[t],TegakiUI.updateZoomLevel(),Tegaki.layersCnt.style.width=Math.ceil(Tegaki.baseWidth*Tegaki.zoomFactor)+"px",Tegaki.layersCnt.style.height=Math.ceil(Tegaki.baseHeight*Tegaki.zoomFactor)+"px",Tegaki.updateCursorStatus(),Tegaki.updatePosOffset())},onZoomChange:function(){this.hasAttribute("data-in")?Tegaki.setZoom(Tegaki.zoomLevel+1):Tegaki.setZoom(Tegaki.zoomLevel-1),TegakiCursor.updateCanvasSize()},onNewClick:function(){var e,t,r,i=Tegaki;(e=prompt(TegakiStrings.promptWidth,i.canvas.width))&&(t=prompt(TegakiStrings.promptHeight,i.canvas.height))&&(t=+t,(e=+e)<1||t<1?TegakiUI.printMsg(TegakiStrings.badDimensions):(r={},i.copyContextState(i.activeLayer.ctx,r),i.resizeCanvas(e,t),i.copyContextState(r,i.activeLayer.ctx),i.setZoom(0),TegakiHistory.clear(),TegakiUI.updateLayerPreviewSize(),i.startTimeStamp=Date.now(),i.saveReplay&&(i.createTools(),i.setTool(i.defaultTool),i.replayRecorder=new TegakiReplayRecorder,i.replayRecorder.start())))},onOpenClick:function(){(!(TegakiHistory.undoStack[0]||TegakiHistory.redoStack[0])&&!Tegaki.saveReplay||confirm(TegakiStrings.confirmChangeCanvas))&&$T.id("tegaki-filepicker").click()},loadReplayFromFile:function(){Tegaki.replayViewer.debugLoadLocal()},loadReplayFromURL:function(e){TegakiUI.printMsg(TegakiStrings.loadingReplay,0),Tegaki.replayViewer.loadFromURL(e)},onExportClick:function(){Tegaki.flatten().toBlob((function(e){var t=$T.el("a");t.className="tegaki-hidden",t.download=$T.generateFilename()+".png",t.href=URL.createObjectURL(e),Tegaki.bg.appendChild(t),t.click(),Tegaki.bg.removeChild(t)}),"image/png")},onUndoClick:function(){TegakiHistory.undo()},onRedoClick:function(){TegakiHistory.redo()},onHistoryChange:function(e,t,r=0){TegakiUI.updateUndoRedo(e,t),-1===r?Tegaki.recordEvent(TegakiEventUndo,performance.now()):1===r&&Tegaki.recordEvent(TegakiEventRedo,performance.now())},onDoneClick:function(){Tegaki.hide(),Tegaki.onDoneCb()},onCancelClick:function(){confirm(TegakiStrings.confirmCancel)&&(Tegaki.destroy(),Tegaki.onCancelCb())},onCloseViewerClick:function(){Tegaki.replayViewer.destroy(),Tegaki.destroy()},onToolSizeChange:function(){var e=+this.value;e<1?e=1:e>Tegaki.maxSize&&(e=Tegaki.maxSize),Tegaki.setToolSize(e)},onToolAlphaChange:function(e){var t=+this.value;(t/=100)<0?t=0:t>1&&(t=1),Tegaki.setToolAlpha(t)},onToolFlowChange:function(e){var t=+this.value;(t/=100)<0?t=0:t>1&&(t=1),Tegaki.setToolFlow(t)},onToolPressureSizeClick:function(e){Tegaki.tool.useSizeDynamics&&Tegaki.setToolSizeDynamics(!Tegaki.tool.sizeDynamicsEnabled)},setToolSizeDynamics:function(e){Tegaki.tool.setSizeDynamics(e),TegakiUI.updateToolDynamics(),Tegaki.recordEvent(TegakiEventSetToolSizeDynamics,performance.now(),+e)},onToolPressureAlphaClick:function(e){Tegaki.tool.useAlphaDynamics&&Tegaki.setToolAlphaDynamics(!Tegaki.tool.alphaDynamicsEnabled)},setToolAlphaDynamics:function(e){Tegaki.tool.setAlphaDynamics(e),TegakiUI.updateToolDynamics(),Tegaki.recordEvent(TegakiEventSetToolAlphaDynamics,performance.now(),+e)},onToolPressureFlowClick:function(e){Tegaki.tool.useFlowDynamics&&Tegaki.setToolFlowDynamics(!Tegaki.tool.flowDynamicsEnabled)},setToolFlowDynamics:function(e){Tegaki.tool.setFlowDynamics(e),TegakiUI.updateToolDynamics(),Tegaki.recordEvent(TegakiEventSetToolFlowDynamics,performance.now(),+e)},onToolPreserveAlphaClick:function(e){Tegaki.tool.usePreserveAlpha&&Tegaki.setToolPreserveAlpha(!Tegaki.tool.preserveAlphaEnabled)},setToolPreserveAlpha:function(e){Tegaki.tool.setPreserveAlpha(e),TegakiUI.updateToolPreserveAlpha(),Tegaki.recordEvent(TegakiEventPreserveAlpha,performance.now(),+e)},onToolTipClick:function(e){var t=+e.target.getAttribute("data-id");t!==Tegaki.tool.tipId&&Tegaki.setToolTip(t)},setToolTip:function(e){Tegaki.tool.setTip(e),TegakiUI.updateToolShape(),Tegaki.recordEvent(TegakiEventSetToolTip,performance.now(),e)},onLayerSelectorClick:function(e){var t=+this.getAttribute("data-id");t&&!e.target.classList.contains("tegaki-ui-cb")&&(e.ctrlKey?Tegaki.toggleSelectedLayer(t):Tegaki.setActiveLayer(t))},toggleSelectedLayer:function(e){TegakiLayers.selectedLayersToggle(e),Tegaki.recordEvent(TegakiEventToggleLayerSelection,performance.now(),e)},setActiveLayer:function(e){TegakiLayers.setActiveLayer(e),Tegaki.recordEvent(TegakiEventSetActiveLayer,performance.now(),e)},onLayerAlphaDragStart:function(e){TegakiUI.setupDragLabel(e,Tegaki.onLayerAlphaDragMove)},onLayerAlphaDragMove:function(e){var t;e&&((t=Tegaki.activeLayer.alpha+e/100)<0?t=0:t>1&&(t=1),Tegaki.setSelectedLayersAlpha(t))},onLayerAlphaChange:function(){var e=+this.value;(e/=100)<0?e=0:e>1&&(e=1),Tegaki.setSelectedLayersAlpha(e)},setSelectedLayersAlpha:function(e){var t,r,i;if((e=Math.fround(e))>=0&&e<=1&&Tegaki.selectedLayers.size>0){for(r of(i=[],Tegaki.selectedLayers))(t=TegakiLayers.getLayerById(r))&&(i.push([t.id,t.alpha]),TegakiLayers.setLayerAlpha(t,e));TegakiUI.updateLayerAlphaOpt(),TegakiHistory.push(new TegakiHistoryActions.SetLayersAlpha(i,e)),Tegaki.recordEvent(TegakiEventSetSelectedLayersAlpha,performance.now(),e)}},onLayerNameChangeClick:function(e){var t,r,i;t=+this.getAttribute("data-id"),(i=TegakiLayers.getLayerById(t))&&(r=prompt(void 0,i.name))&&Tegaki.setLayerName(t,r)},setLayerName:function(e,t){var r,i;t=t.trim().slice(0,25),(i=TegakiLayers.getLayerById(e))&&t&&t!==i.name&&(r=i.name,i.name=t,TegakiUI.updateLayerName(i),TegakiHistory.push(new TegakiHistoryActions.SetLayerName(e,r,t)),Tegaki.recordEvent(TegakiEventHistoryDummy,performance.now()))},onLayerAddClick:function(){Tegaki.addLayer()},addLayer:function(){var e;Tegaki.layers.length>=Tegaki.maxLayers?TegakiUI.printMsg(TegakiStrings.tooManyLayers):(TegakiHistory.push(e=TegakiLayers.addLayer()),TegakiLayers.setActiveLayer(e.aLayerIdAfter),Tegaki.recordEvent(TegakiEventAddLayer,performance.now()))},onLayerDeleteClick:function(){Tegaki.deleteSelectedLayers()},deleteSelectedLayers:function(){var e,t;(t=Tegaki.selectedLayers).size!==Tegaki.layers.length&&(!t.size||Tegaki.layers.length<2||(TegakiHistory.push(e=TegakiLayers.deleteLayers(t)),TegakiLayers.selectedLayersClear(),TegakiLayers.setActiveLayer(e.aLayerIdAfter),Tegaki.recordEvent(TegakiEventDeleteLayers,performance.now())))},onLayerToggleVisibilityClick:function(){Tegaki.toggleLayerVisibility(+this.getAttribute("data-id"))},toggleLayerVisibility:function(e){var t=TegakiLayers.getLayerById(e);TegakiLayers.setLayerVisibility(t,!t.visible),Tegaki.recordEvent(TegakiEventToggleLayerVisibility,performance.now(),e)},onMergeLayersClick:function(){Tegaki.mergeSelectedLayers()},mergeSelectedLayers:function(){var e;Tegaki.selectedLayers.size&&(e=TegakiLayers.mergeLayers(Tegaki.selectedLayers))&&(TegakiHistory.push(e),TegakiLayers.setActiveLayer(e.aLayerIdAfter),Tegaki.recordEvent(TegakiEventMergeLayers,performance.now()))},onMoveLayerClick:function(e){var t,r;Tegaki.selectedLayers.size&&(r=e.target.hasAttribute("data-up"),(t=TegakiLayers.getSelectedEdgeLayerPos(r))<0||(r?t+=2:t>=1&&t--,Tegaki.moveSelectedLayers(t)))},moveSelectedLayers:function(e){TegakiHistory.push(TegakiLayers.moveLayers(Tegaki.selectedLayers,e)),Tegaki.recordEvent(TegakiEventMoveLayers,performance.now(),e)},onToolClick:function(){Tegaki.setTool(this.getAttribute("data-tool"))},onToolChanged:function(e){var t;Tegaki.tool=e,(t=$T.cls("tegaki-tool-active")[0])&&t.classList.remove("tegaki-tool-active"),$T.id("tegaki-tool-btn-"+e.name).classList.add("tegaki-tool-active"),Tegaki.recordEvent(TegakiEventSetTool,performance.now(),Tegaki.tool.id),TegakiUI.onToolChanged(),Tegaki.updateCursorStatus()},onLayerStackChanged:function(){},onOpenFileSelected:function(){var e;this.files&&this.files[0]&&((e=new Image).onload=Tegaki.onOpenImageLoaded,e.onerror=Tegaki.onOpenImageError,e.src=URL.createObjectURL(this.files[0]))},onOpenImageLoaded:function(){var e={},t=Tegaki;t.hasCustomCanvas=!0,t.copyContextState(t.activeLayer.ctx,e),t.resizeCanvas(this.naturalWidth,this.naturalHeight),t.activeLayer.ctx.drawImage(this,0,0),TegakiLayers.syncLayerImageData(t.activeLayer),t.copyContextState(e,t.activeLayer.ctx),t.setZoom(0),TegakiHistory.clear(),TegakiUI.updateLayerPreviewSize(!0),t.startTimeStamp=Date.now(),t.saveReplay&&(t.replayRecorder.stop(),t.replayRecorder=null,t.saveReplay=!1,TegakiUI.setRecordingStatus(!1))},onOpenImageError:function(){TegakiUI.printMsg(TegakiStrings.errorLoadImage)},resizeCanvas:function(e,t){Tegaki.baseWidth=e,Tegaki.baseHeight=t,Tegaki.createBuffers(),Tegaki.canvas.width=e,Tegaki.canvas.height=t,Tegaki.ctx.fillStyle=Tegaki.bgColor,Tegaki.ctx.fillRect(0,0,e,t),Tegaki.activeLayer=null,Tegaki.resetLayers(),Tegaki.updateLayersCntSize(),Tegaki.updatePosOffset(),TegakiCursor.updateCanvasSize()},copyContextState:function(e,t){var r,i,n=["lineCap","lineJoin","strokeStyle","fillStyle","globalAlpha","lineWidth","globalCompositeOperation"];for(r=0;i=n[r];++r)t[i]=e[i]},updateCursorStatus:function(){!Tegaki.tool.noCursor&&Tegaki.tool.size>1?Tegaki.cursor=TegakiCursor.generate(Tegaki.tool.size):(Tegaki.cursor=!1,TegakiCursor.clear())},updatePosOffset:function(){var e=Tegaki.canvas.getBoundingClientRect();Tegaki.offsetX=e.left+window.pageXOffset+Tegaki.canvasCnt.scrollLeft+Tegaki.layersCnt.scrollLeft,Tegaki.offsetY=e.top+window.pageYOffset+Tegaki.canvasCnt.scrollTop+Tegaki.layersCnt.scrollTop},getScrollbarSizes:function(){return[Tegaki.canvasCnt.offsetWidth-Tegaki.canvasCnt.clientWidth,Tegaki.canvasCnt.offsetHeight-Tegaki.canvasCnt.clientHeight]},isScrollbarClick:function(e){var[t,r]=Tegaki.getScrollbarSizes();return t>0&&e.clientX>=Tegaki.canvasCnt.offsetLeft+Tegaki.canvasCnt.clientWidth&&e.clientX<=Tegaki.canvasCnt.offsetLeft+Tegaki.canvasCnt.clientWidth+t||r>0&&e.clientY>=Tegaki.canvasCnt.offsetTop+Tegaki.canvasCnt.clientHeight&&e.clientY<=Tegaki.canvasCnt.offsetTop+Tegaki.canvasCnt.clientHeight+t},onPointerMove:function(e){var t,r,i,n,s,a;if(void 0!==e.mozInputSource){if(Tegaki.activePointerIsPen&&"mouse"===e.pointerType)return}else if(Tegaki.activePointerId!==e.pointerId)return void(Tegaki.activePointerId=e.pointerId);if(Tegaki.isPainting)if(n=Tegaki.tool,Tegaki.activePointerIsPen&&e.getCoalescedEvents)for(e of(t=e.getCoalescedEvents(),s=e.timeStamp,t))r=Tegaki.getPointerPos(e,0),i=Tegaki.getPointerPos(e,1),n.enabledDynamics()?(a=TegakiPressure.toShort(e.pressure),TegakiPressure.push(a),Tegaki.recordEvent(TegakiEventDraw,s,r,i,a)):Tegaki.recordEvent(TegakiEventDrawNoP,s,r,i),n.draw(r,i);else r=Tegaki.getPointerPos(e,0),i=Tegaki.getPointerPos(e,1),a=TegakiPressure.toShort(e.pressure),Tegaki.recordEvent(TegakiEventDraw,e.timeStamp,r,i,a),TegakiPressure.push(a),n.draw(r,i);else r=Tegaki.getPointerPos(e,0),i=Tegaki.getPointerPos(e,1);Tegaki.cursor&&TegakiCursor.render(e.clientX,e.clientY)},onPointerDown:function(e){var t,r,i,n;Tegaki.isScrollbarClick(e)||(Tegaki.activePointerId=e.pointerId,Tegaki.activePointerIsPen="pen"===e.pointerType,null!==Tegaki.activeLayer?TegakiLayers.getActiveLayer().visible?(t=Tegaki.getPointerPos(e,0),r=Tegaki.getPointerPos(e,1),2===e.button||e.altKey?(e.preventDefault(),Tegaki.isPainting=!1,Tegaki.tools.pipette.draw(t,r)):0===e.button&&(e.preventDefault(),(i=Tegaki.tool).enabledDynamics()?(n=TegakiPressure.toShort(e.pressure),TegakiPressure.push(n),Tegaki.recordEvent(TegakiEventDrawStart,e.timeStamp,t,r,n)):Tegaki.recordEvent(TegakiEventDrawStartNoP,e.timeStamp,t,r),Tegaki.isPainting=!0,TegakiHistory.pendingAction=new TegakiHistoryActions.Draw(Tegaki.activeLayer.id),TegakiHistory.pendingAction.addCanvasState(Tegaki.activeLayer.imageData,0),i.start(t,r)),Tegaki.cursor&&TegakiCursor.render(e.clientX,e.clientY)):e.target.parentNode===Tegaki.layersCnt&&TegakiUI.printMsg(TegakiStrings.hiddenActiveLayer):e.target.parentNode===Tegaki.layersCnt&&TegakiUI.printMsg(TegakiStrings.noActiveLayer))},onPointerUp:function(e){Tegaki.activePointerId=e.pointerId,Tegaki.activePointerIsPen=!1,Tegaki.isPainting&&(Tegaki.recordEvent(TegakiEventDrawCommit,e.timeStamp),Tegaki.tool.commit(),TegakiUI.updateLayerPreview(Tegaki.activeLayer),TegakiHistory.pendingAction.addCanvasState(Tegaki.activeLayer.imageData,1),TegakiHistory.push(TegakiHistory.pendingAction),Tegaki.isPainting=!1)},onPointerOut:function(e){TegakiCursor.clearAll()},onDummy:function(e){e.preventDefault(),e.stopPropagation()},recordEvent(e,...t){Tegaki.replayRecorder&&Tegaki.replayRecorder.push(new e(...t))}},TegakiColorPalettes=[["#ffffff","#000000","#888888","#b47575","#c096c0","#fa9696","#8080ff","#ffb6ff","#e7e58d","#25c7c9","#99cb7b","#e7962d","#f9ddcf","#fcece2"],["#000000","#ffffff","#7f7f7f","#c3c3c3","#880015","#b97a57","#ed1c24","#ffaec9","#ff7f27","#ffc90e","#fff200","#efe4b0","#22b14c","#b5e61d","#00a2e8","#99d9ea","#3f48cc","#7092be","#a349a4","#c8bfe7"],["#000000","#ffffff","#8a8a8a","#cacaca","#fcece2","#f9ddcf","#e0a899","#a05b53","#7a444a","#960018","#c41e3a","#de4537","#ff3300","#ff9800","#ffc107","#ffd700","#ffeb3b","#ffffcc","#f3e5ab","#cddc39","#8bc34a","#4caf50","#3e8948","#355e3b","#3eb489","#f0f8ff","#87ceeb","#6699cc","#007fff","#2d68c4","#364478","#352c4a","#9c27b0","#da70d6","#ff0090","#fa8072","#f19cbb","#c78b95"]],TegakiPressure={pressureNow:0,pressureThen:0,toShort:function(e){return 0|65535*e},get:function(){return this.pressureNow},lerp:function(e){return this.pressureThen*(1-e)+this.pressureNow*e},push:function(e){this.pressureThen=this.pressureNow,this.pressureNow=e/65535},set:function(e){this.pressureThen=this.pressureNow=e/65535}};class TegakiEvent_void{constructor(){this.size=5}pack(e){e.writeUint8(this.type),e.writeUint32(this.timeStamp)}static unpack(e){return new this(e.readUint32())}}class TegakiEvent_c{constructor(){this.size=6}pack(e){e.writeUint8(this.type),e.writeUint32(this.timeStamp),e.writeUint8(this.value)}static unpack(e){return new this(e.readUint32(),e.readUint8())}}class TegakiEventPrelude extends TegakiEvent_void{constructor(e){super(),this.timeStamp=e,this.type=TegakiEvents[this.constructor.name][0]}static unpack(e){return super.unpack(e)}dispatch(){}}class TegakiEventConclusion extends TegakiEvent_void{constructor(e){super(),this.timeStamp=e,this.type=TegakiEvents[this.constructor.name][0]}static unpack(e){return super.unpack(e)}dispatch(){}}class TegakiEventHistoryDummy extends TegakiEvent_void{constructor(e){super(),this.timeStamp=e,this.type=TegakiEvents[this.constructor.name][0]}static unpack(e){return super.unpack(e)}dispatch(){TegakiHistory.push(new TegakiHistoryActions.Dummy)}}class TegakiEventDrawStart{constructor(e,t,r,i){this.timeStamp=e,this.x=t,this.y=r,this.pressure=i,this.type=TegakiEvents[this.constructor.name][0],this.size=11}pack(e){e.writeUint8(this.type),e.writeUint32(this.timeStamp),e.writeInt16(this.x),e.writeInt16(this.y),e.writeUint16(this.pressure)}static unpack(e){var t,r,i,n;return t=e.readUint32(),r=e.readInt16(),i=e.readInt16(),n=e.readUint16(),new TegakiEventDrawStart(t,r,i,n)}dispatch(){TegakiPressure.set(this.pressure),TegakiHistory.pendingAction=new TegakiHistoryActions.Draw(Tegaki.activeLayer.id),TegakiHistory.pendingAction.addCanvasState(Tegaki.activeLayer.imageData,0),Tegaki.tool.start(this.x,this.y)}}class TegakiEventDrawStartNoP{constructor(e,t,r){this.timeStamp=e,this.x=t,this.y=r,this.type=TegakiEvents[this.constructor.name][0],this.size=9}pack(e){e.writeUint8(this.type),e.writeUint32(this.timeStamp),e.writeInt16(this.x),e.writeInt16(this.y)}static unpack(e){var t,r,i;return t=e.readUint32(),r=e.readInt16(),i=e.readInt16(),new TegakiEventDrawStartNoP(t,r,i)}dispatch(){TegakiPressure.set(.5),TegakiHistory.pendingAction=new TegakiHistoryActions.Draw(Tegaki.activeLayer.id),TegakiHistory.pendingAction.addCanvasState(Tegaki.activeLayer.imageData,0),Tegaki.tool.start(this.x,this.y)}}class TegakiEventDraw{constructor(e,t,r,i){this.timeStamp=e,this.x=t,this.y=r,this.pressure=i,this.type=TegakiEvents[this.constructor.name][0],this.size=11}pack(e){e.writeUint8(this.type),e.writeUint32(this.timeStamp),e.writeInt16(this.x),e.writeInt16(this.y),e.writeUint16(this.pressure)}static unpack(e){var t,r,i,n;return t=e.readUint32(),r=e.readInt16(),i=e.readInt16(),n=e.readUint16(),new TegakiEventDraw(t,r,i,n)}dispatch(){TegakiPressure.push(this.pressure),Tegaki.tool.draw(this.x,this.y)}}class TegakiEventDrawNoP{constructor(e,t,r){this.timeStamp=e,this.x=t,this.y=r,this.type=TegakiEvents[this.constructor.name][0],this.size=9}pack(e){e.writeUint8(this.type),e.writeUint32(this.timeStamp),e.writeInt16(this.x),e.writeInt16(this.y)}static unpack(e){var t,r,i;return t=e.readUint32(),r=e.readInt16(),i=e.readInt16(),new TegakiEventDraw(t,r,i)}dispatch(){TegakiPressure.push(.5),Tegaki.tool.draw(this.x,this.y)}}class TegakiEventDrawCommit extends TegakiEvent_void{constructor(e){super(),this.timeStamp=e,this.type=TegakiEvents[this.constructor.name][0]}static unpack(e){return super.unpack(e)}dispatch(){Tegaki.tool.commit(),TegakiUI.updateLayerPreview(Tegaki.activeLayer),TegakiHistory.pendingAction.addCanvasState(Tegaki.activeLayer.imageData,1),TegakiHistory.push(TegakiHistory.pendingAction),Tegaki.isPainting=!1}}class TegakiEventUndo extends TegakiEvent_void{constructor(e){super(),this.timeStamp=e,this.type=TegakiEvents[this.constructor.name][0]}static unpack(e){return super.unpack(e)}dispatch(){TegakiHistory.undo()}}class TegakiEventRedo extends TegakiEvent_void{constructor(e){super(),this.timeStamp=e,this.type=TegakiEvents[this.constructor.name][0]}static unpack(e){return super.unpack(e)}dispatch(){TegakiHistory.redo()}}class TegakiEventSetColor{constructor(e,t){this.timeStamp=e,[this.r,this.g,this.b]=t,this.type=TegakiEvents[this.constructor.name][0],this.size=8,this.coalesce=!0}pack(e){e.writeUint8(this.type),e.writeUint32(this.timeStamp),e.writeUint8(this.r),e.writeUint8(this.g),e.writeUint8(this.b)}static unpack(e){var t,r;return t=e.readUint32(),r=[e.readUint8(),e.readUint8(),e.readUint8()],new TegakiEventSetColor(t,r)}dispatch(){Tegaki.setToolColorRGB(this.r,this.g,this.b)}}class TegakiEventSetTool extends TegakiEvent_c{constructor(e,t){super(),this.timeStamp=e,this.value=t,this.type=TegakiEvents[this.constructor.name][0],this.coalesce=!0}dispatch(){Tegaki.setToolById(this.value)}}class TegakiEventSetToolSize extends TegakiEvent_c{constructor(e,t){super(),this.timeStamp=e,this.value=t,this.type=TegakiEvents[this.constructor.name][0],this.coalesce=!0}dispatch(){Tegaki.setToolSize(this.value)}}class TegakiEventSetToolAlpha{constructor(e,t){this.timeStamp=e,this.value=t,this.type=TegakiEvents[this.constructor.name][0],this.coalesce=!0,this.size=9}pack(e){e.writeUint8(this.type),e.writeUint32(this.timeStamp),e.writeFloat32(this.value)}static unpack(e){return new this(e.readUint32(),e.readFloat32())}dispatch(){Tegaki.setToolAlpha(this.value)}}class TegakiEventSetToolFlow{constructor(e,t){this.timeStamp=e,this.value=t,this.type=TegakiEvents[this.constructor.name][0],this.coalesce=!0,this.size=9}pack(e){e.writeUint8(this.type),e.writeUint32(this.timeStamp),e.writeFloat32(this.value)}static unpack(e){return new this(e.readUint32(),e.readFloat32())}dispatch(){Tegaki.setToolFlow(this.value)}}class TegakiEventPreserveAlpha extends TegakiEvent_c{constructor(e,t){super(),this.timeStamp=e,this.value=t,this.type=TegakiEvents[this.constructor.name][0],this.coalesce=!0}dispatch(){Tegaki.setToolPreserveAlpha(!!this.value)}}class TegakiEventSetToolSizeDynamics extends TegakiEvent_c{constructor(e,t){super(),this.timeStamp=e,this.value=t,this.type=TegakiEvents[this.constructor.name][0],this.coalesce=!0}dispatch(){Tegaki.setToolSizeDynamics(!!this.value)}}class TegakiEventSetToolAlphaDynamics extends TegakiEvent_c{constructor(e,t){super(),this.timeStamp=e,this.value=t,this.type=TegakiEvents[this.constructor.name][0],this.coalesce=!0}dispatch(){Tegaki.setToolAlphaDynamics(!!this.value)}}class TegakiEventSetToolFlowDynamics extends TegakiEvent_c{constructor(e,t){super(),this.timeStamp=e,this.value=t,this.type=TegakiEvents[this.constructor.name][0],this.coalesce=!0}dispatch(){Tegaki.setToolFlowDynamics(!!this.value)}}class TegakiEventSetToolTip extends TegakiEvent_c{constructor(e,t){super(),this.timeStamp=e,this.value=t,this.type=TegakiEvents[this.constructor.name][0],this.coalesce=!0}dispatch(){Tegaki.setToolTip(this.value)}}class TegakiEventAddLayer extends TegakiEvent_void{constructor(e){super(),this.timeStamp=e,this.type=TegakiEvents[this.constructor.name][0]}static unpack(e){return super.unpack(e)}dispatch(){Tegaki.addLayer()}}class TegakiEventDeleteLayers extends TegakiEvent_void{constructor(e){super(),this.timeStamp=e,this.type=TegakiEvents[this.constructor.name][0]}static unpack(e){return super.unpack(e)}dispatch(){Tegaki.deleteSelectedLayers()}}class TegakiEventMoveLayers extends TegakiEvent_c{constructor(e,t){super(),this.timeStamp=e,this.value=t,this.type=TegakiEvents[this.constructor.name][0]}dispatch(){Tegaki.moveSelectedLayers(this.value)}}class TegakiEventMergeLayers extends TegakiEvent_void{constructor(e){super(),this.timeStamp=e,this.type=TegakiEvents[this.constructor.name][0]}static unpack(e){return super.unpack(e)}dispatch(){Tegaki.mergeSelectedLayers()}}class TegakiEventToggleLayerVisibility extends TegakiEvent_c{constructor(e,t){super(),this.timeStamp=e,this.value=t,this.type=TegakiEvents[this.constructor.name][0]}dispatch(){Tegaki.toggleLayerVisibility(this.value)}}class TegakiEventSetActiveLayer extends TegakiEvent_c{constructor(e,t){super(),this.timeStamp=e,this.value=t,this.type=TegakiEvents[this.constructor.name][0]}dispatch(){Tegaki.setActiveLayer(this.value)}}class TegakiEventToggleLayerSelection extends TegakiEvent_c{constructor(e,t){super(),this.timeStamp=e,this.value=t,this.type=TegakiEvents[this.constructor.name][0]}dispatch(){Tegaki.toggleSelectedLayer(this.value)}}class TegakiEventSetSelectedLayersAlpha{constructor(e,t){this.timeStamp=e,this.value=t,this.type=TegakiEvents[this.constructor.name][0],this.coalesce=!0,this.size=9}pack(e){e.writeUint8(this.type),e.writeUint32(this.timeStamp),e.writeFloat32(this.value)}static unpack(e){return new this(e.readUint32(),e.readFloat32())}dispatch(){Tegaki.setSelectedLayersAlpha(this.value)}}const TegakiEvents=Object.freeze({TegakiEventPrelude:[0,TegakiEventPrelude],TegakiEventDrawStart:[1,TegakiEventDrawStart],TegakiEventDraw:[2,TegakiEventDraw],TegakiEventDrawCommit:[3,TegakiEventDrawCommit],TegakiEventUndo:[4,TegakiEventUndo],TegakiEventRedo:[5,TegakiEventRedo],TegakiEventSetColor:[6,TegakiEventSetColor],TegakiEventDrawStartNoP:[7,TegakiEventDrawStartNoP],TegakiEventDrawNoP:[8,TegakiEventDrawNoP],TegakiEventSetTool:[10,TegakiEventSetTool],TegakiEventSetToolSize:[11,TegakiEventSetToolSize],TegakiEventSetToolAlpha:[12,TegakiEventSetToolAlpha],TegakiEventSetToolSizeDynamics:[13,TegakiEventSetToolSizeDynamics],TegakiEventSetToolAlphaDynamics:[14,TegakiEventSetToolAlphaDynamics],TegakiEventSetToolTip:[15,TegakiEventSetToolTip],TegakiEventPreserveAlpha:[16,TegakiEventPreserveAlpha],TegakiEventSetToolFlowDynamics:[17,TegakiEventSetToolFlowDynamics],TegakiEventSetToolFlow:[18,TegakiEventSetToolFlow],TegakiEventAddLayer:[20,TegakiEventAddLayer],TegakiEventDeleteLayers:[21,TegakiEventDeleteLayers],TegakiEventMoveLayers:[22,TegakiEventMoveLayers],TegakiEventMergeLayers:[23,TegakiEventMergeLayers],TegakiEventToggleLayerVisibility:[24,TegakiEventToggleLayerVisibility],TegakiEventSetActiveLayer:[25,TegakiEventSetActiveLayer],TegakiEventToggleLayerSelection:[26,TegakiEventToggleLayerSelection],TegakiEventSetSelectedLayersAlpha:[27,TegakiEventSetSelectedLayersAlpha],TegakiEventHistoryDummy:[254,TegakiEventHistoryDummy],TegakiEventConclusion:[255,TegakiEventConclusion]});class TegakiReplayRecorder{constructor(){this.formatVersion=1,this.compressed=!0,this.tegakiVersion=Tegaki.VERSION.split(".").map((e=>+e)),this.canvasWidth=Tegaki.baseWidth,this.canvasHeight=Tegaki.baseHeight,this.bgColor=$T.hexToRgb(Tegaki.bgColor),this.toolColor=$T.hexToRgb(Tegaki.toolColor),this.toolId=Tegaki.tools[Tegaki.defaultTool].id,this.toolList=this.buildToolList(Tegaki.tools),this.startTimeStamp=0,this.endTimeStamp=0,this.recording=!1,this.events=[],this.mimeType="application/octet-stream"}buildToolList(e){var t,r,i;for(t in i=[],e)r=e[t],i.push({id:r.id,size:r.size,alpha:r.alpha,flow:r.flow,step:r.step,sizeDynamicsEnabled:+r.sizeDynamicsEnabled,alphaDynamicsEnabled:+r.alphaDynamicsEnabled,flowDynamicsEnabled:+r.flowDynamicsEnabled,usePreserveAlpha:+r.usePreserveAlpha,tipId:r.tipId});return i}start(){this.recording||(this.endTimeStamp>0&&(this.events.pop(),this.endTimeStamp=0),0===this.startTimeStamp&&(this.events.push(new TegakiEventPrelude(performance.now())),this.startTimeStamp=Date.now()),this.recording=!0)}stop(){0!==this.startTimeStamp&&this.recording&&(this.events.push(new TegakiEventConclusion(performance.now())),this.endTimeStamp=Date.now(),this.recording=!1)}push(e){this.recording&&(e.coalesce&&this.events[this.events.length-1].type===e.type?this.events[this.events.length-1]=e:this.events.push(e))}getEventStackSize(){var e,t;for(e of(t=4,this.events))t+=e.size;return t}getHeaderSize(){return 12}getMetaSize(){return 21}getToolSize(){return 19}getToolListSize(){return 2+this.toolList.length*this.getToolSize()}writeToolList(e){var t,r,i;for(t of(i=[["id","Uint8"],["size","Uint8"],["alpha","Float32"],["step","Float32"],["sizeDynamicsEnabled","Uint8"],["alphaDynamicsEnabled","Uint8"],["usePreserveAlpha","Uint8"],["tipId","Int8"],["flow","Float32"],["flowDynamicsEnabled","Uint8"]],e.writeUint8(this.toolList.length),e.writeUint8(this.getToolSize()),this.toolList))for(r of i)e["write"+r[1]](t[r[0]])}writeMeta(e){e.writeUint16(this.getMetaSize()),e.writeUint32(Math.ceil(this.startTimeStamp/1e3)),e.writeUint32(Math.ceil(this.endTimeStamp/1e3)),e.writeUint16(this.canvasWidth),e.writeUint16(this.canvasHeight),e.writeUint8(this.bgColor[0]),e.writeUint8(this.bgColor[1]),e.writeUint8(this.bgColor[2]),e.writeUint8(this.toolColor[0]),e.writeUint8(this.toolColor[1]),e.writeUint8(this.toolColor[2]),e.writeUint8(this.toolId)}writeEventStack(e){var t;for(t of(e.writeUint32(this.events.length),this.events))t.pack(e)}writeHeader(e,t){e.writeUint8(84),e.writeUint8(71),e.writeUint8(75),e.writeUint8(+this.compressed),e.writeUint32(t),e.writeUint8(this.tegakiVersion[0]),e.writeUint8(this.tegakiVersion[1]),e.writeUint8(this.tegakiVersion[2]),e.writeUint8(this.formatVersion)}compressData(e){return UZIP.deflateRaw(new Uint8Array(e.buf),{level:9})}toUint8Array(){var e,t,r,i,n,s;return this.startTimeStamp&&this.endTimeStamp?(e=this.getHeaderSize(),t=this.getMetaSize()+this.getToolListSize()+this.getEventStackSize(),r=new ArrayBuffer(t),i=new TegakiBinWriter(r),this.writeMeta(i),this.writeToolList(i),this.writeEventStack(i),n=this.compressData(i),i=new TegakiBinWriter(new ArrayBuffer(e+n.length)),this.writeHeader(i,t),(s=new Uint8Array(i.buf)).set(n,e),s):null}toBlob(){var e=this.toUint8Array();return e?new Blob([e.buffer],{type:this.mimeType}):null}}class TegakiReplayViewer{constructor(){this.formatVersion=1,this.compressed=!0,this.tegakiVersion=[0,0,0],this.dataSize=0,this.canvasWidth=0,this.canvasHeight=0,this.bgColor=[0,0,0],this.toolColor=[0,0,0],this.toolId=1,this.toolMap={},this.startTimeStamp=0,this.endTimeStamp=0,this.loaded=!1,this.playing=!1,this.gapless=!0,this.autoPaused=!1,this.destroyed=!1,this.speedIndex=1,this.speedList=[.5,1,2,5,10,25],this.speed=this.speedList[this.speedIndex],this.maxEventsPerFrame=50,this.maxEventCount=864e4,this.events=[],this.preludePos=0,this.currentPos=0,this.conclusionPos=0,this.duration=0,this.playTimeStart=0,this.playTimeCurrent=0,this.eventIndex=0,this.maxCanvasWH=8192,this.maxGapTime=3e3,this.uiAccTime=0,this.onFrameThis=this.onFrame.bind(this)}destroy(){this.destroyed=!0,this.pause(),this.events=null}speedUp(){this.speedIndex+1<this.speedList.length&&(this.speed=this.speedList[++this.speedIndex])}slowDown(){this.speedIndex-1>=0&&(this.speed=this.speedList[--this.speedIndex])}toggleGapless(){this.gapless=!this.gapless}getCurrentPos(){return this.currentPos}getDuration(){return this.duration}loadFromURL(e){fetch(e).then((e=>this.onResponseReady(e))).catch((e=>this.onLoadError(e)))}onResponseReady(e){e.ok?e.arrayBuffer().then((e=>this.onResponseBodyReady(e))).catch((e=>this.onLoadError(e))):this.onLoadError(e.statusText)}onResponseBodyReady(e){this.loadFromBuffer(e),Tegaki.onReplayLoaded()}onLoadError(e){TegakiUI.printMsg(TegakiStrings.errorLoadReplay+e,0)}autoPause(){this.autoPaused=!0,this.pause()}pause(e){window.cancelAnimationFrame(this.onFrameThis),this.playing=!1,e&&(this.currentPos=0,this.eventIndex=0),Tegaki.onReplayTimeChanged(),Tegaki.onReplayPlayPauseChanged()}rewind(){this.autoPaused=!1,this.pause(!0),Tegaki.onReplayReset()}play(){this.playTimeStart=performance.now(),this.playTimeCurrent=this.playTimeStart,this.playing=!0,this.autoPaused=!1,this.uiAccTime=0,Tegaki.onReplayPlayPauseChanged(),window.requestAnimationFrame(this.onFrameThis)}togglePlayPause(){this.playing?this.pause():this.play()}onFrame(e){var t=e-this.playTimeCurrent;this.playing&&(this.playTimeCurrent=e,this.step(t),this.uiAccTime+=t,this.uiAccTime>1e3&&(Tegaki.onReplayTimeChanged(),this.uiAccTime=0),this.currentPos<this.duration?window.requestAnimationFrame(this.onFrameThis):this.pause())}step(e){var t,r,i;for(this.currentPos+=e*this.speed,r=this.currentPos+this.preludePos,this.gapless&&this.eventIndex<this.events.length&&(t=this.events[this.eventIndex]).timeStamp-r>this.maxGapTime&&(this.currentPos=t.timeStamp-this.preludePos,r=t.timeStamp),i=0;this.eventIndex<this.events.length&&(t=this.events[this.eventIndex]).timeStamp<=r;){if(i>=this.maxEventsPerFrame){this.currentPos=t.timeStamp-this.preludePos;break}t.dispatch(),++this.eventIndex,++i}}getEventIdMap(){var e,t,r;for(t in e={},TegakiEvents)e[(r=TegakiEvents[t])[0]]=r[1];return e}readToolMap(e){var t,r,i,n,s,a,o;for(this.toolMap={},a=[["id","Uint8"],["size","Uint8"],["alpha","Float32"],["step","Float32"],["sizeDynamicsEnabled","Uint8"],["alphaDynamicsEnabled","Uint8"],["usePreserveAlpha","Uint8"],["tipId","Int8"],["flow","Float32"],["flowDynamicsEnabled","Uint8"]],r=e.readUint8(),i=e.readUint8(),t=0;t<r;++t){for(s of(o=e.pos+i,n={},a)){if(e.pos>=o)break;n[s[0]]=e["read"+s[1]]()}this.toolMap[n.id]=n,e.pos=o}}readHeader(e){if("TGK"!==String.fromCharCode(e.readUint8(),e.readUint8(),e.readUint8()))throw"invalid header";this.compressed=1===e.readUint8(),this.dataSize=e.readUint32(),this.tegakiVersion[0]=e.readUint8(),this.tegakiVersion[1]=e.readUint8(),this.tegakiVersion[2]=e.readUint8(),this.formatVersion=e.readUint8()}decompressData(e){return UZIP.inflateRaw(new Uint8Array(e.buf,e.pos),new Uint8Array(this.dataSize))}readMeta(e){var t,r;if(r=e.readUint16(),t=e.pos+r-2,this.startTimeStamp=1e3*e.readUint32(),this.endTimeStamp=1e3*e.readUint32(),this.canvasWidth=e.readUint16(),this.canvasHeight=e.readUint16(),this.canvasWidth>this.maxCanvasWH||this.canvasHeight>this.maxCanvasWH)throw"canvas too large";this.bgColor[0]=e.readUint8(),this.bgColor[1]=e.readUint8(),this.bgColor[2]=e.readUint8(),this.toolColor[0]=e.readUint8(),this.toolColor[1]=e.readUint8(),this.toolColor[2]=e.readUint8(),this.toolId=e.readUint8(),e.pos=t}readEventStack(e){var t,r,i,n,s;if(s=this.getEventIdMap(),(r=e.readUint32())<1||r>this.maxEventCount)throw"invalid event count";for(t=0;t<r;++t){if(!(i=s[e.readUint8()]))throw"invalid event id";n=i.unpack(e),this.events.push(n)}if(this.events[0].type!==TegakiEvents.TegakiEventPrelude[0])throw"invalid prelude";if(this.events[r-1].type!==TegakiEvents.TegakiEventConclusion[0])throw"invalid conclusion";if(this.preludePos=this.events[0].timeStamp,this.conclusionPos=this.events[r-1].timeStamp,this.duration=this.conclusionPos-this.preludePos,this.duration<=0)throw"invalid duration"}loadFromBuffer(e){var t,r;return!this.destroyed&&!this.loaded&&(t=new TegakiBinReader(e),this.readHeader(t),r=this.decompressData(t),t=new TegakiBinReader(r.buffer),this.readMeta(t),this.readToolMap(t),this.readEventStack(t),this.loaded=!0,!0)}}var TegakiUI={draggedNode:null,draggedLabelLastX:0,draggedLabelFn:null,statusTimeout:0,layerPreviewCtxCache:new WeakMap,getLayerPreviewSize:function(){return $T.calcThumbSize(Tegaki.baseWidth,Tegaki.baseHeight,24)},setupDragLabel:function(e,t){TegakiUI.draggedLabelFn=t,TegakiUI.draggedLabelLastX=e.clientX,$T.on(document,"pointermove",TegakiUI.processDragLabel),$T.on(document,"pointerup",TegakiUI.clearDragLabel)},processDragLabel:function(e){TegakiUI.draggedLabelFn.call(Tegaki,e.clientX-TegakiUI.draggedLabelLastX),TegakiUI.draggedLabelLastX=e.clientX},clearDragLabel:function(e){$T.off(document,"pointermove",TegakiUI.processDragLabel),$T.off(document,"pointerup",TegakiUI.clearDragLabel)},printMsg:function(e,t=5e3){TegakiUI.clearMsg(),$T.id("tegaki-status-output").textContent=e,t>0&&(TegakiUI.statusTimeout=setTimeout(TegakiUI.clearMsg,5e3))},clearMsg:function(){TegakiUI.statusTimeout&&(clearTimeout(TegakiUI.statusTimeout),TegakiUI.statusTimeout=0),$T.id("tegaki-status-output").textContent=""},buildUI:function(){var e,t,r,i,n,s;return(e=$T.el("div")).id="tegaki",(r=$T.el("div")).id="tegaki-menu-cnt",Tegaki.replayMode?(r.appendChild(TegakiUI.buildViewerMenuBar()),r.appendChild(TegakiUI.buildReplayControls())):r.appendChild(TegakiUI.buildMenuBar()),r.appendChild(TegakiUI.buildToolModeBar()),e.appendChild(r),e.appendChild(TegakiUI.buildDummyFilePicker()),(t=$T.el("div")).id="tegaki-tools-cnt",t.appendChild(TegakiUI.buildToolsMenu()),e.appendChild(t),[s,n]=TegakiUI.buildCanvasCnt(),e.appendChild(s),(i=$T.el("div")).id="tegaki-ctrl-cnt",i.appendChild(TegakiUI.buildZoomCtrlGroup()),i.appendChild(TegakiUI.buildColorCtrlGroup(Tegaki.toolColor)),i.appendChild(TegakiUI.buildSizeCtrlGroup()),i.appendChild(TegakiUI.buildAlphaCtrlGroup()),i.appendChild(TegakiUI.buildFlowCtrlGroup()),i.appendChild(TegakiUI.buildLayersCtrlGroup()),e.appendChild(i),e.appendChild(TegakiUI.buildStatusCnt()),[e,s,n]},buildDummyFilePicker:function(){var e=$T.el("input");return e.type="file",e.id="tegaki-filepicker",e.className="tegaki-hidden",e.accept="image/png, image/jpeg",$T.on(e,"change",Tegaki.onOpenFileSelected),e},buildMenuBar:function(){var e,t;return(e=$T.el("div")).id="tegaki-menu-bar",(t=$T.el("span")).className="tegaki-mb-btn",t.textContent=TegakiStrings.newCanvas,$T.on(t,"click",Tegaki.onNewClick),e.appendChild(t),(t=$T.el("span")).className="tegaki-mb-btn",t.textContent=TegakiStrings.open,$T.on(t,"click",Tegaki.onOpenClick),e.appendChild(t),(t=$T.el("span")).className="tegaki-mb-btn",t.textContent=TegakiStrings.export,$T.on(t,"click",Tegaki.onExportClick),e.appendChild(t),(t=$T.el("span")).id="tegaki-undo-btn",t.className="tegaki-mb-btn",t.textContent=TegakiStrings.undo,t.title=TegakiKeybinds.getCaption("undo"),$T.on(t,"click",Tegaki.onUndoClick),e.appendChild(t),(t=$T.el("span")).id="tegaki-redo-btn",t.className="tegaki-mb-btn",t.textContent=TegakiStrings.redo,t.title=TegakiKeybinds.getCaption("redo"),$T.on(t,"click",Tegaki.onRedoClick),e.appendChild(t),(t=$T.el("span")).className="tegaki-mb-btn",t.textContent=TegakiStrings.close,$T.on(t,"click",Tegaki.onCancelClick),e.appendChild(t),(t=$T.el("span")).id="tegaki-finish-btn",t.className="tegaki-mb-btn",t.textContent=TegakiStrings.finish,$T.on(t,"click",Tegaki.onDoneClick),e.appendChild(t),e},buildViewerMenuBar:function(){var e,t;return(e=$T.el("div")).id="tegaki-menu-bar",(t=$T.el("span")).id="tegaki-finish-btn",t.className="tegaki-mb-btn",t.textContent=TegakiStrings.close,$T.on(t,"click",Tegaki.onCloseViewerClick),e.appendChild(t),e},buildToolModeBar:function(){var e,t,r,i;return(e=$T.el("div")).id="tegaki-toolmode-bar",Tegaki.tool||e.classList.add("tegaki-hidden"),(t=$T.el("span")).id="tegaki-tool-mode-dynamics",t.className="tegaki-toolmode-grp",(r=$T.el("span")).className="tegaki-toolmode-lbl",r.textContent=TegakiStrings.pressure,t.appendChild(r),(r=$T.el("span")).id="tegaki-tool-mode-dynamics-ctrl",r.className="tegaki-toolmode-ctrl",(i=$T.el("span")).id="tegaki-tool-mode-dynamics-size",i.className="tegaki-sw-btn",i.textContent=TegakiStrings.size,$T.on(i,"mousedown",Tegaki.onToolPressureSizeClick),r.appendChild(i),(i=$T.el("span")).id="tegaki-tool-mode-dynamics-alpha",i.className="tegaki-sw-btn",i.textContent=TegakiStrings.alpha,$T.on(i,"mousedown",Tegaki.onToolPressureAlphaClick),r.appendChild(i),(i=$T.el("span")).id="tegaki-tool-mode-dynamics-flow",i.className="tegaki-sw-btn",i.textContent=TegakiStrings.flow,$T.on(i,"mousedown",Tegaki.onToolPressureFlowClick),r.appendChild(i),t.appendChild(r),e.appendChild(t),(t=$T.el("span")).id="tegaki-tool-mode-mask",t.className="tegaki-toolmode-grp",(r=$T.el("span")).id="tegaki-toolmode-ctrl-tip",r.className="tegaki-toolmode-ctrl",(i=$T.el("span")).id="tegaki-tool-mode-mask-alpha",i.className="tegaki-sw-btn",i.textContent=TegakiStrings.preserveAlpha,$T.on(i,"mousedown",Tegaki.onToolPreserveAlphaClick),r.appendChild(i),t.appendChild(r),e.appendChild(t),(t=$T.el("span")).id="tegaki-tool-mode-tip",t.className="tegaki-toolmode-grp",(r=$T.el("span")).className="tegaki-toolmode-lbl",r.textContent=TegakiStrings.tip,t.appendChild(r),(r=$T.el("span")).id="tegaki-tool-mode-tip-ctrl",r.className="tegaki-toolmode-ctrl",t.appendChild(r),e.appendChild(t),e},buildToolsMenu:function(){var e,t,r,i;for(i in(e=$T.el("div")).id="tegaki-tools-grid",Tegaki.tools)(t=$T.el("span")).setAttribute("data-tool",i),r=TegakiStrings[i],Tegaki.tools[i].keybind&&(r+=" ("+Tegaki.tools[i].keybind.toUpperCase()+")"),t.setAttribute("title",r),t.id="tegaki-tool-btn-"+i,t.className="tegaki-tool-btn tegaki-icon tegaki-"+i,$T.on(t,"click",Tegaki.onToolClick),e.appendChild(t);return e},buildCanvasCnt:function(){var e,t,r;return(e=$T.el("div")).id="tegaki-canvas-cnt",(t=$T.el("div")).id="tegaki-layers-wrap",(r=$T.el("div")).id="tegaki-layers",t.appendChild(r),e.appendChild(t),[e,r]},buildCtrlGroup:function(e,t){var r,i;return(r=$T.el("div")).className="tegaki-ctrlgrp",e&&(r.id="tegaki-ctrlgrp-"+e),void 0!==t&&((i=$T.el("div")).className="tegaki-ctrlgrp-title",i.textContent=t,r.appendChild(i)),r},buildLayersCtrlGroup:function(){var e,t,r,i;return t=this.buildCtrlGroup("layers",TegakiStrings.layers),(r=$T.el("div")).id="tegaki-layers-opts",(i=$T.el("div")).id="tegaki-layer-alpha-cell",(e=$T.el("span")).className="tegaki-label-xs tegaki-lbl-c tegaki-drag-lbl",e.textContent=TegakiStrings.alpha,$T.on(e,"pointerdown",Tegaki.onLayerAlphaDragStart),i.appendChild(e),(e=$T.el("input")).id="tegaki-layer-alpha-opt",e.className="tegaki-stealth-input tegaki-range-lbl-xs",e.setAttribute("maxlength",3),$T.on(e,"input",Tegaki.onLayerAlphaChange),i.appendChild(e),r.appendChild(i),t.appendChild(r),(e=$T.el("div")).id="tegaki-layers-grid",t.appendChild(e),(r=$T.el("div")).id="tegaki-layers-ctrl",(e=$T.el("span")).title=TegakiStrings.addLayer,e.className="tegaki-ui-btn tegaki-icon tegaki-plus",$T.on(e,"click",Tegaki.onLayerAddClick),r.appendChild(e),(e=$T.el("span")).title=TegakiStrings.delLayers,e.className="tegaki-ui-btn tegaki-icon tegaki-minus",$T.on(e,"click",Tegaki.onLayerDeleteClick),r.appendChild(e),(e=$T.el("span")).id="tegaki-layer-merge",e.title=TegakiStrings.mergeLayers,e.className="tegaki-ui-btn tegaki-icon tegaki-level-down",$T.on(e,"click",Tegaki.onMergeLayersClick),r.appendChild(e),(e=$T.el("span")).id="tegaki-layer-up",e.title=TegakiStrings.moveLayerUp,e.setAttribute("data-up","1"),e.className="tegaki-ui-btn tegaki-icon tegaki-up-open",$T.on(e,"click",Tegaki.onMoveLayerClick),r.appendChild(e),(e=$T.el("span")).id="tegaki-layer-down",e.title=TegakiStrings.moveLayerDown,e.className="tegaki-ui-btn tegaki-icon tegaki-down-open",$T.on(e,"click",Tegaki.onMoveLayerClick),r.appendChild(e),t.appendChild(r),t},buildSizeCtrlGroup:function(){var e,t,r;return t=this.buildCtrlGroup("size",TegakiStrings.size),(r=$T.el("div")).className="tegaki-ctrlrow",(e=$T.el("input")).id="tegaki-size",e.className="tegaki-ctrl-range",e.min=1,e.max=Tegaki.maxSize,e.type="range",e.title=TegakiKeybinds.getCaption("toolSize"),$T.on(e,"input",Tegaki.onToolSizeChange),r.appendChild(e),(e=$T.el("input")).id="tegaki-size-lbl",e.setAttribute("maxlength",3),e.className="tegaki-stealth-input tegaki-range-lbl",$T.on(e,"input",Tegaki.onToolSizeChange),r.appendChild(e),t.appendChild(r),t},buildAlphaCtrlGroup:function(){var e,t,r;return t=this.buildCtrlGroup("alpha",TegakiStrings.alpha),(r=$T.el("div")).className="tegaki-ctrlrow",(e=$T.el("input")).id="tegaki-alpha",e.className="tegaki-ctrl-range",e.min=0,e.max=100,e.step=1,e.type="range",$T.on(e,"input",Tegaki.onToolAlphaChange),r.appendChild(e),(e=$T.el("input")).id="tegaki-alpha-lbl",e.setAttribute("maxlength",3),e.className="tegaki-stealth-input tegaki-range-lbl",$T.on(e,"input",Tegaki.onToolAlphaChange),r.appendChild(e),t.appendChild(r),t},buildFlowCtrlGroup:function(){var e,t,r;return t=this.buildCtrlGroup("flow",TegakiStrings.flow),(r=$T.el("div")).className="tegaki-ctrlrow",(e=$T.el("input")).id="tegaki-flow",e.className="tegaki-ctrl-range",e.min=0,e.max=100,e.step=1,e.type="range",$T.on(e,"input",Tegaki.onToolFlowChange),r.appendChild(e),(e=$T.el("input")).id="tegaki-flow-lbl",e.setAttribute("maxlength",3),e.className="tegaki-stealth-input tegaki-range-lbl",$T.on(e,"input",Tegaki.onToolFlowChange),r.appendChild(e),t.appendChild(r),t},buildZoomCtrlGroup:function(){var e,t,r;return r=this.buildCtrlGroup("zoom",TegakiStrings.zoom),(t=$T.el("div")).className="tegaki-ui-btn tegaki-icon tegaki-plus",t.id="tegaki-zoomin-btn",t.setAttribute("data-in",1),$T.on(t,"click",Tegaki.onZoomChange),r.appendChild(t),(t=$T.el("div")).className="tegaki-ui-btn tegaki-icon tegaki-minus",t.id="tegaki-zoomout-btn",t.setAttribute("data-out",1),$T.on(t,"click",Tegaki.onZoomChange),r.appendChild(t),(e=$T.el("div")).id="tegaki-zoom-lbl",r.appendChild(e),r},buildColorCtrlGroup:function(e){var t,r,i,n,s,a,o,c,l;for(a=/ Edge\//i.test(window.navigator.userAgent),n=this.buildCtrlGroup("color",TegakiStrings.color),(r=$T.el("div")).id="tegaki-color-ctrl",(t=$T.el("div")).id="tegaki-color",a&&t.classList.add("tegaki-hidden"),t.style.backgroundColor=e,$T.on(t,"mousedown",Tegaki.onMainColorClick),r.appendChild(t),(t=$T.el("div")).id="tegaki-palette-switcher",(i=$T.el("span")).id="tegaki-palette-prev-btn",i.title=TegakiStrings.switchPalette,i.setAttribute("data-prev","1"),i.className="tegaki-ui-btn tegaki-icon tegaki-left-open tegaki-disabled",$T.on(i,"click",Tegaki.onSwitchPaletteClick),t.appendChild(i),(i=$T.el("span")).id="tegaki-palette-next-btn",i.title=TegakiStrings.switchPalette,i.className="tegaki-ui-btn tegaki-icon tegaki-right-open",$T.on(i,"click",Tegaki.onSwitchPaletteClick),t.appendChild(i),r.appendChild(t),n.appendChild(r),(r=$T.el("div")).id="tegaki-color-grids",o=0;o<TegakiColorPalettes.length;++o){for(s of((t=$T.el("div")).setAttribute("data-id",o),l="tegaki-color-grid",(c=TegakiColorPalettes[o]).length<=18?l+=" tegaki-color-grid-20":l+=" tegaki-color-grid-15",o>0&&(l+=" tegaki-hidden"),t.className=l,c))(i=$T.el("div")).title=TegakiStrings.paletteSlotReplace,i.className="tegaki-color-btn",i.setAttribute("data-color",s),i.style.backgroundColor=s,$T.on(i,"mousedown",Tegaki.onPaletteColorClick),t.appendChild(i);r.appendChild(t)}return n.appendChild(r),(t=$T.el("input")).id="tegaki-colorpicker",!a&&t.classList.add("tegaki-invis"),t.value=s,t.type="color",$T.on(t,"change",Tegaki.onColorPicked),n.appendChild(t),n},buildStatusCnt:function(){var e,t;return(e=$T.el("div")).id="tegaki-status-cnt",Tegaki.saveReplay&&((t=$T.el("div")).id="tegaki-status-replay",t.textContent="⬤",t.setAttribute("title",TegakiStrings.recordingEnabled),e.appendChild(t)),(t=$T.el("div")).id="tegaki-status-output",e.appendChild(t),(t=$T.el("div")).id="tegaki-status-version",t.textContent="tegaki.js v"+Tegaki.VERSION,e.appendChild(t),e},buildReplayControls:function(){var e,t,r;return(e=$T.el("div")).id="tegaki-replay-controls",e.className="tegaki-hidden",(t=$T.el("span")).id="tegaki-replay-gapless-btn",t.className="tegaki-ui-cb-w",$T.on(t,"click",Tegaki.onReplayGaplessClick),(r=$T.el("span")).id="tegaki-replay-gapless-cb",r.className="tegaki-ui-cb",t.appendChild(r),(r=$T.el("span")).className="tegaki-menu-lbl",r.textContent=TegakiStrings.gapless,t.appendChild(r),e.appendChild(t),(t=$T.el("span")).id="tegaki-replay-play-btn",t.className="tegaki-ui-btn tegaki-icon tegaki-play",t.setAttribute("title",TegakiStrings.play),$T.on(t,"click",Tegaki.onReplayPlayPauseClick),e.appendChild(t),(t=$T.el("span")).className="tegaki-ui-btn tegaki-icon tegaki-to-start",t.setAttribute("title",TegakiStrings.rewind),$T.on(t,"click",Tegaki.onReplayRewindClick),e.appendChild(t),(t=$T.el("span")).id="tegaki-replay-slower-btn",t.className="tegaki-ui-btn tegaki-icon tegaki-fast-bw",t.setAttribute("title",TegakiStrings.slower),$T.on(t,"click",Tegaki.onReplaySlowDownClick),e.appendChild(t),(r=$T.el("span")).id="tegaki-replay-speed-lbl",r.className="tegaki-menu-lbl",r.textContent="1.0",e.appendChild(r),(t=$T.el("span")).id="tegaki-replay-faster-btn",t.className="tegaki-ui-btn tegaki-icon tegaki-fast-fw",t.setAttribute("title",TegakiStrings.faster),$T.on(t,"click",Tegaki.onReplaySpeedUpClick),e.appendChild(t),(r=$T.el("span")).id="tegaki-replay-now-lbl",r.className="tegaki-menu-lbl",r.textContent="00:00",e.appendChild(r),(r=$T.el("span")).id="tegaki-replay-end-lbl",r.className="tegaki-menu-lbl",r.textContent="00:00",e.appendChild(r),e},buildLayerGridCell:function(e){var t,r,i;return(t=$T.el("div")).id="tegaki-layers-cell-"+e.id,t.className="tegaki-layers-cell",t.setAttribute("data-id",e.id),t.draggable=!0,t.setAttribute("data-id",e.id),$T.on(t,"pointerdown",TegakiUI.onLayerSelectorPtrDown),$T.on(t,"pointerup",Tegaki.onLayerSelectorClick),$T.on(t,"dragstart",TegakiUI.onLayerDragStart),$T.on(t,"dragover",TegakiUI.onLayerDragOver),$T.on(t,"drop",TegakiUI.onLayerDragDrop),$T.on(t,"dragend",TegakiUI.onLayerDragEnd),$T.on(t,"dragleave",TegakiUI.onLayerDragLeave),$T.on(t,"dragexit",TegakiUI.onLayerDragLeave),(i=$T.el("div")).className="tegaki-layers-cell-v",(r=$T.el("span")).id="tegaki-layers-cb-v-"+e.id,r.className="tegaki-ui-cb",r.setAttribute("data-id",e.id),r.title=TegakiStrings.toggleVisibility,$T.on(r,"click",Tegaki.onLayerToggleVisibilityClick),e.visible&&(r.className+=" tegaki-ui-cb-a"),i.appendChild(r),t.appendChild(i),(i=$T.el("div")).className="tegaki-layers-cell-p",(r=$T.el("canvas")).id="tegaki-layers-p-canvas-"+e.id,r.className="tegaki-alpha-bg-xs",[r.width,r.height]=TegakiUI.getLayerPreviewSize(),i.appendChild(r),t.appendChild(i),(i=$T.el("div")).className="tegaki-layers-cell-n",(r=$T.el("div")).id="tegaki-layer-name-"+e.id,r.className="tegaki-ellipsis",r.setAttribute("data-id",e.id),r.textContent=e.name,$T.on(r,"dblclick",Tegaki.onLayerNameChangeClick),i.appendChild(r),t.appendChild(i),t},onLayerSelectorPtrDown:function(e){"mouse"===e.pointerType?this.hasAttribute("data-nodrag")&&(this.removeAttribute("data-nodrag"),$T.on(this,"dragstart",TegakiUI.onLayerDragStart)):this.hasAttribute("data-nodrag")||(this.setAttribute("data-nodrag",1),$T.off(this,"dragstart",TegakiUI.onLayerDragStart))},onLayerDragStart:function(e){var t,r;e.ctrlKey||(TegakiUI.draggedNode=null,$T.id("tegaki-layers-grid").children[1]?(r=+e.target.getAttribute("data-id"),(t=$T.el("div")).className="tegaki-invis",e.dataTransfer.setDragImage(t,0,0),e.dataTransfer.setData("text/plain",r),e.dataTransfer.effectAllowed="move",TegakiUI.draggedNode=e.target,TegakiUI.updateLayersGridDragExt(!0)):e.preventDefault())},onLayerDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move",TegakiUI.updateLayersGridDragEffect(e.target,+TegakiUI.draggedNode.getAttribute("data-id"))},onLayerDragLeave:function(e){TegakiUI.updateLayersGridDragEffect()},onLayerDragEnd:function(e){TegakiUI.draggedNode=null,TegakiUI.updateLayersGridDragExt(!1),TegakiUI.updateLayersGridDragEffect()},onLayerDragDrop:function(e){var t,r,i;e.preventDefault(),TegakiUI.draggedNode=null,[t]=TegakiUI.layersGridFindDropTgt(e.target),r=+e.dataTransfer.getData("text/plain"),TegakiUI.updateLayersGridDragEffect(e.target.parentNode),TegakiUI.updateLayersGridDragExt(!1),TegakiUI.layersGridCanDrop(t,r)&&(i=t?TegakiLayers.getLayerPosById(t):Tegaki.layers.length,TegakiLayers.selectedLayersHas(r)||Tegaki.setActiveLayer(r),Tegaki.moveSelectedLayers(i))},updateLayersGridDragExt:function(e){var t,r;(t=$T.id("tegaki-layers-grid")).children[1]&&(e?((r=$T.el("div")).id="tegaki-layers-cell-dx",r.draggable=!0,$T.on(r,"dragover",TegakiUI.onLayerDragOver),$T.on(r,"drop",TegakiUI.onLayerDragDrop),t.parentNode.insertBefore(r,t)):(r=$T.id("tegaki-layers-cell-dx"))&&r.parentNode.removeChild(r))},updateLayersGridDragEffect:function(e,t){var r,i;for(r of $T.cls("tegaki-layers-cell-d",$T.id("tegaki-ctrlgrp-layers")))r.classList.remove("tegaki-layers-cell-d");e&&t&&([i,e]=TegakiUI.layersGridFindDropTgt(e),TegakiUI.layersGridCanDrop(i,t)&&(e||(e=$T.id("tegaki-layers-grid")),e.classList.add("tegaki-layers-cell-d")))},layersGridFindDropTgt:function(e){var t,r;for(t=+e.getAttribute("data-id"),r=$T.id("tegaki-ctrlgrp-layers");!e.draggable&&e!==r;)t=+(e=e.parentNode).getAttribute("data-id");return e!==r&&e.draggable?[t,e]:[0,null]},layersGridCanDrop:function(e,t){var r;if(e===t)return!1;if((r=$T.id("tegaki-layers-cell-"+t)).previousElementSibling){if(+r.previousElementSibling.getAttribute("data-id")===e)return!1}else if(!e)return!1;return!0},setReplayMode:function(e){Tegaki.bg.classList[e?"add":"remove"]("tegaki-replay-mode")},onToolChanged:function(){$T.id("tegaki-toolmode-bar").classList.remove("tegaki-hidden"),TegakiUI.updateToolSize(),TegakiUI.updateToolAlpha(),TegakiUI.updateToolFlow(),TegakiUI.updateToolModes()},updateLayerAlphaOpt:function(){$T.id("tegaki-layer-alpha-opt").value=Math.round(100*Tegaki.activeLayer.alpha)},updateLayerName:function(e){var t;(t=$T.id("tegaki-layer-name-"+e.id))&&(t.textContent=e.name)},updateLayerPreview:function(e){var t,r;(t=$T.id("tegaki-layers-p-canvas-"+e.id))&&((r=TegakiUI.getLayerPreviewCtx(e))||((r=t.getContext("2d")).imageSmoothingEnabled=!1,TegakiUI.setLayerPreviewCtx(e,r)),$T.clearCtx(r),r.drawImage(e.canvas,0,0,t.width,t.height))},updateLayerPreviewSize:function(e){var t,r,i;for(r of(i=TegakiUI.getLayerPreviewSize(),Tegaki.layers))(t=$T.id("tegaki-layers-p-canvas-"+r.id))&&([t.width,t.height]=i,e&&TegakiUI.updateLayerPreview(r))},getLayerPreviewCtx:function(e){TegakiUI.layerPreviewCtxCache.get(e)},setLayerPreviewCtx:function(e,t){TegakiUI.layerPreviewCtxCache.set(e,t)},deleteLayerPreviewCtx:function(e){TegakiUI.layerPreviewCtxCache.delete(e)},updateLayersGridClear:function(){$T.id("tegaki-layers-grid").innerHTML=""},updateLayersGrid:function(){var e,t,r;for(e of(r=$T.frag(),Tegaki.layers))t=TegakiUI.buildLayerGridCell(e),r.insertBefore(t,r.firstElementChild);TegakiUI.updateLayersGridClear(),undefined.appendChild(r)},updateLayersGridActive:function(e){var t;(t=$T.cls("tegaki-layers-cell-a",$T.id("tegaki-layers-grid"))[0])&&t.classList.remove("tegaki-layers-cell-a"),(t=$T.id("tegaki-layers-cell-"+e))&&t.classList.add("tegaki-layers-cell-a"),TegakiUI.updateLayerAlphaOpt()},updateLayersGridAdd:function(e,t){var r,i,n;r=TegakiUI.buildLayerGridCell(e),i=$T.id("tegaki-layers-grid"),n=t?$T.id("tegaki-layers-cell-"+t):null,i.insertBefore(r,n)},updateLayersGridRemove:function(e){var t;(t=$T.id("tegaki-layers-cell-"+e))&&t.parentNode.removeChild(t)},updayeLayersGridOrder:function(){var e,t,r;for(e of(t=$T.id("tegaki-layers-grid"),Tegaki.layers))r=$T.id("tegaki-layers-cell-"+e.id),t.insertBefore(r,t.firstElementChild)},updateLayersGridVisibility:function(e,t){var r;(r=$T.id("tegaki-layers-cb-v-"+e))&&(t?r.classList.add("tegaki-ui-cb-a"):r.classList.remove("tegaki-ui-cb-a"))},updateLayersGridSelectedClear:function(){var e,t;for(e of Tegaki.layers)(t=$T.id("tegaki-layers-cell-"+e.id))&&t.classList.remove("tegaki-layers-cell-s")},updateLayersGridSelectedSet:function(e,t){var r;(r=$T.id("tegaki-layers-cell-"+e))&&(t?r.classList.add("tegaki-layers-cell-s"):r.classList.remove("tegaki-layers-cell-s"))},updateToolSize:function(){var e=$T.id("tegaki-ctrlgrp-size");Tegaki.tool.useSize?(e.classList.remove("tegaki-hidden"),$T.id("tegaki-size-lbl").value=Tegaki.tool.size,$T.id("tegaki-size").value=Tegaki.tool.size):e.classList.add("tegaki-hidden")},updateToolAlpha:function(){var e,t=$T.id("tegaki-ctrlgrp-alpha");Tegaki.tool.useAlpha?(t.classList.remove("tegaki-hidden"),e=Math.round(100*Tegaki.tool.alpha),$T.id("tegaki-alpha-lbl").value=e,$T.id("tegaki-alpha").value=e):t.classList.add("tegaki-hidden")},updateToolFlow:function(){var e,t=$T.id("tegaki-ctrlgrp-flow");Tegaki.tool.useFlow?(t.classList.remove("tegaki-hidden"),e=Math.round(100*Tegaki.tool.flow),$T.id("tegaki-flow-lbl").value=e,$T.id("tegaki-flow").value=e):t.classList.add("tegaki-hidden")},updateToolDynamics:function(){var e,t;e=$T.id("tegaki-tool-mode-dynamics"),Tegaki.tool.usesDynamics()?(t=$T.id("tegaki-tool-mode-dynamics-size"),Tegaki.tool.useSizeDynamics?(Tegaki.tool.sizeDynamicsEnabled?t.classList.add("tegaki-sw-btn-a"):t.classList.remove("tegaki-sw-btn-a"),t.classList.remove("tegaki-hidden")):t.classList.add("tegaki-hidden"),t=$T.id("tegaki-tool-mode-dynamics-alpha"),Tegaki.tool.useAlphaDynamics?(Tegaki.tool.alphaDynamicsEnabled?t.classList.add("tegaki-sw-btn-a"):t.classList.remove("tegaki-sw-btn-a"),t.classList.remove("tegaki-hidden")):t.classList.add("tegaki-hidden"),t=$T.id("tegaki-tool-mode-dynamics-flow"),Tegaki.tool.useFlowDynamics?(Tegaki.tool.flowDynamicsEnabled?t.classList.add("tegaki-sw-btn-a"):t.classList.remove("tegaki-sw-btn-a"),t.classList.remove("tegaki-hidden")):t.classList.add("tegaki-hidden"),e.classList.remove("tegaki-hidden")):e.classList.add("tegaki-hidden")},updateToolShape:function(){var e,t,r,i,n;if(t=$T.id("tegaki-tool-mode-tip"),Tegaki.tool.tipList){for(n=Tegaki.tool.tipList,(r=$T.id("tegaki-tool-mode-tip-ctrl")).innerHTML="",e=0;e<n.length;++e)(i=$T.el("span")).id="tegaki-tool-mode-tip-"+e,i.className="tegaki-sw-btn",i.setAttribute("data-id",e),i.textContent=TegakiStrings[n[e]],$T.on(i,"mousedown",Tegaki.onToolTipClick),r.appendChild(i),Tegaki.tool.tipId===e&&i.classList.add("tegaki-sw-btn-a");t.classList.remove("tegaki-hidden")}else t.classList.add("tegaki-hidden")},updateToolPreserveAlpha:function(){var e,t;t=$T.id("tegaki-tool-mode-mask"),Tegaki.tool.usePreserveAlpha?(e=$T.id("tegaki-tool-mode-mask-alpha"),Tegaki.tool.preserveAlphaEnabled?e.classList.add("tegaki-sw-btn-a"):e.classList.remove("tegaki-sw-btn-a"),t.classList.remove("tegaki-hidden")):t.classList.add("tegaki-hidden")},updateToolModes:function(){var e,t;for(e of(TegakiUI.updateToolShape(),TegakiUI.updateToolDynamics(),TegakiUI.updateToolPreserveAlpha(),t=!1,$T.id("tegaki-toolmode-bar").children))t||e.classList.contains("tegaki-hidden")?e.classList.remove("tegaki-ui-borderless"):(e.classList.add("tegaki-ui-borderless"),t=!0)},updateUndoRedo:function(e,t){var r,i;Tegaki.replayMode||(r=$T.id("tegaki-undo-btn").classList,i=$T.id("tegaki-redo-btn").classList,e?r.contains("tegaki-disabled")&&r.remove("tegaki-disabled"):r.contains("tegaki-disabled")||r.add("tegaki-disabled"),t?i.contains("tegaki-disabled")&&i.remove("tegaki-disabled"):i.contains("tegaki-disabled")||i.add("tegaki-disabled"))},updateZoomLevel:function(){$T.id("tegaki-zoom-lbl").textContent=100*Tegaki.zoomFactor+"%",Tegaki.zoomLevel+Tegaki.zoomBaseLevel>=Tegaki.zoomFactorList.length?$T.id("tegaki-zoomin-btn").classList.add("tegaki-disabled"):$T.id("tegaki-zoomin-btn").classList.remove("tegaki-disabled"),Tegaki.zoomLevel+Tegaki.zoomBaseLevel<=0?$T.id("tegaki-zoomout-btn").classList.add("tegaki-disabled"):$T.id("tegaki-zoomout-btn").classList.remove("tegaki-disabled")},updateColorPalette:function(){var e,t;for(e of(t=Tegaki.colorPaletteId,$T.cls("tegaki-color-grid",$T.id("tegaki-color-grids"))))+e.getAttribute("data-id")===t?e.classList.remove("tegaki-hidden"):e.classList.add("tegaki-hidden");e=$T.id("tegaki-palette-prev-btn"),0===t?e.classList.add("tegaki-disabled"):e.classList.remove("tegaki-disabled"),e=$T.id("tegaki-palette-next-btn"),t===TegakiColorPalettes.length-1?e.classList.add("tegaki-disabled"):e.classList.remove("tegaki-disabled")},updateReplayTime:function(e){var t,r,i=Tegaki.replayViewer;(t=i.getCurrentPos())>(r=i.getDuration())&&(t=r),$T.id("tegaki-replay-now-lbl").textContent=$T.msToHms(t),e&&($T.id("tegaki-replay-end-lbl").textContent=$T.msToHms(r))},updateReplayControls:function(){TegakiUI.updateReplayGapless(),TegakiUI.updateReplayPlayPause(),TegakiUI.updateReplaySpeed()},updateReplayGapless:function(){var e,t=Tegaki.replayViewer;e=$T.id("tegaki-replay-gapless-cb"),t.gapless?e.classList.add("tegaki-ui-cb-a"):e.classList.remove("tegaki-ui-cb-a")},updateReplayPlayPause:function(){var e,t=Tegaki.replayViewer;e=$T.id("tegaki-replay-play-btn"),t.playing?(e.classList.remove("tegaki-play"),e.classList.add("tegaki-pause"),e.setAttribute("title",TegakiStrings.pause)):(e.classList.add("tegaki-play"),e.classList.remove("tegaki-pause"),e.setAttribute("title",TegakiStrings.play),t.getCurrentPos()<t.getDuration()?e.classList.remove("tegaki-disabled"):e.classList.add("tegaki-disabled"))},updateReplaySpeed:function(){var e,t=Tegaki.replayViewer;$T.id("tegaki-replay-speed-lbl").textContent=t.speed.toFixed(1),e=$T.id("tegaki-replay-slower-btn"),0===t.speedIndex?e.classList.add("tegaki-disabled"):e.classList.remove("tegaki-disabled"),e=$T.id("tegaki-replay-faster-btn"),t.speedIndex===t.speedList.length-1?e.classList.add("tegaki-disabled"):e.classList.remove("tegaki-disabled")},enableReplayControls:function(e){e?$T.id("tegaki-replay-controls").classList.remove("tegaki-hidden"):$T.id("tegaki-replay-controls").classList.add("tegaki-hidden")},setRecordingStatus:function(e){var t=$T.id("tegaki-status-replay");e?t.classList.remove("tegaki-hidden"):t.classList.add("tegaki-hidden")}},UZIP={};
/*! UZIP.js, © 2018 Photopea, MIT License */async function videoThumbnail(e){return new Promise(((t,r)=>{const i=document.createElement("video");i.setAttribute("src",URL.createObjectURL(e)),i.load(),i.addEventListener("error",(e=>{r(e)})),i.addEventListener("loadedmetadata",(()=>{setTimeout((()=>{i.currentTime=0}),500),i.addEventListener("seeked",(()=>{const e=document.createElement("canvas");e.width=i.videoWidth,e.height=i.videoHeight;const r=e.getContext("2d");r.drawImage(i,0,0,e.width,e.height),r.canvas.toBlob((e=>{t(e)}))}))}))}))}function doModal(e,t,r){try{const i=modal({modal:e});let n;document.body.insertAdjacentHTML("afterbegin",i);const s=document.getElementsByClassName("modal"),a=document.getElementsByClassName("modal-bg");if(window.dispatchEvent(new CustomEvent("showModal",{detail:{modal:s[0]}})),s.length>1){const e=parseInt(document.defaultView.getComputedStyle(s[1],null).getPropertyValue("z-index"));s[0].style.zIndex=e+3,a[0].style.zIndex=e+2}null!=r&&r(),document.getElementById("modalclose").onclick=()=>{removeModal(),clearInterval(n)},document.getElementsByClassName("modal-bg")[0].onclick=()=>{removeModal(),clearInterval(n)};const o=document.getElementById("modalframe");o&&("default"===localStorage.getItem("theme")&&(o.onload=()=>{const e=document.head.querySelector("#theme").href;o.contentDocument.styleSheets[1].ownerNode.href=e}),t&&(n=setInterval((()=>{o&&o.contentDocument.title==__("Success")&&(clearInterval(n),removeModal(),t())}),100)))}catch(e){console.error(e)}}"object"==typeof module&&(module.exports=UZIP),UZIP.inflateRaw=function(e,t){return UZIP.F.inflate(e,t)},UZIP.deflateRaw=function(e,t){null==t&&(t={level:6});var r=new Uint8Array(50+Math.floor(1.1*e.length)),i=UZIP.F.deflateRaw(e,r,i,t.level);return new Uint8Array(r.buffer,0,i)},UZIP.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,r){e[t]=255&r,e[t+1]=r>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,r){e[t]=255&r,e[t+1]=r>>8&255,e[t+2]=r>>16&255,e[t+3]=r>>24&255},readASCII:function(e,t,r){for(var i="",n=0;n<r;n++)i+=String.fromCharCode(e[t+n]);return i},writeASCII:function(e,t,r){for(var i=0;i<r.length;i++)e[t+i]=r.charCodeAt(i)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,r){for(var i,n="",s=0;s<r;s++)n+="%"+UZIP.bin.pad(e[t+s].toString(16));try{i=decodeURIComponent(n)}catch(i){return UZIP.bin.readASCII(e,t,r)}return i},writeUTF8:function(e,t,r){for(var i=r.length,n=0,s=0;s<i;s++){var a=r.charCodeAt(s);if(0==(4294967168&a))e[t+n]=a,n++;else if(0==(4294965248&a))e[t+n]=192|a>>6,e[t+n+1]=128|a>>0&63,n+=2;else if(0==(4294901760&a))e[t+n]=224|a>>12,e[t+n+1]=128|a>>6&63,e[t+n+2]=128|a>>0&63,n+=3;else{if(0!=(4292870144&a))throw"e";e[t+n]=240|a>>18,e[t+n+1]=128|a>>12&63,e[t+n+2]=128|a>>6&63,e[t+n+3]=128|a>>0&63,n+=4}}return n},sizeUTF8:function(e){for(var t=e.length,r=0,i=0;i<t;i++){var n=e.charCodeAt(i);if(0==(4294967168&n))r++;else if(0==(4294965248&n))r+=2;else if(0==(4294901760&n))r+=3;else{if(0!=(4292870144&n))throw"e";r+=4}}return r}},UZIP.F={},UZIP.F.deflateRaw=function(e,t,r,i){var n=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][i],s=UZIP.F.U,a=UZIP.F._goodIndex,o=(UZIP.F._hash,UZIP.F._putsE),c=0,l=r<<3,d=0,u=e.length;if(0==i){for(;c<u;){o(t,l,c+(E=Math.min(65535,u-c))==u?1:0),l=UZIP.F._copyExact(e,c,E,t,l+8),c+=E}return l>>>3}var h=s.lits,p=s.strt,f=s.prev,g=0,m=0,y=0,v=0,b=0,T=0;u>2&&(p[T=UZIP.F._hash(e,0)]=0);for(c=0;c<u;c++){if(b=T,c+1<u-2){T=UZIP.F._hash(e,c+1);var _=c+1&32767;f[_]=p[T],p[T]=_}if(d<=c){(g>14e3||m>26697)&&u-c>100&&(d<c&&(h[g]=c-d,g+=2,d=c),l=UZIP.F._writeBlock(c==u-1||d==u?1:0,h,g,v,e,y,c-y,t,l),g=m=v=0,y=c);var k=0;c<u-2&&(k=UZIP.F._bestMatch(e,c,f,b,Math.min(n[2],u-c),n[3]));var E=k>>>16,w=65535&k;if(0!=k){w=65535&k;var A=a(E=k>>>16,s.of0);s.lhst[257+A]++;var I=a(w,s.df0);s.dhst[I]++,v+=s.exb[A]+s.dxb[I],h[g]=E<<23|c-d,h[g+1]=w<<16|A<<8|I,g+=2,d=c+E}else s.lhst[e[c]]++;m++}}for(y==c&&0!=e.length||(d<c&&(h[g]=c-d,g+=2,d=c),l=UZIP.F._writeBlock(1,h,g,v,e,y,c-y,t,l),g=0,m=0,g=m=v=0,y=c);0!=(7&l);)l++;return l>>>3},UZIP.F._bestMatch=function(e,t,r,i,n,s){var a=32767&t,o=r[a],c=a-o+32768&32767;if(o==a||i!=UZIP.F._hash(e,t-c))return 0;for(var l=0,d=0,u=Math.min(32767,t);c<=u&&0!=--s&&o!=a;){if(0==l||e[t+l]==e[t+l-c]){var h=UZIP.F._howLong(e,t,c);if(h>l){if(d=c,(l=h)>=n)break;c+2<h&&(h=c+2);for(var p=0,f=0;f<h-2;f++){var g=t-c+f+32768&32767,m=g-r[g]+32768&32767;m>p&&(p=m,o=g)}}}c+=(a=o)-(o=r[a])+32768&32767}return l<<16|d},UZIP.F._howLong=function(e,t,r){if(e[t]!=e[t-r]||e[t+1]!=e[t+1-r]||e[t+2]!=e[t+2-r])return 0;var i=t,n=Math.min(e.length,t+258);for(t+=3;t<n&&e[t]==e[t-r];)t++;return t-i},UZIP.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},UZIP.saved=0,UZIP.F._writeBlock=function(e,t,r,i,n,s,a,o,c){var l,d,u,h,p,f,g,m,y,v=UZIP.F.U,b=UZIP.F._putsF,T=UZIP.F._putsE;v.lhst[256]++,d=(l=UZIP.F.getTrees())[0],u=l[1],h=l[2],p=l[3],f=l[4],g=l[5],m=l[6],y=l[7];var _=32+(0==(c+3&7)?0:8-(c+3&7))+(a<<3),k=i+UZIP.F.contSize(v.fltree,v.lhst)+UZIP.F.contSize(v.fdtree,v.dhst),E=i+UZIP.F.contSize(v.ltree,v.lhst)+UZIP.F.contSize(v.dtree,v.dhst);E+=14+3*g+UZIP.F.contSize(v.itree,v.ihst)+(2*v.ihst[16]+3*v.ihst[17]+7*v.ihst[18]);for(var w=0;w<286;w++)v.lhst[w]=0;for(w=0;w<30;w++)v.dhst[w]=0;for(w=0;w<19;w++)v.ihst[w]=0;var A=_<k&&_<E?0:k<E?1:2;b(o,c,e),b(o,c+1,A);c+=3;if(0==A){for(;0!=(7&c);)c++;c=UZIP.F._copyExact(n,s,a,o,c)}else{var I,R;if(1==A&&(I=v.fltree,R=v.fdtree),2==A){UZIP.F.makeCodes(v.ltree,d),UZIP.F.revCodes(v.ltree,d),UZIP.F.makeCodes(v.dtree,u),UZIP.F.revCodes(v.dtree,u),UZIP.F.makeCodes(v.itree,h),UZIP.F.revCodes(v.itree,h),I=v.ltree,R=v.dtree,T(o,c,p-257),T(o,c+=5,f-1),T(o,c+=5,g-4),c+=4;for(var S=0;S<g;S++)T(o,c+3*S,v.itree[1+(v.ordr[S]<<1)]);c+=3*g,c=UZIP.F._codeTiny(m,v.itree,o,c),c=UZIP.F._codeTiny(y,v.itree,o,c)}for(var C=s,x=0;x<r;x+=2){for(var P=t[x],O=P>>>23,L=C+(8388607&P);C<L;)c=UZIP.F._writeLit(n[C++],I,o,c);if(0!=O){var B=t[x+1],N=B>>16,M=B>>8&255,D=255&B;T(o,c=UZIP.F._writeLit(257+M,I,o,c),O-v.of0[M]),c+=v.exb[M],b(o,c=UZIP.F._writeLit(D,R,o,c),N-v.df0[D]),c+=v.dxb[D],C+=O}}c=UZIP.F._writeLit(256,I,o,c)}return c},UZIP.F._copyExact=function(e,t,r,i,n){var s=n>>>3;return i[s]=r,i[s+1]=r>>>8,i[s+2]=255-i[s],i[s+3]=255-i[s+1],s+=4,i.set(new Uint8Array(e.buffer,t,r),s),n+(r+4<<3)},UZIP.F.getTrees=function(){for(var e=UZIP.F.U,t=UZIP.F._hufTree(e.lhst,e.ltree,15),r=UZIP.F._hufTree(e.dhst,e.dtree,15),i=[],n=UZIP.F._lenCodes(e.ltree,i),s=[],a=UZIP.F._lenCodes(e.dtree,s),o=0;o<i.length;o+=2)e.ihst[i[o]]++;for(o=0;o<s.length;o+=2)e.ihst[s[o]]++;for(var c=UZIP.F._hufTree(e.ihst,e.itree,7),l=19;l>4&&0==e.itree[1+(e.ordr[l-1]<<1)];)l--;return[t,r,c,n,a,l,i,s]},UZIP.F.getSecond=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(e[r+1]);return t},UZIP.F.nonZero=function(e){for(var t="",r=0;r<e.length;r+=2)0!=e[r+1]&&(t+=(r>>1)+",");return t},UZIP.F.contSize=function(e,t){for(var r=0,i=0;i<t.length;i++)r+=t[i]*e[1+(i<<1)];return r},UZIP.F._codeTiny=function(e,t,r,i){for(var n=0;n<e.length;n+=2){var s=e[n],a=e[n+1];i=UZIP.F._writeLit(s,t,r,i);var o=16==s?2:17==s?3:7;s>15&&(UZIP.F._putsE(r,i,a,o),i+=o)}return i},UZIP.F._lenCodes=function(e,t){for(var r=e.length;2!=r&&0==e[r-1];)r-=2;for(var i=0;i<r;i+=2){var n=e[i+1],s=i+3<r?e[i+3]:-1,a=i+5<r?e[i+5]:-1,o=0==i?-1:e[i-1];if(0==n&&s==n&&a==n){for(var c=i+5;c+2<r&&e[c+2]==n;)c+=2;(l=Math.min(c+1-i>>>1,138))<11?t.push(17,l-3):t.push(18,l-11),i+=2*l-2}else if(n==o&&s==n&&a==n){for(c=i+5;c+2<r&&e[c+2]==n;)c+=2;var l=Math.min(c+1-i>>>1,6);t.push(16,l-3),i+=2*l-2}else t.push(n,0)}return r>>>1},UZIP.F._hufTree=function(e,t,r){var i=[],n=e.length,s=t.length,a=0;for(a=0;a<s;a+=2)t[a]=0,t[a+1]=0;for(a=0;a<n;a++)0!=e[a]&&i.push({lit:a,f:e[a]});var o=i.length,c=i.slice(0);if(0==o)return 0;if(1==o){var l=i[0].lit;c=0==l?1:0;return t[1+(l<<1)]=1,t[1+(c<<1)]=1,1}i.sort((function(e,t){return e.f-t.f}));var d=i[0],u=i[1],h=0,p=1,f=2;for(i[0]={lit:-1,f:d.f+u.f,l:d,r:u,d:0};p!=o-1;)d=h!=p&&(f==o||i[h].f<i[f].f)?i[h++]:i[f++],u=h!=p&&(f==o||i[h].f<i[f].f)?i[h++]:i[f++],i[p++]={lit:-1,f:d.f+u.f,l:d,r:u};var g=UZIP.F.setDepth(i[p-1],0);for(g>r&&(UZIP.F.restrictDepth(c,r,g),g=r),a=0;a<o;a++)t[1+(c[a].lit<<1)]=c[a].d;return g},UZIP.F.setDepth=function(e,t){return-1!=e.lit?(e.d=t,t):Math.max(UZIP.F.setDepth(e.l,t+1),UZIP.F.setDepth(e.r,t+1))},UZIP.F.restrictDepth=function(e,t,r){var i=0,n=1<<r-t,s=0;for(e.sort((function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d})),i=0;i<e.length&&e[i].d>t;i++){var a=e[i].d;e[i].d=t,s+=n-(1<<r-a)}for(s>>>=r-t;s>0;){(a=e[i].d)<t?(e[i].d++,s-=1<<t-a-1):i++}for(;i>=0;i--)e[i].d==t&&s<0&&(e[i].d--,s++);0!=s&&console.log("debt left")},UZIP.F._goodIndex=function(e,t){var r=0;return t[16|r]<=e&&(r|=16),t[8|r]<=e&&(r|=8),t[4|r]<=e&&(r|=4),t[2|r]<=e&&(r|=2),t[1|r]<=e&&(r|=1),r},UZIP.F._writeLit=function(e,t,r,i){return UZIP.F._putsF(r,i,t[e<<1]),i+t[1+(e<<1)]},UZIP.F.inflate=function(e,t){var r=Uint8Array;if(3==e[0]&&0==e[1])return t||new r(0);var i=UZIP.F,n=i._bitsF,s=i._bitsE,a=i._decodeTiny,o=i.makeCodes,c=i.codes2map,l=i._get17,d=i.U,u=null==t;u&&(t=new r(e.length>>>2<<3));for(var h,p,f=0,g=0,m=0,y=0,v=0,b=0,T=0,_=0,k=0;0==f;)if(f=n(e,k,1),g=n(e,k+1,2),k+=3,0!=g){if(u&&(t=UZIP.F._check(t,_+(1<<17))),1==g&&(h=d.flmap,p=d.fdmap,b=511,T=31),2==g){m=s(e,k,5)+257,y=s(e,k+5,5)+1,v=s(e,k+10,4)+4;k+=14;for(var E=0;E<38;E+=2)d.itree[E]=0,d.itree[E+1]=0;var w=1;for(E=0;E<v;E++){var A=s(e,k+3*E,3);d.itree[1+(d.ordr[E]<<1)]=A,A>w&&(w=A)}k+=3*v,o(d.itree,w),c(d.itree,w,d.imap),h=d.lmap,p=d.dmap,k=a(d.imap,(1<<w)-1,m+y,e,k,d.ttree);var I=i._copyOut(d.ttree,0,m,d.ltree);b=(1<<I)-1;var R=i._copyOut(d.ttree,m,y,d.dtree);T=(1<<R)-1,o(d.ltree,I),c(d.ltree,I,h),o(d.dtree,R),c(d.dtree,R,p)}for(;;){var S=h[l(e,k)&b];k+=15&S;var C=S>>>4;if(C>>>8==0)t[_++]=C;else{if(256==C)break;var x=_+C-254;if(C>264){var P=d.ldef[C-257];x=_+(P>>>3)+s(e,k,7&P),k+=7&P}var O=p[l(e,k)&T];k+=15&O;var L=O>>>4,B=d.ddef[L],N=(B>>>4)+n(e,k,15&B);for(k+=15&B,u&&(t=UZIP.F._check(t,_+(1<<17)));_<x;)t[_]=t[_++-N],t[_]=t[_++-N],t[_]=t[_++-N],t[_]=t[_++-N];_=x}}}else{0!=(7&k)&&(k+=8-(7&k));var M=4+(k>>>3),D=e[M-4]|e[M-3]<<8;u&&(t=UZIP.F._check(t,_+D)),t.set(new r(e.buffer,e.byteOffset+M,D),_),k=M+D<<3,_+=D}return t.length==_?t:t.slice(0,_)},UZIP.F._check=function(e,t){var r=e.length;if(t<=r)return e;var i=new Uint8Array(Math.max(r<<1,t));return i.set(e,0),i},UZIP.F._decodeTiny=function(e,t,r,i,n,s){for(var a=UZIP.F._bitsE,o=UZIP.F._get17,c=0;c<r;){var l=e[o(i,n)&t];n+=15&l;var d=l>>>4;if(d<=15)s[c]=d,c++;else{var u=0,h=0;16==d?(h=3+a(i,n,2),n+=2,u=s[c-1]):17==d?(h=3+a(i,n,3),n+=3):18==d&&(h=11+a(i,n,7),n+=7);for(var p=c+h;c<p;)s[c]=u,c++}}return n},UZIP.F._copyOut=function(e,t,r,i){for(var n=0,s=0,a=i.length>>>1;s<r;){var o=e[s+t];i[s<<1]=0,i[1+(s<<1)]=o,o>n&&(n=o),s++}for(;s<a;)i[s<<1]=0,i[1+(s<<1)]=0,s++;return n},UZIP.F.makeCodes=function(e,t){for(var r,i,n,s,a=UZIP.F.U,o=e.length,c=a.bl_count,l=0;l<=t;l++)c[l]=0;for(l=1;l<o;l+=2)c[e[l]]++;var d=a.next_code;for(r=0,c[0]=0,i=1;i<=t;i++)r=r+c[i-1]<<1,d[i]=r;for(n=0;n<o;n+=2)0!=(s=e[n+1])&&(e[n]=d[s],d[s]++)},UZIP.F.codes2map=function(e,t,r){for(var i=e.length,n=UZIP.F.U.rev15,s=0;s<i;s+=2)if(0!=e[s+1])for(var a=s>>1,o=e[s+1],c=a<<4|o,l=t-o,d=e[s]<<l,u=d+(1<<l);d!=u;){r[n[d]>>>15-t]=c,d++}},UZIP.F.revCodes=function(e,t){for(var r=UZIP.F.U.rev15,i=15-t,n=0;n<e.length;n+=2){var s=e[n]<<t-e[n+1];e[n]=r[s]>>>i}},UZIP.F._putsE=function(e,t,r){r<<=7&t;var i=t>>>3;e[i]|=r,e[i+1]|=r>>>8},UZIP.F._putsF=function(e,t,r){r<<=7&t;var i=t>>>3;e[i]|=r,e[i+1]|=r>>>8,e[i+2]|=r>>>16},UZIP.F._bitsE=function(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<r)-1},UZIP.F._bitsF=function(e,t,r){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<r)-1},UZIP.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},UZIP.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},UZIP.F.U=function(){var e=Uint16Array,t=Uint32Array;return{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}}(),function(){for(var e=UZIP.F.U,t=0;t<32768;t++){var r=t;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,e.rev15[t]=(r>>>16|r<<16)>>>17}function i(e,t,r){for(;0!=t--;)e.push(0,r)}for(t=0;t<32;t++)e.ldef[t]=e.of0[t]<<3|e.exb[t],e.ddef[t]=e.df0[t]<<4|e.dxb[t];i(e.fltree,144,8),i(e.fltree,112,9),i(e.fltree,24,7),i(e.fltree,8,8),UZIP.F.makeCodes(e.fltree,9),UZIP.F.codes2map(e.fltree,9,e.flmap),UZIP.F.revCodes(e.fltree,9),i(e.fdtree,32,5),UZIP.F.makeCodes(e.fdtree,5),UZIP.F.codes2map(e.fdtree,5,e.fdmap),UZIP.F.revCodes(e.fdtree,5),i(e.itree,19,0),i(e.ltree,286,0),i(e.dtree,30,0),i(e.ttree,320,0)}();const modalClasses=["modal","modal-bg"];function removeModal(){modalClasses.forEach((e=>document.getElementsByClassName(e)[0].remove()))}let recaptchaResponse=null;function recaptchaCallback(e){recaptchaResponse=e}let tegakiWidth=localStorage.getItem("tegakiwidth-setting"),tegakiHeight=localStorage.getItem("tegakiheight-setting");class postFormHandler{constructor(e){this.form=e,this.resetOnSubmit="true"==this.form.dataset.resetOnSubmit,this.enctype=this.form.getAttribute("enctype"),this.messageBox=this.form.querySelector("#message"),this.recordTegaki=this.form.elements.tegakireplay,this.minimal=this.form.elements.minimal,this.files=[],this.submit=e.querySelector('input[type="submit"]'),this.submit&&(this.originalSubmitText=this.submit.value),this.captchaField=e.querySelector(".captchafield")||e.querySelector(".g-recaptcha")||e.querySelector(".h-captcha"),this.tegakiButton=e.querySelector(".tegaki-button"),this.tegakiButton&&this.tegakiButton.addEventListener("click",(()=>this.doTegaki())),this.web3SignButton=e.querySelector(".web3-sign"),this.web3SignButton&&this.web3SignButton.addEventListener("click",(()=>this.doWeb3Sign())),this.web3LoginButton=e.querySelector(".web3-login"),this.web3LoginButton&&this.web3LoginButton.addEventListener("click",(e=>this.doWeb3Login(e))),this.fileInput=e.querySelector('input[type="file"]'),this.fileInput&&(this.fileRequired=this.fileInput.required,this.fileLabel=this.fileInput.previousSibling,this.fileUploadList=this.fileInput.nextSibling,this.multipleFiles=this.fileLabel.parentNode.previousSibling.firstChild.textContent.endsWith("s"),this.fileLabelText=this.fileLabel.childNodes[0],this.fileLabel.addEventListener("dragover",(e=>this.fileLabelDrag(e))),this.fileLabel.addEventListener("drop",(e=>this.fileLabelDrop(e))),this.fileInput.addEventListener("change",(e=>this.fileInputChange(e))),this.fileLabel.addEventListener("auxclick",(e=>this.fileLabelAuxclick(e))),e.addEventListener("paste",(e=>this.paste(e)))),this.customFlagInput=this.form.elements.customflag,this.selectedFlagImage=document.getElementById("selected-flag"),this.customFlagInput&&this.selectedFlagImage&&(this.customFlagInput.addEventListener("change",(()=>this.updateFlagField()),!1),this.updateFlagField()),this.messageBox&&this.messageBox.addEventListener("keydown",(e=>this.controlEnterSubmit(e))),e.addEventListener("submit",(e=>this.formSubmit(e))),e.addEventListener("messageBoxChange",(()=>this.handleMessageChange()))}reset(){this.form.reset(),this.updateFlagField(),this.updateMessageBox(),this.files=[],this.updateFilesText();const e=this.form.querySelector(".captcharefresh");e&&e.dispatchEvent(new Event("click"))}doTegaki(){const e=this.recordTegaki&&this.recordTegaki.checked;Tegaki.open({saveReplay:e,onCancel:()=>{},onDone:()=>{const t=Date.now();let r;e&&(r=Tegaki.replayRecorder.toBlob()),Tegaki.flatten().toBlob((e=>{this.addFile(new File([e],`${t}-tegaki.png`,{type:"image/png"}),{stripFilenames:!1}),r&&this.addFile(new File([r],`${t}-tegaki.tgkr`,{type:"tegaki/replay"}),{stripFilenames:!1})}),"image/png"),this.updateFilesText(),Tegaki.resetLayers(),Tegaki.destroy()},width:tegakiWidth,height:tegakiHeight}),Tegaki.resetLayers(),Tegaki.setColorPalette(2)}handleMessageChange(){if(!this.messageBox)return;const e=0===this.messageBox.value.length;this.web3SignButton&&(this.form.elements.signature.value="",this.web3SignButton.disabled=e)}async doWeb3Login(e){e.target.style.pointerEvents="none";try{const e=await window.jschanweb3.eth.requestAccounts(),t=await fetch(`/nonce/${encodeURIComponent(e[0])}.json`).then((e=>e.json())),r=t&&t.nonce;if(!r)throw Error("Nonce request failed");const i=`Nonce: ${r}`,n=await window.jschanweb3.currentProvider.request({method:"personal_sign",params:[i,e[0]]});this.form.elements.signature.value=n,this.form.elements.address.value=e[0],this.form.elements.nonce.value=r,this.form.requestSubmit()}catch(e){console.warn(e)}finally{e.target.style.pointerEvents="auto"}}async doWeb3Sign(){if(!this.messageBox.value||0===this.messageBox.value.length)return;const e=this.messageBox.value;try{const t=await window.jschanweb3.eth.requestAccounts(),r=await window.jschanweb3.currentProvider.request({method:"personal_sign",params:[e,t[0]]});this.form.elements.signature.value=r}catch(e){console.warn(e)}}updateFlagField(){this.customFlagInput&&-1!==this.customFlagInput.options.selectedIndex&&(this.selectedFlagImage.src=this.customFlagInput.options[this.customFlagInput.options.selectedIndex].dataset.src||"")}controlEnterSubmit(e){e.ctrlKey&&"Enter"===e.key&&this.formSubmit(e)}formSubmit(e){const t=recaptchaResponse;let r;if("multipart/form-data"===this.enctype){if(this.fileInput&&(this.fileInput.disabled=!0),r=new FormData(this.form),t&&r.append("captcha",t),this.fileInput&&(this.fileInput.disabled=!1),this.files&&this.files.length>0)for(let e=0;e<this.files.length;e++)r.append("file",this.files[e])}else r=new URLSearchParams([...new FormData(this.form)]),t&&r.set("captcha",t);if(this.minimal||r instanceof URLSearchParams&&"1"===r.get("edit"))return!0;e.preventDefault();const i=new XMLHttpRequest;this.submit&&(this.submit.disabled=!0,this.submit.value="Processing...",this.files&&this.files.length>0&&(i.onloadstart=()=>{this.submit.value="0%"},i.upload.onprogress=e=>{const t=Math.floor(e.loaded/e.total*100);this.submit.value=`${t}%`},i.onload=()=>{this.submit.value=this.originalSubmitText})),i.onreadystatechange=()=>{if(4===i.readyState){let r;if(t&&grecaptcha?grecaptcha.reset():t&&hcaptcha?hcaptcha.reset():t&&window.smartCaptcha&&window.smartCaptcha.reset(),"false"===i.getResponseHeader("x-captcha-enabled")&&(captchaController.removeCaptcha(),this.captchaField=null),this.submit&&(this.submit.disabled=!1,this.submit.value=this.originalSubmitText),i.responseText)try{r=JSON.parse(i.responseText)}catch(e){}if(r)if(200==i.status){if(r.postId&&(window.myPostId=r.postId),r.redirect){const e=r.redirect.split("/")[1],t=r.redirect.split("#")[1];e&&t&&appendLocalStorageArray("yous",`${e}-${t}`)}if(r.message||r.messages||r.error||r.errors)doModal(r);else if(socket&&socket.connected)window.location.hash=r.postId;else{if(!isThread)return window.location=r.redirect;setLocalStorage("myPostId",r.postId),forceUpdate()}this.resetOnSubmit&&this.reset()}else if(this.captchaField||r.message!==__("Incorrect captcha answer"))if(r.message===__("Captcha expired")){const e=this.form.querySelector(".captcharefresh");e&&e.dispatchEvent(new Event("click"))}else r.bans?doModal(r,null,(()=>{const e=document.getElementById("modalbanned").querySelector("form"),t=new postFormHandler(e);for(let t of e.querySelectorAll('input[name="checkedbans"]'))t.checked=!0;const r=t.captchaField;r&&captchaController.setupCaptchaField(r)})):doModal(r,(()=>{this.formSubmit(e)}));else captchaController.addMissingCaptcha(),this.captchaField=!0;else{if(i.responseURL&&i.responseURL!==`${location.origin}${this.form.getAttribute("action")}`)return window.location=i.responseURL;413===i.status?doModal({title:"Payload Too Large",message:"Your upload was too large"}):doModal({title:"Error",message:"Something broke"})}this.submit&&(this.submit.value=this.originalSubmitText)}},i.onerror=e=>{console.error(e),doModal({title:"Error",message:"Something broke"}),this.submit&&(this.submit.disabled=!1,this.submit.value=this.originalSubmitText)},i.open(this.form.getAttribute("method"),this.form.getAttribute("action"),!0),this.minimal||i.setRequestHeader("x-using-xhr",!0);"true"==localStorage.getItem("live")&&socket&&socket.connected&&i.setRequestHeader("x-using-live",!0),"multipart/form-data"!==this.enctype&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(r)}updateMessageBox(){this.messageBox&&this.messageBox.dispatchEvent(new Event("input"))}removeFile(e,t,r){let i;e.remove(),this.files.find(((e,n)=>{e.name===t&&e.size===r&&(i=n)})),this.files.splice(i,1),this.updateFilesText()}async addFile(e,t={}){let r;if(this.fileRequired&&this.fileInput.removeAttribute("required"),this.files.push(e),console.log("got file",e.name),window.crypto.subtle){let t;if(e.arryaBuffer)t=await e.arrayBuffer();else{const r=new FileReader;await new Promise((t=>{r.addEventListener("loadend",t),r.readAsArrayBuffer(e)})),r.result&&(t=r.result)}const i=await window.crypto.subtle.digest("SHA-256",t);r=Array.from(new Uint8Array(i)).map((e=>e.toString(16).padStart(2,"0"))).join(""),console.log("file hash",r)}const i={spoilers:"true"===this.fileUploadList.dataset.spoilers,stripFilenames:"true"===this.fileUploadList.dataset.stripFilenames,name:e.name,hash:r,...t};switch(e.type.split("/")[0]){case"image":i.url=URL.createObjectURL(e);break;case"audio":i.url="/file/audio.png";break;case"video":try{const t=await videoThumbnail(e);i.url=URL.createObjectURL(t)}catch(e){i.url="/file/video.png"}break;default:i.url="/file/attachment.png"}const n=uploaditem({uploaditem:i});this.fileUploadList.insertAdjacentHTML("beforeend",n);const s=this.fileUploadList.lastChild;s.querySelector(".close").addEventListener("click",(()=>{this.removeFile(s,e.name,e.size)})),this.fileUploadList.style.display="unset"}updateFilesText(){this.fileLabelText&&(this.files&&0===this.files.length?(this.fileUploadList.textContent="",this.fileUploadList.style.display="none",this.fileLabelText.nodeValue=__n("Select/Drop/Paste files",this.multipleFiles?2:1)):this.fileLabelText.nodeValue=__n("%s files selected",this.files.length),this.fileInput.value=null)}clearFiles(){this.fileInput&&(this.files=[],this.fileInput.value=null,this.fileRequired&&this.fileInput.setAttribute("required",!0),this.updateFilesText())}paste(e){const t=e.clipboardData;if(t.items&&t.items.length>0){const e=t.items;for(let t=0;t<e.length;t++){const r=e[t];if("file"===r.kind){const e=new File([r.getAsFile()],"ClipboardImage.png",{type:r.type});this.addFile(e)}}this.updateFilesText()}}fileLabelDrag(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}fileLabelDrop(e){e.stopPropagation(),e.preventDefault();const t=e.dataTransfer.files;for(let e=0;e<t.length;e++)this.addFile(t[e]);this.updateFilesText()}fileInputChange(){const e=this.fileInput.files;for(let t=0;t<e.length;t++)this.addFile(e[t]);this.updateFilesText()}fileLabelAuxclick(e){1===e.button&&this.clearFiles()}}function pug_attr(e,t,r,i){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(i?e:e+'="'+e+'"');var n=typeof t;return"object"!==n&&"function"!==n||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),r||-1===t.indexOf('"'))?(r&&(t=pug_escape(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function pug_escape(e){var t=""+e,r=pug_match_html.exec(t);if(!r)return e;var i,n,s,a="";for(i=r.index,n=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}n!==i&&(a+=t.substring(n,i)),n=i+1,a+=s}return n!==i?a+t.substring(n,i):a}window.addEventListener("DOMContentLoaded",(()=>{const e=localStorage.getItem("myPostId");e&&(window.location.hash=e,localStorage.removeItem("myPostId")),window.addEventListener("addPost",(e=>{e.detail.hover||window.myPostId==e.detail.postId&&(window.location.hash=e.detail.postId,e.detail.post.previousSibling.scrollIntoView())}))})),window.addEventListener("settingsReady",(()=>{const e=document.getElementsByTagName("form");for(let t=0;t<e.length;t++)"post"===e[t].method&&new postFormHandler(e[t]);const t=document.getElementById("tegakiwidth-setting");t.value=tegakiWidth,t.addEventListener("change",(e=>{tegakiWidth=parseInt(e.target.value),setLocalStorage("tegakiwidth-setting",tegakiWidth)}),!1);const r=document.getElementById("tegakiheight-setting");r.value=tegakiHeight,r.addEventListener("change",(e=>{tegakiHeight=parseInt(e.target.value),setLocalStorage("tegakiheight-setting",tegakiHeight)}),!1)}));pug_match_html=/["&<>]/;function captchaformsection(e){var t,r="",i={},n=e||{};return function(e,n,s,a,o,c){i.captchaexpand=t=function(){this&&this.block,this&&this.attributes;switch(r=r+'<details class="row label mr-0"><summary class="pv-5">'+pug_escape(null==(t=e("Captcha"))?"":t)+'<span class="required">*</span></summary>',s.type){case"google":r=r+'<div class="g-recaptcha"'+pug_attr("data-sitekey",`${a}`,!0,!1)+' data-theme="dark" data-size="compact" data-callback="recaptchaCallback"></div><noscript>'+pug_escape(null==(t=e("Please enable JavaScript to solve the captcha."))?"":t)+"</noscript>";break;case"hcaptcha":r=r+'<div class="h-captcha"'+pug_attr("data-sitekey",`${o}`,!0,!1)+' data-theme="dark" data-size="compact" data-callback="recaptchaCallback"></div><noscript>'+pug_escape(null==(t=e("Please enable JavaScript to solve the captcha."))?"":t)+"</noscript>";break;case"yandex":r=r+'<div class="smart-captcha"'+pug_attr("data-sitekey",`${c}`,!0,!1)+' data-callback="recaptchaCallback"></div><noscript>'+pug_escape(null==(t=e("Please enable JavaScript to solve the captcha."))?"":t)+"</noscript>";break;case"text":r=r+'<noscript class="no-m-p"><iframe class="captcha" src="/captcha.html"'+pug_attr("width=210",!0,!0,!1)+' height="80" scrolling="no" loading="lazy"></iframe></noscript><div class="jsonly captcha" style="display:none;"></div><input class="captchafield" type="text" name="captcha" autocomplete="off"'+pug_attr("placeholder",e("Captcha text"),!0,!1)+' pattern=".{6}"'+pug_attr("required",!0,!0,!1)+pug_attr("title",n("%s characters",6),!0,!1)+"/>";break;case"grid":case"grid2":r=r+'<span class="text-center">'+pug_escape(null==(t=s.grid.question)?"":t)+'</span><div class="catalog"><noscript class="no-m-p"><iframe class="captcha" src="/captcha.html" width="150" height="150" scrolling="no" loading="lazy"></iframe></noscript><div class="jsonly captcha" style="display:none"></div><div class="captchafield noselect">';for(let e=0;e<s.grid.size**2;e++)r=r+'<label class="captchachecklabel"><input type="checkbox" name="captcha"'+pug_attr("value",e,!0,!1)+'/><span class="captchacheckbox"></span></label>';r+="</div></div>"}r+="</details>"},i.captchaexpand()}.call(this,"__"in n?n.__:void 0!==__?__:void 0,"__n"in n?n.__n:void 0!==__n?__n:void 0,"captchaOptions"in n?n.captchaOptions:void 0!==captchaOptions?captchaOptions:void 0,"googleRecaptchaSiteKey"in n?n.googleRecaptchaSiteKey:"undefined"!=typeof googleRecaptchaSiteKey?googleRecaptchaSiteKey:void 0,"hcaptchaSiteKey"in n?n.hcaptchaSiteKey:"undefined"!=typeof hcaptchaSiteKey?hcaptchaSiteKey:void 0,"yandexSiteKey"in n?n.yandexSiteKey:"undefined"!=typeof yandexSiteKey?yandexSiteKey:void 0),r}window.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("message"),t=e&&e.form;if(e){const r=e.previousSibling,i=e.getAttribute("maxlength"),n=e.getAttribute("minlength");let s=e.value.length;const a=document.createElement("small");r.appendChild(a);const o=()=>{a.innerText=`(${s}/${i})`,s>=i||s<n?a.style.color="red":a.removeAttribute("style")},c=function(){e.value.length>i&&(e.value=e.value.substring(0,i)),s=e.value.length,o(),t&&t.dispatchEvent(new CustomEvent("messageBoxChange"))};o(),e.addEventListener("input",c)}}));const renderCSSLink=document.createElement("style");renderCSSLink.type="text/css",renderCSSLink.id="rendercss",document.head.appendChild(renderCSSLink);const renderSheet=renderCSSLink.sheet,rulesKey=renderSheet.rules?"rules":"cssRules";class CssToggle{constructor(e,t,r,i){this.localStorageKey=t,this.localStorageDefault=r,setDefaultLocalStorage(this.localStorageKey,this.localStorageDefault),this.settingBoolean="true"==localStorage.getItem(this.localStorageKey),this.settingCss=i,window.addEventListener("settingsReady",(()=>{this.setting=document.getElementById(e),this.setting.checked=this.settingBoolean,this.setting.addEventListener("change",(()=>{this.toggle()}),!1)})),this.apply()}toggle(){this.settingBoolean=!this.settingBoolean,console.log("toggling",this.localStorageKey,this.settingBoolean),this.apply(),setLocalStorage(this.localStorageKey,this.settingBoolean)}apply(){if(this.settingBoolean)renderSheet.insertRule(this.settingCss);else for(let e=0;e<renderSheet[rulesKey].length;e++)renderSheet[rulesKey][e].selectorText==this.settingCss.split(" {")[0]&&renderSheet.deleteRule(e)}}const hidePostStubsCss=".post-container.hidden, .catalog-tile.hidden { display: none;margin-top: -1.5em;height: 0; }",hideDeletedPostContentCss='.post-container.marked[data-mark="Deleted"] .post-data { display: none; }',hideThumbnailsCss=".file-thumb, .catalog-thumb { visibility: hidden !important; }",hideRecursiveCss=".op.hidden ~ .anchor, .op.hidden ~ .post-container { display: none; }",heightUnlimitCss="img, video { max-height: unset; }",crispCss="img { image-rendering: crisp-edges; }",nonColorIdsCss=".user-id { background: transparent none repeat scroll 0% 0% !important; border-color: transparent; text-shadow: none; color: var(--font-color); }",alwaysShowSpoilersCss=".spoiler { color: var(--font-color) !important; background: transparent none repeat scroll 0% 0%; outline: 1px solid black; cursor: auto; }",smoothScrollingCss="html { scroll-behavior: smooth; }",threadWatcherCss="#threadwatcher { display: flex; }";let hoverCacheList;new CssToggle("hiderecursive-setting","hiderecursive",settings.hideRecursive,hideRecursiveCss),new CssToggle("heightlimit-setting","heightlimit",settings.heightUnlimit,heightUnlimitCss),new CssToggle("crispimages-setting","crispimages",settings.crispImages,crispCss),new CssToggle("hidethumbnails-setting","hidethumbnails",settings.hideThumbnails,hideThumbnailsCss),new CssToggle("noncolorids-setting","noncolorids",settings.nonColorIds,nonColorIdsCss),new CssToggle("alwaysshowspoilers-setting","alwaysshowspoilers",settings.alwaysShowSpoilers,alwaysShowSpoilersCss),new CssToggle("hidepoststubs-setting","hidepoststubs",settings.hidePostStubs,hidePostStubsCss),new CssToggle("hidedeletedpostcontent-setting","hidedeletedpostcontent",settings.hideDeletedPostContent,hideDeletedPostContentCss),new CssToggle("smoothscrolling-setting","smoothscrolling",settings.smoothScrolling,smoothScrollingCss),new CssToggle("threadwatcher-setting","threadwatcher",settings.threadWatcher,threadWatcherCss),isCatalog||window.addEventListener("DOMContentLoaded",(()=>{const e=".post-message a:not(.quote)",t=[{linkRegex:/^https?:\/\/(?:www\.|m\.)?(?:youtube\.com|youtu\.?be)\//i,toHtml:e=>{try{const t=new URL(e),r=t.searchParams.get("v")||"youtu.be"===t.hostname&&t.pathname.substring(1)||t.pathname.startsWith("/shorts/")&&t.pathname.substring(8);if(r&&11===r.length)return['<iframe class="embed-video" src="" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" style="display:block;" allowfullscreen></iframe>',`https://www.youtube-nocookie.com/embed/${encodeURIComponent(r)}`]}catch(e){}return null}},{linkRegex:/^https?:\/\/(?:www\.)?bitchute\.com\/video\/[a-z0-9]{12}\//i,toHtml:e=>{try{const t=new URL(e).pathname.split("/")[2];if(t)return['<iframe class="embed-video" src="" frameborder="0" scrolling="no" style="display:block;" allowfullscreen></iframe>',`https://www.bitchute.com/embed/${encodeURIComponent(t)}/`]}catch(e){}return null}},{linkRegex:/^https?:\/\/(?:www\.)?odysee\.com\/.+\/.+/i,toHtml:e=>{try{const t=new URL(e).pathname;if(t&&t.startsWith("/@"))return['<iframe class="embed-video" src="" frameborder="0" scrolling="no" style="display:block;" allowfullscreen></iframe>',`https://odysee.com/$/embed${t}`]}catch(e){}return null}}],r=(e,t,r)=>{"true"===e.dataset.open?(e.nextSibling.remove(),e.firstElementChild.textContent="Embed"):(e.insertAdjacentHTML("afterend",t),e.nextSibling.src=r,e.firstElementChild.textContent="Close"),e.dataset.open="true"===e.dataset.open?"false":"true"},i=e=>{for(let i=0;i<e.length;i++){const n=t.find((t=>t.linkRegex.test(e[i].href)));if(!n)continue;const[s,a]=n.toHtml(e[i].href);if(s){const t=document.createElement("span"),n=document.createTextNode("["),o=document.createElement("a"),c=document.createTextNode("]");t.classList.add("ml-5","noselect","bold"),o.classList.add("dummy-link"),o.textContent="Embed",t.appendChild(n),t.appendChild(o),t.appendChild(c),e[i].parentNode.insertBefore(t,e[i].nextSibling),o.addEventListener("click",(()=>r(t,s,a)))}}},n=Array.from(document.querySelectorAll(e));i(n);const s=t=>{if(t.detail.hover)return;const r=Array.from(t.detail.post.querySelectorAll(e)).filter((e=>!(e.nextSibling&&e.nextSibling.classList&&e.nextSibling.classList.contains("dummy-link"))));i(r)};window.addEventListener("addPost",s),window.addEventListener("updatePostMessage",s)})),window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#action-menu");e&&e.addEventListener("click",(()=>{e.parentElement.classList.contains("floatactions")?e.parentElement.classList.remove("floatactions"):e.scrollIntoView()}),!1);const t=document.getElementById("volume-setting");let r=localStorage.getItem("volume");t.value=r,t.addEventListener("change",(()=>{r=t.value;const e=document.querySelectorAll("audio,video");for(let t=0;t<e.length;t++)e[t].volume=r/100;console.log("adjusting default volume",r),setLocalStorage("volume",r)}),!1);const i=document.getElementById("loop-setting");let n="true"==localStorage.getItem("loop");i.checked=n,i.addEventListener("change",(()=>{n=i.checked,console.log("toggling video/audio looping",n),setLocalStorage("loop",n)}),!1);const s=document.getElementById("imageloadingbars-setting");let a="true"==localStorage.getItem("imageloadingbars");if(s.checked=a,s.addEventListener("change",(()=>{a=s.checked,console.log("toggling video/audio imageloadingbarsing",a),setLocalStorage("imageloadingbars",a)}),!1),!isCatalog){const e=document.getElementsByClassName("post-file-src"),t=function(e,t,i,s){"none"===e.style.display?(e.style.display="",t.style.display="none",i.style.maxWidth=""):(e.style.display="none",t.style.display="",t.offsetWidth>=i.offsetWidth&&(i.style.maxWidth=t.offsetWidth+"px"));const a="[Close]"===e.nextSibling.textContent?e.nextSibling:null;a&&(t.loop=n,t.volume=r/100,"hidden"===s.style.visibility?(s.style.visibility="visible",a.style.display="none",t.pause()):(s.style.visibility="hidden",a.style.display="block",t.play()))},i=function(e){if("VIDEO"===e.target.nodeName||"AUDIO"===e.target.nodeName)return void e.stopPropagation();if("true"==this.dataset.attachment)return;e.preventDefault();const r=this.firstChild,i=r.href,n=this.dataset.type,s=r.firstChild,a=s.classList.contains("spoilerimg"),o=this.previousSibling,c=this.closest(".post-file-src");let l="image"===n?s.nextSibling:r.nextSibling;if(l)t(s,l,o,c);else if("0.5"!==s.style.opacity){let d;switch(n){case"image":if(e.preventDefault(),a||(r.style.minWidth=r.offsetWidth+"px",r.style.minHeight=r.offsetHeight+"px"),s.style.opacity="0.5",s.style.cursor="wait","true"==localStorage.getItem("imageloadingbars")&&window.URL.createObjectURL){const e=new XMLHttpRequest;e.onprogress=e=>{const t=Math.floor(e.loaded/e.total*100),r=Math.floor(e.loaded/e.total*s.offsetWidth);t>=100?c.removeAttribute("data-loading"):(c.setAttribute("data-loading",t),c.style=`--data-loading: ${r}px`)},l=document.createElement("img"),d=l;const n=function(){c.removeAttribute("data-loading"),c.removeAttribute("style");const e=this.response;d.onload=function(){s.style.opacity="",s.style.cursor="",r.appendChild(l),t(s,l,o,c)},d.src=window.URL.createObjectURL(e)};e.onload=n,e.responseType="blob",e.open("GET",i,!0),e.send(null)}else l=document.createElement("img"),d=l,d.onload=function(){s.style.opacity="",s.style.cursor="",r.appendChild(l),t(s,l,o,c)},d.src=i;break;case"video":case"audio":{e.preventDefault(),l=document.createElement(n);const u=document.createElement("span"),h=document.createTextNode("["),p=document.createElement("a"),f=document.createTextNode("]");return u.classList.add("noselect","bold"),u.style.marginBottom="3px",u.style.display="block",u.style.color="var(--font-color)",p.classList.add("dummy-link"),p.textContent="Close",u.appendChild(h),u.appendChild(p),u.appendChild(f),u.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t(s,l,o,c)}),!0),l.controls="true",d=document.createElement("source"),l.appendChild(d),"audio"===n&&"IMG"===s.nodeName?(l.style.backgroundImage=`url("${encodeURI(s.src)}")`,l.style.backgroundRepeat="no-repeat",l.style.backgroundPosition="top",l.style.backgroundSize="contain",l.style.minWidth=s.width+"px",l.style.paddingTop=s.height+"px"):a||(l.style.minWidth=r.offsetWidth+"px",l.style.minHeight=r.offsetHeight+"px"),c.appendChild(l),r.appendChild(u),t(s,l,o,c),void(d.src=i)}}}},s=e=>{for(let t=0;t<e.length;t++)e[t].addEventListener("click",i,!1)};s(e),window.addEventListener("addPost",(function(e){if(e.detail.hover)return;const t=e.detail.post.getElementsByClassName("post-file-src");s(t)}))}})),window.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementsByClassName("quote");let t,r={},i=!1;const n=e=>{const t=e.getBoundingClientRect().top,r=e.getBoundingClientRect().bottom,i=window.innerHeight;return t>=38&&r<=i},s=(e,t,r,i)=>{const n=document.createElement("div");return n.id="float",n.classList.remove("hoverhighlighted"),n.appendChild(t.cloneNode(!0)),document.body.appendChild(n),((e,t,r,i)=>{const n=e.getBoundingClientRect(),s=t.firstChild,a=document.body.offsetWidth-10,o=window.innerHeight;r<a/2?(t.style.left=`${n.right+10}px`,n.right+10+s.offsetWidth>=a&&(t.style.right="5px")):(t.style.right=a-n.left+15+"px",n.left-15<s.offsetWidth&&(t.style.left="5px"));const c=i<o/2;c&&n.bottom+s.offsetHeight<o?t.style.top=`${n.top}px`:!c&&s.offsetHeight<i?t.style.top=n.bottom-s.offsetHeight+"px":t.style.top="42px"})(e,n,r,i),n},a=async function(e){i="mouseover"===e.type;let a,o=this.pathname.replace(/\.html$/,".json").split("/");if((isManage||isModView)&&5===o.length&&o.splice(2,1),a=o.join("/"),!this.hash)return;const c=document.getElementById("float");c&&document.body.removeChild(c);const l=this.closest(".post-container");let d=0;l&&(d=l.dataset.postId);const u=Date.now();t=u;const h=this.hash.substring(1),p=document.getElementById(h);let f,g;if(p&&a.split("/")[1]===p.nextSibling.dataset.board)f=p.nextSibling;else{let i=localStorage.getItem(`hovercache-${a}`);if(i&&(i=JSON.parse(i),i.postId==h?g=i:i.replies.length>0&&(g=i.replies.find((e=>e.postId==h)))),!g){let t;this.style.cursor="wait";try{r[a]||(r[a]=fetch(a).then((e=>e.json()))),t=await r[a]}catch(e){return console.error(e)}finally{this.style.cursor=""}if(!t)return localStorage.removeItem(`hovercache-${a}`);setLocalStorage(`hovercache-${a}`,JSON.stringify(t)),hoverCacheList.value=Object.keys(localStorage).filter((e=>e.startsWith("hovercache"))),g=t.postId==h?t:t.replies.find((e=>e.postId==h))}if(t!==u)return;if(!g)return;const n=post({post:g,...extraLocals}),s=document.createElement("div");s.innerHTML=n,f=s.firstChild.nextSibling}if(i&&!n(f)?f=s(this,f,e.clientX,e.clientY):i?f.classList.add("hoverhighlighted"):f.classList.remove("hoverhighlighted"),g){const e=new CustomEvent("addPost",{detail:{json:g,post:f,postId:g.postId,hover:!0,nonotify:!0}});window.dispatchEvent(e)}(i||n(f))&&((e,t)=>{let r=new Set;if(e.querySelectorAll(".post-message .quote").forEach((e=>r.add(e.href))),r.size>1){const r=e.querySelectorAll(`.post-message .quote[href$="${t}"]`);for(let e=0;e<r.length;e++){const t=r[e];t.style.borderBottom=""==t.style.borderBottom?"1px dashed":"",t.style.textDecoration=""==t.style.textDecoration?"none":""}}})(f,d)};for(let t=0;t<e.length;t++)e[t].addEventListener("mouseover",a,!1),e[t].addEventListener("mouseout",a,!1);window.addEventListener("addPost",(function(e){if(e.detail.hover)return;const t=document.getElementsByClassName("quote");for(let e=0;e<t.length;e++)t[e].removeEventListener("mouseover",a),t[e].removeEventListener("mouseout",a),t[e].addEventListener("mouseover",a,!1),t[e].addEventListener("mouseout",a,!1)})),window.addEventListener("updatePostMessage",(function(e){const t=e.detail.post.getElementsByClassName("quote");for(let e=0;e<t.length;e++)t[e].addEventListener("mouseover",a,!1),t[e].addEventListener("mouseout",a,!1)}))})),window.addEventListener("settingsReady",(function(){hoverCacheList=document.getElementById("hovercachelist-setting"),hoverCacheList.value=Object.keys(localStorage).filter((e=>e.startsWith("hovercache")));document.getElementById("hovercachelist-clear").addEventListener("click",(()=>{deleteStartsWith("hovercache"),hoverCacheList.value="",console.log("cleared cache")}),!1)})),window.addEventListener("settingsReady",(()=>{const e=["volume","loop","imageloadingbars","live","scroll","localtime","relative","24hour","notifications","hiddenimages","threadwatcher","notification-yous-only","yous-setting","filters1","name","theme","codetheme","customcss","disableboardcss","hiderecursive","watchlist","heightlimit","crispimages","hidethumbnails","noncolorids","alwaysshowspoilers","hidedeletedpostcontent","hidepoststubs","smoothscrolling","tegakiheight-setting","tegakiwidth-setting"],t=document.getElementById("import-export-setting");document.getElementById("export-setting").addEventListener("click",(()=>{const r=e.reduce(((e,t)=>(e[t]=localStorage.getItem(t),e)),{});t.value=JSON.stringify(r)}),!1);document.getElementById("import-setting").addEventListener("click",(()=>{if(t.value.length>0)try{const e=JSON.parse(t.value);Object.entries(e).forEach((e=>{setLocalStorage(e[0],e[1])})),location.reload()}catch(e){console.error(e)}}),!1)})),window.addEventListener("DOMContentLoaded",(()=>{let e={};const t=t=>{t.target.dataset.open?(e=>{e.target.nextSibling.style.display="unset";const t=e.target.closest(".thread");let r=Array.from(t.querySelectorAll(".post-container")).slice(1);e.target.dataset.shown>0&&(r=r.slice(0,-parseInt(e.target.dataset.shown))),r.forEach((e=>{e.previousSibling.remove(),e.remove()})),e.target.removeAttribute("data-open"),e.target.src="/file/plus.png"})(t):(async t=>{const r=t.target.dataset.thread,i=t.target.dataset.board,n=t.target.closest(".post-container"),s=n.nextSibling&&n.nextSibling.nextSibling,a=`/${i}/thread/${r}.json`;let o,c=localStorage.getItem(`hovercache-${a}`);if(c&&(c=JSON.parse(c),s&&c.replies.find((e=>e.postId==s.dataset.postId))&&(o=c.replies)),!o){let r;t.target.style.cursor="wait",t.target.classList.add("spin");try{e[a]||(e[a]=fetch(a).then((e=>e.json()))),r=await e[a]}catch(t){return console.error(t)}finally{t.target.style.cursor="",t.target.classList.remove("spin")}if(!r)return localStorage.removeItem(`hovercache-${a}`);setLocalStorage(`hovercache-${a}`,JSON.stringify(r)),hoverCacheList.value=Object.keys(localStorage).filter((e=>e.startsWith("hovercache"))),o=[...r.replies]}if(!o)return;const l=n.querySelector(".replies");if(l&&l.innerText.includes("+")){const e=l.lastElementChild;e.previousSibling.remove(),e.remove()}o=o.reverse(),t.target.nextSibling.style.display="none",t.target.src="/file/minus.png",t.target.dataset.open=!0,s&&(o=o.filter((e=>e.postId<s.dataset.postId))),o.forEach((e=>{newPost(e,{nonotify:!0,insertPoint:s?n.nextSibling:n,insertPosition:s?"beforebegin":"afterend"})}))})(t)},r=document.getElementsByClassName("expand-omitted");for(let e=0;e<r.length;e++)r[e].addEventListener("click",t,!1)}));const charset="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/",generatePassword=()=>{try{if(window.crypto){const e=new Uint8Array(20);return window.crypto.getRandomValues(e),btoa(String.fromCharCode.apply(null,e))}}catch(e){}return new Array(20).fill(null).map((()=>charset[Math.floor(64*Math.random())])).join("")};setDefaultLocalStorage("postpassword",generatePassword());class syncedField{constructor(e,t,r=!1,i=!0){this.fields=[],this.selector=e,this.key=t,this.oneWay=r,this.persistent=i,this.init()}init(){const e=document.getElementById("settingsmodal").querySelectorAll(this.selector);this.fields=this.fields.concat([...e]);const t=document.getElementById("postform");if(t){const e=t.querySelectorAll(this.selector);this.fields=this.fields.concat([...e])}const r=document.getElementById("actionform");if(r){const e=r.querySelectorAll(this.selector);this.fields=this.fields.concat([...e])}this.oneWay&&e[0].addEventListener("input",(e=>{this.update(e)}),!1);for(let e of this.fields)!this.oneWay&&e.addEventListener("input",(e=>{this.update(e)}),!1),e.form&&e.form.addEventListener("reset",(()=>{setTimeout((()=>{this.set(localStorage.getItem(this.key))}),0)}),!1);this.set(localStorage.getItem(this.key))}update(e){this.persistent&&setLocalStorage(this.key,e.target.value),this.set(e.target.value)}set(e){if(null!==e)for(let t of this.fields)if(t.value=e,"SELECT"===t.tagName){const e=new Event("change");t.dispatchEvent(e)}}}async function threadToPlaylist(e,t){function r(e){const t=["video","audio"],r=e.mimetype.split("/")[0];return r===t[0]||r===t[1]}try{const i=await async function(){let r=`${window.location.origin}/${e}/thread/${t}.json`;return await fetch(r).then((e=>e.json()))}(),n=await async function(e){const t=[];e.files.forEach((e=>{r(e)&&t.push(e)}));for(let i=0;i<e.replies.length;i++)e.replies[i].files.forEach((e=>{r(e)&&t.push(e)}));return t}(i),s=await function(e){const t=[];t.push("#EXTM3U");for(let r=0;r<e.length;r++){const i=e[r];t.push(`#EXTINF:${i.duration}, ${i.originalFilename}`),t.push(`${location.origin}/file/${i.filename}`)}return t.join("\n")}(n);s.split("\n").length>1?function(e,t){const r=new Blob([t],{type:"application/mpegurl"}),i=window.URL.createObjectURL(r),n=document.createElement("a");n.href=i,n.target="_blank",n.download=e,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}(`${i.board}-${i.postId}.m3u`,s):alert(__("No video/audio files in this thread."))}catch(e){console.log(e)}}function showTegakiReplay(e){e.preventDefault(),Tegaki.open({replayMode:!0,replayURL:e.target.href}),Tegaki.setColorPalette(2)}function addReplayListeners(e){Array.from(e.getElementsByClassName("replay-tegaki")).forEach((e=>{e.addEventListener("click",showTegakiReplay,!1)}))}window.addEventListener("settingsReady",(()=>{new syncedField('input[name="postpassword"]',"postpassword"),new syncedField('input[name="name"]',"name");const e=window.location.pathname.split("/")[1];new syncedField('select[name="customflag"]',`customflag-${e}`)})),window.addEventListener("createPlaylist",(e=>{threadToPlaylist(e.detail.board,e.detail.postId)})),window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#postform"),t=document.querySelector('a[href="#postform"]'),r=document.querySelector(".bottom-reply"),i=document.getElementById("message"),n=n=>{n&&n.preventDefault(),e&&(history.replaceState({},"","#postform"),e.style.display="flex",t.style.visibility="hidden",r&&(r.style.display="none"),i&&i.focus(),e.dispatchEvent(new Event("opened")))},s=i=>{i.preventDefault(),history.replaceState({},"",location.pathname),e.style.display="none",t.style.visibility="visible",r&&(r.style.display="")};if(e){const i=e?e.querySelector(".close"):null;t.addEventListener("click",n,!1),r&&r.addEventListener("click",n,!1),i.addEventListener("click",s,!1)}const a=function(e){let t,r=`>>${e}\n`;if(window.getSelection?t=window.getSelection().toString():document.getSelection?t=document.getSelection().toString():document.selection&&(t=document.selection.createRange().text),t&&t.length>0){r+=`${t.split(/\r?\n/).map((e=>e.trim().length>0?`>${e}`:e)).join("\n")}\n`}n(),(e=>{const t=i.selectionStart;i.value=`${i.value.substr(0,t)}${e}${i.value.substr(t)}`,i.setSelectionRange(t+e.length,t+e.length)})(r),i.focus(),i.dispatchEvent(new Event("input"))},o=function(e){const t=this.textContent.trim();isThread&&!e.ctrlKey?a(t):setLocalStorage("clickedQuote",t)};if("#postform"===location.hash&&n(),isThread){const e=localStorage.getItem("clickedQuote");if(null!=e){a(e);const t=document.getElementById(e);t&&t.scrollIntoView()}localStorage.removeItem("clickedQuote")}const c=e=>{for(let t=0;t<e.length;t++)e[t].addEventListener("click",o,!1)},l=document.getElementsByClassName("post-quoters");c(l),window.addEventListener("addPost",(function(e){if(e.detail.hover)return;const t=e.detail.post.getElementsByClassName("post-quoters");c(t)}))})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).io=t()}(this,(function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(void 0,"symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key))?n:String(n)),i)}var n}function i(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n.apply(this,arguments)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t,r){return l=c()?Reflect.construct.bind():function(e,t,r){var i=[null];i.push.apply(i,t);var n=new(Function.bind.apply(e,i));return r&&o(n,r.prototype),n},l.apply(null,arguments)}function d(e){var t="function"==typeof Map?new Map:void 0;return d=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return l(e,arguments,a(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),o(i,e)},d(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){var t=c();return function(){var r,i=a(e);if(t){var n=a(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(this,r)}}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}},p.apply(this,arguments)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function g(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw s}}}}var m=Object.create(null);m.open="0",m.close="1",m.ping="2",m.pong="3",m.message="4",m.upgrade="5",m.noop="6";var y=Object.create(null);Object.keys(m).forEach((function(e){y[m[e]]=e}));var v,b={type:"error",data:"parser error"},T="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),_="function"==typeof ArrayBuffer,k=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},E=function(e,t,r){var i=e.type,n=e.data;return T&&n instanceof Blob?t?r(n):w(n,r):_&&(n instanceof ArrayBuffer||k(n))?t?r(n):w(new Blob([n]),r):r(m[i]+(n||""))},w=function(e,t){var r=new FileReader;return r.onload=function(){var e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)};function A(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}for(var I="undefined"==typeof Uint8Array?[]:new Uint8Array(256),R=0;R<64;R++)I["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(R)]=R;var S,C="function"==typeof ArrayBuffer,x=function(e,t){if("string"!=typeof e)return{type:"message",data:O(e,t)};var r=e.charAt(0);return"b"===r?{type:"message",data:P(e.substring(1),t)}:y[r]?e.length>1?{type:y[r],data:e.substring(1)}:{type:y[r]}:b},P=function(e,t){if(C){var r=function(e){var t,r,i,n,s,a=.75*e.length,o=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),d=new Uint8Array(l);for(t=0;t<o;t+=4)r=I[e.charCodeAt(t)],i=I[e.charCodeAt(t+1)],n=I[e.charCodeAt(t+2)],s=I[e.charCodeAt(t+3)],d[c++]=r<<2|i>>4,d[c++]=(15&i)<<4|n>>2,d[c++]=(3&n)<<6|63&s;return l}(e);return O(r,t)}return{base64:!0,data:e}},O=function(e,t){return"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer},L=String.fromCharCode(30);function B(e){return e.reduce((function(e,t){return e+t.length}),0)}function N(e,t){if(e[0].length===t)return e.shift();for(var r=new Uint8Array(t),i=0,n=0;n<t;n++)r[n]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),r}function M(e){if(e)return function(e){for(var t in M.prototype)e[t]=M.prototype[t];return e}(e)}M.prototype.on=M.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},M.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},M.prototype.off=M.prototype.removeListener=M.prototype.removeAllListeners=M.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<i.length;n++)if((r=i[n])===t||r.fn===t){i.splice(n,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},M.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(r){i=0;for(var n=(r=r.slice(0)).length;i<n;++i)r[i].apply(this,t)}return this},M.prototype.emitReserved=M.prototype.emit,M.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},M.prototype.hasListeners=function(e){return!!this.listeners(e).length};var D="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function U(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.reduce((function(t,r){return e.hasOwnProperty(r)&&(t[r]=e[r]),t}),{})}var F=D.setTimeout,j=D.clearTimeout;function H(e,t){t.useNativeTimers?(e.setTimeoutFn=F.bind(D),e.clearTimeoutFn=j.bind(D)):(e.setTimeoutFn=D.setTimeout.bind(D),e.clearTimeoutFn=D.clearTimeout.bind(D))}var G,V=function(e){s(n,e);var r=h(n);function n(e,i,s){var a;return t(this,n),(a=r.call(this,e)).description=i,a.context=s,a.type="TransportError",a}return i(n)}(d(Error)),z=function(e){s(n,e);var r=h(n);function n(e){var i;return t(this,n),(i=r.call(this)).writable=!1,H(u(i),e),i.opts=e,i.query=e.query,i.socket=e.socket,i}return i(n,[{key:"onError",value:function(e,t,r){return p(a(n.prototype),"emitReserved",this).call(this,"error",new V(e,t,r)),this}},{key:"open",value:function(){return this.readyState="opening",this.doOpen(),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,p(a(n.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=x(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){p(a(n.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",p(a(n.prototype),"emitReserved",this).call(this,"close",e)}},{key:"pause",value:function(e){}},{key:"createUri",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}},{key:"_hostname",value:function(){var e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}},{key:"_port",value:function(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}},{key:"_query",value:function(e){var t=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}(e);return t.length?"?"+t:""}}]),n}(M),$="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),W=64,Z={},q=0,K=0;function Q(e){var t="";do{t=$[e%W]+t,e=Math.floor(e/W)}while(e>0);return t}function J(){var e=Q(+new Date);return e!==G?(q=0,G=e):e+"."+Q(q++)}for(;K<W;K++)Z[$[K]]=K;var X=!1;try{X="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}var Y=X;function ee(e){var t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||Y))return new XMLHttpRequest}catch(e){}if(!t)try{return new(D[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}function te(){}var re=null!=new ee({xdomain:!1}).responseType,ie=function(e){s(a,e);var r=h(a);function a(e){var i;if(t(this,a),(i=r.call(this,e)).polling=!1,"undefined"!=typeof location){var n="https:"===location.protocol,s=location.port;s||(s=n?"443":"80"),i.xd="undefined"!=typeof location&&e.hostname!==location.hostname||s!==e.port}var o=e&&e.forceBase64;return i.supportsBinary=re&&!o,i.opts.withCredentials&&(i.cookieJar=void 0),i}return i(a,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var r=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var i=0;this.polling&&(i++,this.once("pollComplete",(function(){--i||r()}))),this.writable||(i++,this.once("drain",(function(){--i||r()})))}else r()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var r=e.split(L),i=[],n=0;n<r.length;n++){var s=x(r[n],t);if(i.push(s),"error"===s.type)break}return i})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var r=e.length,i=new Array(r),n=0;e.forEach((function(e,s){E(e,!1,(function(e){i[s]=e,++n===r&&t(i.join(L))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}))}},{key:"uri",value:function(){var e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=J()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new ne(this.uri(),e)}},{key:"doWrite",value:function(e,t){var r=this,i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",(function(e,t){r.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,r){e.onError("xhr poll error",t,r)})),this.pollXhr=t}}]),a}(z),ne=function(e){s(n,e);var r=h(n);function n(e,i){var s;return t(this,n),H(u(s=r.call(this)),i),s.opts=i,s.method=i.method||"GET",s.uri=e,s.data=void 0!==i.data?i.data:null,s.create(),s}return i(n,[{key:"create",value:function(){var e,t=this,r=U(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this.opts.xd;var i=this.xhr=new ee(r);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders)for(var s in i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&i.setRequestHeader(s,this.opts.extraHeaders[s])}catch(e){}if("POST"===this.method)try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{i.setRequestHeader("Accept","*/*")}catch(e){}null===(e=this.opts.cookieJar)||void 0===e||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=function(){var e;3===i.readyState&&(null===(e=t.opts.cookieJar)||void 0===e||e.parseCookies(i)),4===i.readyState&&(200===i.status||1223===i.status?t.onLoad():t.setTimeoutFn((function(){t.onError("number"==typeof i.status?i.status:0)}),0))},i.send(this.data)}catch(e){return void this.setTimeoutFn((function(){t.onError(e)}),0)}"undefined"!=typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=te,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),n}(M);function se(){for(var e in ne.requests)ne.requests.hasOwnProperty(e)&&ne.requests[e].abort()}ne.requestsCount=0,ne.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",se):"function"==typeof addEventListener&&addEventListener("onpagehide"in D?"pagehide":"unload",se,!1));var ae="function"==typeof Promise&&"function"==typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},oe=D.WebSocket||D.MozWebSocket,ce="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),le=function(e){s(n,e);var r=h(n);function n(e){var i;return t(this,n),(i=r.call(this,e)).supportsBinary=!e.forceBase64,i}return i(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,r=ce?{}:U(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=ce?new oe(e,t,r):t?new oe(e,t):new oe(e)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var r=function(){var r=e[i],n=i===e.length-1;E(r,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(e){}n&&ae((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},i=0;i<e.length;i++)r()}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=J()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}},{key:"check",value:function(){return!!oe}}]),n}(z),de=function(e){s(n,e);var r=h(n);function n(){return t(this,n),r.apply(this,arguments)}return i(n,[{key:"name",get:function(){return"webtransport"}},{key:"doOpen",value:function(){var e=this;"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then((function(){e.onClose()})).catch((function(t){e.onError("webtransport error",t)})),this.transport.ready.then((function(){e.transport.createBidirectionalStream().then((function(t){var r=function(e,t){S||(S=new TextDecoder);var r=[],i=0,n=-1,s=!1;return new TransformStream({transform:function(a,o){for(r.push(a);;){if(0===i){if(B(r)<1)break;var c=N(r,1);s=128==(128&c[0]),n=127&c[0],i=n<126?3:126===n?1:2}else if(1===i){if(B(r)<2)break;var l=N(r,2);n=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),i=3}else if(2===i){if(B(r)<8)break;var d=N(r,8),u=new DataView(d.buffer,d.byteOffset,d.length),h=u.getUint32(0);if(h>Math.pow(2,21)-1){o.enqueue(b);break}n=h*Math.pow(2,32)+u.getUint32(4),i=3}else{if(B(r)<n)break;var p=N(r,n);o.enqueue(x(s?p:S.decode(p),t)),i=0}if(0===n||n>e){o.enqueue(b);break}}}})}(Number.MAX_SAFE_INTEGER,e.socket.binaryType),i=t.readable.pipeThrough(r).getReader(),n=new TransformStream({transform:function(e,t){!function(e,t){T&&e.data instanceof Blob?e.data.arrayBuffer().then(A).then(t):_&&(e.data instanceof ArrayBuffer||k(e.data))?t(A(e.data)):E(e,!1,(function(e){v||(v=new TextEncoder),t(v.encode(e))}))}(e,(function(r){var i,n=r.length;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);var s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,n)}else{i=new Uint8Array(9);var a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(n))}e.data&&"string"!=typeof e.data&&(i[0]|=128),t.enqueue(i),t.enqueue(r)}))}});n.readable.pipeTo(t.writable),e.writer=n.writable.getWriter(),function t(){i.read().then((function(r){var i=r.done,n=r.value;i||(e.onPacket(n),t())})).catch((function(e){}))}();var s={type:"open"};e.query.sid&&(s.data='{"sid":"'.concat(e.query.sid,'"}')),e.writer.write(s).then((function(){return e.onOpen()}))}))})))}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var r=function(){var r=e[i],n=i===e.length-1;t.writer.write(r).then((function(){n&&ae((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},i=0;i<e.length;i++)r()}},{key:"doClose",value:function(){var e;null===(e=this.transport)||void 0===e||e.close()}}]),n}(z),ue={websocket:le,webtransport:de,polling:ie},he=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,pe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function fe(e){var t=e,r=e.indexOf("["),i=e.indexOf("]");-1!=r&&-1!=i&&(e=e.substring(0,r)+e.substring(r,i).replace(/:/g,";")+e.substring(i,e.length));for(var n,s,a=he.exec(e||""),o={},c=14;c--;)o[pe[c]]=a[c]||"";return-1!=r&&-1!=i&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){var r=t.replace(/\/{2,9}/g,"/").split("/");return"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,o.path),o.queryKey=(n=o.query,s={},n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(s[t]=r)})),s),o}var ge=function(r){s(o,r);var a=h(o);function o(r){var i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(this,o),(i=a.call(this)).binaryType="arraybuffer",i.writeBuffer=[],r&&"object"===e(r)&&(s=r,r=null),r?(r=fe(r),s.hostname=r.host,s.secure="https"===r.protocol||"wss"===r.protocol,s.port=r.port,r.query&&(s.query=r.query)):s.host&&(s.hostname=fe(s.host).host),H(u(i),s),i.secure=null!=s.secure?s.secure:"undefined"!=typeof location&&"https:"===location.protocol,s.hostname&&!s.port&&(s.port=i.secure?"443":"80"),i.hostname=s.hostname||("undefined"!=typeof location?location.hostname:"localhost"),i.port=s.port||("undefined"!=typeof location&&location.port?location.port:i.secure?"443":"80"),i.transports=s.transports||["polling","websocket","webtransport"],i.writeBuffer=[],i.prevBufferLen=0,i.opts=n({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),i.opts.path=i.opts.path.replace(/\/$/,"")+(i.opts.addTrailingSlash?"/":""),"string"==typeof i.opts.query&&(i.opts.query=function(e){for(var t={},r=e.split("&"),i=0,n=r.length;i<n;i++){var s=r[i].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}(i.opts.query)),i.id=null,i.upgrades=null,i.pingInterval=null,i.pingTimeout=null,i.pingTimeoutTimer=null,"function"==typeof addEventListener&&(i.opts.closeOnBeforeunload&&(i.beforeunloadEventListener=function(){i.transport&&(i.transport.removeAllListeners(),i.transport.close())},addEventListener("beforeunload",i.beforeunloadEventListener,!1)),"localhost"!==i.hostname&&(i.offlineEventListener=function(){i.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",i.offlineEventListener,!1))),i.open(),i}return i(o,[{key:"createTransport",value:function(e){var t=n({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var r=n({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new ue[e](r)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&o.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,r=this.createTransport(e),i=!1;o.priorWebsocketSuccess=!1;var n=function(){i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!i)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",r),!r)return;o.priorWebsocketSuccess="websocket"===r.name,t.transport.pause((function(){i||"closed"!==t.readyState&&(u(),t.setTransport(r),r.send([{type:"upgrade"}]),t.emitReserved("upgrade",r),r=null,t.upgrading=!1,t.flush())}))}else{var n=new Error("probe error");n.transport=r.name,t.emitReserved("upgradeError",n)}})))};function s(){i||(i=!0,u(),r.close(),r=null)}var a=function(e){var i=new Error("probe error: "+e);i.transport=r.name,s(),t.emitReserved("upgradeError",i)};function c(){a("transport closed")}function l(){a("socket closed")}function d(e){r&&e.name!==r.name&&s()}var u=function(){r.removeListener("open",n),r.removeListener("error",a),r.removeListener("close",c),t.off("close",l),t.off("upgrading",d)};r.once("open",n),r.once("error",a),r.once("close",c),this.once("close",l),this.once("upgrading",d),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((function(){i||r.open()}),200):r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",o.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,r=0;r<this.writeBuffer.length;r++){var i=this.writeBuffer[r].data;if(i&&(t+="string"==typeof(e=i)?function(e){for(var t=0,r=0,i=0,n=e.length;i<n;i++)(t=e.charCodeAt(i))<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(i++,r+=4);return r}(e):Math.ceil(1.33*(e.byteLength||e.size))),r>0&&t>this.maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,r){return this.sendPacket("message",e,t,r),this}},{key:"send",value:function(e,t,r){return this.sendPacket("message",e,t,r),this}},{key:"sendPacket",value:function(e,t,r,i){if("function"==typeof t&&(i=t,t=void 0),"function"==typeof r&&(i=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var n={type:e,data:t,options:r};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),i&&this.once("flush",i),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},r=function r(){e.off("upgrade",r),e.off("upgradeError",r),t()},i=function(){e.once("upgrade",r),e.once("upgradeError",r)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?i():t()})):this.upgrading?i():t()),this}},{key:"onError",value:function(e){o.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],r=0,i=e.length;r<i;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}]),o}(M);ge.protocol=4,ge.protocol;var me="function"==typeof ArrayBuffer,ye=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer},ve=Object.prototype.toString,be="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===ve.call(Blob),Te="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===ve.call(File);function _e(e){return me&&(e instanceof ArrayBuffer||ye(e))||be&&e instanceof Blob||Te&&e instanceof File}function ke(t,r){if(!t||"object"!==e(t))return!1;if(Array.isArray(t)){for(var i=0,n=t.length;i<n;i++)if(ke(t[i]))return!0;return!1}if(_e(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return ke(t.toJSON(),!0);for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&ke(t[s]))return!0;return!1}function Ee(t,r){if(!t)return t;if(_e(t)){var i={_placeholder:!0,num:r.length};return r.push(t),i}if(Array.isArray(t)){for(var n=new Array(t.length),s=0;s<t.length;s++)n[s]=Ee(t[s],r);return n}if("object"===e(t)&&!(t instanceof Date)){var a={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(a[o]=Ee(t[o],r));return a}return t}function we(t,r){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<r.length)return r[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]=we(t[i],r);else if("object"===e(t))for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=we(t[n],r));return t}var Ae,Ie=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Ae||(Ae={}));var Re=function(){function e(r){t(this,e),this.replacer=r}return i(e,[{key:"encode",value:function(e){return e.type!==Ae.EVENT&&e.type!==Ae.ACK||!ke(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Ae.EVENT?Ae.BINARY_EVENT:Ae.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==Ae.BINARY_EVENT&&e.type!==Ae.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=function(e){var t=[],r=e.data,i=e;return i.data=Ee(r,t),i.attachments=t.length,{packet:i,buffers:t}}(e),r=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(r),i}}]),e}();function Se(e){return"[object Object]"===Object.prototype.toString.call(e)}var Ce=function(e){s(n,e);var r=h(n);function n(e){var i;return t(this,n),(i=r.call(this)).reviver=e,i}return i(n,[{key:"add",value:function(e){var t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var r=(t=this.decodeString(e)).type===Ae.BINARY_EVENT;r||t.type===Ae.BINARY_ACK?(t.type=r?Ae.EVENT:Ae.ACK,this.reconstructor=new xe(t),0===t.attachments&&p(a(n.prototype),"emitReserved",this).call(this,"decoded",t)):p(a(n.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!_e(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,p(a(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===Ae[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Ae.BINARY_EVENT||r.type===Ae.BINARY_ACK){for(var i=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var s=e.substring(i,t);if(s!=Number(s)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(s)}if("/"===e.charAt(t+1)){for(var a=t+1;++t&&","!==e.charAt(t)&&t!==e.length;);r.nsp=e.substring(a,t)}else r.nsp="/";var o=e.charAt(t+1);if(""!==o&&Number(o)==o){for(var c=t+1;++t;){var l=e.charAt(t);if(null==l||Number(l)!=l){--t;break}if(t===e.length)break}r.id=Number(e.substring(c,t+1))}if(e.charAt(++t)){var d=this.tryParse(e.substr(t));if(!n.isPayloadValid(r.type,d))throw new Error("invalid payload");r.data=d}return r}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case Ae.CONNECT:return Se(t);case Ae.DISCONNECT:return void 0===t;case Ae.CONNECT_ERROR:return"string"==typeof t||Se(t);case Ae.EVENT:case Ae.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===Ie.indexOf(t[0]));case Ae.ACK:case Ae.BINARY_ACK:return Array.isArray(t)}}}]),n}(M),xe=function(){function e(r){t(this,e),this.packet=r,this.buffers=[],this.reconPack=r}return i(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=function(e,t){return e.data=we(e.data,t),delete e.attachments,e}(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}(),Pe=Object.freeze({__proto__:null,protocol:5,get PacketType(){return Ae},Encoder:Re,Decoder:Ce});function Oe(e,t,r){return e.on(t,r),function(){e.off(t,r)}}var Le=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Be=function(e){s(o,e);var r=h(o);function o(e,i,s){var a;return t(this,o),(a=r.call(this)).connected=!1,a.recovered=!1,a.receiveBuffer=[],a.sendBuffer=[],a._queue=[],a._queueSeq=0,a.ids=0,a.acks={},a.flags={},a.io=e,a.nsp=i,s&&s.auth&&(a.auth=s.auth),a._opts=n({},s),a.io._autoConnect&&a.open(),a}return i(o,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[Oe(e,"open",this.onopen.bind(this)),Oe(e,"packet",this.onpacket.bind(this)),Oe(e,"error",this.onerror.bind(this)),Oe(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(Le.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];if(r.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;var n={type:Ae.EVENT,data:r,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof r[r.length-1]){var s=this.ids++,a=r.pop();this._registerAckCallback(s,a),n.id=s}var o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!o||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var r,i=this,n=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0!==n){var s=this.io.setTimeoutFn((function(){delete i.acks[e];for(var r=0;r<i.sendBuffer.length;r++)i.sendBuffer[r].id===e&&i.sendBuffer.splice(r,1);t.call(i,new Error("operation has timed out"))}),n);this.acks[e]=function(){i.io.clearTimeoutFn(s);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];t.apply(i,[null].concat(r))}}else this.acks[e]=t}},{key:"emitWithAck",value:function(e){for(var t=this,r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];var s=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((function(r,n){i.push((function(e,t){return s?e?n(e):r(t):r(e)})),t.emit.apply(t,[e].concat(i))}))}},{key:"_addToQueue",value:function(e){var t,r=this;"function"==typeof e[e.length-1]&&(t=e.pop());var i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:n({fromQueue:!0},this.flags)};e.push((function(e){if(i===r._queue[0]){if(null!==e)i.tryCount>r._opts.retries&&(r._queue.shift(),t&&t(e));else if(r._queue.shift(),t){for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];t.apply(void 0,[null].concat(s))}return i.pending=!1,r._drainQueue()}})),this._queue.push(i),this._drainQueue()}},{key:"_drainQueue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e._sendConnectPacket(t)})):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(e){this.packet({type:Ae.CONNECT,data:this._pid?n({pid:this._pid,offset:this._lastOffset},e):e})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case Ae.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ae.EVENT:case Ae.BINARY_EVENT:this.onevent(e);break;case Ae.ACK:case Ae.BINARY_ACK:this.onack(e);break;case Ae.DISCONNECT:this.ondisconnect();break;case Ae.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,r=g(this._anyListeners.slice());try{for(r.s();!(t=r.n()).done;)t.value.apply(this,e)}catch(e){r.e(e)}finally{r.f()}}p(a(o.prototype),"emit",this).apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}},{key:"ack",value:function(e){var t=this,r=!1;return function(){if(!r){r=!0;for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];t.packet({type:Ae.ACK,id:e,data:n})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Ae.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,r=g(this._anyOutgoingListeners.slice());try{for(r.s();!(t=r.n()).done;)t.value.apply(this,e.data)}catch(e){r.e(e)}finally{r.f()}}}}]),o}(M);function Ne(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Ne.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,this.max)},Ne.prototype.reset=function(){this.attempts=0},Ne.prototype.setMin=function(e){this.ms=e},Ne.prototype.setMax=function(e){this.max=e},Ne.prototype.setJitter=function(e){this.jitter=e};var Me=function(r){s(a,r);var n=h(a);function a(r,i){var s,o;t(this,a),(s=n.call(this)).nsps={},s.subs=[],r&&"object"===e(r)&&(i=r,r=void 0),(i=i||{}).path=i.path||"/socket.io",s.opts=i,H(u(s),i),s.reconnection(!1!==i.reconnection),s.reconnectionAttempts(i.reconnectionAttempts||1/0),s.reconnectionDelay(i.reconnectionDelay||1e3),s.reconnectionDelayMax(i.reconnectionDelayMax||5e3),s.randomizationFactor(null!==(o=i.randomizationFactor)&&void 0!==o?o:.5),s.backoff=new Ne({min:s.reconnectionDelay(),max:s.reconnectionDelayMax(),jitter:s.randomizationFactor()}),s.timeout(null==i.timeout?2e4:i.timeout),s._readyState="closed",s.uri=r;var c=i.parser||Pe;return s.encoder=new c.Encoder,s.decoder=new c.Decoder,s._autoConnect=!1!==i.autoConnect,s._autoConnect&&s.open(),s}return i(a,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new ge(this.uri,this.opts);var r=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;var n=Oe(r,"open",(function(){i.onopen(),e&&e()})),s=function(r){t.cleanup(),t._readyState="closed",t.emitReserved("error",r),e?e(r):t.maybeReconnectOnOpen()},a=Oe(r,"error",s);if(!1!==this._timeout){var o=this._timeout,c=this.setTimeoutFn((function(){n(),s(new Error("timeout")),r.close()}),o);this.opts.autoUnref&&c.unref(),this.subs.push((function(){t.clearTimeoutFn(c)}))}return this.subs.push(n),this.subs.push(a),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(Oe(e,"ping",this.onping.bind(this)),Oe(e,"data",this.ondata.bind(this)),Oe(e,"error",this.onerror.bind(this)),Oe(e,"close",this.onclose.bind(this)),Oe(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}},{key:"ondecoded",value:function(e){var t=this;ae((function(){t.emitReserved("packet",e)}),this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Be(this,e,t),this.nsps[e]=r),r}},{key:"_destroy",value:function(e){for(var t=0,r=Object.keys(this.nsps);t<r.length;t++){var i=r[t];if(this.nsps[i].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),r=0;r<t.length;r++)this.engine.write(t[r],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var r=this.backoff.duration();this._reconnecting=!0;var i=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(r){r?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",r)):t.onreconnect()})))}),r);this.opts.autoUnref&&i.unref(),this.subs.push((function(){e.clearTimeoutFn(i)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),a}(M),De={};function Ue(t,r){"object"===e(t)&&(r=t,t=void 0);var i,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,i=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==r?r.protocol+"//"+e:"https://"+e),i=fe(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";var n=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+n+":"+i.port+t,i.href=i.protocol+"://"+n+(r&&r.port===i.port?"":":"+i.port),i}(t,(r=r||{}).path||"/socket.io"),s=n.source,a=n.id,o=n.path,c=De[a]&&o in De[a].nsps;return r.forceNew||r["force new connection"]||!1===r.multiplex||c?i=new Me(s,r):(De[a]||(De[a]=new Me(s,r)),i=De[a]),n.query&&!r.query&&(r.query=n.queryKey),i.socket(n.path,r)}return n(Ue,{Manager:Me,Socket:Be,io:Ue,connect:Ue}),Ue})),window.addEventListener("DOMContentLoaded",(()=>{addReplayListeners(document)})),window.addEventListener("addPost",(e=>{e.detail.hover||addReplayListeners(e.detail.post)}));let customCSSString=localStorage.getItem("customcss"),disableBoardCss="true"==localStorage.getItem("disableboardcss");window.addEventListener("settingsReady",(function(){const e=document.getElementById("theme-setting");e.value=localStorage.getItem("theme"),e.addEventListener("change",(()=>{setLocalStorage("theme",e.value),changeTheme("theme")}),!1);const t=document.getElementById("codetheme-setting");t.value=localStorage.getItem("codetheme"),t.addEventListener("change",(()=>{setLocalStorage("codetheme",t.value),changeTheme("codetheme")}),!1);const r=document.getElementById("customcss-setting");r.value=customCSSString,r.addEventListener("input",(()=>{customCSSString=r.value,console.log("editing custom CSS",customCSSString.length),setLocalStorage("customcss",customCSSString),changeTheme("customcss")}),!1);const i=document.getElementById("disableboardcss-setting");i.addEventListener("change",(()=>{disableBoardCss=!disableBoardCss,setLocalStorage("disableboardcss",disableBoardCss),console.log("toggling disable board custom css",disableBoardCss),toggleBoardCss()}),!1),i.checked="true"==localStorage.getItem("disableboardcss")}));const customCSSLink=document.createElement("style");function toggleBoardCss(){const e=document.getElementById("board-customcss");e&&(disableBoardCss?e.setAttribute("media","screen and (max-width: 1px)"):e.removeAttribute("media"))}function changeTheme(e){switch(e){case"theme":case"codetheme":{const t=localStorage.getItem(e);let r=document.getElementById(`custom${e}`),i=document.getElementById(e);if("default"===t||t===i.dataset.theme)i.rel="stylesheet",setTimeout((()=>{r&&r.remove()}),100);else{const n=`/css/${e}s/${t}.css`;let s=localStorage.getItem(n);r||(r=document.createElement("style"),document.head.appendChild(r)),s&&(r.innerHTML=s),i.rel="";const a=document.createElement("link");a.rel="stylesheet",a.id=`custom${e}`,a.onload=function(){s="";const e=null!=a.sheet.rules?"rules":"cssRules";for(let t=0;t<a.sheet[e].length;t++)s+=a.sheet[e][t].cssText;setLocalStorage(n,s),r.innerHTML=s,r.remove()},a.href=n,document.head.appendChild(a)}break}case"customcss":customCSSLink.innerHTML=localStorage.getItem("customcss")}}function pug_attr(e,t,r,i){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(i?e:e+'="'+e+'"');var n=typeof t;return"object"!==n&&"function"!==n||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),r||-1===t.indexOf('"'))?(r&&(t=pug_escape(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function pug_classes(e,t){return Array.isArray(e)?pug_classes_array(e,t):e&&"object"==typeof e?pug_classes_object(e):e||""}function pug_classes_array(e,t){for(var r,i="",n="",s=Array.isArray(t),a=0;a<e.length;a++)(r=pug_classes(e[a]))&&(s&&t[a]&&(r=pug_escape(r)),i=i+n+r,n=" ");return i}function pug_classes_object(e){var t="",r="";for(var i in e)i&&e[i]&&pug_has_own_property.call(e,i)&&(t=t+r+i,r=" ");return t}function pug_escape(e){var t=""+e,r=pug_match_html.exec(t);if(!r)return e;var i,n,s,a="";for(i=r.index,n=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}n!==i&&(a+=t.substring(n,i)),n=i+1,a+=s}return n!==i?a+t.substring(n,i):a}customCSSLink.rel="stylesheet",customCSSLink.id="customcss",document.head.appendChild(customCSSLink),toggleBoardCss(),changeTheme("theme"),changeTheme("codetheme"),changeTheme("customcss"),window.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("threadstats"),t=Array.from(document.getElementsByClassName("user-id")),r=new Map,i=new Set,n=e=>{r.set(e,r.get(e)+1||1)},s=e=>{for(let i=0;i<t.length;i++){const n=t[i].innerText;if(e&&e!==n)continue;const s=r.get(n);t[i].setAttribute("data-count",` (${s})`),t[i].setAttribute("title",__n("Double click to highlight (%s)",s)),t[i].setAttribute("title-mobile",__n("Double tap to highlight (%s)",s))}},a=e=>{const t=e.target.innerText,r=document.querySelectorAll(`.post-container[data-user-id="${t}"]`),n=i.has(t);i[n?"delete":"add"](t);for(let e=0;e<r.length;e++)r[e].classList[n?"remove":"add"]("highlighted")};for(let e=0;e<t.length;e++)t[e].addEventListener("dblclick",a),n(t[e].innerText);isThread&&(s(),window.addEventListener("addPost",(function(o){if(o.detail.hover)return;const c=o.detail.json.files.length,l=+e.children[0].innerText.match(/^(\d+)/g),d=+e.children[1].innerText.match(/^(\d+)/g)+c,u=l+1;if(e.children[0].innerText=__n("%s replies",u),e.children[1].innerText=__n("%s files",d),o.detail.json.userId){const c=o.detail.post.querySelector(".user-id");if(t.push(c),c.addEventListener("dblclick",a),n(o.detail.json.userId),s(o.detail.json.userId),i.has(o.detail.json.userId)&&o.detail.post.classList.add("highlighted"),!e.children[2]){const t=document.createTextNode(" |  "),r=document.createElement("span");e.appendChild(t),e.appendChild(r)}e.children[2].innerText=__n("%s UIDs",r.size)}})))}));pug_has_own_property=Object.prototype.hasOwnProperty,pug_match_html=/["&<>]/;function threadwatcher(e){var t,r="",i={},n=e||{};return function(e,n){i.threadwatcher=t=function(i){this&&this.block,this&&this.attributes;r=r+"<div"+pug_attr("class",pug_classes(["flex-center",i?"minimised":""],[!1,!0]),!1,!1)+' id="threadwatcher"><div class="row noselect" id="threadwatcher-dragHandle"><span class="fw text-center">'+pug_escape(null==(t=e("Thread Watcher"))?"":t)+'</span><span class="mr-0 close">'+pug_escape(null==(t=i?"[+]":"[−]")?"":t)+"</span></div></div>"},i.threadwatcher(n)}.call(this,"__"in n?n.__:void 0!==__?__:void 0,"minimised"in n?n.minimised:"undefined"!=typeof minimised?minimised:void 0),r}function pug_attr(e,t,r,i){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(i?e:e+'="'+e+'"');var n=typeof t;return"object"!==n&&"function"!==n||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),r||-1===t.indexOf('"'))?(r&&(t=pug_escape(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function pug_escape(e){var t=""+e,r=pug_match_html.exec(t);if(!r)return e;var i,n,s,a="";for(i=r.index,n=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}n!==i&&(a+=t.substring(n,i)),n=i+1,a+=s}return n!==i?a+t.substring(n,i):a}window.addEventListener("DOMContentLoaded",(()=>{let e=document.hasFocus(),t=[];const r=document.title,i=e=>{const t=e.getBoundingClientRect().top,r=e.getBoundingClientRect().bottom,i=window.innerHeight;return(t>=0||r-t>i)&&r<=i},n=()=>{0===t.length?document.title=r:document.title=`(${t.length}) ${r}`},s=()=>{e=!e};window.addEventListener("focus",s),window.addEventListener("blur",s),window.addEventListener("scroll",(()=>{const e=t.length;t=t.filter((e=>!i(e)||(e.classList.remove("highlighted"),!1))),e!==t.length&&n()})),window.addEventListener("addPost",(function(r){if(r.detail.hover)return;const s=r.detail.post;e&&i(s)||(s.classList.add("highlighted"),t.push(s),n())}))}));pug_match_html=/["&<>]/;function uploaditem(e){var t,r="",i={},n=e||{};return function(e,n){i.uploaditem=t=function(i){this&&this.block,this&&this.attributes;r=r+'<div><div class="upload-item"><img class="upload-thumb"'+pug_attr("src",i.url,!0,!1)+"/><p>"+pug_escape(null==(t=i.name)?"":t)+'</p><a class="close">×</a></div>',i.hash&&(r+='<div class="row sb">',i.spoilers&&(r=r+'<label><input type="checkbox" name="spoiler"'+pug_attr("value",i.hash,!0,!1)+"/>"+pug_escape(null==(t=e("Spoiler"))?"":t)+"</label>"),i.stripFilenames&&(r=r+'<label><input type="checkbox" name="strip_filename"'+pug_attr("value",i.hash,!0,!1)+"/>"+pug_escape(null==(t=e("Strip Filename"))?"":t)+"</label>"),r+="</div>"),r+="</div>"},i.uploaditem(n)}.call(this,"__"in n?n.__:void 0!==__?__:void 0,"uploaditem"in n?n.uploaditem:void 0!==uploaditem?uploaditem:void 0),r}function pug_attr(e,t,r,i){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(i?e:e+'="'+e+'"');var n=typeof t;return"object"!==n&&"function"!==n||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),r||-1===t.indexOf('"'))?(r&&(t=pug_escape(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}function pug_classes(e,t){return Array.isArray(e)?pug_classes_array(e,t):e&&"object"==typeof e?pug_classes_object(e):e||""}function pug_classes_array(e,t){for(var r,i="",n="",s=Array.isArray(t),a=0;a<e.length;a++)(r=pug_classes(e[a]))&&(s&&t[a]&&(r=pug_escape(r)),i=i+n+r,n=" ");return i}function pug_classes_object(e){var t="",r="";for(var i in e)i&&e[i]&&pug_has_own_property.call(e,i)&&(t=t+r+i,r=" ");return t}function pug_escape(e){var t=""+e,r=pug_match_html.exec(t);if(!r)return e;var i,n,s,a="";for(i=r.index,n=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}n!==i&&(a+=t.substring(n,i)),n=i+1,a+=s}return n!==i?a+t.substring(n,i):a}window.addEventListener("DOMContentLoaded",(()=>{let e={};const t=async function(t){t.preventDefault();const r=this.closest(".post-container");if(!r)return;const i=this.hash.substring(1);let n,s=this.pathname.replace(/\.html$/,".json").split("/");(isManage||isModView)&&5===s.length&&s.splice(2,1),n=s.join("/");let a,o=localStorage.getItem(`hovercache-${n}`);if(o&&(o=JSON.parse(o),o.postId==i?a=o:o.replies.length>0&&(a=o.replies.find((e=>e.postId==i)))),!a){let r;this.style.cursor="wait";try{e[n]||(e[n]=fetch(n).then((e=>e.json()))),r=await e[n]}catch(t){return console.error(t)}finally{this.style.cursor=""}if(!r)return localStorage.removeItem(`hovercache-${n}`);setLocalStorage(`hovercache-${n}`,JSON.stringify(r)),hoverCacheList.value=Object.keys(localStorage).filter((e=>e.startsWith("hovercache"))),a=r.postId==i?r:r.replies.find((e=>e.postId==i))}if(!a)return;this.parentNode.remove();const c=r.querySelector(".post-message");c&&(c.innerHTML=a.message);const l=new CustomEvent("updatePostMessage",{detail:{nonotify:!0,post:r,postId:a.postId,json:a}});window.dispatchEvent(l)},r=document.getElementsByClassName("viewfulltext");for(let e=0;e<r.length;e++)r[e].addEventListener("click",t,!1)}));pug_has_own_property=Object.prototype.hasOwnProperty,pug_match_html=/["&<>]/;function watchedthread(e){var t,r="",i={},n=e||{};return function(e){i.watchedthread=t=function(e){this&&this.block,this&&this.attributes;r=r+'<div class="row watched-thread"'+pug_attr("data-id",`${e.board}-${e.postId}`,!0,!1)+pug_attr("data-unread",e.unread||null,!0,!1)+'><a class="close">×</a>';const i=`/${e.board}/thread/${e.postId}.html`;r=r+"<a"+(pug_attr("class",pug_classes([e.isCurrentThread?"bold":""],[!0]),!1,!1)+pug_attr("href",i,!0,!1))+">/"+pug_escape(null==(t=e.board)?"":t)+"/ - "+pug_escape(null==(t=e.subject||`#${e.postId}`)?"":t)+'</a><a class="ml-a"'+pug_attr("href",`${i}#bottom`,!0,!1)+">[▼]</a></div>"},i.watchedthread(e)}.call(this,"watchedthread"in n?n.watchedthread:void 0!==watchedthread?watchedthread:void 0),r}
/*! For license information please see web3.min.js.LICENSE.txt */!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Web3=t():e.Web3=t()}(this,(()=>(()=>{var e={7256:(e,t)=>{"use strict";function r(e){if(Array.isArray(e)){const t=[];let i=0;for(let n=0;n<e.length;n++){const s=r(e[n]);t.push(s),i+=s.length}return h(s(i,192),...t)}const t=m(e);return 1===t.length&&t[0]<128?t:h(s(t.length,128),t)}function i(e,t,r){if(r>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,r)}function n(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return d(l(e))}function s(e,t){if(e<56)return Uint8Array.from([e+t]);const r=f(e),i=f(t+55+r.length/2);return Uint8Array.from(u(i+r))}function a(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const r=o(m(e));if(t)return r;if(0!==r.remainder.length)throw new Error("invalid RLP: remainder must be zero");return r.data}function o(e){let t,r,s,a,c;const l=[],d=e[0];if(d<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(d<=183){if(t=d-127,s=128===d?Uint8Array.from([]):i(e,1,t),2===t&&s[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:s,remainder:e.slice(t)}}if(d<=191){if(r=d-182,e.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(t=n(i(e,1,r)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return s=i(e,r,t+r),{data:s,remainder:e.slice(t+r)}}if(d<=247){for(t=d-191,a=i(e,1,t);a.length;)c=o(a),l.push(c.data),a=c.remainder;return{data:l,remainder:e.slice(t)}}{if(r=d-246,t=n(i(e,1,r)),t<56)throw new Error("invalid RLP: encoded list too short");const s=r+t;if(s>e.length)throw new Error("invalid RLP: total length is larger than the data");for(a=i(e,r,s);a.length;)c=o(a),l.push(c.data),a=c.remainder;return{data:l,remainder:e.slice(s)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.RLP=t.utils=t.decode=t.encode=void 0,t.encode=r,t.decode=a;const c=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function l(e){let t="";for(let r=0;r<e.length;r++)t+=c[e[r]];return t}function d(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function u(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const i=2*r;t[r]=d(e.slice(i,i+2))}return t}function h(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){const n=e[t];r.set(n,i),i+=n.length}return r}function p(e){return(new TextEncoder).encode(e)}function f(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function g(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function m(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return g(e)?u((t="string"!=typeof(r=e)?r:g(r)?r.slice(2):r).length%2?`0${t}`:t):p(e);var t,r;if("number"==typeof e||"bigint"==typeof e)return e?u(f(e)):Uint8Array.from([]);if(null==e)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}t.utils={bytesToHex:l,concatBytes:h,hexToBytes:u,utf8ToBytes:p},t.RLP={encode:r,decode:a}},5887:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCurve=t.getHash=void 0;const i=r(1377),n=r(64),s=r(7851);function a(e){return{hash:e,hmac:(t,...r)=>(0,i.hmac)(e,t,(0,n.concatBytes)(...r)),randomBytes:n.randomBytes}}t.getHash=a,t.createCurve=function(e,t){const r=t=>(0,s.weierstrass)({...e,...a(t)});return Object.freeze({...r(t),create:r})}},1465:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateBasic=t.wNAF=void 0;const i=r(9530),n=r(4323),s=BigInt(0),a=BigInt(1);t.wNAF=function(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},i=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let i=e.ZERO,n=t;for(;r>s;)r&a&&(i=i.add(n)),n=n.double(),r>>=a;return i},precomputeWindow(e,t){const{windows:r,windowSize:n}=i(t),s=[];let a=e,o=a;for(let e=0;e<r;e++){o=a,s.push(o);for(let e=1;e<n;e++)o=o.add(a),s.push(o);a=o.double()}return s},wNAF(t,n,s){const{windows:o,windowSize:c}=i(t);let l=e.ZERO,d=e.BASE;const u=BigInt(2**t-1),h=2**t,p=BigInt(t);for(let e=0;e<o;e++){const t=e*c;let i=Number(s&u);s>>=p,i>c&&(i-=h,s+=a);const o=t,f=t+Math.abs(i)-1,g=e%2!=0,m=i<0;0===i?d=d.add(r(g,n[o])):l=l.add(r(m,n[f]))}return{p:l,f:d}},wNAFCached(e,t,r,i){const n=e._WINDOW_SIZE||1;let s=t.get(e);return s||(s=this.precomputeWindow(e,n),1!==n&&t.set(e,i(s))),this.wNAF(n,s,r)}}},t.validateBasic=function(e){return(0,i.validateField)(e.Fp),(0,n.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,i.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}},1322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHasher=t.isogenyMap=t.hash_to_field=t.expand_message_xof=t.expand_message_xmd=void 0;const i=r(9530),n=r(4323),s=n.bytesToNumberBE;function a(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const r=Array.from({length:t}).fill(0);for(let i=t-1;i>=0;i--)r[i]=255&e,e>>>=8;return new Uint8Array(r)}function o(e,t){const r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e[i]^t[i];return r}function c(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected")}function l(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function d(e,t,r,i){c(e),c(t),l(r),t.length>255&&(t=i((0,n.concatBytes)((0,n.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:s,blockLen:d}=i,u=Math.ceil(r/s);if(u>255)throw new Error("Invalid xmd length");const h=(0,n.concatBytes)(t,a(t.length,1)),p=a(0,d),f=a(r,2),g=new Array(u),m=i((0,n.concatBytes)(p,e,f,a(0,1),h));g[0]=i((0,n.concatBytes)(m,a(1,1),h));for(let e=1;e<=u;e++){const t=[o(m,g[e-1]),a(e+1,1),h];g[e]=i((0,n.concatBytes)(...t))}return(0,n.concatBytes)(...g).slice(0,r)}function u(e,t,r,i,s){if(c(e),c(t),l(r),t.length>255){const e=Math.ceil(2*i/8);t=s.create({dkLen:e}).update((0,n.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:r}).update(e).update(a(r,2)).update(t).update(a(t.length,1)).digest()}function h(e,t,r){(0,n.validateObject)(r,{DST:"string",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:a,k:o,m:h,hash:p,expand:f,DST:g}=r;c(e),l(t);const m=function(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return(0,n.utf8ToBytes)(e);throw new Error("DST must be Uint8Array or string")}(g),y=a.toString(2).length,v=Math.ceil((y+o)/8),b=t*h*v;let T;if("xmd"===f)T=d(e,m,b,p);else if("xof"===f)T=u(e,m,b,o,p);else{if("_internal_pass"!==f)throw new Error('expand must be "xmd" or "xof"');T=e}const _=new Array(t);for(let e=0;e<t;e++){const t=new Array(h);for(let r=0;r<h;r++){const n=v*(r+e*h),o=T.subarray(n,n+v);t[r]=(0,i.mod)(s(o),a)}_[e]=t}return _}t.expand_message_xmd=d,t.expand_message_xof=u,t.hash_to_field=h,t.isogenyMap=function(e,t){const r=t.map((e=>Array.from(e).reverse()));return(t,i)=>{const[n,s,a,o]=r.map((r=>r.reduce(((r,i)=>e.add(e.mul(r,t),i)))));return t=e.div(n,s),i=e.mul(i,e.div(a,o)),{x:t,y:i}}},t.createHasher=function(e,t,r){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(i,n){const s=h(i,2,{...r,DST:r.DST,...n}),a=e.fromAffine(t(s[0])),o=e.fromAffine(t(s[1])),c=a.add(o).clearCofactor();return c.assertValidity(),c},encodeToCurve(i,n){const s=h(i,1,{...r,DST:r.encodeDST,...n}),a=e.fromAffine(t(s[0])).clearCofactor();return a.assertValidity(),a}}}},9530:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hashToPrivateScalar=t.FpSqrtEven=t.FpSqrtOdd=t.Field=t.nLength=t.FpIsSquare=t.FpDiv=t.FpInvertBatch=t.FpPow=t.validateField=t.isNegativeLE=t.FpSqrt=t.tonelliShanks=t.invert=t.pow2=t.pow=t.mod=void 0;const i=r(4323),n=BigInt(0),s=BigInt(1),a=BigInt(2),o=BigInt(3),c=BigInt(4),l=BigInt(5),d=BigInt(8);function u(e,t){const r=e%t;return r>=n?r:t+r}function h(e,t,r){if(r<=n||t<n)throw new Error("Expected power/modulo > 0");if(r===s)return n;let i=s;for(;t>n;)t&s&&(i=i*e%r),e=e*e%r,t>>=s;return i}function p(e,t){if(e===n||t<=n)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=u(e,t),i=t,a=n,o=s,c=s,l=n;for(;r!==n;){const e=i/r,t=i%r,n=a-c*e,s=o-l*e;i=r,r=t,a=c,o=l,c=n,l=s}if(i!==s)throw new Error("invert: does not exist");return u(a,t)}function f(e){const t=(e-s)/a;let r,i,o;for(r=e-s,i=0;r%a===n;r/=a,i++);for(o=a;o<e&&h(o,t,e)!==e-s;o++);if(1===i){const t=(e+s)/c;return function(e,r){const i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw new Error("Cannot find square root");return i}}const l=(r+s)/a;return function(e,n){if(e.pow(n,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=i,c=e.pow(e.mul(e.ONE,o),r),d=e.pow(n,l),u=e.pow(n,r);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,s<<BigInt(a-t-1));c=e.sqr(r),d=e.mul(d,r),u=e.mul(u,c),a=t}return d}}function g(e){if(e%c===o){const t=(e+s)/c;return function(e,r){const i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw new Error("Cannot find square root");return i}}if(e%d===l){const t=(e-l)/d;return function(e,r){const i=e.mul(r,a),n=e.pow(i,t),s=e.mul(r,n),o=e.mul(e.mul(s,a),n),c=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(c),r))throw new Error("Cannot find square root");return c}}return f(e)}BigInt(9),BigInt(16),t.mod=u,t.pow=h,t.pow2=function(e,t,r){let i=e;for(;t-- >n;)i*=i,i%=r;return i},t.invert=p,t.tonelliShanks=f,t.FpSqrt=g,t.isNegativeLE=(e,t)=>(u(e,t)&s)===s;const m=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(e,t,r){if(r<n)throw new Error("Expected power > 0");if(r===n)return e.ONE;if(r===s)return t;let i=e.ONE,a=t;for(;r>n;)r&s&&(i=e.mul(i,a)),a=e.sqr(a),r>>=s;return i}function v(e,t){const r=new Array(t.length),i=t.reduce(((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i))),e.ONE),n=e.inv(i);return t.reduceRight(((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i))),n),r}function b(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}t.validateField=function(e){const t=m.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,i.validateObject)(e,t)},t.FpPow=y,t.FpInvertBatch=v,t.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?p(r,e.ORDER):e.inv(r))},t.FpIsSquare=function(e){const t=(e.ORDER-s)/a;return r=>{const i=e.pow(r,t);return e.eql(i,e.ZERO)||e.eql(i,e.ONE)}},t.nLength=b,t.Field=function(e,t,r=!1,a={}){if(e<=n)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:c}=b(e,t);if(c>2048)throw new Error("Field lengths over 2048 bytes are not supported");const l=g(e),d=Object.freeze({ORDER:e,BITS:o,BYTES:c,MASK:(0,i.bitMask)(o),ZERO:n,ONE:s,create:t=>u(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return n<=t&&t<e},is0:e=>e===n,isOdd:e=>(e&s)===s,neg:t=>u(-t,e),eql:(e,t)=>e===t,sqr:t=>u(t*t,e),add:(t,r)=>u(t+r,e),sub:(t,r)=>u(t-r,e),mul:(t,r)=>u(t*r,e),pow:(e,t)=>y(d,e,t),div:(t,r)=>u(t*p(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>p(t,e),sqrt:a.sqrt||(e=>l(d,e)),invertBatch:e=>v(d,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,i.numberToBytesLE)(e,c):(0,i.numberToBytesBE)(e,c),fromBytes:e=>{if(e.length!==c)throw new Error(`Fp.fromBytes: expected ${c}, got ${e.length}`);return r?(0,i.bytesToNumberLE)(e):(0,i.bytesToNumberBE)(e)}});return Object.freeze(d)},t.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},t.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},t.hashToPrivateScalar=function(e,t,r=!1){const n=(e=(0,i.ensureBytes)("privateHash",e)).length,a=b(t).nByteLength+8;if(a<24||n<a||n>1024)throw new Error(`hashToPrivateScalar: expected ${a}-1024 bytes of input, got ${n}`);return u(r?(0,i.bytesToNumberLE)(e):(0,i.bytesToNumberBE)(e),t-s)+s}},4323:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateObject=t.createHmacDrbg=t.bitMask=t.bitSet=t.bitGet=t.bitLen=t.utf8ToBytes=t.equalBytes=t.concatBytes=t.ensureBytes=t.numberToVarBytesBE=t.numberToBytesLE=t.numberToBytesBE=t.bytesToNumberLE=t.bytesToNumberBE=t.hexToBytes=t.hexToNumber=t.numberToHexUnpadded=t.bytesToHex=void 0;const r=BigInt(0),i=BigInt(1),n=BigInt(2),s=e=>e instanceof Uint8Array,a=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function o(e){if(!s(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=a[e[r]];return t}function c(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function l(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function d(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(e.length%2)throw new Error("hex string is invalid: unpadded "+e.length);const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const i=2*r,n=e.slice(i,i+2),s=Number.parseInt(n,16);if(Number.isNaN(s)||s<0)throw new Error("invalid byte sequence");t[r]=s}return t}function u(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let r=0;return e.forEach((e=>{if(!s(e))throw new Error("Uint8Array expected");t.set(e,r),r+=e.length})),t}t.bytesToHex=o,t.numberToHexUnpadded=c,t.hexToNumber=l,t.hexToBytes=d,t.bytesToNumberBE=function(e){return l(o(e))},t.bytesToNumberLE=function(e){if(!s(e))throw new Error("Uint8Array expected");return l(o(Uint8Array.from(e).reverse()))},t.numberToBytesBE=(e,t)=>d(e.toString(16).padStart(2*t,"0")),t.numberToBytesLE=(e,r)=>(0,t.numberToBytesBE)(e,r).reverse(),t.numberToVarBytesBE=e=>d(c(e)),t.ensureBytes=function(e,t,r){let i;if("string"==typeof t)try{i=d(t)}catch(r){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else{if(!s(t))throw new Error(`${e} must be hex string or Uint8Array`);i=Uint8Array.from(t)}const n=i.length;if("number"==typeof r&&n!==r)throw new Error(`${e} expected ${r} bytes, got ${n}`);return i},t.concatBytes=u,t.equalBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},t.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)},t.bitLen=function(e){let t;for(t=0;e>r;e>>=i,t+=1);return t},t.bitGet=(e,t)=>e>>BigInt(t)&i,t.bitSet=(e,t,n)=>e|(n?i:r)<<BigInt(t),t.bitMask=e=>(n<<BigInt(e-1))-i;const h=e=>new Uint8Array(e),p=e=>Uint8Array.from(e);t.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let i=h(e),n=h(e),s=0;const a=()=>{i.fill(1),n.fill(0),s=0},o=(...e)=>r(n,i,...e),c=(e=h())=>{n=o(p([0]),e),i=o(),0!==e.length&&(n=o(p([1]),e),i=o())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){i=o();const t=i.slice();r.push(t),e+=i.length}return u(...r)};return(e,t)=>{let r;for(a(),c(e);!(r=t(l()));)c();return a(),r}};const f={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};t.validateObject=function(e,t,r={}){const i=(t,r,i)=>{const n=f[r];if("function"!=typeof n)throw new Error(`Invalid validator "${r}", expected function`);const s=e[t];if(!(i&&void 0===s||n(s,e)))throw new Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(const[e,r]of Object.entries(t))i(e,r,!1);for(const[e,t]of Object.entries(r))i(e,t,!0);return e}},7851:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapToCurveSimpleSWU=t.SWUFpSqrtRatio=t.weierstrass=t.weierstrassPoints=t.DER=void 0;const i=r(9530),n=r(4323),s=r(4323),a=r(1465),{bytesToNumberBE:o,hexToBytes:c}=n;t.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:r}=t.DER;if(e.length<2||2!==e[0])throw new r("Invalid signature integer tag");const i=e[1],n=e.subarray(2,i+2);if(!i||n.length!==i)throw new r("Invalid signature integer: wrong length");if(128&n[0])throw new r("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new r("Invalid signature integer: unnecessary leading zero");return{d:o(n),l:e.subarray(i+2)}},toSig(e){const{Err:r}=t.DER,i="string"==typeof e?c(e):e;if(!(i instanceof Uint8Array))throw new Error("ui8a expected");let n=i.length;if(n<2||48!=i[0])throw new r("Invalid signature tag");if(i[1]!==n-2)throw new r("Invalid signature: incorrect length");const{d:s,l:a}=t.DER._parseInt(i.subarray(2)),{d:o,l:l}=t.DER._parseInt(a);if(l.length)throw new r("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},i=t(r(e.s)),n=t(r(e.r)),s=i.length/2,a=n.length/2,o=r(s),c=r(a);return`30${r(a+s+4)}02${c}${n}02${o}${i}`}};const l=BigInt(0),d=BigInt(1),u=BigInt(2),h=BigInt(3),p=BigInt(4);function f(e){const t=function(e){const t=(0,a.validateBasic)(e);n.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:i,a:s}=t;if(r){if(!i.eql(s,i.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,o=t.toBytes||((e,t,i)=>{const s=t.toAffine();return n.concatBytes(Uint8Array.from([4]),r.toBytes(s.x),r.toBytes(s.y))}),c=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function u(e){const{a:i,b:n}=t,s=r.sqr(e),a=r.mul(s,e);return r.add(r.add(a,r.mul(e,i)),n)}if(!r.eql(r.sqr(t.Gy),u(t.Gx)))throw new Error("bad generator point: equation left != right");function p(e){return"bigint"==typeof e&&l<e&&e<t.n}function f(e){if(!p(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function g(e){const{allowedPrivateKeyLengths:r,nByteLength:a,wrapPrivateKey:o,n:c}=t;if(r&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=n.bytesToHex(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*a,"0")}let l;try{l="bigint"==typeof e?e:n.bytesToNumberBE((0,s.ensureBytes)("private key",e,a))}catch(t){throw new Error(`private key must be ${a} bytes, hex or bigint, not ${typeof e}`)}return o&&(l=i.mod(l,c)),f(l),l}const m=new Map;function y(e){if(!(e instanceof v))throw new Error("ProjectivePoint expected")}class v{constructor(e,t,i){if(this.px=e,this.py=t,this.pz=i,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==i||!r.isValid(i))throw new Error("z required")}static fromAffine(e){const{x:t,y:i}=e||{};if(!e||!r.isValid(t)||!r.isValid(i))throw new Error("invalid affine point");if(e instanceof v)throw new Error("projective point not allowed");const n=e=>r.eql(e,r.ZERO);return n(t)&&n(i)?v.ZERO:new v(t,i,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(v.fromAffine)}static fromHex(e){const t=v.fromAffine(c((0,s.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return v.BASE.multiply(g(e))}_setWindowSize(e){this._WINDOW_SIZE=e,m.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:e,y:i}=this.toAffine();if(!r.isValid(e)||!r.isValid(i))throw new Error("bad point: x or y not FE");const n=r.sqr(i),s=u(e);if(!r.eql(n,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){y(e);const{px:t,py:i,pz:n}=this,{px:s,py:a,pz:o}=e,c=r.eql(r.mul(t,o),r.mul(s,n)),l=r.eql(r.mul(i,o),r.mul(a,n));return c&&l}negate(){return new v(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:i}=t,n=r.mul(i,h),{px:s,py:a,pz:o}=this;let c=r.ZERO,l=r.ZERO,d=r.ZERO,u=r.mul(s,s),p=r.mul(a,a),f=r.mul(o,o),g=r.mul(s,a);return g=r.add(g,g),d=r.mul(s,o),d=r.add(d,d),c=r.mul(e,d),l=r.mul(n,f),l=r.add(c,l),c=r.sub(p,l),l=r.add(p,l),l=r.mul(c,l),c=r.mul(g,c),d=r.mul(n,d),f=r.mul(e,f),g=r.sub(u,f),g=r.mul(e,g),g=r.add(g,d),d=r.add(u,u),u=r.add(d,u),u=r.add(u,f),u=r.mul(u,g),l=r.add(l,u),f=r.mul(a,o),f=r.add(f,f),u=r.mul(f,g),c=r.sub(c,u),d=r.mul(f,p),d=r.add(d,d),d=r.add(d,d),new v(c,l,d)}add(e){y(e);const{px:i,py:n,pz:s}=this,{px:a,py:o,pz:c}=e;let l=r.ZERO,d=r.ZERO,u=r.ZERO;const p=t.a,f=r.mul(t.b,h);let g=r.mul(i,a),m=r.mul(n,o),b=r.mul(s,c),T=r.add(i,n),_=r.add(a,o);T=r.mul(T,_),_=r.add(g,m),T=r.sub(T,_),_=r.add(i,s);let k=r.add(a,c);return _=r.mul(_,k),k=r.add(g,b),_=r.sub(_,k),k=r.add(n,s),l=r.add(o,c),k=r.mul(k,l),l=r.add(m,b),k=r.sub(k,l),u=r.mul(p,_),l=r.mul(f,b),u=r.add(l,u),l=r.sub(m,u),u=r.add(m,u),d=r.mul(l,u),m=r.add(g,g),m=r.add(m,g),b=r.mul(p,b),_=r.mul(f,_),m=r.add(m,b),b=r.sub(g,b),b=r.mul(p,b),_=r.add(_,b),g=r.mul(m,_),d=r.add(d,g),g=r.mul(k,_),l=r.mul(T,l),l=r.sub(l,g),g=r.mul(T,m),u=r.mul(k,u),u=r.add(u,g),new v(l,d,u)}subtract(e){return this.add(e.negate())}is0(){return this.equals(v.ZERO)}wNAF(e){return T.wNAFCached(this,m,e,(e=>{const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(v.fromAffine)}))}multiplyUnsafe(e){const i=v.ZERO;if(e===l)return i;if(f(e),e===d)return this;const{endo:n}=t;if(!n)return T.unsafeLadder(this,e);let{k1neg:s,k1:a,k2neg:o,k2:c}=n.splitScalar(e),u=i,h=i,p=this;for(;a>l||c>l;)a&d&&(u=u.add(p)),c&d&&(h=h.add(p)),p=p.double(),a>>=d,c>>=d;return s&&(u=u.negate()),o&&(h=h.negate()),h=new v(r.mul(h.px,n.beta),h.py,h.pz),u.add(h)}multiply(e){f(e);let i,n,s=e;const{endo:a}=t;if(a){const{k1neg:e,k1:t,k2neg:o,k2:c}=a.splitScalar(s);let{p:l,f:d}=this.wNAF(t),{p:u,f:h}=this.wNAF(c);l=T.constTimeNegate(e,l),u=T.constTimeNegate(o,u),u=new v(r.mul(u.px,a.beta),u.py,u.pz),i=l.add(u),n=d.add(h)}else{const{p:e,f:t}=this.wNAF(s);i=e,n=t}return v.normalizeZ([i,n])[0]}multiplyAndAddUnsafe(e,t,r){const i=v.BASE,n=(e,t)=>t!==l&&t!==d&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t),s=n(this,t).add(n(e,r));return s.is0()?void 0:s}toAffine(e){const{px:t,py:i,pz:n}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(n));const a=r.mul(t,e),o=r.mul(i,e),c=r.mul(n,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw new Error("invZ was invalid");return{x:a,y:o}}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===d)return!0;if(r)return r(v,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===d?this:r?r(v,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),o(v,this,e)}toHex(e=!0){return n.bytesToHex(this.toRawBytes(e))}}v.BASE=new v(t.Gx,t.Gy,r.ONE),v.ZERO=new v(r.ZERO,r.ONE,r.ZERO);const b=t.nBitLength,T=(0,a.wNAF)(v,t.endo?Math.ceil(b/2):b);return{CURVE:t,ProjectivePoint:v,normPrivateKeyToScalar:g,weierstrassEquation:u,isWithinCurveOrder:p}}function g(e,t){const r=e.ORDER;let i=l;for(let e=r-d;e%u===l;e/=u)i+=d;const n=i,s=(r-d)/u**n,a=(s-d)/u,o=u**n-d,c=u**(n-d),f=e.pow(t,s),g=e.pow(t,(s+d)/u);let m=(t,r)=>{let i=f,s=e.pow(r,o),l=e.sqr(s);l=e.mul(l,r);let h=e.mul(t,l);h=e.pow(h,a),h=e.mul(h,s),s=e.mul(h,r),l=e.mul(h,t);let p=e.mul(l,s);h=e.pow(p,c);let m=e.eql(h,e.ONE);s=e.mul(l,g),h=e.mul(p,i),l=e.cmov(s,l,m),p=e.cmov(h,p,m);for(let t=n;t>d;t--){let r=u**(t-u),n=e.pow(p,r);const a=e.eql(n,e.ONE);s=e.mul(l,i),i=e.mul(i,i),n=e.mul(p,i),l=e.cmov(s,l,a),p=e.cmov(n,p,a)}return{isValid:m,value:l}};if(e.ORDER%p===h){const r=(e.ORDER-h)/p,i=e.sqrt(e.neg(t));m=(t,n)=>{let s=e.sqr(n);const a=e.mul(t,n);s=e.mul(s,a);let o=e.pow(s,r);o=e.mul(o,a);const c=e.mul(o,i),l=e.mul(e.sqr(o),n),d=e.eql(l,t);return{isValid:d,value:e.cmov(c,o,d)}}}return m}t.weierstrassPoints=f,t.weierstrass=function(e){const r=function(e){const t=(0,a.validateBasic)(e);return n.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:o,n:c}=r,u=o.BYTES+1,h=2*o.BYTES+1;function p(e){return i.mod(e,c)}function g(e){return i.invert(e,c)}const{ProjectivePoint:m,normPrivateKeyToScalar:y,weierstrassEquation:v,isWithinCurveOrder:b}=f({...r,toBytes(e,t,r){const i=t.toAffine(),s=o.toBytes(i.x),a=n.concatBytes;return r?a(Uint8Array.from([t.hasEvenY()?2:3]),s):a(Uint8Array.from([4]),s,o.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],i=e.subarray(1);if(t!==u||2!==r&&3!==r){if(t===h&&4===r)return{x:o.fromBytes(i.subarray(0,o.BYTES)),y:o.fromBytes(i.subarray(o.BYTES,2*o.BYTES))};throw new Error(`Point of length ${t} was invalid. Expected ${u} compressed bytes or ${h} uncompressed bytes`)}{const e=n.bytesToNumberBE(i);if(!(l<(s=e)&&s<o.ORDER))throw new Error("Point is not on curve");const t=v(e);let a=o.sqrt(t);return 1==(1&r)!=((a&d)===d)&&(a=o.neg(a)),{x:e,y:a}}var s}}),T=e=>n.bytesToHex(n.numberToBytesBE(e,r.nByteLength));function _(e){return e>c>>d}const k=(e,t,r)=>n.bytesToNumberBE(e.slice(t,r));class E{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const t=r.nByteLength;return e=(0,s.ensureBytes)("compactSignature",e,2*t),new E(k(e,0,t),k(e,t,2*t))}static fromDER(e){const{r:r,s:i}=t.DER.toSig((0,s.ensureBytes)("DER",e));return new E(r,i)}assertValidity(){if(!b(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!b(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new E(this.r,this.s,e)}recoverPublicKey(e){const{r:t,s:i,recovery:n}=this,a=R((0,s.ensureBytes)("msgHash",e));if(null==n||![0,1,2,3].includes(n))throw new Error("recovery id invalid");const c=2===n||3===n?t+r.n:t;if(c>=o.ORDER)throw new Error("recovery id 2 or 3 invalid");const l=0==(1&n)?"02":"03",d=m.fromHex(l+T(c)),u=g(c),h=p(-a*u),f=p(i*u),y=m.BASE.multiplyAndAddUnsafe(d,h,f);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return n.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return n.hexToBytes(this.toCompactHex())}toCompactHex(){return T(this.r)+T(this.s)}}const w={isValidPrivateKey(e){try{return y(e),!0}catch(e){return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const e=r.randomBytes(o.BYTES+8),t=i.hashToPrivateScalar(e,c);return n.numberToBytesBE(t,r.nByteLength)},precompute:(e=8,t=m.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function A(e){const t=e instanceof Uint8Array,r="string"==typeof e,i=(t||r)&&e.length;return t?i===u||i===h:r?i===2*u||i===2*h:e instanceof m}const I=r.bits2int||function(e){const t=n.bytesToNumberBE(e),i=8*e.length-r.nBitLength;return i>0?t>>BigInt(i):t},R=r.bits2int_modN||function(e){return p(I(e))},S=n.bitMask(r.nBitLength);function C(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(l<=e&&e<S))throw new Error(`bigint expected < 2^${r.nBitLength}`);return n.numberToBytesBE(e,r.nByteLength)}const x={lowS:r.lowS,prehash:!1},P={lowS:r.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:r,getPublicKey:function(e,t=!0){return m.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(A(e))throw new Error("first arg must be private key");if(!A(t))throw new Error("second arg must be public key");return m.fromHex(t).multiply(y(e)).toRawBytes(r)},sign:function(e,t,i=x){const{seed:a,k2sig:c}=function(e,t,i=x){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:a,randomBytes:c}=r;let{lowS:u,prehash:h,extraEntropy:f}=i;null==u&&(u=!0),e=(0,s.ensureBytes)("msgHash",e),h&&(e=(0,s.ensureBytes)("prehashed msgHash",a(e)));const v=R(e),T=y(t),k=[C(T),C(v)];if(null!=f){const e=!0===f?c(o.BYTES):f;k.push((0,s.ensureBytes)("extraEntropy",e,o.BYTES))}const w=n.concatBytes(...k),A=v;return{seed:w,k2sig:function(e){const t=I(e);if(!b(t))return;const r=g(t),i=m.BASE.multiply(t).toAffine(),n=p(i.x);if(n===l)return;const s=p(r*p(A+n*T));if(s===l)return;let a=(i.x===n?0:2)|Number(i.y&d),o=s;return u&&_(s)&&(o=function(e){return _(e)?p(-e):e}(s),a^=1),new E(n,o,a)}}}(e,t,i);return n.createHmacDrbg(r.hash.outputLen,r.nByteLength,r.hmac)(a,c)},verify:function(e,i,n,a=P){const o=e;if(i=(0,s.ensureBytes)("msgHash",i),n=(0,s.ensureBytes)("publicKey",n),"strict"in a)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:l}=a;let d,u;try{if("string"==typeof o||o instanceof Uint8Array)try{d=E.fromDER(o)}catch(e){if(!(e instanceof t.DER.Err))throw e;d=E.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:e,s:t}=o;d=new E(e,t)}}u=m.fromHex(n)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&d.hasHighS())return!1;l&&(i=r.hash(i));const{r:h,s:f}=d,y=R(i),v=g(f),b=p(y*v),T=p(h*v),_=m.BASE.multiplyAndAddUnsafe(u,b,T)?.toAffine();return!!_&&p(_.x)===h},ProjectivePoint:m,Signature:E,utils:w}},t.SWUFpSqrtRatio=g,t.mapToCurveSimpleSWU=function(e,t){if(i.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const r=g(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return i=>{let n,s,a,o,c,l,d,u;n=e.sqr(i),n=e.mul(n,t.Z),s=e.sqr(n),s=e.add(s,n),a=e.add(s,e.ONE),a=e.mul(a,t.B),o=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO)),o=e.mul(o,t.A),s=e.sqr(a),l=e.sqr(o),c=e.mul(l,t.A),s=e.add(s,c),s=e.mul(s,a),l=e.mul(l,o),c=e.mul(l,t.B),s=e.add(s,c),d=e.mul(n,a);const{isValid:h,value:p}=r(s,l);u=e.mul(n,i),u=e.mul(u,p),d=e.cmov(d,a,h),u=e.cmov(u,p,h);const f=e.isOdd(i)===e.isOdd(u);return u=e.cmov(e.neg(u),u,f),d=e.div(d,o),{x:d,y:u}}}},8358:(e,t,r)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;const n=r(6053),s=r(64),a=r(9530),o=r(7851),c=r(4323),l=r(1322),d=r(5887),u=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),h=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),p=BigInt(1),f=BigInt(2),g=(e,t)=>(e+t/f)/t;function m(e){const t=u,r=BigInt(3),i=BigInt(6),n=BigInt(11),s=BigInt(22),o=BigInt(23),c=BigInt(44),l=BigInt(88),d=e*e*e%t,h=d*d*e%t,p=(0,a.pow2)(h,r,t)*h%t,g=(0,a.pow2)(p,r,t)*h%t,m=(0,a.pow2)(g,f,t)*d%t,v=(0,a.pow2)(m,n,t)*m%t,b=(0,a.pow2)(v,s,t)*v%t,T=(0,a.pow2)(b,c,t)*b%t,_=(0,a.pow2)(T,l,t)*T%t,k=(0,a.pow2)(_,c,t)*b%t,E=(0,a.pow2)(k,r,t)*h%t,w=(0,a.pow2)(E,o,t)*v%t,A=(0,a.pow2)(w,i,t)*d%t,I=(0,a.pow2)(A,f,t);if(!y.eql(y.sqr(I),e))throw new Error("Cannot find square root");return I}const y=(0,a.Field)(u,void 0,void 0,{sqrt:m});t.secp256k1=(0,d.createCurve)({a:BigInt(0),b:BigInt(7),Fp:y,n:h,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=h,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-p*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),c=g(s*e,t),l=g(-i*e,t);let d=(0,a.mod)(e-c*r-l*n,t),u=(0,a.mod)(-c*i-l*s,t);const f=d>o,m=u>o;if(f&&(d=t-d),m&&(u=t-u),d>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:d,k2neg:m,k2:u}}}},n.sha256);const v=BigInt(0),b=e=>"bigint"==typeof e&&v<e&&e<u,T={};function _(e,...t){let r=T[e];if(void 0===r){const t=(0,n.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));r=(0,c.concatBytes)(t,t),T[e]=r}return(0,n.sha256)((0,c.concatBytes)(r,...t))}const k=e=>e.toRawBytes(!0).slice(1),E=e=>(0,c.numberToBytesBE)(e,32),w=e=>(0,a.mod)(e,u),A=e=>(0,a.mod)(e,h),I=t.secp256k1.ProjectivePoint;function R(e){let r=t.secp256k1.utils.normPrivateKeyToScalar(e),i=I.fromPrivateKey(r);return{scalar:i.hasEvenY()?r:A(-r),bytes:k(i)}}function S(e){if(!b(e))throw new Error("bad x: need 0 < x < p");const t=w(e*e);let r=m(w(t*e+BigInt(7)));r%f!==v&&(r=w(-r));const i=new I(e,r,p);return i.assertValidity(),i}function C(...e){return A((0,c.bytesToNumberBE)(_("BIP0340/challenge",...e)))}function x(e,t,r){const i=(0,c.ensureBytes)("signature",e,64),n=(0,c.ensureBytes)("message",t),s=(0,c.ensureBytes)("publicKey",r,32);try{const e=S((0,c.bytesToNumberBE)(s)),t=(0,c.bytesToNumberBE)(i.subarray(0,32));if(!b(t))return!1;const r=(0,c.bytesToNumberBE)(i.subarray(32,64));if(!("bigint"==typeof(d=r)&&v<d&&d<h))return!1;const u=C(E(t),k(e),n),p=(a=e,o=r,l=A(-u),I.BASE.multiplyAndAddUnsafe(a,o,l));return!(!p||!p.hasEvenY()||p.toAffine().x!==t)}catch(e){return!1}var a,o,l,d}t.schnorr={getPublicKey:function(e){return R(e).bytes},sign:function(e,t,r=(0,s.randomBytes)(32)){const i=(0,c.ensureBytes)("message",e),{bytes:n,scalar:a}=R(t),o=(0,c.ensureBytes)("auxRand",r,32),l=E(a^(0,c.bytesToNumberBE)(_("BIP0340/aux",o))),d=_("BIP0340/nonce",l,n,i),u=A((0,c.bytesToNumberBE)(d));if(u===v)throw new Error("sign failed: k is zero");const{bytes:h,scalar:p}=R(u),f=C(h,n,i),g=new Uint8Array(64);if(g.set(h,0),g.set(E(A(p+f*a)),32),!x(g,i,n))throw new Error("sign: Invalid signature produced");return g},verify:x,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:S,pointToBytes:k,numberToBytesBE:c.numberToBytesBE,bytesToNumberBE:c.bytesToNumberBE,taggedHash:_,mod:a.mod}};const P=l.isogenyMap(y,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))),O=(0,o.mapToCurveSimpleSWU)(y,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:y.create(BigInt("-11"))});i=l.createHasher(t.secp256k1.ProjectivePoint,(e=>{const{x:t,y:r}=O(y.create(e[0]));return P(t,r)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:y.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256}),t.hashToCurve=i.hashToCurve,t.encodeToCurve=i.encodeToCurve},3525:(e,t)=>{"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function i(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)}function n(e,...t){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new TypeError(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function o(e,t){n(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=void 0,t.number=r,t.bool=i,t.bytes=n,t.hash=s,t.exists=a,t.output=o;const c={number:r,bool:i,bytes:n,hash:s,exists:a,output:o};t.default=c},9350:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHA2=void 0;const i=r(3525),n=r(64);class s extends n.Hash{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,n.createView)(this.buffer)}update(e){i.default.exists(this);const{view:t,buffer:r,blockLen:s}=this,a=(e=(0,n.toBytes)(e)).length;for(let i=0;i<a;){const o=Math.min(s-this.pos,a-i);if(o!==s)r.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=(0,n.createView)(e);for(;s<=a-i;i+=s)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){i.default.exists(this),i.default.output(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:a}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let e=o;e<s;e++)t[e]=0;!function(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);const n=BigInt(32),s=BigInt(4294967295),a=Number(r>>n&s),o=Number(r&s),c=i?4:0,l=i?0:4;e.setUint32(t+c,a,i),e.setUint32(t+l,o,i)}(r,s-8,BigInt(8*this.length),a),this.process(r,0);const c=(0,n.createView)(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=l/4,u=this.get();if(d>u.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<d;e++)c.setUint32(4*e,u[e],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}t.SHA2=s},1655:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add=t.toBig=t.split=t.fromBig=void 0;const r=BigInt(2**32-1),i=BigInt(32);function n(e,t=!1){return t?{h:Number(e&r),l:Number(e>>i&r)}:{h:0|Number(e>>i&r),l:0|Number(e&r)}}function s(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:a,l:o}=n(e[s],t);[r[s],i[s]]=[a,o]}return[r,i]}function a(e,t,r,i){const n=(t>>>0)+(i>>>0);return{h:e+r+(n/2**32|0)|0,l:0|n}}t.fromBig=n,t.split=s,t.toBig=(e,t)=>BigInt(e>>>0)<<i|BigInt(t>>>0),t.add=a;const o={fromBig:n,split:s,toBig:t.toBig,shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,r)=>e<<r|t>>>32-r,rotlSL:(e,t,r)=>t<<r|e>>>32-r,rotlBH:(e,t,r)=>t<<r-32|e>>>64-r,rotlBL:(e,t,r)=>e<<r-32|t>>>64-r,add:a,add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,i)=>t+r+i+(e/2**32|0)|0,add4L:(e,t,r,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),add4H:(e,t,r,i,n)=>t+r+i+n+(e/2**32|0)|0,add5H:(e,t,r,i,n,s)=>t+r+i+n+s+(e/2**32|0)|0,add5L:(e,t,r,i,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0)+(n>>>0)};t.default=o},825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},1377:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=void 0;const i=r(3525),n=r(64);class s extends n.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,i.default.hash(e);const r=(0,n.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,a=new Uint8Array(s);a.set(r.length>s?e.create().update(r).digest():r);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a),this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=106;this.oHash.update(a),a.fill(0)}update(e){return i.default.exists(this),this.iHash.update(e),this}digestInto(e){i.default.exists(this),i.default.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:a}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.hmac=(e,t,r)=>new s(e,t).update(r).digest(),t.hmac.create=(e,t)=>new s(e,t)},9179:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pbkdf2Async=t.pbkdf2=void 0;const i=r(3525),n=r(1377),s=r(64);function a(e,t,r,a){i.default.hash(e);const o=(0,s.checkOpts)({dkLen:32,asyncTick:10},a),{c:c,dkLen:l,asyncTick:d}=o;if(i.default.number(c),i.default.number(l),i.default.number(d),c<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const u=(0,s.toBytes)(t),h=(0,s.toBytes)(r),p=new Uint8Array(l),f=n.hmac.create(e,u),g=f._cloneInto().update(h);return{c:c,dkLen:l,asyncTick:d,DK:p,PRF:f,PRFSalt:g}}function o(e,t,r,i,n){return e.destroy(),t.destroy(),i&&i.destroy(),n.fill(0),r}t.pbkdf2=function(e,t,r,i){const{c:n,dkLen:c,DK:l,PRF:d,PRFSalt:u}=a(e,t,r,i);let h;const p=new Uint8Array(4),f=(0,s.createView)(p),g=new Uint8Array(d.outputLen);for(let e=1,t=0;t<c;e++,t+=d.outputLen){const r=l.subarray(t,t+d.outputLen);f.setInt32(0,e,!1),(h=u._cloneInto(h)).update(p).digestInto(g),r.set(g.subarray(0,r.length));for(let e=1;e<n;e++){d._cloneInto(h).update(g).digestInto(g);for(let e=0;e<r.length;e++)r[e]^=g[e]}}return o(d,u,l,h,g)},t.pbkdf2Async=async function(e,t,r,i){const{c:n,dkLen:c,asyncTick:l,DK:d,PRF:u,PRFSalt:h}=a(e,t,r,i);let p;const f=new Uint8Array(4),g=(0,s.createView)(f),m=new Uint8Array(u.outputLen);for(let e=1,t=0;t<c;e++,t+=u.outputLen){const r=d.subarray(t,t+u.outputLen);g.setInt32(0,e,!1),(p=h._cloneInto(p)).update(f).digestInto(m),r.set(m.subarray(0,r.length)),await(0,s.asyncLoop)(n-1,l,(e=>{u._cloneInto(p).update(m).digestInto(m);for(let e=0;e<r.length;e++)r[e]^=m[e]}))}return o(u,h,d,p,m)}},2739:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scryptAsync=t.scrypt=void 0;const i=r(3525),n=r(6053),s=r(9179),a=r(64),o=(e,t)=>e<<t|e>>>32-t;function c(e,t,r,i,n,s){let a=e[t++]^r[i++],c=e[t++]^r[i++],l=e[t++]^r[i++],d=e[t++]^r[i++],u=e[t++]^r[i++],h=e[t++]^r[i++],p=e[t++]^r[i++],f=e[t++]^r[i++],g=e[t++]^r[i++],m=e[t++]^r[i++],y=e[t++]^r[i++],v=e[t++]^r[i++],b=e[t++]^r[i++],T=e[t++]^r[i++],_=e[t++]^r[i++],k=e[t++]^r[i++],E=a,w=c,A=l,I=d,R=u,S=h,C=p,x=f,P=g,O=m,L=y,B=v,N=b,M=T,D=_,U=k;for(let e=0;e<8;e+=2)R^=o(E+N|0,7),P^=o(R+E|0,9),N^=o(P+R|0,13),E^=o(N+P|0,18),O^=o(S+w|0,7),M^=o(O+S|0,9),w^=o(M+O|0,13),S^=o(w+M|0,18),D^=o(L+C|0,7),A^=o(D+L|0,9),C^=o(A+D|0,13),L^=o(C+A|0,18),I^=o(U+B|0,7),x^=o(I+U|0,9),B^=o(x+I|0,13),U^=o(B+x|0,18),w^=o(E+I|0,7),A^=o(w+E|0,9),I^=o(A+w|0,13),E^=o(I+A|0,18),C^=o(S+R|0,7),x^=o(C+S|0,9),R^=o(x+C|0,13),S^=o(R+x|0,18),B^=o(L+O|0,7),P^=o(B+L|0,9),O^=o(P+B|0,13),L^=o(O+P|0,18),N^=o(U+D|0,7),M^=o(N+U|0,9),D^=o(M+N|0,13),U^=o(D+M|0,18);n[s++]=a+E|0,n[s++]=c+w|0,n[s++]=l+A|0,n[s++]=d+I|0,n[s++]=u+R|0,n[s++]=h+S|0,n[s++]=p+C|0,n[s++]=f+x|0,n[s++]=g+P|0,n[s++]=m+O|0,n[s++]=y+L|0,n[s++]=v+B|0,n[s++]=b+N|0,n[s++]=T+M|0,n[s++]=_+D|0,n[s++]=k+U|0}function l(e,t,r,i,n){let s=i+0,a=i+16*n;for(let i=0;i<16;i++)r[a+i]=e[t+16*(2*n-1)+i];for(let i=0;i<n;i++,s+=16,t+=16)c(r,a,e,t,r,s),i>0&&(a+=16),c(r,s,e,t+=16,r,a)}function d(e,t,r){const o=(0,a.checkOpts)({dkLen:32,asyncTick:10,maxmem:1073742848},r),{N:c,r:l,p:d,dkLen:u,asyncTick:h,maxmem:p,onProgress:f}=o;if(i.default.number(c),i.default.number(l),i.default.number(d),i.default.number(u),i.default.number(h),i.default.number(p),void 0!==f&&"function"!=typeof f)throw new Error("progressCb should be function");const g=128*l,m=g/4;if(c<=1||0!=(c&c-1)||c>=2**(g/8)||c>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(d<0||d>137438953440/g)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(u<0||u>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const y=g*(c+d);if(y>p)throw new Error(`Scrypt: parameters too large, ${y} (128 * r * (N + p)) > ${p} (maxmem)`);const v=(0,s.pbkdf2)(n.sha256,e,t,{c:1,dkLen:g*d}),b=(0,a.u32)(v),T=(0,a.u32)(new Uint8Array(g*c)),_=(0,a.u32)(new Uint8Array(g));let k=()=>{};if(f){const e=2*c*d,t=Math.max(Math.floor(e/1e4),1);let r=0;k=()=>{r++,!f||r%t&&r!==e||f(r/e)}}return{N:c,r:l,p:d,dkLen:u,blockSize32:m,V:T,B32:b,B:v,tmp:_,blockMixCb:k,asyncTick:h}}function u(e,t,r,i,a){const o=(0,s.pbkdf2)(n.sha256,e,r,{c:1,dkLen:t});return r.fill(0),i.fill(0),a.fill(0),o}t.scrypt=function(e,t,r){const{N:i,r:n,p:s,dkLen:a,blockSize32:o,V:c,B32:h,B:p,tmp:f,blockMixCb:g}=d(e,t,r);for(let e=0;e<s;e++){const t=o*e;for(let e=0;e<o;e++)c[e]=h[t+e];for(let e=0,t=0;e<i-1;e++)l(c,t,c,t+=o,n),g();l(c,(i-1)*o,h,t,n),g();for(let e=0;e<i;e++){const e=h[t+o-16]%i;for(let r=0;r<o;r++)f[r]=h[t+r]^c[e*o+r];l(f,0,h,t,n),g()}}return u(e,a,p,c,f)},t.scryptAsync=async function(e,t,r){const{N:i,r:n,p:s,dkLen:o,blockSize32:c,V:h,B32:p,B:f,tmp:g,blockMixCb:m,asyncTick:y}=d(e,t,r);for(let e=0;e<s;e++){const t=c*e;for(let e=0;e<c;e++)h[e]=p[t+e];let r=0;await(0,a.asyncLoop)(i-1,y,(e=>{l(h,r,h,r+=c,n),m()})),l(h,(i-1)*c,p,t,n),m(),await(0,a.asyncLoop)(i,y,(e=>{const r=p[t+c-16]%i;for(let e=0;e<c;e++)g[e]=p[t+e]^h[r*c+e];l(g,0,p,t,n),m()}))}return u(e,o,f,h,g)}},6053:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=void 0;const i=r(9350),n=r(64),s=(e,t,r)=>e&t^e&r^t&r,a=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint32Array(64);class l extends i.SHA2{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){const{A:e,B:t,C:r,D:i,E:n,F:s,G:a,H:o}=this;return[e,t,r,i,n,s,a,o]}set(e,t,r,i,n,s,a,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|a,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=c[e-15],r=c[e-2],i=(0,n.rotr)(t,7)^(0,n.rotr)(t,18)^t>>>3,s=(0,n.rotr)(r,17)^(0,n.rotr)(r,19)^r>>>10;c[e]=s+c[e-7]+i+c[e-16]|0}let{A:r,B:i,C:o,D:l,E:d,F:u,G:h,H:p}=this;for(let e=0;e<64;e++){const t=p+((0,n.rotr)(d,6)^(0,n.rotr)(d,11)^(0,n.rotr)(d,25))+((f=d)&u^~f&h)+a[e]+c[e]|0,g=((0,n.rotr)(r,2)^(0,n.rotr)(r,13)^(0,n.rotr)(r,22))+s(r,i,o)|0;p=h,h=u,u=d,d=l+t|0,l=o,o=i,i=r,r=t+g|0}var f;r=r+this.A|0,i=i+this.B|0,o=o+this.C|0,l=l+this.D|0,d=d+this.E|0,u=u+this.F|0,h=h+this.G|0,p=p+this.H|0,this.set(r,i,o,l,d,u,h,p)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class d extends l{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}t.sha256=(0,n.wrapConstructor)((()=>new l)),t.sha224=(0,n.wrapConstructor)((()=>new d))},125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shake256=t.shake128=t.keccak_512=t.keccak_384=t.keccak_256=t.keccak_224=t.sha3_512=t.sha3_384=t.sha3_256=t.sha3_224=t.Keccak=t.keccakP=void 0;const i=r(3525),n=r(1655),s=r(64),[a,o,c]=[[],[],[]],l=BigInt(0),d=BigInt(1),u=BigInt(2),h=BigInt(7),p=BigInt(256),f=BigInt(113);for(let e=0,t=d,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],a.push(2*(5*i+r)),o.push((e+1)*(e+2)/2%64);let n=l;for(let e=0;e<7;e++)t=(t<<d^(t>>h)*f)%p,t&u&&(n^=d<<(d<<BigInt(e))-d);c.push(n)}const[g,m]=n.default.split(c,!0),y=(e,t,r)=>r>32?n.default.rotlBH(e,t,r):n.default.rotlSH(e,t,r),v=(e,t,r)=>r>32?n.default.rotlBL(e,t,r):n.default.rotlSL(e,t,r);function b(e,t=24){const r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const i=(t+8)%10,n=(t+2)%10,s=r[n],a=r[n+1],o=y(s,a,1)^r[i],c=v(s,a,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=c}let t=e[2],n=e[3];for(let r=0;r<24;r++){const i=o[r],s=y(t,n,i),c=v(t,n,i),l=a[r];t=e[l],n=e[l+1],e[l]=s,e[l+1]=c}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=g[i],e[1]^=m[i]}r.fill(0)}t.keccakP=b;class T extends s.Hash{constructor(e,t,r,n=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,i.default.number(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){b(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){i.default.exists(this);const{blockLen:t,state:r}=this,n=(e=(0,s.toBytes)(e)).length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,0!=(128&t)&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){i.default.exists(this,!1),i.default.bytes(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return i.default.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(i.default.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new T(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}t.Keccak=T;const _=(e,t,r)=>(0,s.wrapConstructor)((()=>new T(t,e,r)));t.sha3_224=_(6,144,28),t.sha3_256=_(6,136,32),t.sha3_384=_(6,104,48),t.sha3_512=_(6,72,64),t.keccak_224=_(1,144,28),t.keccak_256=_(1,136,32),t.keccak_384=_(1,104,48),t.keccak_512=_(1,72,64);const k=(e,t,r)=>(0,s.wrapConstructorWithOpts)(((i={})=>new T(t,e,void 0===i.dkLen?r:i.dkLen,!0)));t.shake128=k(31,168,16),t.shake256=k(31,136,32)},2540:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha384=t.sha512_256=t.sha512_224=t.sha512=t.SHA512=void 0;const i=r(9350),n=r(1655),s=r(64),[a,o]=n.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),c=new Uint32Array(80),l=new Uint32Array(80);class d extends i.SHA2{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:n,Cl:s,Dh:a,Dl:o,Eh:c,El:l,Fh:d,Fl:u,Gh:h,Gl:p,Hh:f,Hl:g}=this;return[e,t,r,i,n,s,a,o,c,l,d,u,h,p,f,g]}set(e,t,r,i,n,s,a,o,c,l,d,u,h,p,f,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|i,this.Ch=0|n,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|c,this.El=0|l,this.Fh=0|d,this.Fl=0|u,this.Gh=0|h,this.Gl=0|p,this.Hh=0|f,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t),l[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|c[e-15],r=0|l[e-15],i=n.default.rotrSH(t,r,1)^n.default.rotrSH(t,r,8)^n.default.shrSH(t,r,7),s=n.default.rotrSL(t,r,1)^n.default.rotrSL(t,r,8)^n.default.shrSL(t,r,7),a=0|c[e-2],o=0|l[e-2],d=n.default.rotrSH(a,o,19)^n.default.rotrBH(a,o,61)^n.default.shrSH(a,o,6),u=n.default.rotrSL(a,o,19)^n.default.rotrBL(a,o,61)^n.default.shrSL(a,o,6),h=n.default.add4L(s,u,l[e-7],l[e-16]),p=n.default.add4H(h,i,d,c[e-7],c[e-16]);c[e]=0|p,l[e]=0|h}let{Ah:r,Al:i,Bh:s,Bl:d,Ch:u,Cl:h,Dh:p,Dl:f,Eh:g,El:m,Fh:y,Fl:v,Gh:b,Gl:T,Hh:_,Hl:k}=this;for(let e=0;e<80;e++){const t=n.default.rotrSH(g,m,14)^n.default.rotrSH(g,m,18)^n.default.rotrBH(g,m,41),E=n.default.rotrSL(g,m,14)^n.default.rotrSL(g,m,18)^n.default.rotrBL(g,m,41),w=g&y^~g&b,A=m&v^~m&T,I=n.default.add5L(k,E,A,o[e],l[e]),R=n.default.add5H(I,_,t,w,a[e],c[e]),S=0|I,C=n.default.rotrSH(r,i,28)^n.default.rotrBH(r,i,34)^n.default.rotrBH(r,i,39),x=n.default.rotrSL(r,i,28)^n.default.rotrBL(r,i,34)^n.default.rotrBL(r,i,39),P=r&s^r&u^s&u,O=i&d^i&h^d&h;_=0|b,k=0|T,b=0|y,T=0|v,y=0|g,v=0|m,({h:g,l:m}=n.default.add(0|p,0|f,0|R,0|S)),p=0|u,f=0|h,u=0|s,h=0|d,s=0|r,d=0|i;const L=n.default.add3L(S,x,O);r=n.default.add3H(L,R,C,P),i=0|L}({h:r,l:i}=n.default.add(0|this.Ah,0|this.Al,0|r,0|i)),({h:s,l:d}=n.default.add(0|this.Bh,0|this.Bl,0|s,0|d)),({h:u,l:h}=n.default.add(0|this.Ch,0|this.Cl,0|u,0|h)),({h:p,l:f}=n.default.add(0|this.Dh,0|this.Dl,0|p,0|f)),({h:g,l:m}=n.default.add(0|this.Eh,0|this.El,0|g,0|m)),({h:y,l:v}=n.default.add(0|this.Fh,0|this.Fl,0|y,0|v)),({h:b,l:T}=n.default.add(0|this.Gh,0|this.Gl,0|b,0|T)),({h:_,l:k}=n.default.add(0|this.Hh,0|this.Hl,0|_,0|k)),this.set(r,i,s,d,u,h,p,f,g,m,y,v,b,T,_,k)}roundClean(){c.fill(0),l.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}t.SHA512=d;class u extends d{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class h extends d{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class p extends d{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}t.sha512=(0,s.wrapConstructor)((()=>new d)),t.sha512_224=(0,s.wrapConstructor)((()=>new u)),t.sha512_256=(0,s.wrapConstructor)((()=>new h)),t.sha384=(0,s.wrapConstructor)((()=>new p))},64:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const i=r(825);if(t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),t.rotr=(e,t)=>e<<32-t|e>>>t,t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!t.isLE)throw new Error("Non little-endian hardware is not supported");const n=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function s(e){if("string"!=typeof e)throw new TypeError("utf8ToBytes expected string, got "+typeof e);return(new TextEncoder).encode(e)}function a(e){if("string"==typeof e&&(e=s(e)),!(e instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof e})`);return e}t.bytesToHex=function(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=n[e[r]];return t},t.hexToBytes=function(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const i=2*r,n=e.slice(i,i+2),s=Number.parseInt(n,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t},t.nextTick=async()=>{},t.asyncLoop=async function(e,r,i){let n=Date.now();for(let s=0;s<e;s++){i(s);const e=Date.now()-n;e>=0&&e<r||(await(0,t.nextTick)(),n+=e)}},t.utf8ToBytes=s,t.toBytes=a,t.concatBytes=function(...e){if(!e.every((e=>e instanceof Uint8Array)))throw new Error("Uint8Array list expected");if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let t=0,i=0;t<e.length;t++){const n=e[t];r.set(n,i),i+=n.length}return r},t.Hash=class{clone(){return this._cloneInto()}},t.checkOpts=function(e,t){if(void 0!==t&&("object"!=typeof t||(r=t,"[object Object]"!==Object.prototype.toString.call(r)||r.constructor!==Object)))throw new TypeError("Options should be object or undefined");var r;return Object.assign(e,t)},t.wrapConstructor=function(e){const t=t=>e().update(a(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){const t=(t,r)=>e(r).update(a(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},t.randomBytes=function(e=32){if(i.crypto&&"function"==typeof i.crypto.getRandomValues)return i.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}},1238:(e,t)=>{var r;r=function(e){e.version="1.2.2";var t=function(){for(var e=0,t=new Array(256),r=0;256!=r;++r)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=r)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[r]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}(),r=function(e){var t=0,r=0,i=0,n="undefined"!=typeof Int32Array?new Int32Array(4096):new Array(4096);for(i=0;256!=i;++i)n[i]=e[i];for(i=0;256!=i;++i)for(r=e[i],t=256+i;t<4096;t+=256)r=n[t]=r>>>8^e[255&r];var s=[];for(i=1;16!=i;++i)s[i-1]="undefined"!=typeof Int32Array?n.subarray(256*i,256*i+256):n.slice(256*i,256*i+256);return s}(t),i=r[0],n=r[1],s=r[2],a=r[3],o=r[4],c=r[5],l=r[6],d=r[7],u=r[8],h=r[9],p=r[10],f=r[11],g=r[12],m=r[13],y=r[14];e.table=t,e.bstr=function(e,r){for(var i=-1^r,n=0,s=e.length;n<s;)i=i>>>8^t[255&(i^e.charCodeAt(n++))];return~i},e.buf=function(e,r){for(var v=-1^r,b=e.length-15,T=0;T<b;)v=y[e[T++]^255&v]^m[e[T++]^v>>8&255]^g[e[T++]^v>>16&255]^f[e[T++]^v>>>24]^p[e[T++]]^h[e[T++]]^u[e[T++]]^d[e[T++]]^l[e[T++]]^c[e[T++]]^o[e[T++]]^a[e[T++]]^s[e[T++]]^n[e[T++]]^i[e[T++]]^t[e[T++]];for(b+=15;T<b;)v=v>>>8^t[255&(v^e[T++])];return~v},e.str=function(e,r){for(var i=-1^r,n=0,s=e.length,a=0,o=0;n<s;)(a=e.charCodeAt(n++))<128?i=i>>>8^t[255&(i^a)]:a<2048?i=(i=i>>>8^t[255&(i^(192|a>>6&31))])>>>8^t[255&(i^(128|63&a))]:a>=55296&&a<57344?(a=64+(1023&a),o=1023&e.charCodeAt(n++),i=(i=(i=(i=i>>>8^t[255&(i^(240|a>>8&7))])>>>8^t[255&(i^(128|a>>2&63))])>>>8^t[255&(i^(128|o>>6&15|(3&a)<<4))])>>>8^t[255&(i^(128|63&o))]):i=(i=(i=i>>>8^t[255&(i^(224|a>>12&15))])>>>8^t[255&(i^(128|a>>6&63))])>>>8^t[255&(i^(128|63&a))];return~i}},"undefined"==typeof DO_NOT_EXPORT_CRC?r(t):r({})},6279:(e,t,r)=>{var i="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,n=function(){function e(){this.fetch=!1,this.DOMException=i.DOMException}return e.prototype=i,new e}();!function(e){!function(t){var r=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==r&&r,i="URLSearchParams"in r,n="Symbol"in r&&"iterator"in Symbol,s="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in r,o="ArrayBuffer"in r;if(o)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1};function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function u(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function m(e){var t=new FileReader,r=g(t);return t.readAsArrayBuffer(e),r}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:s&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&s&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(m)}),this.text=function(){var e,t,r,i=f(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,r=g(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),i=0;i<t.length;i++)r[i]=String.fromCharCode(t[i]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=d(e),t=u(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},p.prototype.delete=function(e){delete this.map[d(e)]},p.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},p.prototype.set=function(e,t){this.map[d(e)]=u(t)},p.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),h(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),h(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function T(e,t){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,n=(t=t||{}).body;if(e instanceof T){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(i=(r=t.method||this.method||"GET").toUpperCase(),b.indexOf(i)>-1?i:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var s=/([?&])_=[^&]*/;s.test(this.url)?this.url=this.url.replace(s,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),i=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(n))}})),t}function k(e,t){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})},v.call(T.prototype),v.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},k.error=function(){var e=new k(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];k.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new k(null,{status:t,headers:{location:e}})},t.DOMException=r.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function w(e,i){return new Promise((function(n,a){var c=new T(e,i);if(c.signal&&c.signal.aborted)return a(new t.DOMException("Aborted","AbortError"));var l=new XMLHttpRequest;function d(){l.abort()}l.onload=function(){var e,t,r={status:l.status,statusText:l.statusText,headers:(e=l.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),i=r.shift().trim();if(i){var n=r.join(":").trim();t.append(i,n)}})),t)};r.url="responseURL"in l?l.responseURL:r.headers.get("X-Request-URL");var i="response"in l?l.response:l.responseText;setTimeout((function(){n(new k(i,r))}),0)},l.onerror=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},l.ontimeout=function(){setTimeout((function(){a(new TypeError("Network request failed"))}),0)},l.onabort=function(){setTimeout((function(){a(new t.DOMException("Aborted","AbortError"))}),0)},l.open(c.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(c.url),!0),"include"===c.credentials?l.withCredentials=!0:"omit"===c.credentials&&(l.withCredentials=!1),"responseType"in l&&(s?l.responseType="blob":o&&c.headers.get("Content-Type")&&-1!==c.headers.get("Content-Type").indexOf("application/octet-stream")&&(l.responseType="arraybuffer")),!i||"object"!=typeof i.headers||i.headers instanceof p?c.headers.forEach((function(e,t){l.setRequestHeader(t,e)})):Object.getOwnPropertyNames(i.headers).forEach((function(e){l.setRequestHeader(e,u(i.headers[e]))})),c.signal&&(c.signal.addEventListener("abort",d),l.onreadystatechange=function(){4===l.readyState&&c.signal.removeEventListener("abort",d)}),l.send(void 0===c._bodyInit?null:c._bodyInit)}))}w.polyfill=!0,r.fetch||(r.fetch=w,r.Headers=p,r.Request=T,r.Response=k),t.Headers=p,t.Request=T,t.Response=k,t.fetch=w}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=i.fetch?i:n;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t},2699:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,i=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,i){function n(r){e.removeListener(t,s),i(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}g(e,t,s,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,n)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,r,i){var n,s,a,l;if(o(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),a=s[t]),void 0===a)a=s[t]=r,++e._eventsCount;else if("function"==typeof a?a=s[t]=i?[r,a]:[a,r]:i?a.unshift(r):a.push(r),(n=c(e))>0&&a.length>n&&!a.warned){a.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=a.length,l=d,console&&console.warn&&console.warn(l)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=d.bind(i);return n.listener=r,i.wrapFn=n,n}function h(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):f(n,n.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function g(e,t,r,i){if("function"==typeof e.on)i.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(s){i.once&&e.removeEventListener(t,n),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var l=c.length,d=f(c,l);for(r=0;r<l;++r)i(d[r],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return o(t),this.on(e,u(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,u(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,i,n,s,a;if(o(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){a=r[s].listener,n=s;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,s=Object.keys(r);for(i=0;i<s.length;++i)"removeListener"!==(n=s[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7475:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var i=null;"undefined"!=typeof WebSocket?i=WebSocket:"undefined"!=typeof MozWebSocket?i=MozWebSocket:void 0!==r.g?i=r.g.WebSocket||r.g.MozWebSocket:"undefined"!=typeof window?i=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(i=self.WebSocket||self.MozWebSocket);const n=i},4406:e=>{var t,r,i=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var o,c=[],l=!1,d=-1;function u(){l&&o&&(l=!1,o.length?c=o.concat(c):d=-1,c.length&&h())}function h(){if(!l){var e=a(u);l=!0;for(var t=c.length;t;){for(o=c,c=[];++d<t;)o&&o[d].run();d=-1,t=c.length}o=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new p(e,t)),1!==c.length||l||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},6985:function(e,t,r){var i=r(4406);!function(e,t){"use strict";if(!e.setImmediate){var r,n,s,a,o,c=1,l={},d=!1,u=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){i.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?(a="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&f(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),r=function(t){e.postMessage(a+t,"*")}):e.MessageChannel?((s=new MessageChannel).port1.onmessage=function(e){f(e.data)},r=function(e){s.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(n=u.documentElement,r=function(e){var t=u.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):r=function(e){setTimeout(f,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var n={callback:e,args:t};return l[c]=n,r(c),c++},h.clearImmediate=p}function p(e){delete l[e]}function f(e){if(d)setTimeout(f,0,e);else{var t=l[e];if(t){d=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{p(e),d=!1}}}}}("undefined"==typeof self?void 0===r.g?this:r.g:self)},9937:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(8381);t.default={encodeEventSignature:i.encodeEventSignature,encodeFunctionCall:i.encodeFunctionCall,encodeFunctionSignature:i.encodeFunctionSignature,encodeParameter:i.encodeParameter,encodeParameters:i.encodeParameters,decodeParameter:i.decodeParameter,decodeParameters:i.decodeParameters,decodeLog:i.decodeLog}},1186:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.initAccountsForContext=void 0;const n=r(9970),s=r(9634),a=r(6637),o=r(9247);t.initAccountsForContext=e=>{const t=(t,r)=>i(void 0,void 0,void 0,(function*(){const i=yield(0,a.prepareTransactionForSigning)(t,e),c=(0,s.format)({format:"bytes"},r,n.ETH_DATA_FORMAT);return(0,o.signTransaction)(i,c)})),r=e=>{const r=(0,o.privateKeyToAccount)(e);return Object.assign(Object.assign({},r),{signTransaction:e=>i(void 0,void 0,void 0,(function*(){return t(e,r.privateKey)}))})},c=(e,r,n)=>i(void 0,void 0,void 0,(function*(){var s;const a=yield(0,o.decrypt)(e,r,null===(s=null==n?void 0:n.nonStrict)||void 0===s||s);return Object.assign(Object.assign({},a),{signTransaction:e=>i(void 0,void 0,void 0,(function*(){return t(e,a.privateKey)}))})})),l=()=>{const e=(0,o.create)();return Object.assign(Object.assign({},e),{signTransaction:r=>i(void 0,void 0,void 0,(function*(){return t(r,e.privateKey)}))})},d=new o.Wallet({create:l,privateKeyToAccount:r,decrypt:c});return{signTransaction:t,create:l,privateKeyToAccount:r,decrypt:c,recoverTransaction:o.recoverTransaction,hashMessage:o.hashMessage,sign:o.sign,recover:o.recover,encrypt:o.encrypt,wallet:d}}},9913:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Web3PkgInfo=void 0,t.Web3PkgInfo={version:"4.2.2"}},9375:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Web3=void 0;const o=r(6527),c=r(6637),l=a(r(3211)),d=r(1698),u=r(9910),h=r(9757),p=r(9820),f=s(r(9634)),g=r(9634),m=r(5071),y=a(r(9937)),v=r(1186),b=r(9913);class T extends o.Web3Context{constructor(e){var t;((0,g.isNullish)(e)||"string"==typeof e&&""===e.trim()||"string"!=typeof e&&!(0,o.isSupportedProvider)(e)&&!e.provider)&&console.warn("NOTE: web3.js is running without provider. You need to pass a provider in order to interact with the network!");let r={};"string"==typeof e||(0,o.isSupportedProvider)(e)?r.provider=e:r=e||{},r.registeredSubscriptions=Object.assign(Object.assign({},c.registeredSubscriptions),null!==(t=r.registeredSubscriptions)&&void 0!==t?t:{}),super(r);const i=(0,v.initAccountsForContext)(this);this._wallet=i.wallet,this._accountProvider=i,this.utils=f;const n=this;class s extends l.default{constructor(e,t,r){if("object"==typeof t&&"object"==typeof r)throw new m.InvalidMethodParamsError("Should not provide options at both 2nd and 3rd parameters");if((0,g.isNullish)(t))super(e,r,n.getContextObject());else if("object"==typeof t)super(e,t,n.getContextObject());else{if("string"!=typeof t)throw new m.InvalidMethodParamsError;super(e,t,null!=r?r:{},n.getContextObject())}super.subscribeToContextEvents(n)}}const a=n.use(c.Web3Eth);this.eth=Object.assign(a,{ens:n.use(d.ENS,d.registryAddresses.main),Iban:u.Iban,net:n.use(p.Net),personal:n.use(h.Personal),Contract:s,abi:y.default,accounts:i})}}t.Web3=T,T.version=b.Web3PkgInfo.version,T.utils=f,T.modules={Web3Eth:c.Web3Eth,Iban:u.Iban,Net:p.Net,ENS:d.ENS,Personal:h.Personal},t.default=T},5809:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZodError=t.quotelessJson=t.ZodIssueCode=void 0;const i=r(3133);t.ZodIssueCode=i.util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),t.quotelessJson=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class n extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},i=e=>{for(const n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(i);else if("invalid_return_type"===n.code)i(n.returnTypeError);else if("invalid_arguments"===n.code)i(n.argumentsError);else if(0===n.path.length)r._errors.push(t(n));else{let e=r,i=0;for(;i<n.path.length;){const r=n.path[i];i===n.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(n))):e[r]=e[r]||{_errors:[]},e=e[r],i++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,i.util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},r=[];for(const i of this.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}t.ZodError=n,n.create=e=>new n(e)},1909:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorMap=t.setErrorMap=t.defaultErrorMap=void 0;const n=i(r(6013));t.defaultErrorMap=n.default;let s=n.default;t.setErrorMap=function(e){s=e},t.getErrorMap=function(){return s}},4474:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(1909),t),n(r(4735),t),n(r(1832),t),n(r(3133),t),n(r(1176),t),n(r(5809),t)},3682:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.errorUtil=void 0,(r=t.errorUtil||(t.errorUtil={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},r.toString=e=>"string"==typeof e?e:null==e?void 0:e.message},4735:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=t.isValid=t.isDirty=t.isAborted=t.OK=t.DIRTY=t.INVALID=t.ParseStatus=t.addIssueToContext=t.EMPTY_PATH=t.makeIssue=void 0;const n=r(1909),s=i(r(6013));t.makeIssue=e=>{const{data:t,path:r,errorMaps:i,issueData:n}=e,s=[...r,...n.path||[]],a={...n,path:s};let o="";const c=i.filter((e=>!!e)).slice().reverse();for(const e of c)o=e(a,{data:t,defaultError:o}).message;return{...n,path:s,message:n.message||o}},t.EMPTY_PATH=[],t.addIssueToContext=function(e,r){const i=(0,t.makeIssue)({issueData:r,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,(0,n.getErrorMap)(),s.default].filter((e=>!!e))});e.common.issues.push(i)};class a{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,r){const i=[];for(const n of r){if("aborted"===n.status)return t.INVALID;"dirty"===n.status&&e.dirty(),i.push(n.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,t){const r=[];for(const e of t)r.push({key:await e.key,value:await e.value});return a.mergeObjectSync(e,r)}static mergeObjectSync(e,r){const i={};for(const n of r){const{key:r,value:s}=n;if("aborted"===r.status)return t.INVALID;if("aborted"===s.status)return t.INVALID;"dirty"===r.status&&e.dirty(),"dirty"===s.status&&e.dirty(),"__proto__"===r.value||void 0===s.value&&!n.alwaysSet||(i[r.value]=s.value)}return{status:e.value,value:i}}}t.ParseStatus=a,t.INVALID=Object.freeze({status:"aborted"}),t.DIRTY=e=>({status:"dirty",value:e}),t.OK=e=>({status:"valid",value:e}),t.isAborted=e=>"aborted"===e.status,t.isDirty=e=>"dirty"===e.status,t.isValid=e=>"valid"===e.status,t.isAsync=e=>"undefined"!=typeof Promise&&e instanceof Promise},1832:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3133:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.getParsedType=t.ZodParsedType=t.objectUtil=t.util=void 0,function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},e.getValidEnumValues=t=>{const r=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),i={};for(const e of r)i[e]=t[e];return e.objectValues(i)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(const r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(r=t.util||(t.util={})),(t.objectUtil||(t.objectUtil={})).mergeShapes=(e,t)=>({...e,...t}),t.ZodParsedType=r.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),t.getParsedType=e=>{switch(typeof e){case"undefined":return t.ZodParsedType.undefined;case"string":return t.ZodParsedType.string;case"number":return isNaN(e)?t.ZodParsedType.nan:t.ZodParsedType.number;case"boolean":return t.ZodParsedType.boolean;case"function":return t.ZodParsedType.function;case"bigint":return t.ZodParsedType.bigint;case"symbol":return t.ZodParsedType.symbol;case"object":return Array.isArray(e)?t.ZodParsedType.array:null===e?t.ZodParsedType.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?t.ZodParsedType.promise:"undefined"!=typeof Map&&e instanceof Map?t.ZodParsedType.map:"undefined"!=typeof Set&&e instanceof Set?t.ZodParsedType.set:"undefined"!=typeof Date&&e instanceof Date?t.ZodParsedType.date:t.ZodParsedType.object;default:return t.ZodParsedType.unknown}}},6750:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.z=void 0;const o=s(r(4474));t.z=o,a(r(4474),t),t.default=o},6013:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(3133),n=r(5809);t.default=(e,t)=>{let r;switch(e.code){case n.ZodIssueCode.invalid_type:r=e.received===i.ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case n.ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,i.util.jsonStringifyReplacer)}`;break;case n.ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${i.util.joinValues(e.keys,", ")}`;break;case n.ZodIssueCode.invalid_union:r="Invalid input";break;case n.ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${i.util.joinValues(e.options)}`;break;case n.ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${i.util.joinValues(e.options)}, received '${e.received}'`;break;case n.ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case n.ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case n.ZodIssueCode.invalid_date:r="Invalid date";break;case n.ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:i.util.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case n.ZodIssueCode.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case n.ZodIssueCode.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case n.ZodIssueCode.custom:r="Invalid input";break;case n.ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case n.ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case n.ZodIssueCode.not_finite:r="Number must be finite";break;default:r=t.defaultError,i.util.assertNever(e)}return{message:r}}},1176:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.date=t.boolean=t.bigint=t.array=t.any=t.coerce=t.ZodFirstPartyTypeKind=t.late=t.ZodSchema=t.Schema=t.custom=t.ZodReadonly=t.ZodPipeline=t.ZodBranded=t.BRAND=t.ZodNaN=t.ZodCatch=t.ZodDefault=t.ZodNullable=t.ZodOptional=t.ZodTransformer=t.ZodEffects=t.ZodPromise=t.ZodNativeEnum=t.ZodEnum=t.ZodLiteral=t.ZodLazy=t.ZodFunction=t.ZodSet=t.ZodMap=t.ZodRecord=t.ZodTuple=t.ZodIntersection=t.ZodDiscriminatedUnion=t.ZodUnion=t.ZodObject=t.ZodArray=t.ZodVoid=t.ZodNever=t.ZodUnknown=t.ZodAny=t.ZodNull=t.ZodUndefined=t.ZodSymbol=t.ZodDate=t.ZodBoolean=t.ZodBigInt=t.ZodNumber=t.ZodString=t.ZodType=void 0,t.NEVER=t.void=t.unknown=t.union=t.undefined=t.tuple=t.transformer=t.symbol=t.string=t.strictObject=t.set=t.record=t.promise=t.preprocess=t.pipeline=t.ostring=t.optional=t.onumber=t.oboolean=t.object=t.number=t.nullable=t.null=t.never=t.nativeEnum=t.nan=t.map=t.literal=t.lazy=t.intersection=t.instanceof=t.function=t.enum=t.effect=t.discriminatedUnion=void 0;const i=r(1909),n=r(3682),s=r(4735),a=r(3133),o=r(5809);class c{constructor(e,t,r,i){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const l=(e,t)=>{if((0,s.isValid)(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new o.ZodError(e.common.issues);return this._error=t,this._error}}};function d(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:i,description:n}=e;if(t&&(r||i))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:n}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=i?i:t.defaultError}:{message:null!=r?r:t.defaultError},description:n}}class u{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return(0,a.getParsedType)(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:(0,a.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new s.ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:(0,a.getParsedType)(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if((0,s.isAsync)(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const i={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,a.getParsedType)(e)},n=this._parseSync({data:e,path:i.path,parent:i});return l(i,n)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:(0,a.getParsedType)(e)},i=this._parse({data:e,path:r.path,parent:r}),n=await((0,s.isAsync)(i)?i:Promise.resolve(i));return l(r,n)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,i)=>{const n=e(t),s=()=>i.addIssue({code:o.ZodIssueCode.custom,...r(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then((e=>!!e||(s(),!1))):!!n||(s(),!1)}))}refinement(e,t){return this._refinement(((r,i)=>!!e(r)||(i.addIssue("function"==typeof t?t(r,i):t),!1)))}_refinement(e){return new X({schema:this,typeName:oe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Y.create(this,this._def)}nullable(){return ee.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return L.create(this,this._def)}promise(){return J.create(this,this._def)}or(e){return M.create([this,e],this._def)}and(e){return j.create(this,e,this._def)}transform(e){return new X({...d(this._def),schema:this,typeName:oe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new te({...d(this._def),innerType:this,defaultValue:t,typeName:oe.ZodDefault})}brand(){return new ne({typeName:oe.ZodBranded,type:this,...d(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new re({...d(this._def),innerType:this,catchValue:t,typeName:oe.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return se.create(this,e)}readonly(){return ae.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}t.ZodType=u,t.Schema=u,t.ZodSchema=u;const h=/^c[^\s-]{8,}$/i,p=/^[a-z][a-z0-9]*$/,f=/[0-9A-HJKMNP-TV-Z]{26}/,g=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,m=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,y=/^(\p{Extended_Pictographic}|\p{Emoji_Component})+$/u,v=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,b=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;class T extends u{constructor(){super(...arguments),this._regex=(e,t,r)=>this.refinement((t=>e.test(t)),{validation:t,code:o.ZodIssueCode.invalid_string,...n.errorUtil.errToObj(r)}),this.nonempty=e=>this.min(1,n.errorUtil.errToObj(e)),this.trim=()=>new T({...this._def,checks:[...this._def.checks,{kind:"trim"}]}),this.toLowerCase=()=>new T({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]}),this.toUpperCase=()=>new T({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==a.ZodParsedType.string){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.string,received:t.parsedType}),s.INVALID}const t=new s.ParseStatus;let r;for(const l of this._def.checks)if("min"===l.kind)e.data.length<l.value&&(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),t.dirty());else if("max"===l.kind)e.data.length>l.value&&(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),t.dirty());else if("length"===l.kind){const i=e.data.length>l.value,n=e.data.length<l.value;(i||n)&&(r=this._getOrReturnCtx(e,r),i?(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):n&&(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),t.dirty())}else if("email"===l.kind)m.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"email",code:o.ZodIssueCode.invalid_string,message:l.message}),t.dirty());else if("emoji"===l.kind)y.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"emoji",code:o.ZodIssueCode.invalid_string,message:l.message}),t.dirty());else if("uuid"===l.kind)g.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"uuid",code:o.ZodIssueCode.invalid_string,message:l.message}),t.dirty());else if("cuid"===l.kind)h.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"cuid",code:o.ZodIssueCode.invalid_string,message:l.message}),t.dirty());else if("cuid2"===l.kind)p.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"cuid2",code:o.ZodIssueCode.invalid_string,message:l.message}),t.dirty());else if("ulid"===l.kind)f.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"ulid",code:o.ZodIssueCode.invalid_string,message:l.message}),t.dirty());else if("url"===l.kind)try{new URL(e.data)}catch(i){r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"url",code:o.ZodIssueCode.invalid_string,message:l.message}),t.dirty()}else"regex"===l.kind?(l.regex.lastIndex=0,l.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"regex",code:o.ZodIssueCode.invalid_string,message:l.message}),t.dirty())):"trim"===l.kind?e.data=e.data.trim():"includes"===l.kind?e.data.includes(l.value,l.position)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),t.dirty()):"toLowerCase"===l.kind?e.data=e.data.toLowerCase():"toUpperCase"===l.kind?e.data=e.data.toUpperCase():"startsWith"===l.kind?e.data.startsWith(l.value)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_string,validation:{startsWith:l.value},message:l.message}),t.dirty()):"endsWith"===l.kind?e.data.endsWith(l.value)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_string,validation:{endsWith:l.value},message:l.message}),t.dirty()):"datetime"===l.kind?((c=l).precision?c.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${c.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${c.precision}}Z$`):0===c.precision?c.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):c.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_string,validation:"datetime",message:l.message}),t.dirty()):"ip"===l.kind?(i=e.data,("v4"!==(n=l.version)&&n||!v.test(i))&&("v6"!==n&&n||!b.test(i))&&(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{validation:"ip",code:o.ZodIssueCode.invalid_string,message:l.message}),t.dirty())):a.util.assertNever(l);var i,n,c;return{status:t.value,value:e.data}}_addCheck(e){return new T({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...n.errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...n.errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...n.errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...n.errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...n.errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...n.errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...n.errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...n.errorUtil.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...n.errorUtil.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...n.errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...n.errorUtil.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...n.errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...n.errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...n.errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...n.errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...n.errorUtil.errToObj(t)})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function _(e,t){const r=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,n=r>i?r:i;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}t.ZodString=T,T.create=e=>{var t;return new T({checks:[],typeName:oe.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...d(e)})};class k extends u{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==a.ZodParsedType.number){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.number,received:t.parsedType}),s.INVALID}let t;const r=new s.ParseStatus;for(const i of this._def.checks)"int"===i.kind?a.util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:"integer",received:"float",message:i.message}),r.dirty()):"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),r.dirty()):"multipleOf"===i.kind?0!==_(e.data,i.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):"finite"===i.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.not_finite,message:i.message}),r.dirty()):a.util.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,n.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,n.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,n.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,n.errorUtil.toString(t))}setLimit(e,t,r,i){return new k({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:n.errorUtil.toString(i)}]})}_addCheck(e){return new k({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:n.errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:n.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:n.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:n.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:n.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:n.errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:n.errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:n.errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:n.errorUtil.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&a.util.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}t.ZodNumber=k,k.create=e=>new k({checks:[],typeName:oe.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...d(e)});class E extends u{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==a.ZodParsedType.bigint){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.bigint,received:t.parsedType}),s.INVALID}let t;const r=new s.ParseStatus;for(const i of this._def.checks)"min"===i.kind?(i.inclusive?e.data<i.value:e.data<=i.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"max"===i.kind?(i.inclusive?e.data>i.value:e.data>=i.value)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),r.dirty()):"multipleOf"===i.kind?e.data%i.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.not_multiple_of,multipleOf:i.value,message:i.message}),r.dirty()):a.util.assertNever(i);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,n.errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,n.errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,n.errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,n.errorUtil.toString(t))}setLimit(e,t,r,i){return new E({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:n.errorUtil.toString(i)}]})}_addCheck(e){return new E({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:n.errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:n.errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:n.errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:n.errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:n.errorUtil.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}t.ZodBigInt=E,E.create=e=>{var t;return new E({checks:[],typeName:oe.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...d(e)})};class w extends u{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==a.ZodParsedType.boolean){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.boolean,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodBoolean=w,w.create=e=>new w({typeName:oe.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...d(e)});class A extends u{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==a.ZodParsedType.date){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.date,received:t.parsedType}),s.INVALID}if(isNaN(e.data.getTime())){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_date}),s.INVALID}const t=new s.ParseStatus;let r;for(const i of this._def.checks)"min"===i.kind?e.data.getTime()<i.value&&(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),t.dirty()):"max"===i.kind?e.data.getTime()>i.value&&(r=this._getOrReturnCtx(e,r),(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),t.dirty()):a.util.assertNever(i);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new A({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:n.errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:n.errorUtil.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}t.ZodDate=A,A.create=e=>new A({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:oe.ZodDate,...d(e)});class I extends u{_parse(e){if(this._getType(e)!==a.ZodParsedType.symbol){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.symbol,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodSymbol=I,I.create=e=>new I({typeName:oe.ZodSymbol,...d(e)});class R extends u{_parse(e){if(this._getType(e)!==a.ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.undefined,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodUndefined=R,R.create=e=>new R({typeName:oe.ZodUndefined,...d(e)});class S extends u{_parse(e){if(this._getType(e)!==a.ZodParsedType.null){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.null,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodNull=S,S.create=e=>new S({typeName:oe.ZodNull,...d(e)});class C extends u{constructor(){super(...arguments),this._any=!0}_parse(e){return(0,s.OK)(e.data)}}t.ZodAny=C,C.create=e=>new C({typeName:oe.ZodAny,...d(e)});class x extends u{constructor(){super(...arguments),this._unknown=!0}_parse(e){return(0,s.OK)(e.data)}}t.ZodUnknown=x,x.create=e=>new x({typeName:oe.ZodUnknown,...d(e)});class P extends u{_parse(e){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.never,received:t.parsedType}),s.INVALID}}t.ZodNever=P,P.create=e=>new P({typeName:oe.ZodNever,...d(e)});class O extends u{_parse(e){if(this._getType(e)!==a.ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.void,received:t.parsedType}),s.INVALID}return(0,s.OK)(e.data)}}t.ZodVoid=O,O.create=e=>new O({typeName:oe.ZodVoid,...d(e)});class L extends u{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),i=this._def;if(t.parsedType!==a.ZodParsedType.array)return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.array,received:t.parsedType}),s.INVALID;if(null!==i.exactLength){const e=t.data.length>i.exactLength.value,n=t.data.length<i.exactLength.value;(e||n)&&((0,s.addIssueToContext)(t,{code:e?o.ZodIssueCode.too_big:o.ZodIssueCode.too_small,minimum:n?i.exactLength.value:void 0,maximum:e?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(null!==i.minLength&&t.data.length<i.minLength.value&&((0,s.addIssueToContext)(t,{code:o.ZodIssueCode.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),null!==i.maxLength&&t.data.length>i.maxLength.value&&((0,s.addIssueToContext)(t,{code:o.ZodIssueCode.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>i.type._parseAsync(new c(t,e,t.path,r))))).then((e=>s.ParseStatus.mergeArray(r,e)));const n=[...t.data].map(((e,r)=>i.type._parseSync(new c(t,e,t.path,r))));return s.ParseStatus.mergeArray(r,n)}get element(){return this._def.type}min(e,t){return new L({...this._def,minLength:{value:e,message:n.errorUtil.toString(t)}})}max(e,t){return new L({...this._def,maxLength:{value:e,message:n.errorUtil.toString(t)}})}length(e,t){return new L({...this._def,exactLength:{value:e,message:n.errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}function B(e){if(e instanceof N){const t={};for(const r in e.shape){const i=e.shape[r];t[r]=Y.create(B(i))}return new N({...e._def,shape:()=>t})}return e instanceof L?new L({...e._def,type:B(e.element)}):e instanceof Y?Y.create(B(e.unwrap())):e instanceof ee?ee.create(B(e.unwrap())):e instanceof H?H.create(e.items.map((e=>B(e)))):e}t.ZodArray=L,L.create=(e,t)=>new L({type:e,minLength:null,maxLength:null,exactLength:null,typeName:oe.ZodArray,...d(t)});class N extends u{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=a.util.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==a.ZodParsedType.object){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.object,received:t.parsedType}),s.INVALID}const{status:t,ctx:r}=this._processInputParams(e),{shape:i,keys:n}=this._getCached(),l=[];if(!(this._def.catchall instanceof P&&"strip"===this._def.unknownKeys))for(const e in r.data)n.includes(e)||l.push(e);const d=[];for(const e of n){const t=i[e],n=r.data[e];d.push({key:{status:"valid",value:e},value:t._parse(new c(r,n,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof P){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of l)d.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)l.length>0&&((0,s.addIssueToContext)(r,{code:o.ZodIssueCode.unrecognized_keys,keys:l}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of l){const i=r.data[t];d.push({key:{status:"valid",value:t},value:e._parse(new c(r,i,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of d){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>s.ParseStatus.mergeObjectSync(t,e))):s.ParseStatus.mergeObjectSync(t,d)}get shape(){return this._def.shape()}strict(e){return n.errorUtil.errToObj,new N({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var i,s,a,o;const c=null!==(a=null===(s=(i=this._def).errorMap)||void 0===s?void 0:s.call(i,t,r).message)&&void 0!==a?a:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=n.errorUtil.errToObj(e).message)&&void 0!==o?o:c}:{message:c}}}:{}})}strip(){return new N({...this._def,unknownKeys:"strip"})}passthrough(){return new N({...this._def,unknownKeys:"passthrough"})}extend(e){return new N({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new N({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:oe.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new N({...this._def,catchall:e})}pick(e){const t={};return a.util.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new N({...this._def,shape:()=>t})}omit(e){const t={};return a.util.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new N({...this._def,shape:()=>t})}deepPartial(){return B(this)}partial(e){const t={};return a.util.objectKeys(this.shape).forEach((r=>{const i=this.shape[r];e&&!e[r]?t[r]=i:t[r]=i.optional()})),new N({...this._def,shape:()=>t})}required(e){const t={};return a.util.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof Y;)e=e._def.innerType;t[r]=e}})),new N({...this._def,shape:()=>t})}keyof(){return q(a.util.objectKeys(this.shape))}}t.ZodObject=N,N.create=(e,t)=>new N({shape:()=>e,unknownKeys:"strip",catchall:P.create(),typeName:oe.ZodObject,...d(t)}),N.strictCreate=(e,t)=>new N({shape:()=>e,unknownKeys:"strict",catchall:P.create(),typeName:oe.ZodObject,...d(t)}),N.lazycreate=(e,t)=>new N({shape:e,unknownKeys:"strip",catchall:P.create(),typeName:oe.ZodObject,...d(t)});class M extends u{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new o.ZodError(e.ctx.common.issues)));return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_union,unionErrors:r}),s.INVALID}));{let e;const i=[];for(const n of r){const r={...t,common:{...t.common,issues:[]},parent:null},s=n._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&i.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const n=i.map((e=>new o.ZodError(e)));return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_union,unionErrors:n}),s.INVALID}}get options(){return this._def.options}}t.ZodUnion=M,M.create=(e,t)=>new M({options:e,typeName:oe.ZodUnion,...d(t)});const D=e=>e instanceof W?D(e.schema):e instanceof X?D(e.innerType()):e instanceof Z?[e.value]:e instanceof K?e.options:e instanceof Q?Object.keys(e.enum):e instanceof te?D(e._def.innerType):e instanceof R?[void 0]:e instanceof S?[null]:null;class U extends u{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==a.ZodParsedType.object)return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.object,received:t.parsedType}),s.INVALID;const r=this.discriminator,i=t.data[r],n=this.optionsMap.get(i);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):((0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),s.INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const i=new Map;for(const r of t){const t=D(r.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of t){if(i.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);i.set(n,r)}}return new U({typeName:oe.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:i,...d(r)})}}function F(e,t){const r=(0,a.getParsedType)(e),i=(0,a.getParsedType)(t);if(e===t)return{valid:!0,data:e};if(r===a.ZodParsedType.object&&i===a.ZodParsedType.object){const r=a.util.objectKeys(t),i=a.util.objectKeys(e).filter((e=>-1!==r.indexOf(e))),n={...e,...t};for(const r of i){const i=F(e[r],t[r]);if(!i.valid)return{valid:!1};n[r]=i.data}return{valid:!0,data:n}}if(r===a.ZodParsedType.array&&i===a.ZodParsedType.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let i=0;i<e.length;i++){const n=F(e[i],t[i]);if(!n.valid)return{valid:!1};r.push(n.data)}return{valid:!0,data:r}}return r===a.ZodParsedType.date&&i===a.ZodParsedType.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}t.ZodDiscriminatedUnion=U;class j extends u{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=(e,i)=>{if((0,s.isAborted)(e)||(0,s.isAborted)(i))return s.INVALID;const n=F(e.value,i.value);return n.valid?(((0,s.isDirty)(e)||(0,s.isDirty)(i))&&t.dirty(),{status:t.value,value:n.data}):((0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_intersection_types}),s.INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>i(e,t))):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}t.ZodIntersection=j,j.create=(e,t,r)=>new j({left:e,right:t,typeName:oe.ZodIntersection,...d(r)});class H extends u{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==a.ZodParsedType.array)return(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.array,received:r.parsedType}),s.INVALID;if(r.data.length<this._def.items.length)return(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.INVALID;!this._def.rest&&r.data.length>this._def.items.length&&((0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...r.data].map(((e,t)=>{const i=this._def.items[t]||this._def.rest;return i?i._parse(new c(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(i).then((e=>s.ParseStatus.mergeArray(t,e))):s.ParseStatus.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new H({...this._def,rest:e})}}t.ZodTuple=H,H.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new H({items:e,typeName:oe.ZodTuple,rest:null,...d(t)})};class G extends u{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==a.ZodParsedType.object)return(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.object,received:r.parsedType}),s.INVALID;const i=[],n=this._def.keyType,l=this._def.valueType;for(const e in r.data)i.push({key:n._parse(new c(r,e,r.path,e)),value:l._parse(new c(r,r.data[e],r.path,e))});return r.common.async?s.ParseStatus.mergeObjectAsync(t,i):s.ParseStatus.mergeObjectSync(t,i)}get element(){return this._def.valueType}static create(e,t,r){return new G(t instanceof u?{keyType:e,valueType:t,typeName:oe.ZodRecord,...d(r)}:{keyType:T.create(),valueType:e,typeName:oe.ZodRecord,...d(t)})}}t.ZodRecord=G;class V extends u{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==a.ZodParsedType.map)return(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.map,received:r.parsedType}),s.INVALID;const i=this._def.keyType,n=this._def.valueType,l=[...r.data.entries()].map((([e,t],s)=>({key:i._parse(new c(r,e,r.path,[s,"key"])),value:n._parse(new c(r,t,r.path,[s,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of l){const i=await r.key,n=await r.value;if("aborted"===i.status||"aborted"===n.status)return s.INVALID;"dirty"!==i.status&&"dirty"!==n.status||t.dirty(),e.set(i.value,n.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of l){const i=r.key,n=r.value;if("aborted"===i.status||"aborted"===n.status)return s.INVALID;"dirty"!==i.status&&"dirty"!==n.status||t.dirty(),e.set(i.value,n.value)}return{status:t.value,value:e}}}}t.ZodMap=V,V.create=(e,t,r)=>new V({valueType:t,keyType:e,typeName:oe.ZodMap,...d(r)});class z extends u{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==a.ZodParsedType.set)return(0,s.addIssueToContext)(r,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.set,received:r.parsedType}),s.INVALID;const i=this._def;null!==i.minSize&&r.data.size<i.minSize.value&&((0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),t.dirty()),null!==i.maxSize&&r.data.size>i.maxSize.value&&((0,s.addIssueToContext)(r,{code:o.ZodIssueCode.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),t.dirty());const n=this._def.valueType;function l(e){const r=new Set;for(const i of e){if("aborted"===i.status)return s.INVALID;"dirty"===i.status&&t.dirty(),r.add(i.value)}return{status:t.value,value:r}}const d=[...r.data.values()].map(((e,t)=>n._parse(new c(r,e,r.path,t))));return r.common.async?Promise.all(d).then((e=>l(e))):l(d)}min(e,t){return new z({...this._def,minSize:{value:e,message:n.errorUtil.toString(t)}})}max(e,t){return new z({...this._def,maxSize:{value:e,message:n.errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}t.ZodSet=z,z.create=(e,t)=>new z({valueType:e,minSize:null,maxSize:null,typeName:oe.ZodSet,...d(t)});class $ extends u{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==a.ZodParsedType.function)return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.function,received:t.parsedType}),s.INVALID;function r(e,r){return(0,s.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,i.getErrorMap)(),i.defaultErrorMap].filter((e=>!!e)),issueData:{code:o.ZodIssueCode.invalid_arguments,argumentsError:r}})}function n(e,r){return(0,s.makeIssue)({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,(0,i.getErrorMap)(),i.defaultErrorMap].filter((e=>!!e)),issueData:{code:o.ZodIssueCode.invalid_return_type,returnTypeError:r}})}const c={errorMap:t.common.contextualErrorMap},l=t.data;if(this._def.returns instanceof J){const e=this;return(0,s.OK)((async function(...t){const i=new o.ZodError([]),s=await e._def.args.parseAsync(t,c).catch((e=>{throw i.addIssue(r(t,e)),i})),a=await Reflect.apply(l,this,s);return await e._def.returns._def.type.parseAsync(a,c).catch((e=>{throw i.addIssue(n(a,e)),i}))}))}{const e=this;return(0,s.OK)((function(...t){const i=e._def.args.safeParse(t,c);if(!i.success)throw new o.ZodError([r(t,i.error)]);const s=Reflect.apply(l,this,i.data),a=e._def.returns.safeParse(s,c);if(!a.success)throw new o.ZodError([n(s,a.error)]);return a.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new $({...this._def,args:H.create(e).rest(x.create())})}returns(e){return new $({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new $({args:e||H.create([]).rest(x.create()),returns:t||x.create(),typeName:oe.ZodFunction,...d(r)})}}t.ZodFunction=$;class W extends u{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}t.ZodLazy=W,W.create=(e,t)=>new W({getter:e,typeName:oe.ZodLazy,...d(t)});class Z extends u{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{received:t.data,code:o.ZodIssueCode.invalid_literal,expected:this._def.value}),s.INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function q(e,t){return new K({values:e,typeName:oe.ZodEnum,...d(t)})}t.ZodLiteral=Z,Z.create=(e,t)=>new Z({value:e,typeName:oe.ZodLiteral,...d(t)});class K extends u{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return(0,s.addIssueToContext)(t,{expected:a.util.joinValues(r),received:t.parsedType,code:o.ZodIssueCode.invalid_type}),s.INVALID}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return(0,s.addIssueToContext)(t,{received:t.data,code:o.ZodIssueCode.invalid_enum_value,options:r}),s.INVALID}return(0,s.OK)(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return K.create(e)}exclude(e){return K.create(this.options.filter((t=>!e.includes(t))))}}t.ZodEnum=K,K.create=q;class Q extends u{_parse(e){const t=a.util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==a.ZodParsedType.string&&r.parsedType!==a.ZodParsedType.number){const e=a.util.objectValues(t);return(0,s.addIssueToContext)(r,{expected:a.util.joinValues(e),received:r.parsedType,code:o.ZodIssueCode.invalid_type}),s.INVALID}if(-1===t.indexOf(e.data)){const e=a.util.objectValues(t);return(0,s.addIssueToContext)(r,{received:r.data,code:o.ZodIssueCode.invalid_enum_value,options:e}),s.INVALID}return(0,s.OK)(e.data)}get enum(){return this._def.values}}t.ZodNativeEnum=Q,Q.create=(e,t)=>new Q({values:e,typeName:oe.ZodNativeEnum,...d(t)});class J extends u{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==a.ZodParsedType.promise&&!1===t.common.async)return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.promise,received:t.parsedType}),s.INVALID;const r=t.parsedType===a.ZodParsedType.promise?t.data:Promise.resolve(t.data);return(0,s.OK)(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}t.ZodPromise=J,J.create=(e,t)=>new J({type:e,typeName:oe.ZodPromise,...d(t)});class X extends u{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===oe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),i=this._def.effect||null,n={addIssue:e=>{(0,s.addIssueToContext)(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===i.type){const e=i.transform(r.data,n);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===i.type){const e=e=>{const t=i.refinement(e,n);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===i.status?s.INVALID:("dirty"===i.status&&t.dirty(),e(i.value),{status:t.value,value:i.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?s.INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===i.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!(0,s.isValid)(e))return e;const a=i.transform(e.value,n);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>(0,s.isValid)(e)?Promise.resolve(i.transform(e.value,n)).then((e=>({status:t.value,value:e}))):e))}a.util.assertNever(i)}}t.ZodEffects=X,t.ZodTransformer=X,X.create=(e,t,r)=>new X({schema:e,typeName:oe.ZodEffects,effect:t,...d(r)}),X.createWithPreprocess=(e,t,r)=>new X({schema:t,effect:{type:"preprocess",transform:e},typeName:oe.ZodEffects,...d(r)});class Y extends u{_parse(e){return this._getType(e)===a.ZodParsedType.undefined?(0,s.OK)(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodOptional=Y,Y.create=(e,t)=>new Y({innerType:e,typeName:oe.ZodOptional,...d(t)});class ee extends u{_parse(e){return this._getType(e)===a.ZodParsedType.null?(0,s.OK)(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}t.ZodNullable=ee,ee.create=(e,t)=>new ee({innerType:e,typeName:oe.ZodNullable,...d(t)});class te extends u{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===a.ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}t.ZodDefault=te,te.create=(e,t)=>new te({innerType:e,typeName:oe.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...d(t)});class re extends u{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return(0,s.isAsync)(i)?i.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new o.ZodError(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===i.status?i.value:this._def.catchValue({get error(){return new o.ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}t.ZodCatch=re,re.create=(e,t)=>new re({innerType:e,typeName:oe.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...d(t)});class ie extends u{_parse(e){if(this._getType(e)!==a.ZodParsedType.nan){const t=this._getOrReturnCtx(e);return(0,s.addIssueToContext)(t,{code:o.ZodIssueCode.invalid_type,expected:a.ZodParsedType.nan,received:t.parsedType}),s.INVALID}return{status:"valid",value:e.data}}}t.ZodNaN=ie,ie.create=e=>new ie({typeName:oe.ZodNaN,...d(e)}),t.BRAND=Symbol("zod_brand");class ne extends u{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}t.ZodBranded=ne;class se extends u{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?s.INVALID:"dirty"===e.status?(t.dirty(),(0,s.DIRTY)(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?s.INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new se({in:e,out:t,typeName:oe.ZodPipeline})}}t.ZodPipeline=se;class ae extends u{_parse(e){const t=this._def.innerType._parse(e);return(0,s.isValid)(t)&&(t.value=Object.freeze(t.value)),t}}var oe;t.ZodReadonly=ae,ae.create=(e,t)=>new ae({innerType:e,typeName:oe.ZodReadonly,...d(t)}),t.custom=(e,t={},r)=>e?C.create().superRefine(((i,n)=>{var s,a;if(!e(i)){const e="function"==typeof t?t(i):"string"==typeof t?{message:t}:t,o=null===(a=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===a||a,c="string"==typeof e?{message:e}:e;n.addIssue({code:"custom",...c,fatal:o})}})):C.create(),t.late={object:N.lazycreate},function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(oe=t.ZodFirstPartyTypeKind||(t.ZodFirstPartyTypeKind={})),t.instanceof=(e,r={message:`Input not instance of ${e.name}`})=>(0,t.custom)((t=>t instanceof e),r);const ce=T.create;t.string=ce;const le=k.create;t.number=le;const de=ie.create;t.nan=de;const ue=E.create;t.bigint=ue;const he=w.create;t.boolean=he;const pe=A.create;t.date=pe;const fe=I.create;t.symbol=fe;const ge=R.create;t.undefined=ge;const me=S.create;t.null=me;const ye=C.create;t.any=ye;const ve=x.create;t.unknown=ve;const be=P.create;t.never=be;const Te=O.create;t.void=Te;const _e=L.create;t.array=_e;const ke=N.create;t.object=ke;const Ee=N.strictCreate;t.strictObject=Ee;const we=M.create;t.union=we;const Ae=U.create;t.discriminatedUnion=Ae;const Ie=j.create;t.intersection=Ie;const Re=H.create;t.tuple=Re;const Se=G.create;t.record=Se;const Ce=V.create;t.map=Ce;const xe=z.create;t.set=xe;const Pe=$.create;t.function=Pe;const Oe=W.create;t.lazy=Oe;const Le=Z.create;t.literal=Le;const Be=K.create;t.enum=Be;const Ne=Q.create;t.nativeEnum=Ne;const Me=J.create;t.promise=Me;const De=X.create;t.effect=De,t.transformer=De;const Ue=Y.create;t.optional=Ue;const Fe=ee.create;t.nullable=Fe;const je=X.createWithPreprocess;t.preprocess=je;const He=se.create;t.pipeline=He,t.ostring=()=>ce().optional(),t.onumber=()=>le().optional(),t.oboolean=()=>he().optional(),t.coerce={string:e=>T.create({...e,coerce:!0}),number:e=>k.create({...e,coerce:!0}),boolean:e=>w.create({...e,coerce:!0}),bigint:e=>E.create({...e,coerce:!0}),date:e=>A.create({...e,coerce:!0})},t.NEVER=s.INVALID},3072:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=void 0;const i=r(825),n=r(6540),s={web:i.crypto};function a(e,t,r){if(!r.startsWith("aes-"))throw new Error(`AES submodule doesn't support mode ${r}`);if(16!==t.length)throw new Error("AES: wrong IV length");if(r.startsWith("aes-128")&&16!==e.length||r.startsWith("aes-256")&&32!==e.length)throw new Error("AES: wrong key length")}async function o(e,t,r){if(!s.web)throw new Error("Browser crypto not available.");let i;if(["aes-128-cbc","aes-256-cbc"].includes(e)&&(i="cbc"),["aes-128-ctr","aes-256-ctr"].includes(e)&&(i="ctr"),!i)throw new Error("AES: unsupported mode");return[await s.web.subtle.importKey("raw",t,{name:`AES-${i.toUpperCase()}`,length:8*t.length},!0,["encrypt","decrypt"]),{name:`aes-${i}`,iv:r,counter:r,length:128}]}async function c(e,t,r,i="aes-128-ctr",c=!0){if(a(t,r,i),s.web){const[n,a]=await o(i,t,r),l=await s.web.subtle.encrypt(a,n,e);let d=new Uint8Array(l);return c||"aes-cbc"!==a.name||e.length%16||(d=d.slice(0,-16)),d}if(s.node){const a=s.node.createCipheriv(i,t,r);return a.setAutoPadding(c),(0,n.concatBytes)(a.update(e),a.final())}throw new Error("The environment doesn't have AES module")}t.encrypt=c,t.decrypt=async function(e,t,r,i="aes-128-ctr",l=!0){if(a(t,r,i),s.web){const[a,d]=await o(i,t,r);if(!l&&"aes-cbc"===d.name){const s=await async function(e,t,r,i){const n=e.slice(-16);for(let e=0;e<16;e++)n[e]^=16^r[e];return(await c(n,t,r,i)).slice(0,16)}(e,t,r,i);e=(0,n.concatBytes)(e,s)}const u=await s.web.subtle.decrypt(d,a,e),h=new Uint8Array(u);if("aes-cbc"===d.name){const s=await c(h,t,r,i);if(!(0,n.equalsBytes)(s,e))throw new Error("AES: wrong padding")}return h}if(s.node){const a=s.node.createDecipheriv(i,t,r);return a.setAutoPadding(l),(0,n.concatBytes)(a.update(e),a.final())}throw new Error("The environment doesn't have AES module")}},7423:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keccak512=t.keccak384=t.keccak256=t.keccak224=void 0;const i=r(125),n=r(6540);t.keccak224=(0,n.wrapHash)(i.keccak_224),t.keccak256=(()=>{const e=(0,n.wrapHash)(i.keccak_256);return e.create=i.keccak_256.create,e})(),t.keccak384=(0,n.wrapHash)(i.keccak_384),t.keccak512=(0,n.wrapHash)(i.keccak_512)},8109:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pbkdf2Sync=t.pbkdf2=void 0;const i=r(9179),n=r(6053),s=r(2540),a=r(6540);t.pbkdf2=async function(e,t,r,o,c){if(!["sha256","sha512"].includes(c))throw new Error("Only sha256 and sha512 are supported");return(0,a.assertBytes)(e),(0,a.assertBytes)(t),(0,i.pbkdf2Async)("sha256"===c?n.sha256:s.sha512,e,t,{c:r,dkLen:o})},t.pbkdf2Sync=function(e,t,r,o,c){if(!["sha256","sha512"].includes(c))throw new Error("Only sha256 and sha512 are supported");return(0,a.assertBytes)(e),(0,a.assertBytes)(t),(0,i.pbkdf2)("sha256"===c?n.sha256:s.sha512,e,t,{c:r,dkLen:o})}},7002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scryptSync=t.scrypt=void 0;const i=r(2739),n=r(6540);t.scrypt=async function(e,t,r,s,a,o,c){return(0,n.assertBytes)(e),(0,n.assertBytes)(t),(0,i.scryptAsync)(e,t,{N:r,r:a,p:s,dkLen:o,onProgress:c})},t.scryptSync=function(e,t,r,s,a,o,c){return(0,n.assertBytes)(e),(0,n.assertBytes)(t),(0,i.scrypt)(e,t,{N:r,r:a,p:s,dkLen:o,onProgress:c})}},5473:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.secp256k1=void 0;var i=r(8358);Object.defineProperty(t,"secp256k1",{enumerable:!0,get:function(){return i.secp256k1}})},6540:function(e,t,r){"use strict";e=r.nmd(e);var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=t.wrapHash=t.equalsBytes=t.hexToBytes=t.bytesToUtf8=t.utf8ToBytes=t.createView=t.concatBytes=t.toHex=t.bytesToHex=t.assertBytes=t.assertBool=void 0;const n=i(r(3525)),s=r(64),a=n.default.bool;t.assertBool=a;const o=n.default.bytes;t.assertBytes=o;var c=r(64);Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return c.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return c.createView}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return c.utf8ToBytes}}),t.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)},t.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,s.hexToBytes)(t)},t.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},t.wrapHash=function(e){return t=>(n.default.bytes(t),e(t))},t.crypto=(()=>{const t="object"==typeof self&&"crypto"in self?self.crypto:void 0,r="function"==typeof e.require&&e.require.bind(e);return{node:r&&!t?r("crypto"):void 0,web:t}})()},3687:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keccak512=t.keccak384=t.keccak256=t.keccak224=void 0;const i=r(125),n=r(5487);t.keccak224=(0,n.wrapHash)(i.keccak_224),t.keccak256=(()=>{const e=(0,n.wrapHash)(i.keccak_256);return e.create=i.keccak_256.create,e})(),t.keccak384=(0,n.wrapHash)(i.keccak_384),t.keccak512=(0,n.wrapHash)(i.keccak_512)},1341:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomBytes=t.getRandomBytesSync=void 0;const i=r(64);t.getRandomBytesSync=function(e){return(0,i.randomBytes)(e)},t.getRandomBytes=async function(e){return(0,i.randomBytes)(e)}},5487:function(e,t,r){"use strict";e=r.nmd(e);var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=t.wrapHash=t.equalsBytes=t.hexToBytes=t.bytesToUtf8=t.utf8ToBytes=t.createView=t.concatBytes=t.toHex=t.bytesToHex=t.assertBytes=t.assertBool=void 0;const n=i(r(3525)),s=r(64),a=n.default.bool;t.assertBool=a;const o=n.default.bytes;t.assertBytes=o;var c=r(64);Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return c.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return c.createView}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return c.utf8ToBytes}}),t.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)},t.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,s.hexToBytes)(t)},t.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},t.wrapHash=function(e){return t=>(n.default.bytes(t),e(t))},t.crypto=(()=>{const t="object"==typeof self&&"crypto"in self?self.crypto:void 0,r="function"==typeof e.require&&e.require.bind(e);return{node:r&&!t?r("crypto"):void 0,web:t}})()},4488:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keccak512=t.keccak384=t.keccak256=t.keccak224=void 0;const i=r(125),n=r(7737);t.keccak224=(0,n.wrapHash)(i.keccak_224),t.keccak256=(()=>{const e=(0,n.wrapHash)(i.keccak_256);return e.create=i.keccak_256.create,e})(),t.keccak384=(0,n.wrapHash)(i.keccak_384),t.keccak512=(0,n.wrapHash)(i.keccak_512)},7737:function(e,t,r){"use strict";e=r.nmd(e);var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=t.wrapHash=t.equalsBytes=t.hexToBytes=t.bytesToUtf8=t.utf8ToBytes=t.createView=t.concatBytes=t.toHex=t.bytesToHex=t.assertBytes=t.assertBool=void 0;const n=i(r(3525)),s=r(64),a=n.default.bool;t.assertBool=a;const o=n.default.bytes;t.assertBytes=o;var c=r(64);Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(t,"toHex",{enumerable:!0,get:function(){return c.bytesToHex}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return c.concatBytes}}),Object.defineProperty(t,"createView",{enumerable:!0,get:function(){return c.createView}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return c.utf8ToBytes}}),t.bytesToUtf8=function(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)},t.hexToBytes=function(e){const t=e.startsWith("0x")?e.substring(2):e;return(0,s.hexToBytes)(t)},t.equalsBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},t.wrapHash=function(e){return t=>(n.default.bytes(t),e(t))},t.crypto=(()=>{const t="object"==typeof self&&"crypto"in self?self.crypto:void 0,r="function"==typeof e.require&&e.require.bind(e);return{node:r&&!t?r("crypto"):void 0,web:t}})()},6608:(e,t)=>{"use strict";function r(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let i=r(),n=1,s=[0,1];for(let e=1;e<i;e++)s.push(n+=r());let a=r(),o=t;t+=a;let c=0,l=0;function d(){return 0==c&&(l=l<<8|e[t++],c=8),l>>--c&1}const u=2**31,h=u>>>1,p=u-1;let f=0;for(let e=0;e<31;e++)f=f<<1|d();let g=[],m=0,y=u;for(;;){let e=Math.floor(((f-m+1)*n-1)/y),t=0,r=i;for(;r-t>1;){let i=t+r>>>1;e<s[i]?r=i:t=i}if(0==t)break;g.push(t);let a=m+Math.floor(y*s[t]/n),o=m+Math.floor(y*s[t+1]/n)-1;for(;0==((a^o)&h);)f=f<<1&p|d(),a=a<<1&p,o=o<<1&p|1;for(;a&~o&536870912;)f=f&h|f<<1&p>>>1|d(),a=a<<1^h,o=(o^h)<<1|h|1;m=a,y=1+o-a}let v=i-4;return g.map((t=>{switch(t-v){case 3:return v+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return v+256+(e[o++]<<8|e[o++]);case 1:return v+e[o++];default:return t-1}}))}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,r)=>t[e.charCodeAt(0)]=r));let r=e.length,i=new Uint8Array(6*r>>3);for(let n=0,s=0,a=0,o=0;n<r;n++)o=o<<6|t[e.charCodeAt(n)],a+=6,a>=8&&(i[s++]=o>>(a-=8));return i}(e)))}function i(e){return 1&e?~e>>1:e>>1}function n(e,t){let r=Array(e);for(let n=0,s=0;n<e;n++)r[n]=s+=i(t());return r}function s(e,t=0){let r=[];for(;;){let i=e(),n=e();if(!n)break;t+=i;for(let e=0;e<n;e++)r.push(t+e);t+=n+1}return r}function a(e){return c((()=>{let t=s(e);if(t.length)return t}))}function o(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(d(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(u(r,e))}return t.flat()}function c(e){let t=[];for(;;){let r=e(t.length);if(!r)break;t.push(r)}return t}function l(e,t,r){let i=Array(e).fill().map((()=>[]));for(let s=0;s<t;s++)n(e,r).forEach(((e,t)=>i[t].push(e)));return i}function d(e,t){let r=1+t(),i=t(),n=c(t);return l(n.length,1+e,t).flatMap(((e,t)=>{let[s,...a]=e;return Array(n[t]).fill().map(((e,t)=>{let n=t*i;return[s+t*r,a.map((e=>e+n))]}))}))}function u(e,t){return l(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}Object.defineProperty(t,"__esModule",{value:!0});var h=r("AEIRrQh1DccBuQJ+APkBMQDiASoAnADQAHQAngBmANQAaACKAEQAgwBJAHcAOQA9ACoANQAmAGMAHgAvACgAJQAWACwAGQAjAB8ALwAVACgAEQAdAAkAHAARABgAFwA7ACcALAAtADcAEwApABAAHQAfABAAGAAeABsAFwAUBLoF3QEXE7k3ygXaALgArkYBbgCsCAPMAK6GNjY2NjFiAQ0ODBDyAAQHRgbrOAVeBV8APTI5B/a9GAUNz8gAFQPPBeelYALMCjYCjqgCht8/lW+QAsXSAoP5ASbmEADytAFIAjSUCkaWAOoA6QocAB7bwM8TEkSkBCJ+AQQCQBjED/IQBjDwDASIbgwDxAeuBzQAsgBwmO+snIYAYgaaAioG8AAiAEIMmhcCqgLKQiDWCMIwA7gCFAIA9zRyqgCohB8AHgQsAt4dASQAwBnUBQEQIFM+CZ4JjyUiIVbATOqDSQAaABMAHAAVclsAKAAVAE71HN89+gI5X8qc5jUKFyRfVAJfPfMAGgATABwAFXIgY0CeAMPyACIAQAzMFsKqAgHavwViBekC0KYCxLcCClMjpGwUehp0TPwAwhRuAugAEjQ0kBfQmAKBggETIgDEFG4C6AASNAFPUCyYTBEDLgIFMBDecB60Ad5KAHgyEn4COBYoAy4uwD5yAEDoAfwsAM4OqLwBImqIALgMAAwCAIraUAUi3HIeAKgu2AGoBgYGBgYrNAOiAG4BCiA+9Dd7BB8eALEBzgIoAgDmMhJ6OvpQtzOoLjVPBQAGAS4FYAVftr8FcDtkQhlBWEiee5pmZqH/EhoDzA4s+H4qBKpSAlpaAnwisi4BlqqsPGIDTB4EimgQANgCBrJGNioCBzACQGQAcgFoJngAiiQgAJwBUL4ALnAeAbbMAz40KEoEWgF2YAZsAmwA+FAeAzAIDABQSACyAABkAHoAMrwGDvr2IJSGBgAQKAAwALoiTgHYAeIOEjiXf4HvABEAGAA7AEQAPzp3gNrHEGYQYwgFTRBMc0EVEgKzD60L7BEcDNgq0tPfADSwB/IDWgfyA1oDWgfyB/IDWgfyA1oDWgNaA1ocEfAh2scQZg9PBHQFlQWSBN0IiiZQEYgHLwjZVBR0JRxOA0wBAyMsSSM7mjMSJUlME00KCAM2SWyufT8DTjGyVPyQqQPSMlY5cwgFHngSpwAxD3ojNbxOhXpOcacKUk+1tYZJaU5uAsU6rz//CigJmm/Cd1UGRBAeJ6gQ+gw2AbgBPg3wS9sE9AY+BMwfgBkcD9CVnwioLeAM8CbmLqSAXSP4KoYF8Ev3POALUFFrD1wLaAnmOmaBUQMkARAijgrgDTwIcBD2CsxuDegRSAc8A9hJnQCoBwQLFB04FbgmE2KvCww5egb+GvkLkiayEyx6/wXWGiQGUAEsGwIA0i7qhbNaNFwfT2IGBgsoI8oUq1AjDShAunhLGh4HGCWsApRDc0qKUTkeliH5PEANaS4WUX8H+DwIGVILhDyhRq5FERHVPpA9SyJMTC8EOIIsMieOCdIPiAy8fHUBXAkkCbQMdBM0ERo3yAg8BxwwlycnGAgkRphgnQT6ogP2E9QDDgVCCUQHFgO4HDATMRUsBRCBJ9oC9jbYLrYCklaDARoFzg8oH+IQU0fjDuwIngJoA4Yl7gAwFSQAGiKeCEZmAGKP21MILs4IympvI3cDahTqZBF2B5QOWgeqHDYVwhzkcMteDoYLKKayCV4BeAmcAWIE5ggMNV6MoyBEZ1aLWxieIGRBQl3/AjQMaBWiRMCHewKOD24SHgE4AXYHPA0EAnoR8BFuEJgI7oYHNbgz+zooBFIhhiAUCioDUmzRCyom/Az7bAGmEmUDDzRAd/FnrmC5JxgABxwyyEFjIfQLlU/QDJ8axBhFVDEZ5wfCA/Ya9iftQVoGAgOmBhY6UDPxBMALbAiOCUIATA6mGgfaGG0KdIzTATSOAbqcA1qUhgJykgY6Bw4Aag6KBXzoACACqgimAAgA0gNaADwCsAegABwAiEQBQAMqMgEk6AKSA5YINM4BmDIB9iwEHsYMGAD6Om5NAsO0AoBtZqUF4FsCkQJMOAFQKAQIUUpUA7J05ADeAE4GFuJKARiuTc4d5kYB4nIuAMoA/gAIOAcIRAHQAfZwALoBYgs0CaW2uAFQ7CwAhgAYbgHaAowA4AA4AIL0AVYAUAVc/AXWAlJMARQ0Gy5aZAG+AyIBNgEQAHwGzpCozAoiBHAH1gIQHhXkAu8xB7gEAyLiE9BCyAK94VgAMhkKOwqqCqlgXmM2CTR1PVMAER+rPso/UQVUO1Y7WztWO1s7VjtbO1Y7WztWO1sDmsLlwuUKb19IYe4MqQ3XRMs6TBPeYFRgNRPLLboUxBXRJVkZQBq/Jwgl51UMDwct1mYzCC80eBe/AEIpa4NEY4keMwpOHOpTlFT7LR4AtEulM7INrxsYREMFSnXwYi0WEQolAmSEAmJFXlCyAF43IwKh+gJomwJmDAKfhzgeDgJmPgJmKQRxBIIDfxYDfpU5CTl6GjmFOiYmAmwgAjI5OA0CbcoCbbHyjQI2akguAWoA4QDkAE0IB5sMkAEBDsUAELgCdzICdqVCAnlORgJ4vSBf3kWxRvYCfEICessCfQwCfPNIA0iAZicALhhJW0peGBpKzwLRBALQz0sqA4hSA4fpRMiRNQLypF0GAwOxS9FMMCgG0k1PTbICi0ICitvEHgogRmoIugKOOgKOX0OahAKO3AKOX3tRt1M4AA1S11SIApP+ApMPAOwAH1UhVbJV0wksHimYiTLkeGlFPjwCl6IC77VYJKsAXCgClpICln+fAKxZr1oMhFAAPgKWuAKWUVxHXNQCmc4CmWdczV0KHAKcnjnFOqACnBkCn54CnruNACASNC0SAp30Ap6VALhAYTdh8gKe1gKgcQGsAp6iIgKeUahjy2QqKC4CJ7ICJoECoP4CoE/aAqYyAqXRAqgCAIACp/Vof2i0AAZMah9q1AKs5gKssQKtagKtBQJXIAJV3wKx5NoDH1FsmgKywBACsusabONtZm1LYgMl0AK2Xz5CbpMDKUgCuGECuUoYArktenA5cOQCvRwDLbUDMhQCvotyBQMzdAK+HXMlc1ICw84CwwdzhXROOEh04wM8qgADPJ0DPcICxX8CxkoCxhOMAshsVALIRwLJUgLJMQJkoALd1Xh8ZHixeShL0wMYpmcFAmH3GfaVJ3sOXpVevhQCz24Cz28yTlbV9haiAMmwAs92ASztA04Vfk4IAtwqAtuNAtJSA1JfA1NiAQQDVY+AjEIDzhnwY0h4AoLRg5AC2soC2eGEE4RMpz8DhqgAMgNkEYZ0XPwAWALfaALeu3Z6AuIy7RcB8zMqAfSeAfLVigLr9gLpc3wCAur8AurnAPxKAbwC7owC65+WrZcGAu5CA4XjmHxw43GkAvMGAGwDjhmZlgL3FgORcQOSigL3mwL53AL4aZofmq6+OpshA52GAv79AR4APJ8fAJ+2AwWQA6ZtA6bcANTIAwZtoYuiCAwDDEwBIAEiB3AGZLxqCAC+BG7CFI4ethAAGng8ACYDNrIDxAwQA4yCAWYqJACM8gAkAOamCqKUCLoGIqbIBQCuBRjCBfAkREUEFn8Fbz5FRzJCKEK7X3gYX8MAlswFOQCQUyCbwDstYDkYutYONhjNGJDJ/QVeBV8FXgVfBWoFXwVeBV8FXgVfBV4FXwVeBV9NHAjejG4JCQkKa17wMgTQA7gGNsLCAMIErsIA7kcwFrkFTT5wPndCRkK9X3w+X+8AWBgzsgCNBcxyzAOm7kaBRC0qCzIdLj08fnTfccH4GckscAFy13U3HgVmBXHJyMm/CNZQYgcHBwqDXoSSxQA6P4gAChbYBuy0KgwAjMoSAwgUAOVsJEQrJlFCuELDSD8qXy5gPS4/KgnIRAUKSz9KPn8+iD53PngCkELDUElCX9JVVnFUETNyWzYCcQASdSZf5zpBIgluogppKjJDJC1CskLDMswIzANf0BUmNRAPEAMGAQYpfqTfcUE0UR7JssmzCWzI0tMKZ0FmD+wQqhgAk5QkTEIsG7BtQM4/Cjo/Sj53QkYcDhEkU05zYjM0Wui8GQqE9CQyQkYcZA9REBU6W0pJPgs7SpwzCogiNEJGG/wPWikqHzc4BwyPaPBlCnhk0GASYDQqdQZKYCBACSIlYLoNCXIXbFVgVBgIBQZk7mAcYJxghGC6YFJgmG8WHga8FdxcsLxhC0MdsgHCMtTICSYcByMKJQGAAnMBNjecWYcCAZEKv04hAOsqdJUR0RQErU3xAaICjqNWBUdmAP4ARBEHOx1egRKsEysmwbZOAFYTOwMAHBO+NVsC2RJLbBEiAN9VBnwEESVhADgAvQKhLgsWdrIgAWIBjQoDA+D0FgaxBlEGwAAky1ywYRC7aBOQCy1GDsIBwgEpCU4DYQUvLy8nJSYoMxktDSgTlABbAnVel1CcCHUmBA94TgHadRbVWCcgsLdN8QcYBVNmAP4ARBEHgQYNK3MRjhKsPzc0zrZdFBIAZsMSAGpKblAoIiLGADgAvQKhLi1CFdUClxiCAVDCWM90eY7epaIO/KAVRBvzEuASDQ8iAwHOCUEQmgwXMhM9EgBCALrVAQkAqwDoAJuRNgAbAGIbzTVzfTEUyAIXCUIrStroIyUSG4QCggTIEbHxcwA+QDQOrT8u1agjB8IQABBBLtUYIAB9suEjD8IhThzUqHclAUQqZiMC8qAPBFPz6x9sDMMNAQhDCkUABccLRAJSDcIIww1DLtWoMQrDCUMPkhroBCIOwgyYCCILwhZCAKcQwgsFGKd74wA7cgtCDEMAAq0JwwUi1/UMBQ110QaCAAfCEmIYEsMBCADxCAAAexViDRbSG/x2F8IYQgAuwgLyqMIAHsICXCcxhgABwgAC6hVDFcIr8qPCz6hCCgKlJ1IAAmIA5+QZwqViFb/LAPsaggioBRH/dwDfwqfCGOIBGsKjknl5BwKpoooAEsINGxIAA5oAbcINAAvCp0IIGkICwQionNEPAgfHqUIFAOGCL71txQNPAAPyABXCAAcCAAnCAGmSABrCAA7CCRjCjnAWAgABYgAOcgAuUiUABsIAF8IIKAANUQC6wi0AA8IADqIq8gCyYQAcIgAbwgAB8gqoAAXNCxwV4gAHogBCwgEJAGnCAAuCAB3CAAjCCagABdEAbqYZ3ACYCCgABdEAAUIAB+IAHaIIKAAGoQAJggAbMgBtIgDmwocACGIACEIAFMIDAGkCCSgABtEA45IACUILqA7L+2YAB0IAbqNATwBOAArCCwADQgAJtAM+AAciABmCAAISpwIACiIACkIACgKn8gbCAAkiAAMSABBCBwAUQgARcgAPkgAN8gANwgAZEg0WIgAVQgBuoha6AcIAwQATQgBpMhEA4VIAAkIABFkAF4IFIgAG1wAYwgQlAYIvWQBATAC2DwcUDHkALzF3AasMCGUCcyoTBgQQDnZSc2YxkCYFhxsFaTQ9A6gKuwYI3wAdAwIKdQF9eU5ZGygDVgIcRQEzBgp6TcSCWYFHADAAOAgAAgAAAFoR4gCClzMBMgB97BQYOU0IUQBeDAAIVwEOkdMAf0IEJ6wAYQDdHACcbz4mkgDUcrgA1tsBHQ/JfHoiH10kENgBj5eyKVpaVE8ZQ8mQAAAAhiM+RzAy5xieVgB5ATAsNylJIBYDN1wE/sz1AFJs4wBxAngCRhGBOs54NTXcAgEMFxkmCxsOsrMAAAMCBAICABnRAgAqAQAFBQUFBQUEBAQEBAQDBAUGBwgDBAQEBAMBASEAigCNAJI8AOcAuADZAKFDAL8ArwCqAKUA6wCjANcAoADkAQUBAADEAH4AXwDPANEBAADbAO8AjQCmAS4A5wDcANkKAAgOMTrZ2dnZu8Xh0tXTSDccAU8BWTRMAVcBZgFlAVgBSVBISm0SAVAaDA8KOT0SDQAmEyosLjE9Pz9CQkJDRBNFBSNWVlZWWFhXWC5ZWlxbWyJiZmZlZ2Ypa211dHd3d3d3d3l5eXl5eXl5eXl5e3t8e3phAEPxAEgAmQB3ADEAZfcAjQBWAFYANgJz7gCKAAT39wBjAJLxAJ4ATgBhAGP+/q8AhACEAGgAVQCwACMAtQCCAj0CQAD7AOYA/QD9AOcA/gDoAOgA5wDlAC4CeAFQAT8BPQFTAT0BPQE9ATgBNwE3ATcBGwFXFgAwDwcAAFIeER0KHB0VAI0AlQClAFAAaR8CMAB1AG4AlgMSAyQxAx5IRU4wAJACTgDGAlYCoQC/ApMCkwKTApMCkwKTAogCkwKTApMCkwKTApMCkgKSApUCnQKUApMCkwKRApECkQKQAnIB0QKUApoCkwKTApIbfhACAPsKA5oCXgI3HAFRFToC3RYPMBgBSzwYUpYBeKlBAWZeAQIDPEwBAwCWMB4flnEAMGcAcAA1AJADm8yS8LWLYQzBMhXJARgIpNx7MQsEKmEBuQDkhYeGhYeFiImJhYqNi4WMj42HjomPiZCFkYWShZORlIWVhZaJl4WYhZmFmoWbipyPnYmehQCJK6cAigRCBD8EQQREBEIESARFBEAERgRIBEcEQwRFBEgAqgOOANBYANYCEwD9YQD9ASAA/QD7APsA/AD72wOLKmzFAP0A+wD7APwA+yMAkGEA/QCQASAA/QCQAvMA/QCQ2wOLKmzFIwD+YQEgAP0A/QD7APsA/AD7AP4A+wD7APwA+9sDiypsxSMAkGEBIAD9AJAA/QCQAvMA/QCQ2wOLKmzFIwJKAT0CUQFAAlLIA6UC8wOl2wOLKmzFIwCQYQEgA6UAkAOlAJAC8wOlAJDbA4sqbMUjBDcAkAQ4AJANlDh0JwEzAJAHRXUKKgEEAM1hCQBbYQAFGjkJAJAJRN8AUAkAkAkAnW0/6mOd3brkH5dB9mNQ/eNThoJ1CP8EZzy46pMulzRpOAZDJDXL2yXaVtAh1MxM82zfnsL/FXSaOaxJlgv345IW0Dfon3fzkx0WByY6wfCroENsWq/bORcfBvtlWbGzP5ju+gqE1DjyFssbkkSeqLAdrCkLOfItA7XNe1PctDPFKoNd/aZ6IQq6JTB6IrDBZ5/nJIbTHMeaaIWRoDvc42ORs9KtvcQWZd+Nv1D2C/hrzaOrFUjpItLWRI4x3GmzQqZbVH5LoCEJpk3hzt1pmM7bPitwOPG8gTKLVFszSrDZyLmfq8LkwkSUhIQlN4nFJUEhU2N7NBTOGk4Y2q9A2M7ps8jcevOKfycp9u3DyCe9hCt7i5HV8U5pm5LnVnKnyzbIyAN/LU4aqT3JK+e9JsdusAsUCgAuCnc4IwbgPBg4EPGOv5gR8D+96c8fLb09f7L6ON2k+Zxe/Y0AYoZIZ8yuu1At7f70iuSFoFmyPpwDU/4lQ+mHkFmq/CwtE7A979KNdD8zaHSx4HoxWsM8vl+2brNxN0QtIUvOfNGAYyv1R5DaM1JAR0C+Ugp6/cNq4pUDyDPKJjFeP4/L1TBoOJak3PVlmDCi/1oF8k1mnzTCz15BdAvmFjQrjide74m2NW1NG/qRrzhbNwwejlhnPfRn4mIfYmXzj5Fbu3C2TUpnYg+djp65dxZJ8XhwUqJ8JYrrR4WtrHKdKjz0i77K+QitukOAZSfFIwvBr1GKYpSukYTqF4gNtgaNDqh78ZDH4Qerglo3VpTLT0wOglaX6bDNhfs04jHVcMfCHwIb+y5bAaBvh2RARFYEjxjr1xTfU09JEjdY1vfcPrPVmnBBSDPj9TcZ1V/Dz8fvy0WLWZM0JPbRL0hLSPeVoC8hgQIGaeE6AYVZnnqm62/wt00pDl5Nw/nDo+bF1tC4qo5DryXVn8ffL3kuT51e+VcBTGiibvP+vqX50dppfxyNORSr48S5WXV8fzcsgjRQH6zjl+nuUYFVloiEnZOPDpHD/7ILh3JuFCdvAi2ANXYXjTDA5Up6YLihbc7d+dBlI9+mdgr8m8+3/Dp26W/Jssn7b9/pOEP4i+/9TsPI9m2NfNKwEI35mqKV+HpZ+W69Y8sM/sIA9Ltvhd+evQTUUfSkYxki28/CBT0cT96HrlrSrE+V9RzhskX0CsDsCfHffBVybkxmHOFOgaUurWNQ2AcZbi1WjkZzYArWZBHFd1SYwtqQ0DIZt7OV40ewQxCr/LgxAc8dLJeAJFseWJq9XiOp21hLv/HhsFbYbg3zCR8JmonZjhuKYrS/KJc30vnOL2CM+GfogNWug2DstZPzauCNeeD8zlP8wxPyfLHYQB/J+wQE3aDpXH/5tdIQpLn3JXNJYZFiXInGB7FqxRxHYJ/re/lHprE5sngUMm11uOIA3bbtkk06I8DYxuwPD+e4sAeNfor0DkWmiCQFiNptkmiD2xGO1kIKGr/Tuu4bHe6z2NaS7Ih0c+Gpv+QbLY9ea122BXNSitM41sxUSlnWl+uJBIFoLqt66v/VfGIQos2lzhOOLDuScVxcyrqH3/FI4vaYB0b8gFHLXtxyX/9JpUCYNwlLZ1v5CeB99l0F795R5wl5UHRq1OYyKqsoIY07wJz2CT0TOf5/JRBPtJIIk5pOJ60SHayS9kMSKbI3fLLYztsY3B4MlSyoEfc9gL4yJVrPo+OGGunCK4p15UbCArJP/PQgUWDW4l+2P/tCqRRy2flIZL/nVeY/vyAfILUM5qEGfcFXXXrAit7skwDEFnD7mL1ATtyrz7HcodhzP7gShFhazIPm7X0+mTCeSWfrOr5WcvJfip19JRRLfXjuQpQjcNCuXo8kqkxQ68ukJQoxlnfjevc0WcKnGpUvyY54eJTS1IRWDqfHANukJLw56ts5yS6Nea7IrL6/78aKmZsch4Q694ujxgx5+0PhlGpzWimajpvkBOOUQlHLkJorzqu4e768L9nJtZWYturb7dsBxjzlNhd/gZcBuRgIUSdgZjg7Rx+f/zLcs4mAa3qDbJNUQVNbSg+dm0L3KH1uhesTPaErVYjZ8Isvfr+zfiX3DT0PlaOv+hdGvLUIlKSEcYHPMs0NtTGzyqMe74yciNFdAVZVzol/XtLsEqivKqfW7zWTCNCvZkPnnBlMv3UHW5RNNEJfuyR3MvYH/9E6gcts5GAwKIgCaBQ+V2Eh9O0IJkxFksPI1V9obqDKCpmPM55mLd+VQgRqgD+9XvsUxjbh/AXXPxOpc0FXFyJzc85aa1VQZa90LAWR4oinrBaOBr8DymCpFbdXMTn7Cv18S0hMR7T/o5VkRqN1g1/dvaDdZsRArO3bopkfee4efLF+hyVdcX4u3aNGTkWvLRafW+sXPktA1lla4UkSB7uJIULfxy/RAflk2miyw9xq9uVGgCNzqCv4iX+AUchfMkZdEgRZ9TZ+1CPTH2jXjMXjFl/+bEPzSjM7zPKKWhyZUgQG1lpp+DNz+Zz+85kD59q99U5R4B3vuI9WenCWqroy2U2Ruq6I+di5N/v9SmYnqJ5H1HLWCbIg6iVrn3s2gFBVFhrc1zzNqoFe275K3Jy1T0Mc5yeE1iRwO2b1L/j/S8jyvGDz6B3NMFEHErGHMM2+oJ5LobazyWEitdgMjQnsd0cjYrCqRpx8idpfwRq6hz/LleX6obpuJh/AGIu4sxD35hwkIEr5ShH8xro7tTDYK1GPHGylK6rp7NCG0lMr7YqwziMUBwXv0zPW667f3/IRLJRD7mkuwUP6mpkxyVjNlcBiAX12r//+WTuzWxsue7bsjRp7xFjpR2tRLqGHLvjYt3TpeybR82K61iLn+pOSWDfUv/HU8ecBtML+Gbz0v9vmlxSgZeBBzbGeP1KSqsH14ZM2kibgDhbS21hIALSOYFCE9LY+2CNvtzT2QuSJMiKP3zwvvs+/JkDwTg0jHVE0XH//U0nu5HKQtCL2KGDQYUgT7qIMVN/OoWqEz1oeG4wG7InZg47NE7rfHB2i7rkpYCUzaPfVtDYgTEPNpa8gXHI2Pp8A6YB8OYHkXDZMMcOL3rJD0Hxk+mRlsSJ12/7T52IcFst5zRc7uDJtQTXBdm9GvsvyXcBbMfKXWqsDSeEnFyPUXZGTafti4a0it8SN1qXxzBmzj+gVZ/FojNy+x73AuuqtJ/oaMZF6m5kbW6ItpfnUT/BrQunS+gLjTTUz0d8jTMpAfFQ40RQi9uM5qdFYzqk85hqSH1zsPOhiO5CN+hNZvL/RIs7m7LyLDuV80ZtyHHqVEngTVPBctHQhmcPjM30m1veDmHCXEpjybWAbgj3TqLUPNazzdHgxYmNuT7trWFcGOi7iTeL5YeK2yp2H98yoLN+skqhffZI/5n/ivceo44wJRY8bzC6DGwdgkMOulYhzW5m6OKyK2Mg+E3YE19L8ngE08TdAuNu0mIzd6kw0i03zzm4oqfVSZjZyxXnBhvt0v89EmnArya/UvHQrdQxBDAJagK2y+OqgBqzQ4FnUeiKfb7HFoUvFSknWhwq58TpBlVRZ0B0A7QWz7X4GLHcbdh5kFI/PKJ91OEh/kmnMEdh+Z23myFH8sXjR/KaHttrpz80N+bl0HM17RX48UjUWslrYHYW7oiHVgcGqTBoTrqK4JYwTTArFO1/APJ8DnEYf+wD92Dw15a9wrPxyJA88yYcv9RypzXLKAWmMuE0KAtIGjfKx1GbRQIq0AkttuRpBO7p4SGrTZuAOat3hTxXEcIKh3HgC1d88K7bz1+Jsi+y7tL/7zc0ZxCBB3hSxvP90GkUp1Lm2wuESafZyFy4Opir+o3gMWtDSuLF3LRHXTUGkKQtvARnwam8BuKv8Q2fHH/cEwPCQd3dhzgri8eTezRsQoGz6ha+S4E7ZzDB/LXwl04vA70NeVsf5rmv1TLvcQSNIBk3U6Qh6Bm+0905B91hopTLnTJRWZkUmbckEw0woG81azyw6LZaBL5Qx2HPvd3LHGLpN6mPZlto50NwW2zFOkgoPKV1gr142teD9aok2HNkPMepl3NIi78ShnAlJCzjZplteUoqz0+iUEOym1LZGGFHMBkc6/5f+sRCCFZZW6KrEby64o/ZfefQAPP6b5ko2fuujIv7uonIKXN6XiJsZmcOeGxteQ+b/ope3Z1HFeXYoW1AJrU/OiCpsyQP1Pr1BdQKFzS0oYnLCAweSnIh7qMFMRBMY7BcnJ5oskUbbRNiosqMzCYUAZPbo8tjCCsCBm5SoGcTHBMXcE+yQpl/OfBkcTw3oa4X7V+ohEh/Zkcv0cqc8sY40IsOW6lLiIrvYND/exZbRlOMgaHvb/QQKaY0k6Aamee2o3LVARCbIP4RoSd7u3CXkG+Iz6iFLfsN38F9xU4n3ueeVgiRs3jw70SMWu1QzDdiLsKtU1qvaLhv7dUbnLimdqYG+pa2aRZ8A6Q9JSr3yTs1MiAvfFHPQJTiqpI/hVUMmL6gPj6eL7lH0IkLCNcaogBA0TGfO0wO6ddf8Fju0L3YbRrWe8J3IewsNBCbpC2b6etQRJnSGLuWDiFoBez9hJHw6+bMQQGQS8YV/kzQ5AFHEqPaMgOjyR5zaHtlOBI4mjo8gdNItHUHQ7Bzq/E/xV1B+L0uoRcLIEj4hcv0yWQTwWLHzoFrvEZPygABpc4rnVjhfcBw5wOvaVVtgiG5qjklrTY1ZaXHkasyVYBd+lgo6zEHMumfK8XR2eD0cVn5w8l1uxGz2ACwtFob/CTV/TUx1kCKp+QROanLrNBiSPTxAf1eOFE+JifgAJ+pyrFqS/0wKlPWUVKlB2Bhu1Ggx2cvfdiR49VIsgBNnE75pf5lpFaQuz8+VPreUd/HLlW8kDSr25AnETsVRrOycLBPYD9/j/7Z0KKdOjtrM71AT+VsjD3D97aUDP5WrHp1DWghsk/lS/hp2VMwo0eqoEerLL/4/SlmyjStwWVDqF6jHC89niCwr1tMSe8GxeC9wjzMKmE7ZtdHOWqqc1OoTI24eVQc++crbyxSU4TxiB+vWoaAUpYQxZ06KKIPq6EvN/rN4DZ0/tQWYVqZ3FTIftPBfIuOWX3PonIKTUArpSvfmQRpkWD00wc3AQS98i4ZYaUbI+DGv90tuEKRjb2ocfdddC21YGUATYQmzelz7JqWBAQqKrWYdWEJlfPeRFZHtUm2MaISZsoOvURowxJKveGRegmBiKZ3d1cMFioJL33RoIKT0eDeK8FH/ybAhZU5TQIsWYmjyeT7EOLL5xZuRPf4qRIo6bbLtFOV6SX60fR8Smys/u1D5DjkmHJyr/woVAvBP2dxGo9gH1LgIm8XlFF1KSYvfj+0w7aTEfoFpcO+Jv3Ssbv8wwkED5JEC+jdln2dzToPNRtWiPbRb8f8G4aZX1j/2Vdbu7jM3gAVD5BKR+yJaOwLtwJodwjWu5di47tnNs9ahpnCUzVMObQfbTqMNs64MGANlgyihKjhwZ6p1Jsnro0/SfkOk6wx+HgUB6Mz9cUiF7KrJkhxnOVjCCcqPZglIojIRoDtkd2AkLNZC88GdP2qZV/1N6PBAe+fpgWZ36oHnewQ8CHdXcxbwQVjOn8U3qD9+e7FzWpg135vgdEMZ9fH5agDnNzdjKFZQ4tDsJs/S6Lk8FqjFJpHMjaRU6FI/DBDM0g+RRkxNoUvm14JAn5dgd6aVHt1aMkSXiJVenbm2FfrIEaFKHtm1erv1BJ5056ULL8AMGLmHav4yxg6F6n5oBq7bdP6zEr6f+QTDJ/KE1XfoG24JvVk2GL7Fb+me27otVFnq1e/2wEuqv6X+2zLQuJQszy5YJi/M5888fMy34L6z8ykD5sCHgzliAoAtEeoaFmnPT63kOYrZWspxYzqQBu/QKNyQ8e4QwKJUCVazmIUp6/zpLA3bWH2ch7QZN0rzWGxMRl3K1osWeETxL95TZSG/atM8LB9B92/71+g9UGWDPfD+lu/KdOQ85rocuHe91/gHA/iprG9PZ2juX49kaRxZ+1/sB3Ck35eWYBFsmCl0wC4QZWX5c5QMuSAEz1CJj0JWArSReV4D/vrgLw+EyhBB6aA4+B34PdlDaTLpm9q9Pkl+bzVWrSO+7uVrIECzsvk8RcmfmNSJretRcoI7ZcIfAqwciU9nJ8O4u1EgkcMOzC/MM2l6OYZRrGcqXCitp4LPXruVPzeD402JGV9grZyz9wJolMLC/YCcWs9CjiWv+DNRLaoSgD5M8T4PzmG8cXYM4jPo5SG1wY3QK/4wzVPrc33wI+AcGI//yXgvyBjocGrl768DMaYCGglwIit4r6t6ulwhwHJ4KeV3VHjspXXG4DIlDR2HNFvPaqkBViIvr433qZPuUINp6oi1LyVVC+EE1j6+wab8uPMeAo6e9uWYequvZynhnYazrvrDQJVkK3KZRoSR5BHi6vOC+AVCujMiQ1GVzGDZ4RFv8jFm7z5CU0iPH2JeXqUzqaKKP4P7osPkcIL99Y7fP3l+TzeFXO2kSpLIJW51oEY8DRIhqexGnxj0nmtGOseStuViIE2mJge45LENf77xjuI7egRNpzthNiajnuqikg0aQS1JqlIZf+hwSUlOp8BEQ0y3xiTOJkohBP3eyYiPDlZpFY88EWOpp4+hC/tQdhrQ56h2VJ2XA6vhPAbj+wH6iA2XYuTvRV25N8wNPQuA0Vzzem2ADZPFK2vr8l0I3GTV3fUN4S6FFYygW2Pu98f+lsgPf67rwVCbgMFAACW3P10GbxnK3SNuNK+VlPRiL7U3dK1o3spH/MFfDkgXuXjxDTxJrYctqHdwUg4rhUCNA13lGjuhJDatpFb/mExsBWS46aLFtROqVm8xQNPXK6A2rRfazJSWpIyh+FMmorXPXYnHQ7YLOmD4B5QTI8rzp7OomiarnaFs5syYjQ0ucc7g1/JzT446IFlDtpUL7DP9bLRCLJryUvi5R71/qX7ycqRSwunQ7+tfJz44Na3aJNszaMEZ/BV4iOGopabYdmvAPe+kIdGCNq5Q8fg8Ld0VNNXV0ZiiGej7zSA+pexy6wKC5k4rZa0k+qaN8bKq3oJWMQCSGaK7PrwMvA8t8BZTzjDqXcFTAIeRtl0SdlGSuAziVXItFcgAkeqwuNsbsrUZFcU6KUZLmvG415kHa0AwMFW2cNSUvPR0U9iCPh0nyslT92B5slYXiDWeSXvxHXItvjI8z5KCIVTIHqGZsbDBTr7WdHzcUAI1ipR86H3o0p2wPhfp7xg9oWOxWIK4a5BWdaV9OAPc0XuvlbwitCVtZDzZxGhIOl77ZgrRYR7LZQFE+Ih23hW3gI914ekkjgbKCi2bsqSAvij6GGj5p+k6evQtJp3qVh9vg+jiJvFCGcKBCITMWpqHZNKfE6IT0dKntS0rhu0DB5D9qIS0/RboNLsx2DlRMlx1QIBeBpHJNKdCL9uWM9eS7RJXKNOpraULtutuJYOl0apdE4LxfsyRSZb6fJkd51SHrI7lLB4vEg4fifJ1dqcWSeY4DgcyjrUcymK+gd3o+qj+3gHKWlLVdMUr3IeF8aClYBq+eeCV9Y7n1Ye8yL7rEvxY7jAlLwucKQ51pu59N8we8XwrbXPChBHXP4LnD3kDwQ85w1DKghtwvpO609fZOrPq8Q7GOOAjHhfR5VqvpoFne8oMHbCrWb1L0IdATo+h1PFeLLI8wc+FEyftLvskCdOtxKfAx3IEJXzBfWTKq5viKP/uu99dxnEpoNJhRtjSZGwOTWr7Ys44++P58O+nkYxd1Gcqm8G3Gh7AHSCxiPNyJWijI/lECrKrAXgBqkRShvdkd7IfoqUlziFDiglx+jdHnmRVmGnk3p/3n78M/HkzFUGZOS07cPnPn9jAnBWl4qDrB1ECf9idIKOdkJTKcZ690nuLW2yDsqwNpgrlT+wx2gv+Engha74lfVqbwqS15FRwuFDfq3bVCZcPy78TL2pH/DOdHeL9MFAtyybQNwHaO781rnJZAhR4M+AYWoSoa0EjQ99xivreM+FKwd7Jp/FC2vvvcq1z3RnRau/BM5KGkBPBSUBOzTNdfaJS/PWTDb1jRSgn2MuY3pVZbY9peHBVI3Ce/u70hg4f7MCVeAjYJfzTkDVLuB6jyjZs5Kko3u39ozgLK4LuwSbUrNIU5cl6Bs3De62AE084XRsm64Gs5W1ofxsWIZ9cYl8PNa5zQHl9ls5aiIKN0rHIIzBnLr03Kle2qq+n/gLDAzvF89vdZCvUFEHRoi9n33O3i49UWyeHP+ZAeRf+psM867nfqON092zE4Pj7AbLtvIUFJFr1y9Le0CL2flc7LUqbgGzOw4/q3vA/cJO5JeI8S+8bc1Y7pqYSzoEWSFn5G7EoPHTGHPMU6SeLKEeli+i8dHY3lWxSrIOU2y0TNo1SeRYewhVx05OXeVDf0xhHNckqp0arRk+bgToeSaHbVZ5nj3IH3m2oayt3sXY78qSPcDpc/5C7VXDRj6bROvvBG5JCsKl/yeMPAUn1flMsmr/FaFdb7gVUXnhLa+/Ilj87PpCC6rILQ6wkIP1ywEg0PztSEzbsJoRwQzDaxkiTN27YDnsy/YKfe6jKcqZWs64skzUAHIt+nXxju0dUVtbCSDAUXYw78Yd4bJKuYU8gbzLzgL4XIUC2HcPIVCUYvM7cybOBFVBdeGR4cOVB7QbGnohTRpiPrGqi1a8QXFBYqENawROuR43OG8dl+Jx4TpwAoi2kkPXW7b/ARSs4DO/z4H6oTIUpN3+/K6Iuc49C4/Uf1NxQTEE91VP8RnLKTpxjywMe2VxM1l4YGXSFY80HUAKIdqczBnnLMPklFV8mrr5hFDypn5TAT00ruU6AjDPNvncoVzX4ac6wAzTwrNH7oz1XLH1wzjQs5k7hcNLbznXQGB7M+rXxKtZXPrz1Ar+OxYGDkJvElknZsHD/IcxRd7ujmmLYpDDbverynroCnSKVQWEGjHL57PaI/WokvhYRpPMk4ni2EUhjDuIF+IU2R0fs40i+66bw8sz8OzyC2eFAxxicd2n5Juta2eWa9KtObD7xLmPvtK+8cjQt+NLjcZCTt+Ss9p1od0bklVgaIV1qJbWxUOr6iUzLDzFefYxAtyRcBr53IaDB25n60KQdhroQWMUpuWSUpELSFxiu4vgQeRoEZe78/ua3TlrszB8sLVZoecnV9YMYz+HkZA/pLqbFhzurB52Wl/WEM6sVk4q04OnzWZFi76JkcGgeeUyYUIwhCDMdIfTUdD4wQpYm3LBw0sp33CVK2q305jeyzgGnBzSMXjesm4XjcEhhrjPSLtwqqoaFCqD5DlHYhoTVafWtBUQXoNfDk19IFxq8sImCcqgMhOToIZUO2530aasY908dMX2nTMFjgv+lapdI8k/e0a7pFw6X3Tgf0m99bbCpOzVgRu2Dw/13CehVfFj+8BeKP6SZV4g/qiX42NWP568PzMajFm2ANmKtHjEIAIc2hc1iecBR9elGP4LmAQwAVmZT8kWc7JSY0ag583ch/Z16krGrjn2YdIaa22egy4/niU6m0WAG3K/yP65cfL//CP+JzcnoLHQFb/KJQeBrEbR1/IKo+YOFXWIQ8ghNxYdMwa49NeXzFqFOIXTmk3w/v5KneS8sGHiPGACh0DE9a1uLAochB79g3IqYObhlswemMucZnAE7dBkp5OAfToa5gHFbIPcec0fVWEOOLftQXsuffyv3wo1LWDDm+SyNMWgSEWtjMyYkjLjTkUtmj7DQlfbpHf38lDvoEN9d2ALxnWCjph4jvfEIRbHvltKbvE2BiYlz45mnJPeFrwZcBny3k0/pyXNrSbEIWvvZw14Y0Fqy4tba1Fu0yNNYaf47jfnz7VCCxKsrJz5oz3F8jXUdQqFu+gDq6EzvKDipXf/3NmcsCC74VB3OgHPgN7W9cU54pjGFDMfifl3m5Vhy21uk1U2nYCrddrifkpwGLYmLSSQAAjC6M3yB1fc6KHpgDnMXh2bYX2ns+Qma+DBgyCkZ0TqZK8Mp2Sryx7HdMM74X9hrwYhQbwlK+zgATAXRzQyS+hK4OTnP17/cyJ2WzY6DChYWGJYXGCnEdMswF5VTYQdSyTpdLXYuh+x2Qr7DR3H2x+YdP0qsLAzYJIWKwrrKkpBgWCmgNCn5t+QbWqf/LoLuvjgDFLtMoxNK5axIA9kammelvwh5ZI52ktrEm/OVEESPQPZGHAIhP7oWDBnGnuzG45XOTpZWsxwNO4UiyxH8riTvQq4JVq5GwX3yqVCbSR0ef/gVYDgiYaiD2EAAxuEPKyXTp/HhL96eVTpaDqFEoV2x1PP/UMcs/XqeGc1gZQG1ot6YxaIEWHanYavH9YdLFjlyU5yrYALVg/sxBjT39oD+BIXvf4LTbvvvpX3srxckEX1XAM9s2uajUTlpPq32mcx4T+sibdQEHQV2WmgwMhbYovh7WWTPfLF03ZbV5a+ElsSIyH6kgJ8+D6aN/6f+ZstkZOYZYx9GbagcrEqwNblz0iZ9NTyvIAeNn3Oup7rtyD4wVE0PoqcnR/LoSK1s1esmOGPjs3zHB8xW4iL8IrhqAJfsWNBYW9TGR11C3KZJaN7MP4O5Ykmpvw94hHzVmsYA68RQdFYfPlFOgCNBoSdy5ODcv11l9bLs135M4okEc4/e8hQczcz2PWipIVSBxa/5sr9xyTFbjG4xm8f4LmrAhD1uEDGrFDl/6X7Nw7/WZPW7fZJGYN8eZ68Td5KGfJyKjD+pTysvTi+8Q8R0L9wKAxAUrYswdvAuiNeenxSplQZjYTxbcH/wP97fOY215SozY3UDRhv7lomztURB2O2UriTX3oAiTKoInkHQietZyhBQ9wMTVHgMrxOP5T/0gN14eFTz0m2D6/iJMbXYGHdIkKEGV2Voa8k/hVNvAVAZKrDEXthUxotwYkYysTDk8j27XEVy+4a30jopuAp5+/xWYb0ne6lwKZwR3j6kDXroOOtrHqWlkJHSWLoPEQJQo/ARzR8UBZSckmeBPn3gJwY62Zo2dyy1AyRRDQBFAJKH9KX+7auP8U8XDo7mMSzq5ZxmaJ5bLpNg4ZM7938SAjMHcu1yB4+lkHnVLnIp86AOPgigH+ZFDRq1QuKWK3pK5JkLDJdakj176NCbjXDASt1h/t1p+GHyKbAoevHSnHuPfoBmQ3nJrDjOhPfwVYi8V5r0KB8BsrfFu8BvhYCbNrvCVnd4Q8RktqIR/ZilioC6g3++L7PHzuXa8NFSF5zd+ISzGLTjrfaKXsBFCkkK0ksSDbl91yXUghMFOskQBeUoo7o3wuIsE29goRIORuJ4b1jSumvR0gR8B21iyW1G4FqHkZOlWz9zq5FnaJX1WbeAxe2DfGSAnw4cqDwg3LFalk6eH89Sdc41Fr6voEa0hfwdkb54yOM7WevDugT1FRzEqdg9zZZ44ZAKGH3ZyqFve3SE4UDN6tLmIFTdIwMrtYRXWBQDB7vvqOuYj7cN31av64+jg/g1uce+am3TOl0cUUL6s0l35FJ9p8vJcG+G8lAFqC0pdmd/aaWYpqDLvB5LEasLMgbPN2N+Wvkh6HYxPOrZEfoxQX/67AzcWOR0K3eYGOgQhyWL7cwKGlxmY/E2b8CKi6Ssgok+7B+zTtq/DXmaDAHRnwbwvCDJ9pITO5RQgBuprEWT0avZv7QjbzITYD8Fzgy4TSYG3z9tLso0Z7MfgHDLKU+kHrzxWkBPwJRydKMXG4AaCA7mlAmjzpNhGOrMGZGZlHSjPbmO5jPd/lKBrViZ0BaXMmqaFOwA/f03O04qQX6MSVA37+SA5Pne/KP7caLJKuOCJXoXpzArUrYesMVc/RXnOv03YrwKgPlR2SjpqIycyulmodZBy6gVc1jA9y6lJqWgR6SY6tc24sVcYuh2GaTeikYJnhr2d6BiL3oLx8M8wuJBdI3FRVIIAx4XougScOw2xWgwUoSYKeLUHc310kVBzSE/vFeHAjlUil8KZftctMgwGjwrhMbjDbK4rB32fTe9jnsqijdp5kOwkD9+klel+lNh3joAFQ");const p=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function f(e){return`{${function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e)}}`}function g(e){let t=[];for(let r=0,i=e.length;r<i;){let i=e.codePointAt(r);r+=i<65536?1:2,t.push(i)}return t}function m(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let r=[];for(let i=0;i<t;)r.push(String.fromCodePoint(...e.slice(i,i+=4096)));return r.join("")}function y(e,t){let r=e.length,i=r-t.length;for(let n=0;0==i&&n<r;n++)i=e[n]-t[n];return i}var v=r("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");function b(e){return e>>24&255}function T(e){return 16777215&e}const _=new Map(a(v).flatMap(((e,t)=>e.map((e=>[e,t+1<<24]))))),k=new Set(s(v)),E=new Map,w=new Map;for(let[e,t]of o(v)){if(!k.has(e)&&2==t.length){let[r,i]=t,n=w.get(r);n||(n=new Map,w.set(r,n)),n.set(i,e)}E.set(e,t.reverse())}const A=44032,I=4352,R=4449,S=4519;function C(e){return e>=A&&e<55204}function x(e,t){if(e>=I&&e<4371&&t>=R&&t<4470)return A+588*(e-I)+28*(t-R);if(C(e)&&t>S&&t<4547&&(e-A)%28==0)return e+(t-S);{let r=w.get(e);return r&&(r=r.get(t),r)?r:-1}}function P(e){let t=[],r=[],i=!1;function n(e){let r=_.get(e);r&&(i=!0,e|=r),t.push(e)}for(let i of e)for(;;){if(i<128)t.push(i);else if(C(i)){let e=i-A,t=e%588/28|0,r=e%28;n(I+(e/588|0)),n(R+t),r>0&&n(S+r)}else{let e=E.get(i);e?r.push(...e):n(i)}if(!r.length)break;i=r.pop()}if(i&&t.length>1){let e=b(t[0]);for(let r=1;r<t.length;r++){let i=b(t[r]);if(0==i||e<=i){e=i;continue}let n=r-1;for(;;){let r=t[n+1];if(t[n+1]=t[n],t[n]=r,!n)break;if(e=b(t[--n]),e<=i)break}e=b(t[r])}}return t}function O(e){return P(e).map(T)}function L(e){return function(e){let t=[],r=[],i=-1,n=0;for(let s of e){let e=b(s),a=T(s);if(-1==i)0==e?i=a:t.push(a);else if(n>0&&n>=e)0==e?(t.push(i,...r),r.length=0,i=a):r.push(a),n=e;else{let s=x(i,a);s>=0?i=s:0==n&&0==e?(t.push(i),i=a):(r.push(a),n=e)}}return i>=0&&t.push(i,...r),t}(P(e))}const B=65039,N=".";function M(){return new Set(s(h))}const D=new Map(o(h)),U=M(),F=M(),j=M(),H=M(),G=a(h);function V(){return new Set([s(h).map((e=>G[e])),s(h)].flat(2))}const z=h(),$=c((e=>{let t=c(h).map((e=>e+96));if(t.length){let r=e>=z;t[0]-=32,t=m(t),r&&(t=`Restricted[${t}]`);let i=V(),n=V(),s=[...i,...n].sort(((e,t)=>e-t));return{N:t,P:i,M:h()-1,R:r,V:new Set(s)}}})),W=M(),Z=new Map;[...W,...M()].sort(((e,t)=>e-t)).map(((e,t,r)=>{let i=h(),n=r[t]=i?r[t-i]:{V:[],M:new Map};n.V.push(e),W.has(e)||Z.set(e,n)}));for(let{V:e,M:t}of new Set(Z.values())){let r=[];for(let t of e){let e=$.filter((e=>e.V.has(t))),i=r.find((({G:t})=>e.some((e=>t.has(e)))));i||(i={G:new Set,V:[]},r.push(i)),i.V.push(t),e.forEach((e=>i.G.add(e)))}let i=r.flatMap((({G:e})=>[...e]));for(let{G:e,V:n}of r){let r=new Set(i.filter((t=>!e.has(t))));for(let e of n)t.set(e,r)}}let q=new Set,K=new Set;for(let e of $)for(let t of e.V)(q.has(t)?K:q).add(t);for(let e of q)Z.has(e)||K.has(e)||Z.set(e,1);const Q=new Set([...q,...O(q)]),J=s(h),X=function e(t){let r=c((()=>{let t=s(h).map((e=>J[e]));if(t.length)return e(t)})).sort(((e,t)=>t.Q.size-e.Q.size)),i=h(),n=i%3;i=i/3|0;let a=1&i;return i>>=1,{B:r,V:n,F:a,S:1&i,C:2&i,Q:new Set(t)}}([]);class Y extends Array{get is_emoji(){return!0}}function ee(e,t=f){let r=[];ie(e[0])&&r.push("◌");let i=0,n=e.length;for(let s=0;s<n;s++){let n=e[s];ne(n)&&(r.push(m(e.slice(i,s))),r.push(t(n)),i=s+1)}return r.push(m(e.slice(i,n))),r.join("")}function te(e){return(ne(e)?"":`"${ee([e])}" `)+f(e)}function re(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}function ie(e){return F.has(e)}function ne(e){return j.has(e)}function se(e,t){let r=0;return e.split(N).map((e=>{let i,n=g(e),s={input:n,offset:r};r+=n.length+1;try{let e,r=s.tokens=de(n,L),a=r.length;if(!a)throw new Error("empty label");{let n=r[0],o=a>1||n.is_emoji;if(!o&&n.every((e=>e<128)))i=n,re(i),function(e){if(e.length>=4&&45==e[2]&&45==e[3])throw new Error("invalid label extension")}(i),e="ASCII";else if(o&&(s.emoji=!0,n=r.flatMap((e=>e.is_emoji?[]:e))),i=r.flatMap((e=>!t&&e.is_emoji?ue(e):e)),re(i),n.length){if(F.has(i[0]))throw le("leading combining mark");for(let e=1;e<a;e++){let t=r[e];if(!t.is_emoji&&F.has(t[0]))throw le(`emoji + combining mark: "${m(r[e-1])} + ${ee([t[0]])}"`)}!function(e){let t=e[0],r=p.get(t);if(r)throw le(`leading ${r}`);let i=e.length,n=-1;for(let s=1;s<i;s++){t=e[s];let i=p.get(t);if(i){if(n==s)throw le(`${r} + ${i}`);n=s+1,r=i}}if(n==i)throw le(`trailing ${r}`)}(i);let t=[...new Set(n)],[s]=function(e){let t=$;for(let r of e){let e=t.filter((e=>e.V.has(r)));if(!e.length)throw t===$?oe(r):ce(t[0],r);if(t=e,1==e.length)break}return t}(t);!function(e,t){let{V:r,M:i}=e;for(let i of t)if(!r.has(i))throw ce(e,i);if(i>=0)for(let r=1,n=O(t).length;r<n;r++)if(F.has(t[r])){let s=r+1;for(;s<n&&F.has(t[s]);)s++;if(s-r>i)throw new Error(`too many combining marks: ${e.N} "${m(t.slice(r-1,s))}" (${s-r}/${i})`);r=s}}(s,n),function(e,t){let r,i=[];for(let e of t){let t=Z.get(e);if(1===t)return;if(t){let i=t.M.get(e);if(r=r?r.filter((e=>i.has(e))):[...i],!r.length)return}else i.push(e)}if(r)for(let t of r)if(i.every((e=>t.V.has(e))))throw new Error(`whole-script confusable: ${e.N}/${t.N}`)}(s,t),e=s.N}else e="Emoji"}s.type=e}catch(e){s.error=e}return s.output=i,s}))}function ae(e){return e.map((({input:t,error:r,output:i})=>{if(r){let i=r.message;throw new Error(1==e.length?i:`Invalid label "${ee(t)}": ${i}`)}return m(i)})).join(N)}function oe(e){return new Error(`disallowed character: ${te(e)}`)}function ce(e,t){let r=te(t),i=$.find((e=>e.P.has(t)));return i&&(r=`${i.N} ${r}`),new Error(`illegal mixture: ${e.N} + ${r}`)}function le(e){return new Error(`illegal placement: ${e}`)}function de(e,t){let r=[],i=[];for(e=e.slice().reverse();e.length;){let n=he(e);if(n)i.length&&(r.push(t(i)),i=[]),r.push(n);else{let t=e.pop();if(Q.has(t))i.push(t);else{let e=D.get(t);if(e)i.push(...e);else if(!U.has(t))throw oe(t)}}}return i.length&&r.push(t(i)),r}function ue(e){return e.filter((e=>e!=B))}function he(e,t){let r,i,n=X,s=[],a=e.length;for(t&&(t.length=0);a;){let o=e[--a];if(n=n.B.find((e=>e.Q.has(o))),!n)break;if(n.S)i=o;else if(n.C&&o===i)break;s.push(o),n.F&&(s.push(B),a>0&&e[a-1]==B&&a--),n.V&&(r=pe(s,n),t&&t.push(...e.slice(a).reverse()),e.length=a)}return r}function pe(e,t){let r=Y.from(e);return 2==t.V&&r.splice(1,1),r}const fe="valid",ge="mapped",me="ignored";function ye(e){return e==fe||e==ge}function ve(e){return e.some((e=>H.has(e)))}function be(e){for(let t=0;t<e.length;t++)if(e[t].type==fe){let r=t+1;for(;r<e.length&&e[r].type==fe;)r++;e.splice(t,r-t,{type:fe,cps:e.slice(t,r).flatMap((e=>e.cps))})}return e}t.ens_beautify=function(e){let t=se(e,!0);for(let{type:e,output:r,error:i}of t)if(!i&&"Greek"!==e){let e=0;for(;;){let t=r.indexOf(958,e);if(t<0)break;r[t]=926,e=t+1}}return ae(t)},t.ens_emoji=function(){let e=[];return function t(r,i,n){if(r.S)n=i[i.length-1];else if(r.C&&n===i[i.length-1])return;r.F&&i.push(B),r.V&&e.push(pe(i,r));for(let e of r.B)for(let r of e.Q)t(e,[...i,r],n)}(X,[]),e.sort(y)},t.ens_normalize=function(e){return ae(se(e))},t.ens_normalize_fragment=function(e,t){let r=t?O:L;return e.split(N).map((e=>m(de(g(e),r).flatMap((e=>e.is_emoji?ue(e):e))))).join(N)},t.ens_split=se,t.ens_tokenize=function e(t,{nf:r=!0}={}){let i=g(t).reverse(),n=[],s=[];for(;i.length;){let e=he(i,n);if(e)s.push({type:"emoji",emoji:e,input:n.slice(),cps:ue(e)});else{let e=i.pop();if(46==e)s.push({type:"stop",cp:e});else if(Q.has(e))s.push({type:fe,cps:[e]});else if(U.has(e))s.push({type:me,cp:e});else{let t=D.get(e);t?s.push({type:ge,cp:e,cps:t.slice()}):s.push({type:"disallowed",cp:e})}}}if(r)for(let t=0,r=-1;t<s.length;t++){let i=s[t];if(ye(i.type))if(ve(i.cps)){let i=t+1;for(let e=i;e<s.length;e++){let{type:t,cps:r}=s[e];if(ye(t)){if(!ve(r))break;i=e+1}else if(t!==me)break}r<0&&(r=t);let n=s.slice(r,i),a=n.flatMap((e=>ye(e.type)?e.cps:[])),o=L(a);y(o,a)?(s.splice(r,i-r,{type:"nfc",input:a,cps:o,tokens0:be(n),tokens:e(m(o),{nf:!1})}),t=r):t=i-1,r=-1}else r=t;else i.type!==me&&(r=-1)}return be(s)},t.is_combining_mark=ie,t.nfc=L,t.nfd=O,t.safe_str_from_cps=ee,t.should_escape=ne},1732:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.outputSyncingFormatter=t.outputPostFormatter=t.inputPostFormatter=t.outputBlockFormatter=t.outputTransactionReceiptFormatter=t.outputLogFormatter=t.inputLogFormatter=t.inputTopicFormatter=t.outputTransactionFormatter=t.inputSignFormatter=t.inputTransactionFormatter=t.inputCallFormatter=t.txInputOptionsFormatter=t.inputAddressFormatter=t.inputDefaultBlockNumberFormatter=t.inputBlockNumberFormatter=t.outputBigIntegerFormatter=t.outputProofFormatter=t.inputStorageKeysFormatter=void 0;const i=r(5071),n=r(9910),s=r(9970),a=r(9634),o=r(7345);t.inputStorageKeysFormatter=e=>e.map((e=>(0,a.numberToHex)(e))),t.outputProofFormatter=e=>({address:(0,a.toChecksumAddress)(e.address),nonce:(0,a.hexToNumberString)(e.nonce),balance:(0,a.hexToNumberString)(e.balance)}),t.outputBigIntegerFormatter=e=>(0,a.toNumber)(e),t.inputBlockNumberFormatter=e=>{if(!(0,o.isNullish)(e))return"string"==typeof e&&(0,o.isBlockTag)(e)?e:"genesis"===e?"0x0":"string"==typeof e&&(0,a.isHexStrict)(e)?e.toLowerCase():(0,a.numberToHex)(e)},t.inputDefaultBlockNumberFormatter=(e,r)=>e?(0,t.inputBlockNumberFormatter)(e):(0,t.inputBlockNumberFormatter)(r),t.inputAddressFormatter=e=>{if(n.Iban.isValid(e)&&n.Iban.isDirect(e))return new n.Iban(e).toAddress().toLowerCase();if((0,a.isAddress)(e))return`0x${e.toLowerCase().replace("0x","")}`;throw new i.FormatterError(`Provided address ${e} is invalid, the capitalization checksum test failed, or it's an indirect IBAN address which can't be converted.`)},t.txInputOptionsFormatter=e=>{var r;const n=Object.assign({},e);if(e.to&&(n.to=(0,t.inputAddressFormatter)(e.to)),e.data&&e.input)throw new i.FormatterError('You can\'t have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.');if(!e.input&&e.data&&(n.input=e.data,delete n.data),e.input&&!e.input.startsWith("0x")&&(n.input=`0x${e.input}`),n.input&&!(0,a.isHexStrict)(n.input))throw new i.FormatterError("The input field must be HEX encoded data.");return(e.gas||e.gasLimit)&&(n.gas=(0,a.toNumber)(null!==(r=e.gas)&&void 0!==r?r:e.gasLimit)),(e.maxPriorityFeePerGas||e.maxFeePerGas)&&delete n.gasPrice,["gasPrice","gas","value","maxPriorityFeePerGas","maxFeePerGas","nonce","chainId"].filter((e=>!(0,o.isNullish)(n[e]))).forEach((e=>{n[e]=(0,a.numberToHex)(n[e])})),n},t.inputCallFormatter=(e,r)=>{var i;const n=(0,t.txInputOptionsFormatter)(e),s=null!==(i=n.from)&&void 0!==i?i:r;return s&&(n.from=(0,t.inputAddressFormatter)(s)),n},t.inputTransactionFormatter=(e,r)=>{var n;const s=(0,t.txInputOptionsFormatter)(e);if("number"!=typeof s.from&&(!s.from||"object"!=typeof s.from)){if(s.from=null!==(n=s.from)&&void 0!==n?n:r,!e.from&&"number"!=typeof e.from)throw new i.FormatterError('The send transactions "from" field must be defined!');s.from=(0,t.inputAddressFormatter)(e.from)}return s},t.inputSignFormatter=e=>(0,a.isHexStrict)(e)?e:(0,a.utf8ToHex)(e),t.outputTransactionFormatter=e=>{const r=Object.assign({},e);return e.blockNumber&&(r.blockNumber=(0,a.hexToNumber)(e.blockNumber)),e.transactionIndex&&(r.transactionIndex=(0,a.hexToNumber)(e.transactionIndex)),r.nonce=(0,a.hexToNumber)(e.nonce),r.gas=(0,a.hexToNumber)(e.gas),e.gasPrice&&(r.gasPrice=(0,t.outputBigIntegerFormatter)(e.gasPrice)),e.maxFeePerGas&&(r.maxFeePerGas=(0,t.outputBigIntegerFormatter)(e.maxFeePerGas)),e.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=(0,t.outputBigIntegerFormatter)(e.maxPriorityFeePerGas)),e.type&&(r.type=(0,a.hexToNumber)(e.type)),r.value=(0,t.outputBigIntegerFormatter)(e.value),e.to&&(0,a.isAddress)(e.to)?r.to=(0,a.toChecksumAddress)(e.to):r.to=void 0,e.from&&(r.from=(0,a.toChecksumAddress)(e.from)),r},t.inputTopicFormatter=e=>{if((0,o.isNullish)(e))return null;const t=String(e);return(0,o.isHex)(t)?t:(0,a.fromUtf8)(t)},t.inputLogFormatter=e=>{var r;const i=(0,o.isNullish)(e)?{}:(0,a.mergeDeep)({},e);return(0,o.isNullish)(i.fromBlock)&&(i.fromBlock=s.BlockTags.LATEST),i.fromBlock=(0,t.inputBlockNumberFormatter)(i.fromBlock),(0,o.isNullish)(i.toBlock)||(i.toBlock=(0,t.inputBlockNumberFormatter)(i.toBlock)),i.topics=null!==(r=i.topics)&&void 0!==r?r:[],i.topics=i.topics.map((e=>Array.isArray(e)?e.map(t.inputTopicFormatter):(0,t.inputTopicFormatter)(e))),i.address&&(i.address=Array.isArray(i.address)?i.address.map((e=>(0,t.inputAddressFormatter)(e))):(0,t.inputAddressFormatter)(i.address)),i},t.outputLogFormatter=e=>{const t=Object.assign({},e),r="string"==typeof e.logIndex?e.logIndex:(0,a.numberToHex)(e.logIndex);if("string"==typeof e.blockHash&&"string"==typeof e.transactionHash){const i=(0,a.sha3Raw)(`${e.blockHash.replace("0x","")}${e.transactionHash.replace("0x","")}${r.replace("0x","")}`);t.id=`log_${i.replace("0x","").slice(0,8)}`}else e.id||(t.id=void 0);return e.blockNumber&&(0,a.isHexStrict)(e.blockNumber)&&(t.blockNumber=(0,a.hexToNumber)(e.blockNumber)),e.transactionIndex&&(0,a.isHexStrict)(e.transactionIndex)&&(t.transactionIndex=(0,a.hexToNumber)(e.transactionIndex)),e.logIndex&&(0,a.isHexStrict)(e.logIndex)&&(t.logIndex=(0,a.hexToNumber)(e.logIndex)),e.address&&(t.address=(0,a.toChecksumAddress)(e.address)),t},t.outputTransactionReceiptFormatter=e=>{if("object"!=typeof e)throw new i.FormatterError(`Received receipt is invalid: ${String(e)}`);const r=Object.assign({},e);return e.blockNumber&&(r.blockNumber=(0,a.hexToNumber)(e.blockNumber)),e.transactionIndex&&(r.transactionIndex=(0,a.hexToNumber)(e.transactionIndex)),r.cumulativeGasUsed=(0,a.hexToNumber)(e.cumulativeGasUsed),r.gasUsed=(0,a.hexToNumber)(e.gasUsed),e.logs&&Array.isArray(e.logs)&&(r.logs=e.logs.map(t.outputLogFormatter)),e.effectiveGasPrice&&(r.effectiveGasPrice=(0,a.hexToNumber)(e.effectiveGasPrice)),e.contractAddress&&(r.contractAddress=(0,a.toChecksumAddress)(e.contractAddress)),e.status&&(r.status=Boolean(parseInt(e.status,10))),r},t.outputBlockFormatter=e=>{const r=Object.assign({},e);return r.gasLimit=(0,a.hexToNumber)(e.gasLimit),r.gasUsed=(0,a.hexToNumber)(e.gasUsed),r.size=(0,a.hexToNumber)(e.size),r.timestamp=(0,a.hexToNumber)(e.timestamp),e.number&&(r.number=(0,a.hexToNumber)(e.number)),e.difficulty&&(r.difficulty=(0,t.outputBigIntegerFormatter)(e.difficulty)),e.totalDifficulty&&(r.totalDifficulty=(0,t.outputBigIntegerFormatter)(e.totalDifficulty)),e.transactions&&Array.isArray(e.transactions)&&(r.transactions=e.transactions.map(t.outputTransactionFormatter)),e.miner&&(r.miner=(0,a.toChecksumAddress)(e.miner)),e.baseFeePerGas&&(r.baseFeePerGas=(0,t.outputBigIntegerFormatter)(e.baseFeePerGas)),r},t.inputPostFormatter=e=>{var t;const r=Object.assign({},e);return e.ttl&&(r.ttl=(0,a.numberToHex)(e.ttl)),e.workToProve&&(r.workToProve=(0,a.numberToHex)(e.workToProve)),e.priority&&(r.priority=(0,a.numberToHex)(e.priority)),e.topics&&!Array.isArray(e.topics)&&(r.topics=e.topics?[e.topics]:[]),r.topics=null===(t=r.topics)||void 0===t?void 0:t.map((e=>e.startsWith("0x")?e:(0,a.fromUtf8)(e))),r},t.outputPostFormatter=e=>{var t;const r=Object.assign({},e);return e.expiry&&(r.expiry=(0,a.hexToNumber)(e.expiry)),e.sent&&(r.sent=(0,a.hexToNumber)(e.sent)),e.ttl&&(r.ttl=(0,a.hexToNumber)(e.ttl)),e.workProved&&(r.workProved=(0,a.hexToNumber)(e.workProved)),e.topics||(r.topics=[]),r.topics=null===(t=r.topics)||void 0===t?void 0:t.map(a.toUtf8),r},t.outputSyncingFormatter=e=>{const t=Object.assign({},e);return t.startingBlock=(0,a.hexToNumber)(e.startingBlock),t.currentBlock=(0,a.hexToNumber)(e.currentBlock),t.highestBlock=(0,a.hexToNumber)(e.highestBlock),e.knownStates&&(t.knownStates=(0,a.hexToNumber)(e.knownStates)),e.pulledStates&&(t.pulledStates=(0,a.hexToNumber)(e.pulledStates)),t}},6527:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.formatters=void 0,s(r(6171),t),s(r(8441),t),s(r(860),t),s(r(1819),t),s(r(8174),t),s(r(8202),t),s(r(7003),t),s(r(8165),t),s(r(1732),t),s(r(4738),t),s(r(8976),t),t.formatters=a(r(1732))},8165:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7003:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSupportSubscriptions=t.isSupportedProvider=t.isLegacySendAsyncProvider=t.isLegacySendProvider=t.isEIP1193Provider=t.isLegacyRequestProvider=t.isMetaMaskProvider=t.isWeb3Provider=void 0;const i=r(9970);t.isWeb3Provider=e=>i.Web3BaseProvider.isWeb3Provider(e),t.isMetaMaskProvider=e=>"string"!=typeof e&&"request"in e&&"AsyncFunction"===e.request.constructor.name&&"isMetaMask"in e&&e.isMetaMask,t.isLegacyRequestProvider=e=>"string"!=typeof e&&"request"in e&&"Function"===e.request.constructor.name,t.isEIP1193Provider=e=>"string"!=typeof e&&"request"in e&&"AsyncFunction"===e.request.constructor.name,t.isLegacySendProvider=e=>"string"!=typeof e&&"send"in e,t.isLegacySendAsyncProvider=e=>"string"!=typeof e&&"sendAsync"in e,t.isSupportedProvider=e=>e&&((0,t.isWeb3Provider)(e)||(0,t.isEIP1193Provider)(e)||(0,t.isLegacyRequestProvider)(e)||(0,t.isLegacySendAsyncProvider)(e)||(0,t.isLegacySendProvider)(e)),t.isSupportSubscriptions=e=>e&&"supportsSubscriptions"in e?e.supportsSubscriptions():!(!e||"string"==typeof e||!("on"in e))},8202:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Web3BatchRequest=t.DEFAULT_BATCH_REQUEST_TIMEOUT=void 0;const n=r(9634),s=r(5071);t.DEFAULT_BATCH_REQUEST_TIMEOUT=1e3,t.Web3BatchRequest=class{constructor(e){this._requestManager=e,this._requests=new Map}get requests(){return[...this._requests.values()].map((e=>e.payload))}add(e){const t=n.jsonRpc.toPayload(e),r=new n.Web3DeferredPromise;return this._requests.set(t.id,{payload:t,promise:r}),r}execute(e){var r;return i(this,void 0,void 0,(function*(){if(0===this.requests.length)return Promise.resolve([]);const i=new n.Web3DeferredPromise({timeout:null!==(r=null==e?void 0:e.timeout)&&void 0!==r?r:t.DEFAULT_BATCH_REQUEST_TIMEOUT,eagerStart:!0,timeoutMessage:"Batch request timeout"});return this._processBatchRequest(i).catch((e=>i.reject(e))),i.catch((e=>{e instanceof s.OperationTimeoutError&&this._abortAllRequests("Batch request timeout"),i.reject(e)})),i}))}_processBatchRequest(e){var t,r;return i(this,void 0,void 0,(function*(){const i=yield this._requestManager.sendBatch([...this._requests.values()].map((e=>e.payload)));if(i.length!==this._requests.size)throw this._abortAllRequests("Invalid batch response"),new s.ResponseError(i,`Batch request size mismatch the results size. Requests: ${this._requests.size}, Responses: ${i.length}`);const a=this.requests.map((e=>e.id)).map(Number).sort(((e,t)=>e-t)),o=i.map((e=>e.id)).map(Number).sort(((e,t)=>e-t));if(JSON.stringify(a)!==JSON.stringify(o))throw this._abortAllRequests("Invalid batch response"),new s.ResponseError(i,`Batch request mismatch the results. Requests: [${a.join()}], Responses: [${o.join()}]`);for(const e of i)n.jsonRpc.isResponseWithResult(e)?null===(t=this._requests.get(e.id))||void 0===t||t.promise.resolve(e.result):n.jsonRpc.isResponseWithError(e)&&(null===(r=this._requests.get(e.id))||void 0===r||r.promise.reject(e.error));e.resolve(i)}))}_abortAllRequests(e){for(const{promise:t}of this._requests.values())t.reject(new s.OperationAbortError(e))}}},6171:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Web3Config=t.Web3ConfigEvent=void 0;const i=r(5071),n=r(9634),s=r(8976);var a;!function(e){e.CONFIG_CHANGE="CONFIG_CHANGE"}(a=t.Web3ConfigEvent||(t.Web3ConfigEvent={}));class o extends s.Web3EventEmitter{constructor(e){super(),this.config={handleRevert:!1,defaultAccount:void 0,defaultBlock:"latest",transactionBlockTimeout:50,transactionConfirmationBlocks:24,transactionPollingInterval:1e3,transactionPollingTimeout:75e4,transactionReceiptPollingInterval:void 0,transactionSendTimeout:75e4,transactionConfirmationPollingInterval:void 0,blockHeaderTimeout:10,maxListenersWarningThreshold:100,contractDataInputFill:"input",defaultNetworkId:void 0,defaultChain:"mainnet",defaultHardfork:"london",defaultCommon:void 0,defaultTransactionType:"0x2",defaultMaxPriorityFeePerGas:(0,n.toHex)(25e8),enableExperimentalFeatures:{useSubscriptionWhenCheckingBlockTimeout:!1,useRpcCallSpecification:!1},transactionBuilder:void 0,transactionTypeParser:void 0},this.setConfig(null!=e?e:{})}setConfig(e){Object.assign(this.config,e)}get handleRevert(){return this.config.handleRevert}set handleRevert(e){this._triggerConfigChange("handleRevert",e),this.config.handleRevert=e}get contractDataInputFill(){return this.config.contractDataInputFill}set contractDataInputFill(e){this._triggerConfigChange("contractDataInputFill",e),this.config.contractDataInputFill=e}get defaultAccount(){return this.config.defaultAccount}set defaultAccount(e){this._triggerConfigChange("defaultAccount",e),this.config.defaultAccount=e}get defaultBlock(){return this.config.defaultBlock}set defaultBlock(e){this._triggerConfigChange("defaultBlock",e),this.config.defaultBlock=e}get transactionSendTimeout(){return this.config.transactionSendTimeout}set transactionSendTimeout(e){this._triggerConfigChange("transactionSendTimeout",e),this.config.transactionSendTimeout=e}get transactionBlockTimeout(){return this.config.transactionBlockTimeout}set transactionBlockTimeout(e){this._triggerConfigChange("transactionBlockTimeout",e),this.config.transactionBlockTimeout=e}get transactionConfirmationBlocks(){return this.config.transactionConfirmationBlocks}set transactionConfirmationBlocks(e){this._triggerConfigChange("transactionConfirmationBlocks",e),this.config.transactionConfirmationBlocks=e}get transactionPollingInterval(){return this.config.transactionPollingInterval}set transactionPollingInterval(e){this._triggerConfigChange("transactionPollingInterval",e),this.config.transactionPollingInterval=e,this.transactionReceiptPollingInterval=e,this.transactionConfirmationPollingInterval=e}get transactionPollingTimeout(){return this.config.transactionPollingTimeout}set transactionPollingTimeout(e){this._triggerConfigChange("transactionPollingTimeout",e),this.config.transactionPollingTimeout=e}get transactionReceiptPollingInterval(){return this.config.transactionReceiptPollingInterval}set transactionReceiptPollingInterval(e){this._triggerConfigChange("transactionReceiptPollingInterval",e),this.config.transactionReceiptPollingInterval=e}get transactionConfirmationPollingInterval(){return this.config.transactionConfirmationPollingInterval}set transactionConfirmationPollingInterval(e){this._triggerConfigChange("transactionConfirmationPollingInterval",e),this.config.transactionConfirmationPollingInterval=e}get blockHeaderTimeout(){return this.config.blockHeaderTimeout}set blockHeaderTimeout(e){this._triggerConfigChange("blockHeaderTimeout",e),this.config.blockHeaderTimeout=e}get enableExperimentalFeatures(){return this.config.enableExperimentalFeatures}set enableExperimentalFeatures(e){this._triggerConfigChange("enableExperimentalFeatures",e),this.config.enableExperimentalFeatures=e}get maxListenersWarningThreshold(){return this.config.maxListenersWarningThreshold}set maxListenersWarningThreshold(e){this._triggerConfigChange("maxListenersWarningThreshold",e),this.setMaxListenerWarningThreshold(e),this.config.maxListenersWarningThreshold=e}get defaultNetworkId(){return this.config.defaultNetworkId}set defaultNetworkId(e){this._triggerConfigChange("defaultNetworkId",e),this.config.defaultNetworkId=e}get defaultChain(){return this.config.defaultChain}set defaultChain(e){if(!(0,n.isNullish)(this.config.defaultCommon)&&!(0,n.isNullish)(this.config.defaultCommon.baseChain)&&e!==this.config.defaultCommon.baseChain)throw new i.ConfigChainMismatchError(this.config.defaultChain,e);this._triggerConfigChange("defaultChain",e),this.config.defaultChain=e}get defaultHardfork(){return this.config.defaultHardfork}set defaultHardfork(e){if(!(0,n.isNullish)(this.config.defaultCommon)&&!(0,n.isNullish)(this.config.defaultCommon.hardfork)&&e!==this.config.defaultCommon.hardfork)throw new i.ConfigHardforkMismatchError(this.config.defaultCommon.hardfork,e);this._triggerConfigChange("defaultHardfork",e),this.config.defaultHardfork=e}get defaultCommon(){return this.config.defaultCommon}set defaultCommon(e){if(!(0,n.isNullish)(this.config.defaultHardfork)&&!(0,n.isNullish)(e)&&!(0,n.isNullish)(e.hardfork)&&this.config.defaultHardfork!==e.hardfork)throw new i.ConfigHardforkMismatchError(this.config.defaultHardfork,e.hardfork);if(!(0,n.isNullish)(this.config.defaultChain)&&!(0,n.isNullish)(e)&&!(0,n.isNullish)(e.baseChain)&&this.config.defaultChain!==e.baseChain)throw new i.ConfigChainMismatchError(this.config.defaultChain,e.baseChain);this._triggerConfigChange("defaultCommon",e),this.config.defaultCommon=e}get defaultTransactionType(){return this.config.defaultTransactionType}set defaultTransactionType(e){this._triggerConfigChange("defaultTransactionType",e),this.config.defaultTransactionType=e}get defaultMaxPriorityFeePerGas(){return this.config.defaultMaxPriorityFeePerGas}set defaultMaxPriorityFeePerGas(e){this._triggerConfigChange("defaultMaxPriorityFeePerGas",e),this.config.defaultMaxPriorityFeePerGas=e}get transactionBuilder(){return this.config.transactionBuilder}set transactionBuilder(e){this._triggerConfigChange("transactionBuilder",e),this.config.transactionBuilder=e}get transactionTypeParser(){return this.config.transactionTypeParser}set transactionTypeParser(e){this._triggerConfigChange("transactionTypeParser",e),this.config.transactionTypeParser=e}_triggerConfigChange(e,t){this.emit(a.CONFIG_CHANGE,{name:e,oldValue:this.config[e],newValue:t})}}t.Web3Config=o},8174:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Web3EthPluginBase=t.Web3PluginBase=t.Web3Context=void 0;const n=r(9634),s=r(5071),a=r(7003),o=r(6171),c=r(8441),l=r(860),d=r(8202);class u extends o.Web3Config{constructor(e){var t;if(super(),this.providers=c.Web3RequestManager.providers,(0,n.isNullish)(e)||"string"==typeof e&&""!==e.trim()||(0,a.isSupportedProvider)(e))return this._requestManager=new c.Web3RequestManager(e),void(this._subscriptionManager=new l.Web3SubscriptionManager(this._requestManager,{}));const{config:r,provider:i,requestManager:s,subscriptionManager:o,registeredSubscriptions:d,accountProvider:u,wallet:h}=e;this.setConfig(null!=r?r:{}),this._requestManager=null!=s?s:new c.Web3RequestManager(i,null===(t=null==r?void 0:r.enableExperimentalFeatures)||void 0===t?void 0:t.useSubscriptionWhenCheckingBlockTimeout),this._subscriptionManager=o||new l.Web3SubscriptionManager(this.requestManager,null!=d?d:{}),u&&(this._accountProvider=u),h&&(this._wallet=h)}get requestManager(){return this._requestManager}get subscriptionManager(){return this._subscriptionManager}get wallet(){return this._wallet}get accountProvider(){return this._accountProvider}static fromContextObject(...e){return new this(...e.reverse())}getContextObject(){var e;return{config:this.config,provider:this.provider,requestManager:this.requestManager,subscriptionManager:this.subscriptionManager,registeredSubscriptions:null===(e=this.subscriptionManager)||void 0===e?void 0:e.registeredSubscriptions,providers:this.providers,wallet:this.wallet,accountProvider:this.accountProvider}}use(e,...t){const r=new e(...[...t,this.getContextObject()]);return this.on(o.Web3ConfigEvent.CONFIG_CHANGE,(e=>{r.setConfig({[e.name]:e.newValue})})),r}link(e){this.setConfig(e.config),this._requestManager=e.requestManager,this.provider=e.provider,this._subscriptionManager=e.subscriptionManager,this._wallet=e.wallet,this._accountProvider=e._accountProvider,e.on(o.Web3ConfigEvent.CONFIG_CHANGE,(e=>{this.setConfig({[e.name]:e.newValue})}))}registerPlugin(e){if(void 0!==this[e.pluginNamespace])throw new s.ExistingPluginNamespaceError(e.pluginNamespace);const t={[e.pluginNamespace]:e};t[e.pluginNamespace].link(this),Object.assign(this,t)}get provider(){return this.currentProvider}set provider(e){this.requestManager.setProvider(e)}get currentProvider(){return this.requestManager.provider}set currentProvider(e){this.requestManager.setProvider(e)}get givenProvider(){return u.givenProvider}setProvider(e){return this.provider=e,!0}get BatchRequest(){return d.Web3BatchRequest.bind(void 0,this._requestManager)}extend(e){var t;return e.property&&!this[e.property]&&(this[e.property]={}),null===(t=e.methods)||void 0===t||t.forEach((t=>{const r=(...e)=>i(this,void 0,void 0,(function*(){return this.requestManager.send({method:t.call,params:e})}));e.property?this[e.property][t.name]=r:this[t.name]=r})),this}}t.Web3Context=u,u.providers=c.Web3RequestManager.providers;class h extends u{}t.Web3PluginBase=h,t.Web3EthPluginBase=class extends h{}},8976:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Web3EventEmitter=void 0;const i=r(9634);t.Web3EventEmitter=class{constructor(){this._emitter=new i.EventEmitter}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,t){this._emitter.emit(e,t)}listenerCount(e){return this._emitter.listenerCount(e)}listeners(e){return this._emitter.listeners(e)}eventNames(){return this._emitter.eventNames()}removeAllListeners(){return this._emitter.removeAllListeners()}setMaxListenerWarningThreshold(e){this._emitter.setMaxListeners(e)}getMaxListeners(){return this._emitter.getMaxListeners()}}},4738:function(e,t,r){"use strict";var i,n=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Web3PromiEvent=void 0;const s=r(8976);class a extends s.Web3EventEmitter{constructor(e){super(),this[i]="Promise",this._promise=new Promise(e)}then(e,t){return n(this,void 0,void 0,(function*(){return this._promise.then(e,t)}))}catch(e){return n(this,void 0,void 0,(function*(){return this._promise.catch(e)}))}finally(e){return n(this,void 0,void 0,(function*(){return this._promise.finally(e)}))}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}}t.Web3PromiEvent=a,i=Symbol.toStringTag},8441:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Web3RequestManager=t.Web3RequestManagerEvent=void 0;const s=r(5071),a=n(r(2636)),o=n(r(1161)),c=r(9634),l=r(7003),d=r(8976);var u;!function(e){e.PROVIDER_CHANGED="PROVIDER_CHANGED",e.BEFORE_PROVIDER_CHANGE="BEFORE_PROVIDER_CHANGE"}(u=t.Web3RequestManagerEvent||(t.Web3RequestManagerEvent={}));const h={HttpProvider:a.default,WebsocketProvider:o.default},p=e=>{var t;if(Array.isArray(e.params)){const r=e.params[0];if(r.input&&!r.data)return Object.assign(Object.assign({},e),{params:[Object.assign(Object.assign({},r),{data:null!==(t=r.data)&&void 0!==t?t:r.input})]})}return e};class f extends d.Web3EventEmitter{constructor(e,t){super(),(0,c.isNullish)(e)||this.setProvider(e),this.useRpcCallSpecification=t}static get providers(){return h}get provider(){return this._provider}get providers(){return h}setProvider(e){let t;if(e&&"string"==typeof e&&this.providers)if(/^http(s)?:\/\//i.test(e))t=new this.providers.HttpProvider(e);else{if(!/^ws(s)?:\/\//i.test(e))throw new s.ProviderError(`Can't autodetect provider for "${e}"`);t=new this.providers.WebsocketProvider(e)}else t=(0,c.isNullish)(e)?void 0:e;return this.emit(u.BEFORE_PROVIDER_CHANGE,this._provider),this._provider=t,this.emit(u.PROVIDER_CHANGED,this._provider),!0}send(e){return i(this,void 0,void 0,(function*(){const t=yield this._sendRequest(e);if(c.jsonRpc.isResponseWithResult(t))return t.result;throw new s.ResponseError(t)}))}sendBatch(e){return i(this,void 0,void 0,(function*(){return yield this._sendRequest(e)}))}_sendRequest(e){return i(this,void 0,void 0,(function*(){const{provider:t}=this;if((0,c.isNullish)(t))throw new s.ProviderError("Provider not available. Use `.setProvider` or `.provider=` to initialize the provider.");let r=c.jsonRpc.isBatchRequest(e)?c.jsonRpc.toBatchPayload(e):c.jsonRpc.toPayload(e);if((0,l.isMetaMaskProvider)(t)&&"eth_sendTransaction"===r.method&&(r=c.jsonRpc.isBatchRequest(r)?r.map((e=>p(e))):p(r)),(0,l.isWeb3Provider)(t)){let e;try{e=yield t.request(r)}catch(t){e=t}return this._processJsonRpcResponse(r,e,{legacy:!1,error:!1})}if((0,l.isEIP1193Provider)(t))return t.request(r).then((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!1}))).catch((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!0})));if((0,l.isLegacyRequestProvider)(t))return new Promise(((e,i)=>{const n=e=>i(this._processJsonRpcResponse(r,e,{legacy:!0,error:!0})),s=t=>e(this._processJsonRpcResponse(r,t,{legacy:!0,error:!1})),a=t.request(r,((e,t)=>e?n(e):s(t)));(0,c.isPromise)(a)&&a.then(s).catch(n)}));if((0,l.isLegacySendProvider)(t))return new Promise(((e,i)=>{t.send(r,((t,n)=>{if(t)return i(this._processJsonRpcResponse(r,t,{legacy:!0,error:!0}));if((0,c.isNullish)(n))throw new s.ResponseError("",'Got a "nullish" response from provider.');return e(this._processJsonRpcResponse(r,n,{legacy:!0,error:!1}))}))}));if((0,l.isLegacySendAsyncProvider)(t))return t.sendAsync(r).then((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!1}))).catch((e=>this._processJsonRpcResponse(r,e,{legacy:!0,error:!0})));throw new s.ProviderError("Provider does not have a request or send method to use.")}))}_processJsonRpcResponse(e,t,{legacy:r,error:i}){if((0,c.isNullish)(t))return this._buildResponse(e,null,i);if(c.jsonRpc.isResponseWithError(t)){if(this.useRpcCallSpecification&&(0,c.isResponseRpcError)(t)){const e=t;if(s.rpcErrorsMap.get(e.error.code))throw new(0,s.rpcErrorsMap.get(e.error.code).error)(e);throw new s.RpcError(e)}if(!f._isReverted(t))throw new s.InvalidResponseError(t,e)}if(c.jsonRpc.isResponseWithResult(t))return t;if(t instanceof Error)throw f._isReverted(t),t;if(!r&&c.jsonRpc.isBatchRequest(e)&&c.jsonRpc.isBatchResponse(t))return t;if(r&&!i&&c.jsonRpc.isBatchRequest(e))return t;if(r&&i&&c.jsonRpc.isBatchRequest(e))throw t;if(r&&!c.jsonRpc.isResponseWithError(t)&&!c.jsonRpc.isResponseWithResult(t))return this._buildResponse(e,t,i);if(c.jsonRpc.isBatchRequest(e)&&!Array.isArray(t))throw new s.ResponseError(t,"Got normal response for a batch request.");if(!c.jsonRpc.isBatchRequest(e)&&Array.isArray(t))throw new s.ResponseError(t,"Got batch response for a normal request.");if((c.jsonRpc.isResponseWithError(t)||c.jsonRpc.isResponseWithResult(t))&&!c.jsonRpc.isBatchRequest(e)&&t.id&&e.id!==t.id)throw new s.InvalidResponseError(t);throw new s.ResponseError(t,"Invalid response")}static _isReverted(e){let t;if(c.jsonRpc.isResponseWithError(e)?t=e.error:e instanceof Error&&(t=e),null==t?void 0:t.message.includes("revert"))throw new s.ContractExecutionError(t);return!1}_buildResponse(e,t,r){const i={jsonrpc:"2.0",id:c.jsonRpc.isBatchRequest(e)?e[0].id:"id"in e?e.id:null};return r?Object.assign(Object.assign({},i),{error:t}):Object.assign(Object.assign({},i),{result:t})}}t.Web3RequestManager=f},860:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Web3SubscriptionManager=void 0;const n=r(9970),s=r(5071),a=r(9634),o=r(7003),c=r(8441);t.Web3SubscriptionManager=class{constructor(e,t,r=!1){this.requestManager=e,this.registeredSubscriptions=t,this.tolerateUnlinkedSubscription=r,this._subscriptions=new Map,this.requestManager.on(c.Web3RequestManagerEvent.BEFORE_PROVIDER_CHANGE,(()=>i(this,void 0,void 0,(function*(){yield this.unsubscribe()})))),this.requestManager.on(c.Web3RequestManagerEvent.PROVIDER_CHANGED,(()=>{this.clear(),this.listenToProviderEvents()})),this.listenToProviderEvents()}listenToProviderEvents(){const e=this.requestManager.provider;this.requestManager.provider&&("function"!=typeof(null==e?void 0:e.supportsSubscriptions)||(null==e?void 0:e.supportsSubscriptions()))&&"function"==typeof this.requestManager.provider.on&&("function"==typeof this.requestManager.provider.request?this.requestManager.provider.on("message",(e=>this.messageListener(e))):e.on("data",(e=>this.messageListener(e))))}messageListener(e){var t,r,i;if(!e)throw new s.SubscriptionError("Should not call messageListener with no data. Type was");const n=(null===(t=e.params)||void 0===t?void 0:t.subscription)||(null===(r=e.data)||void 0===r?void 0:r.subscription)||(null===(i=e.id)||void 0===i?void 0:i.toString(16));if(n){const t=this._subscriptions.get(n);null==t||t.processSubscriptionData(e)}}subscribe(e,t,r=n.DEFAULT_RETURN_FORMAT){return i(this,void 0,void 0,(function*(){const i=this.registeredSubscriptions[e];if(!i)throw new s.SubscriptionError("Invalid subscription type");const n=new i(null!=t?t:void 0,{subscriptionManager:this,returnFormat:r});return yield this.addSubscription(n),n}))}get subscriptions(){return this._subscriptions}addSubscription(e){return i(this,void 0,void 0,(function*(){if(!this.requestManager.provider)throw new s.ProviderError("Provider not available");if(!this.supportsSubscriptions())throw new s.SubscriptionError("The current provider does not support subscriptions");if(e.id&&this._subscriptions.has(e.id))throw new s.SubscriptionError(`Subscription with id "${e.id}" already exists`);if(yield e.sendSubscriptionRequest(),(0,a.isNullish)(e.id))throw new s.SubscriptionError("Subscription is not subscribed yet.");return this._subscriptions.set(e.id,e),e.id}))}removeSubscription(e){return i(this,void 0,void 0,(function*(){const{id:t}=e;if((0,a.isNullish)(t))throw new s.SubscriptionError("Subscription is not subscribed yet. Or, had already been unsubscribed but not through the Subscription Manager.");if(!this._subscriptions.has(t)&&!this.tolerateUnlinkedSubscription)throw new s.SubscriptionError(`Subscription with id "${t.toString()}" does not exists`);return yield e.sendUnsubscribeRequest(),this._subscriptions.delete(t),t}))}unsubscribe(e){return i(this,void 0,void 0,(function*(){const t=[];for(const[r,i]of this.subscriptions.entries())(!e||"function"==typeof e&&e({id:r,sub:i}))&&t.push(this.removeSubscription(i));return Promise.all(t)}))}clear(){this._subscriptions.clear()}supportsSubscriptions(){return!(0,a.isNullish)(this.requestManager.provider)&&(0,o.isSupportSubscriptions)(this.requestManager.provider)}}},1819:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Web3Subscription=void 0;const n=r(9970),s=r(9634),a=r(5071),o=r(860),c=r(8976);class l extends c.Web3EventEmitter{constructor(e,t){var r;super(),this.args=e;const{requestManager:i}=t,{subscriptionManager:s}=t;if(i&&s)throw new a.SubscriptionError("Only requestManager or subscriptionManager should be provided at Subscription constructor");if(!i&&!s)throw new a.SubscriptionError("Either requestManager or subscriptionManager should be provided at Subscription constructor");this._subscriptionManager=i?new o.Web3SubscriptionManager(i,{},!0):s,this._returnFormat=null!==(r=null==t?void 0:t.returnFormat)&&void 0!==r?r:n.DEFAULT_RETURN_FORMAT}get id(){return this._id}get lastBlock(){return this._lastBlock}subscribe(){return i(this,void 0,void 0,(function*(){return this._subscriptionManager.addSubscription(this)}))}processSubscriptionData(e){var t,r;(null==e?void 0:e.data)?this._processSubscriptionResult(null!==(r=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.result)&&void 0!==r?r:null==e?void 0:e.data):e&&s.jsonRpc.isResponseWithNotification(e)&&this._processSubscriptionResult(null==e?void 0:e.params.result)}sendSubscriptionRequest(){return i(this,void 0,void 0,(function*(){return this._id=yield this._subscriptionManager.requestManager.send({method:"eth_subscribe",params:this._buildSubscriptionParams()}),this.emit("connected",this._id),this._id}))}get returnFormat(){return this._returnFormat}get subscriptionManager(){return this._subscriptionManager}resubscribe(){return i(this,void 0,void 0,(function*(){yield this.unsubscribe(),yield this.subscribe()}))}unsubscribe(){return i(this,void 0,void 0,(function*(){this.id&&(yield this._subscriptionManager.removeSubscription(this))}))}sendUnsubscribeRequest(){return i(this,void 0,void 0,(function*(){yield this._subscriptionManager.requestManager.send({method:"eth_unsubscribe",params:[this.id]}),this._id=void 0}))}formatSubscriptionResult(e){return e}_processSubscriptionResult(e){this.emit("data",this.formatSubscriptionResult(e))}_processSubscriptionError(e){this.emit("error",e)}_buildSubscriptionParams(){throw new Error("Implement in the child class")}}t.Web3Subscription=l},7639:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERR_TX_RECEIPT_MISSING_OR_BLOCKHASH_NULL=t.ERR_TX_POLLING_TIMEOUT=t.ERR_TX_DATA_AND_INPUT=t.ERR_TX_UNSUPPORTED_TYPE=t.ERR_TX_UNSUPPORTED_EIP_1559=t.ERR_TX_UNABLE_TO_POPULATE_NONCE=t.ERR_TX_INVALID_NONCE_OR_CHAIN_ID=t.ERR_TX_INVALID_OBJECT=t.ERR_TX_INVALID_LEGACY_FEE_MARKET=t.ERR_TX_INVALID_FEE_MARKET_GAS_PRICE=t.ERR_TX_INVALID_FEE_MARKET_GAS=t.ERR_TX_INVALID_LEGACY_GAS=t.ERR_TX_MISSING_GAS=t.ERR_TX_MISSING_CHAIN_INFO=t.ERR_TX_INVALID_CHAIN_INFO=t.ERR_TX_CHAIN_ID_MISMATCH=t.ERR_TX_MISSING_CUSTOM_CHAIN_ID=t.ERR_TX_MISSING_CUSTOM_CHAIN=t.ERR_TX_INVALID_CALL=t.ERR_TX_INVALID_SENDER=t.ERR_RAW_TX_UNDEFINED=t.ERR_TX_OUT_OF_GAS=t.ERR_TX_REVERT_WITHOUT_REASON=t.ERR_TX_CONTRACT_NOT_STORED=t.ERR_TX_NO_CONTRACT_ADDRESS=t.ERR_TX_REVERT_TRANSACTION=t.ERR_TX_REVERT_INSTRUCTION=t.ERR_TX=t.ERR_CONTRACT_TX_DATA_AND_INPUT=t.ERR_CONTRACT_EXECUTION_REVERTED=t.ERR_CONTRACT_INSTANTIATION=t.ERR_CONTRACT_MISSING_FROM_ADDRESS=t.ERR_CONTRACT_MISSING_ADDRESS=t.ERR_CONTRACT_MISSING_DEPLOY_DATA=t.ERR_CONTRACT_RESERVED_EVENT=t.ERR_CONTRACT_EVENT_NOT_EXISTS=t.ERR_CONTRACT_REQUIRED_CALLBACK=t.ERR_CONTRACT_ABI_MISSING=t.ERR_CONTRACT_RESOLVER_MISSING=t.ERR_CONTRACT=t.ERR_INVALID_METHOD_PARAMS=t.ERR_EXISTING_PLUGIN_NAMESPACE=t.ERR_ABI_ENCODING=t.ERR_OPERATION_ABORT=t.ERR_OPERATION_TIMEOUT=t.ERR_METHOD_NOT_IMPLEMENTED=t.ERR_FORMATTERS=t.ERR_PARAM=t.ERR_INVALID_RESPONSE=t.ERR_RESPONSE=void 0,t.ERR_INVALID_NUMBER=t.ERR_INVALID_BYTES=t.ERR_INVALID_STRING=t.ERR_ENS_NETWORK_NOT_SYNCED=t.ERR_ENS_UNSUPPORTED_NETWORK=t.ERR_ENS_CHECK_INTERFACE_SUPPORT=t.JSONRPC_ERR_CHAIN_DISCONNECTED=t.JSONRPC_ERR_DISCONNECTED=t.JSONRPC_ERR_UNSUPPORTED_METHOD=t.JSONRPC_ERR_UNAUTHORIZED=t.JSONRPC_ERR_REJECTED_REQUEST=t.GENESIS_BLOCK_NUMBER=t.ERR_INVALID_SIGNATURE=t.ERR_SIGNATURE_FAILED=t.ERR_PBKDF2_ITERATIONS=t.ERR_INVALID_KEYSTORE=t.ERR_IV_LENGTH=t.ERR_INVALID_PASSWORD=t.ERR_KEY_VERSION_UNSUPPORTED=t.ERR_KEY_DERIVATION_FAIL=t.ERR_UNSUPPORTED_KDF=t.ERR_INVALID_PRIVATE_KEY=t.ERR_PRIVATE_KEY_LENGTH=t.ERR_WS_PROVIDER=t.ERR_SUBSCRIPTION=t.ERR_INVALID_CLIENT=t.ERR_INVALID_PROVIDER=t.ERR_PROVIDER=t.ERR_REQ_ALREADY_SENT=t.ERR_CONN_PENDING_REQUESTS=t.ERR_CONN_MAX_ATTEMPTS=t.ERR_CONN_CLOSE=t.ERR_CONN_NOT_OPEN=t.ERR_CONN_TIMEOUT=t.ERR_CONN_INVALID=t.ERR_CONN=t.ERR_TX_GAS_MISMATCH_INNER_ERROR=t.ERR_TX_MISSING_GAS_INNER_ERROR=t.ERR_TX_INVALID_PROPERTIES_FOR_TYPE=t.ERR_TX_REVERT_TRANSACTION_CUSTOM_ERROR=t.ERR_TX_INVALID_RECEIVER=t.ERR_TX_HARDFORK_MISMATCH=t.ERR_TX_CHAIN_MISMATCH=t.ERR_TX_GAS_MISMATCH=t.ERR_TX_SIGNING=t.ERR_TX_BLOCK_TIMEOUT=t.ERR_TX_SEND_TIMEOUT=t.ERR_TX_NOT_FOUND=t.ERR_TX_LOCAL_WALLET_NOT_AVAILABLE=t.ERR_TX_RECEIPT_MISSING_BLOCK_NUMBER=void 0,t.ERR_RPC_NOT_SUPPORTED=t.ERR_RPC_LIMIT_EXCEEDED=t.ERR_RPC_UNSUPPORTED_METHOD=t.ERR_RPC_TRANSACTION_REJECTED=t.ERR_RPC_UNAVAILABLE_RESOURCE=t.ERR_RPC_MISSING_RESOURCE=t.ERR_RPC_INVALID_INPUT=t.ERR_RPC_INTERNAL_ERROR=t.ERR_RPC_INVALID_PARAMS=t.ERR_RPC_INVALID_METHOD=t.ERR_RPC_INVALID_REQUEST=t.ERR_RPC_INVALID_JSON=t.ERR_SCHEMA_FORMAT=t.ERR_CORE_CHAIN_MISMATCH=t.ERR_CORE_HARDFORK_MISMATCH=t.ERR_VALIDATION=t.ERR_INVALID_NIBBLE_WIDTH=t.ERR_INVALID_TYPE_ABI=t.ERR_INVALID_BLOCK=t.ERR_INVALID_LARGE_VALUE=t.ERR_INVALID_SIZE=t.ERR_INVALID_UNSIGNED_INTEGER=t.ERR_INVALID_BOOLEAN=t.ERR_INVALID_TYPE=t.ERR_INVALID_HEX=t.ERR_INVALID_ADDRESS=t.ERR_INVALID_UNIT=void 0,t.ERR_RESPONSE=100,t.ERR_INVALID_RESPONSE=101,t.ERR_PARAM=200,t.ERR_FORMATTERS=201,t.ERR_METHOD_NOT_IMPLEMENTED=202,t.ERR_OPERATION_TIMEOUT=203,t.ERR_OPERATION_ABORT=204,t.ERR_ABI_ENCODING=205,t.ERR_EXISTING_PLUGIN_NAMESPACE=206,t.ERR_INVALID_METHOD_PARAMS=207,t.ERR_CONTRACT=300,t.ERR_CONTRACT_RESOLVER_MISSING=301,t.ERR_CONTRACT_ABI_MISSING=302,t.ERR_CONTRACT_REQUIRED_CALLBACK=303,t.ERR_CONTRACT_EVENT_NOT_EXISTS=304,t.ERR_CONTRACT_RESERVED_EVENT=305,t.ERR_CONTRACT_MISSING_DEPLOY_DATA=306,t.ERR_CONTRACT_MISSING_ADDRESS=307,t.ERR_CONTRACT_MISSING_FROM_ADDRESS=308,t.ERR_CONTRACT_INSTANTIATION=309,t.ERR_CONTRACT_EXECUTION_REVERTED=310,t.ERR_CONTRACT_TX_DATA_AND_INPUT=311,t.ERR_TX=400,t.ERR_TX_REVERT_INSTRUCTION=401,t.ERR_TX_REVERT_TRANSACTION=402,t.ERR_TX_NO_CONTRACT_ADDRESS=403,t.ERR_TX_CONTRACT_NOT_STORED=404,t.ERR_TX_REVERT_WITHOUT_REASON=405,t.ERR_TX_OUT_OF_GAS=406,t.ERR_RAW_TX_UNDEFINED=407,t.ERR_TX_INVALID_SENDER=408,t.ERR_TX_INVALID_CALL=409,t.ERR_TX_MISSING_CUSTOM_CHAIN=410,t.ERR_TX_MISSING_CUSTOM_CHAIN_ID=411,t.ERR_TX_CHAIN_ID_MISMATCH=412,t.ERR_TX_INVALID_CHAIN_INFO=413,t.ERR_TX_MISSING_CHAIN_INFO=414,t.ERR_TX_MISSING_GAS=415,t.ERR_TX_INVALID_LEGACY_GAS=416,t.ERR_TX_INVALID_FEE_MARKET_GAS=417,t.ERR_TX_INVALID_FEE_MARKET_GAS_PRICE=418,t.ERR_TX_INVALID_LEGACY_FEE_MARKET=419,t.ERR_TX_INVALID_OBJECT=420,t.ERR_TX_INVALID_NONCE_OR_CHAIN_ID=421,t.ERR_TX_UNABLE_TO_POPULATE_NONCE=422,t.ERR_TX_UNSUPPORTED_EIP_1559=423,t.ERR_TX_UNSUPPORTED_TYPE=424,t.ERR_TX_DATA_AND_INPUT=425,t.ERR_TX_POLLING_TIMEOUT=426,t.ERR_TX_RECEIPT_MISSING_OR_BLOCKHASH_NULL=427,t.ERR_TX_RECEIPT_MISSING_BLOCK_NUMBER=428,t.ERR_TX_LOCAL_WALLET_NOT_AVAILABLE=429,t.ERR_TX_NOT_FOUND=430,t.ERR_TX_SEND_TIMEOUT=431,t.ERR_TX_BLOCK_TIMEOUT=432,t.ERR_TX_SIGNING=433,t.ERR_TX_GAS_MISMATCH=434,t.ERR_TX_CHAIN_MISMATCH=435,t.ERR_TX_HARDFORK_MISMATCH=436,t.ERR_TX_INVALID_RECEIVER=437,t.ERR_TX_REVERT_TRANSACTION_CUSTOM_ERROR=438,t.ERR_TX_INVALID_PROPERTIES_FOR_TYPE=439,t.ERR_TX_MISSING_GAS_INNER_ERROR=440,t.ERR_TX_GAS_MISMATCH_INNER_ERROR=441,t.ERR_CONN=500,t.ERR_CONN_INVALID=501,t.ERR_CONN_TIMEOUT=502,t.ERR_CONN_NOT_OPEN=503,t.ERR_CONN_CLOSE=504,t.ERR_CONN_MAX_ATTEMPTS=505,t.ERR_CONN_PENDING_REQUESTS=506,t.ERR_REQ_ALREADY_SENT=507,t.ERR_PROVIDER=600,t.ERR_INVALID_PROVIDER=601,t.ERR_INVALID_CLIENT=602,t.ERR_SUBSCRIPTION=603,t.ERR_WS_PROVIDER=604,t.ERR_PRIVATE_KEY_LENGTH=701,t.ERR_INVALID_PRIVATE_KEY=702,t.ERR_UNSUPPORTED_KDF=703,t.ERR_KEY_DERIVATION_FAIL=704,t.ERR_KEY_VERSION_UNSUPPORTED=705,t.ERR_INVALID_PASSWORD=706,t.ERR_IV_LENGTH=707,t.ERR_INVALID_KEYSTORE=708,t.ERR_PBKDF2_ITERATIONS=709,t.ERR_SIGNATURE_FAILED=801,t.ERR_INVALID_SIGNATURE=802,t.GENESIS_BLOCK_NUMBER="0x0",t.JSONRPC_ERR_REJECTED_REQUEST=4001,t.JSONRPC_ERR_UNAUTHORIZED=4100,t.JSONRPC_ERR_UNSUPPORTED_METHOD=4200,t.JSONRPC_ERR_DISCONNECTED=4900,t.JSONRPC_ERR_CHAIN_DISCONNECTED=4901,t.ERR_ENS_CHECK_INTERFACE_SUPPORT=901,t.ERR_ENS_UNSUPPORTED_NETWORK=902,t.ERR_ENS_NETWORK_NOT_SYNCED=903,t.ERR_INVALID_STRING=1001,t.ERR_INVALID_BYTES=1002,t.ERR_INVALID_NUMBER=1003,t.ERR_INVALID_UNIT=1004,t.ERR_INVALID_ADDRESS=1005,t.ERR_INVALID_HEX=1006,t.ERR_INVALID_TYPE=1007,t.ERR_INVALID_BOOLEAN=1008,t.ERR_INVALID_UNSIGNED_INTEGER=1009,t.ERR_INVALID_SIZE=1010,t.ERR_INVALID_LARGE_VALUE=1011,t.ERR_INVALID_BLOCK=1012,t.ERR_INVALID_TYPE_ABI=1013,t.ERR_INVALID_NIBBLE_WIDTH=1014,t.ERR_VALIDATION=1100,t.ERR_CORE_HARDFORK_MISMATCH=1101,t.ERR_CORE_CHAIN_MISMATCH=1102,t.ERR_SCHEMA_FORMAT=1200,t.ERR_RPC_INVALID_JSON=-32700,t.ERR_RPC_INVALID_REQUEST=-32600,t.ERR_RPC_INVALID_METHOD=-32601,t.ERR_RPC_INVALID_PARAMS=-32602,t.ERR_RPC_INTERNAL_ERROR=-32603,t.ERR_RPC_INVALID_INPUT=-32e3,t.ERR_RPC_MISSING_RESOURCE=-32001,t.ERR_RPC_UNAVAILABLE_RESOURCE=-32002,t.ERR_RPC_TRANSACTION_REJECTED=-32003,t.ERR_RPC_UNSUPPORTED_METHOD=-32004,t.ERR_RPC_LIMIT_EXCEEDED=-32005,t.ERR_RPC_NOT_SUPPORTED=-32006},8105:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PBKDF2IterationsError=t.IVLengthError=t.InvalidPasswordError=t.KeyStoreVersionError=t.KeyDerivationError=t.InvalidKdfError=t.InvalidSignatureError=t.InvalidPrivateKeyError=t.PrivateKeyLengthError=void 0;const i=r(7639),n=r(3685);class s extends n.BaseWeb3Error{constructor(){super("Private key must be 32 bytes."),this.code=i.ERR_PRIVATE_KEY_LENGTH}}t.PrivateKeyLengthError=s;class a extends n.BaseWeb3Error{constructor(){super("Invalid Private Key, Not a valid string or uint8Array"),this.code=i.ERR_INVALID_PRIVATE_KEY}}t.InvalidPrivateKeyError=a;class o extends n.BaseWeb3Error{constructor(e){super(`"${e}"`),this.code=i.ERR_INVALID_SIGNATURE}}t.InvalidSignatureError=o;class c extends n.BaseWeb3Error{constructor(){super("Invalid key derivation function"),this.code=i.ERR_UNSUPPORTED_KDF}}t.InvalidKdfError=c;class l extends n.BaseWeb3Error{constructor(){super("Key derivation failed - possibly wrong password"),this.code=i.ERR_KEY_DERIVATION_FAIL}}t.KeyDerivationError=l;class d extends n.BaseWeb3Error{constructor(){super("Unsupported key store version"),this.code=i.ERR_KEY_VERSION_UNSUPPORTED}}t.KeyStoreVersionError=d;class u extends n.BaseWeb3Error{constructor(){super("Password cannot be empty"),this.code=i.ERR_INVALID_PASSWORD}}t.InvalidPasswordError=u;class h extends n.BaseWeb3Error{constructor(){super("Initialization vector must be 16 bytes"),this.code=i.ERR_IV_LENGTH}}t.IVLengthError=h;class p extends n.BaseWeb3Error{constructor(){super("c > 1000, pbkdf2 is less secure with less iterations"),this.code=i.ERR_PBKDF2_ITERATIONS}}t.PBKDF2IterationsError=p},3789:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestAlreadySentError=t.PendingRequestsOnReconnectingError=t.MaxAttemptsReachedOnReconnectingError=t.ConnectionCloseError=t.ConnectionNotOpenError=t.ConnectionTimeoutError=t.InvalidConnectionError=t.ConnectionError=void 0;const i=r(7639),n=r(3685);class s extends n.BaseWeb3Error{constructor(e,t){super(e),this.code=i.ERR_CONN,t&&(this.errorCode=t.code,this.errorReason=t.reason)}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{errorCode:this.errorCode,errorReason:this.errorReason})}}t.ConnectionError=s,t.InvalidConnectionError=class extends s{constructor(e,t){super(`CONNECTION ERROR: Couldn't connect to node ${e}.`,t),this.host=e,this.code=i.ERR_CONN_INVALID}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{host:this.host})}},t.ConnectionTimeoutError=class extends s{constructor(e){super(`CONNECTION TIMEOUT: timeout of ${e}ms achieved`),this.duration=e,this.code=i.ERR_CONN_TIMEOUT}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{duration:this.duration})}},t.ConnectionNotOpenError=class extends s{constructor(e){super("Connection not open",e),this.code=i.ERR_CONN_NOT_OPEN}},t.ConnectionCloseError=class extends s{constructor(e){var t,r;super(`CONNECTION ERROR: The connection got closed with the close code ${null!==(t=null==e?void 0:e.code)&&void 0!==t?t:""} and the following reason string ${null!==(r=null==e?void 0:e.reason)&&void 0!==r?r:""}`,e),this.code=i.ERR_CONN_CLOSE}},t.MaxAttemptsReachedOnReconnectingError=class extends s{constructor(e){super(`Maximum number of reconnect attempts reached! (${e})`),this.code=i.ERR_CONN_MAX_ATTEMPTS}},t.PendingRequestsOnReconnectingError=class extends s{constructor(){super("CONNECTION ERROR: Provider started to reconnect before the response got received!"),this.code=i.ERR_CONN_PENDING_REQUESTS}},t.RequestAlreadySentError=class extends s{constructor(e){super(`Request already sent with following id: ${e}`),this.code=i.ERR_REQ_ALREADY_SENT}}},510:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContractTransactionDataAndInputError=t.ContractExecutionError=t.Eip838ExecutionError=t.ContractInstantiationError=t.ContractNoFromAddressDefinedError=t.ContractNoAddressDefinedError=t.ContractMissingDeployDataError=t.ContractReservedEventError=t.ContractEventDoesNotExistError=t.ContractOnceRequiresCallbackError=t.ContractMissingABIError=t.ResolverMethodMissingError=t.Web3ContractError=void 0;const i=r(7639),n=r(3685);class s extends n.BaseWeb3Error{constructor(e,t){super(e),this.code=i.ERR_CONTRACT,this.receipt=t}}t.Web3ContractError=s;class a extends n.BaseWeb3Error{constructor(e,t){super(`The resolver at ${e} does not implement requested method: "${t}".`),this.address=e,this.name=t,this.code=i.ERR_CONTRACT_RESOLVER_MISSING}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{address:this.address,name:this.name})}}t.ResolverMethodMissingError=a;class o extends n.BaseWeb3Error{constructor(){super("You must provide the json interface of the contract when instantiating a contract object."),this.code=i.ERR_CONTRACT_ABI_MISSING}}t.ContractMissingABIError=o;class c extends n.BaseWeb3Error{constructor(){super("Once requires a callback as the second parameter."),this.code=i.ERR_CONTRACT_REQUIRED_CALLBACK}}t.ContractOnceRequiresCallbackError=c;class l extends n.BaseWeb3Error{constructor(e){super(`Event "${e}" doesn't exist in this contract.`),this.eventName=e,this.code=i.ERR_CONTRACT_EVENT_NOT_EXISTS}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{eventName:this.eventName})}}t.ContractEventDoesNotExistError=l;class d extends n.BaseWeb3Error{constructor(e){super(`Event "${e}" doesn't exist in this contract.`),this.type=e,this.code=i.ERR_CONTRACT_RESERVED_EVENT}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{type:this.type})}}t.ContractReservedEventError=d;class u extends n.BaseWeb3Error{constructor(){super('No "data" specified in neither the given options, nor the default options.'),this.code=i.ERR_CONTRACT_MISSING_DEPLOY_DATA}}t.ContractMissingDeployDataError=u;class h extends n.BaseWeb3Error{constructor(){super("This contract object doesn't have address set yet, please set an address first."),this.code=i.ERR_CONTRACT_MISSING_ADDRESS}}t.ContractNoAddressDefinedError=h;class p extends n.BaseWeb3Error{constructor(){super('No "from" address specified in neither the given options, nor the default options.'),this.code=i.ERR_CONTRACT_MISSING_FROM_ADDRESS}}t.ContractNoFromAddressDefinedError=p;class f extends n.BaseWeb3Error{constructor(){super(...arguments),this.code=i.ERR_CONTRACT_INSTANTIATION}}t.ContractInstantiationError=f;class g extends s{constructor(e){if(super(e.message||"Error"),this.name="name"in e&&e.name||this.constructor.name,this.stack="stack"in e&&e.stack||void 0,this.code=e.code,"object"==typeof e.data){let t;t="originalError"in e.data?e.data.originalError:e.data,this.data=t.data,this.innerError=new g(t)}else this.data=e.data}setDecodedProperties(e,t,r){this.errorName=e,this.errorSignature=t,this.errorArgs=r}toJSON(){let e=Object.assign(Object.assign({},super.toJSON()),{data:this.data});return this.errorName&&(e=Object.assign(Object.assign({},e),{errorName:this.errorName,errorSignature:this.errorSignature,errorArgs:this.errorArgs})),e}}t.Eip838ExecutionError=g,t.ContractExecutionError=class extends s{constructor(e){super("Error happened while trying to execute a function inside a smart contract"),this.code=i.ERR_CONTRACT_EXECUTION_REVERTED,this.innerError=new g(e)}};class m extends n.InvalidValueError{constructor(e){var t,r;super(`data: ${null!==(t=e.data)&&void 0!==t?t:"undefined"}, input: ${null!==(r=e.input)&&void 0!==r?r:"undefined"}`,'You can\'t have "data" and "input" as properties of a contract at the same time, please use either "data" or "input" instead.'),this.code=i.ERR_CONTRACT_TX_DATA_AND_INPUT}}t.ContractTransactionDataAndInputError=m},3628:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigChainMismatchError=t.ConfigHardforkMismatchError=void 0;const i=r(3685),n=r(7639);class s extends i.BaseWeb3Error{constructor(e,t){super(`Web3Config hardfork doesnt match in defaultHardfork ${e} and common.hardfork ${t}`),this.code=n.ERR_CORE_HARDFORK_MISMATCH}}t.ConfigHardforkMismatchError=s;class a extends i.BaseWeb3Error{constructor(e,t){super(`Web3Config chain doesnt match in defaultHardfork ${e} and common.hardfork ${t}`),this.code=n.ERR_CORE_HARDFORK_MISMATCH}}t.ConfigChainMismatchError=a},1591:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENSNetworkNotSyncedError=t.ENSUnsupportedNetworkError=t.ENSCheckInterfaceSupportError=void 0;const i=r(7639),n=r(3685);class s extends n.BaseWeb3Error{constructor(e){super(`ENS resolver check interface support error. "${e}"`),this.code=i.ERR_ENS_CHECK_INTERFACE_SUPPORT}}t.ENSCheckInterfaceSupportError=s;class a extends n.BaseWeb3Error{constructor(e){super(`ENS is not supported on network ${e}`),this.code=i.ERR_ENS_UNSUPPORTED_NETWORK}}t.ENSUnsupportedNetworkError=a;class o extends n.BaseWeb3Error{constructor(){super("Network not synced"),this.code=i.ERR_ENS_NETWORK_NOT_SYNCED}}t.ENSNetworkNotSyncedError=o},7297:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExistingPluginNamespaceError=t.AbiError=t.OperationAbortError=t.OperationTimeoutError=t.MethodNotImplementedError=t.FormatterError=t.InvalidMethodParamsError=t.InvalidNumberOfParamsError=void 0;const i=r(7639),n=r(3685);class s extends n.BaseWeb3Error{constructor(e,t,r){super(`Invalid number of parameters for "${r}". Got "${e}" expected "${t}"!`),this.got=e,this.expected=t,this.method=r,this.code=i.ERR_PARAM}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{got:this.got,expected:this.expected,method:this.method})}}t.InvalidNumberOfParamsError=s;class a extends n.BaseWeb3Error{constructor(e){super(`Invalid parameters passed. "${void 0!==e?e:""}"`),this.hint=e,this.code=i.ERR_INVALID_METHOD_PARAMS}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{hint:this.hint})}}t.InvalidMethodParamsError=a;class o extends n.BaseWeb3Error{constructor(){super(...arguments),this.code=i.ERR_FORMATTERS}}t.FormatterError=o;class c extends n.BaseWeb3Error{constructor(){super("The method you're trying to call is not implemented."),this.code=i.ERR_METHOD_NOT_IMPLEMENTED}}t.MethodNotImplementedError=c;class l extends n.BaseWeb3Error{constructor(){super(...arguments),this.code=i.ERR_OPERATION_TIMEOUT}}t.OperationTimeoutError=l;class d extends n.BaseWeb3Error{constructor(){super(...arguments),this.code=i.ERR_OPERATION_ABORT}}t.OperationAbortError=d;class u extends n.BaseWeb3Error{constructor(e,t){super(e),this.code=i.ERR_ABI_ENCODING,this.props=null!=t?t:{}}}t.AbiError=u;class h extends n.BaseWeb3Error{constructor(e){super(`A plugin with the namespace: ${e} has already been registered.`),this.code=i.ERR_EXISTING_PLUGIN_NAMESPACE}}t.ExistingPluginNamespaceError=h},7108:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Web3WSProviderError=t.SubscriptionError=t.InvalidClientError=t.InvalidProviderError=t.ProviderError=void 0;const i=r(7639),n=r(3685);class s extends n.BaseWeb3Error{constructor(){super(...arguments),this.code=i.ERR_PROVIDER}}t.ProviderError=s;class a extends n.BaseWeb3Error{constructor(e){super(`Provider with url "${e}" is not set or invalid`),this.clientUrl=e,this.code=i.ERR_INVALID_PROVIDER}}t.InvalidProviderError=a;class o extends n.BaseWeb3Error{constructor(e){super(`Client URL "${e}" is invalid.`),this.code=i.ERR_INVALID_CLIENT}}t.InvalidClientError=o;class c extends n.BaseWeb3Error{constructor(){super(...arguments),this.code=i.ERR_SUBSCRIPTION}}t.SubscriptionError=c;class l extends n.BaseWeb3Error{constructor(){super(...arguments),this.code=i.ERR_WS_PROVIDER}}t.Web3WSProviderError=l},9491:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidResponseError=t.ResponseError=void 0;const i=r(3685),n=r(7639),s=e=>(e=>!(Array.isArray(e)||"2.0"!==e.jsonrpc||!e||void 0!==e.result&&null!==e.result||!("error"in e)||"number"!=typeof e.id&&"string"!=typeof e.id))(e)?e.error.message:"";class a extends i.BaseWeb3Error{constructor(e,t,r){var i;let a;super(null!=t?t:`Returned error: ${Array.isArray(e)?e.map((e=>s(e))).join(","):s(e)}`),this.code=n.ERR_RESPONSE,t||(this.data=Array.isArray(e)?e.map((e=>{var t;return null===(t=e.error)||void 0===t?void 0:t.data})):null===(i=null==e?void 0:e.error)||void 0===i?void 0:i.data),this.request=r,"error"in e?a=e.error:e instanceof Array&&(a=e.map((e=>e.error))),this.innerError=a}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{data:this.data,request:this.request})}}t.ResponseError=a,t.InvalidResponseError=class extends a{constructor(e,t){let r;super(e,void 0,t),this.code=n.ERR_INVALID_RESPONSE,"error"in e?r=e.error:e instanceof Array&&(r=e.map((e=>e.error))),this.innerError=r}}},4032:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RpcErrorMessages=t.genericRpcErrorMessageTemplate=void 0;const i=r(7639);t.genericRpcErrorMessageTemplate="An Rpc error has occured with a code of *code*",t.RpcErrorMessages={[i.ERR_RPC_INVALID_JSON]:{message:"Parse error",description:"Invalid JSON"},[i.ERR_RPC_INVALID_REQUEST]:{message:"Invalid request",description:"JSON is not a valid request object\t"},[i.ERR_RPC_INVALID_METHOD]:{message:"Method not found",description:"Method does not exist\t"},[i.ERR_RPC_INVALID_PARAMS]:{message:"Invalid params",description:"Invalid method parameters"},[i.ERR_RPC_INTERNAL_ERROR]:{message:"Internal error",description:"Internal JSON-RPC error"},[i.ERR_RPC_INVALID_INPUT]:{message:"Invalid input",description:"Missing or invalid parameters"},[i.ERR_RPC_MISSING_RESOURCE]:{message:"Resource not found",description:"Requested resource not found"},[i.ERR_RPC_UNAVAILABLE_RESOURCE]:{message:"Resource unavailable",description:"Requested resource not available"},[i.ERR_RPC_TRANSACTION_REJECTED]:{message:"Transaction rejected",description:"Transaction creation failed"},[i.ERR_RPC_UNSUPPORTED_METHOD]:{message:"Method not supported",description:"Method is not implemented"},[i.ERR_RPC_LIMIT_EXCEEDED]:{message:"Limit exceeded",description:"Request exceeds defined limit"},[i.ERR_RPC_NOT_SUPPORTED]:{message:"JSON-RPC version not supported",description:"Version of JSON-RPC protocol is not supported"},[i.JSONRPC_ERR_REJECTED_REQUEST]:{name:"User Rejected Request",message:"The user rejected the request."},[i.JSONRPC_ERR_UNAUTHORIZED]:{name:"Unauthorized",message:"The requested method and/or account has not been authorized by the user."},[i.JSONRPC_ERR_UNSUPPORTED_METHOD]:{name:"Unsupported Method",message:"The Provider does not support the requested method."},[i.JSONRPC_ERR_DISCONNECTED]:{name:"Disconnected",message:"The Provider is disconnected from all chains."},[i.JSONRPC_ERR_CHAIN_DISCONNECTED]:{name:"Chain Disconnected",message:"The Provider is not connected to the requested chain."},"0-999":{name:"",message:"Not used."},1e3:{name:"Normal Closure",message:"The connection successfully completed the purpose for which it was created."},1001:{name:"Going Away",message:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{name:"Protocol error",message:"The endpoint is terminating the connection due to a protocol error."},1003:{name:"Unsupported Data",message:"The connection is being terminated because the endpoint received data of a type it cannot accept. (For example, a text-only endpoint received binary data.)"},1004:{name:"Reserved",message:"Reserved. A meaning might be defined in the future."},1005:{name:"No Status Rcvd",message:"Reserved. Indicates that no status code was provided even though one was expected."},1006:{name:"Abnormal Closure",message:"Reserved. Indicates that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{name:"Invalid frame payload data",message:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{name:"Policy Violation",message:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{name:"Message Too Big",message:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{name:"Mandatory Ext.",message:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{name:"Internal Error",message:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{name:"Service Restart",message:"The server is terminating the connection because it is restarting."},1013:{name:"Try Again Later",message:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{name:"Bad Gateway",message:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{name:"TLS handshake",message:"Reserved. Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},"1016-2999":{name:"",message:"For definition by future revisions of the WebSocket Protocol specification, and for definition by extension specifications."},"3000-3999":{name:"",message:"For use by libraries, frameworks, and applications. These status codes are registered directly with IANA. The interpretation of these codes is undefined by the WebSocket protocol."},"4000-4999":{name:"",message:"For private use, and thus can't be registered. Such codes can be used by prior agreements between WebSocket applications. The interpretation of these codes is undefined by the WebSocket protocol."}}},655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rpcErrorsMap=t.LimitExceededError=t.TransactionRejectedError=t.VersionNotSupportedError=t.ResourcesNotFoundError=t.ResourceUnavailableError=t.MethodNotSupported=t.InvalidInputError=t.InternalError=t.InvalidParamsError=t.MethodNotFoundError=t.InvalidRequestError=t.ParseError=t.EIP1193ProviderRpcError=t.RpcError=void 0;const i=r(3685),n=r(7639),s=r(4032);class a extends i.BaseWeb3Error{constructor(e,t){super(null!=t?t:s.genericRpcErrorMessageTemplate.replace("*code*",e.error.code.toString())),this.code=e.error.code,this.id=e.id,this.jsonrpc=e.jsonrpc,this.jsonRpcError=e.error}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{error:this.jsonRpcError,id:this.id,jsonRpc:this.jsonrpc})}}t.RpcError=a;class o extends i.BaseWeb3Error{constructor(e,t){var r,i,n,a;if(e)if(null===(r=s.RpcErrorMessages[e])||void 0===r?void 0:r.message)super(s.RpcErrorMessages[e].message);else{const t=Object.keys(s.RpcErrorMessages).find((t=>"string"==typeof t&&e>=parseInt(t.split("-")[0],10)&&e<=parseInt(t.split("-")[1],10)));super(null!==(n=null===(i=s.RpcErrorMessages[null!=t?t:""])||void 0===i?void 0:i.message)&&void 0!==n?n:s.genericRpcErrorMessageTemplate.replace("*code*",null!==(a=null==e?void 0:e.toString())&&void 0!==a?a:'""'))}else super();this.code=e,this.data=t}}t.EIP1193ProviderRpcError=o;class c extends a{constructor(e){super(e,s.RpcErrorMessages[n.ERR_RPC_INVALID_JSON].message),this.code=n.ERR_RPC_INVALID_JSON}}t.ParseError=c;class l extends a{constructor(e){super(e,s.RpcErrorMessages[n.ERR_RPC_INVALID_REQUEST].message),this.code=n.ERR_RPC_INVALID_REQUEST}}t.InvalidRequestError=l;class d extends a{constructor(e){super(e,s.RpcErrorMessages[n.ERR_RPC_INVALID_METHOD].message),this.code=n.ERR_RPC_INVALID_METHOD}}t.MethodNotFoundError=d;class u extends a{constructor(e){super(e,s.RpcErrorMessages[n.ERR_RPC_INVALID_PARAMS].message),this.code=n.ERR_RPC_INVALID_PARAMS}}t.InvalidParamsError=u;class h extends a{constructor(e){super(e,s.RpcErrorMessages[n.ERR_RPC_INTERNAL_ERROR].message),this.code=n.ERR_RPC_INTERNAL_ERROR}}t.InternalError=h;class p extends a{constructor(e){super(e,s.RpcErrorMessages[n.ERR_RPC_INVALID_INPUT].message),this.code=n.ERR_RPC_INVALID_INPUT}}t.InvalidInputError=p;class f extends a{constructor(e){super(e,s.RpcErrorMessages[n.ERR_RPC_UNSUPPORTED_METHOD].message),this.code=n.ERR_RPC_UNSUPPORTED_METHOD}}t.MethodNotSupported=f;class g extends a{constructor(e){super(e,s.RpcErrorMessages[n.ERR_RPC_UNAVAILABLE_RESOURCE].message),this.code=n.ERR_RPC_UNAVAILABLE_RESOURCE}}t.ResourceUnavailableError=g;class m extends a{constructor(e){super(e,s.RpcErrorMessages[n.ERR_RPC_MISSING_RESOURCE].message),this.code=n.ERR_RPC_MISSING_RESOURCE}}t.ResourcesNotFoundError=m;class y extends a{constructor(e){super(e,s.RpcErrorMessages[n.ERR_RPC_NOT_SUPPORTED].message),this.code=n.ERR_RPC_NOT_SUPPORTED}}t.VersionNotSupportedError=y;class v extends a{constructor(e){super(e,s.RpcErrorMessages[n.ERR_RPC_TRANSACTION_REJECTED].message),this.code=n.ERR_RPC_TRANSACTION_REJECTED}}t.TransactionRejectedError=v;class b extends a{constructor(e){super(e,s.RpcErrorMessages[n.ERR_RPC_LIMIT_EXCEEDED].message),this.code=n.ERR_RPC_LIMIT_EXCEEDED}}t.LimitExceededError=b,t.rpcErrorsMap=new Map,t.rpcErrorsMap.set(n.ERR_RPC_INVALID_JSON,{error:c}),t.rpcErrorsMap.set(n.ERR_RPC_INVALID_REQUEST,{error:l}),t.rpcErrorsMap.set(n.ERR_RPC_INVALID_METHOD,{error:d}),t.rpcErrorsMap.set(n.ERR_RPC_INVALID_PARAMS,{error:u}),t.rpcErrorsMap.set(n.ERR_RPC_INTERNAL_ERROR,{error:h}),t.rpcErrorsMap.set(n.ERR_RPC_INVALID_INPUT,{error:p}),t.rpcErrorsMap.set(n.ERR_RPC_UNSUPPORTED_METHOD,{error:f}),t.rpcErrorsMap.set(n.ERR_RPC_UNAVAILABLE_RESOURCE,{error:g}),t.rpcErrorsMap.set(n.ERR_RPC_TRANSACTION_REJECTED,{error:v}),t.rpcErrorsMap.set(n.ERR_RPC_MISSING_RESOURCE,{error:m}),t.rpcErrorsMap.set(n.ERR_RPC_NOT_SUPPORTED,{error:y}),t.rpcErrorsMap.set(n.ERR_RPC_LIMIT_EXCEEDED,{error:b})},1066:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaFormatError=void 0;const i=r(7639),n=r(3685);class s extends n.BaseWeb3Error{constructor(e){super(`Format for the type ${e} is unsupported`),this.type=e,this.code=i.ERR_SCHEMA_FORMAT}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{type:this.type})}}t.SchemaFormatError=s},1075:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SignatureError=void 0;const i=r(7639),n=r(3685);class s extends n.InvalidValueError{constructor(){super(...arguments),this.code=i.ERR_SIGNATURE_FAILED}}t.SignatureError=s},8450:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidPropertiesForTransactionTypeError=t.LocalWalletNotAvailableError=t.TransactionSigningError=t.TransactionReceiptMissingBlockNumberError=t.TransactionMissingReceiptOrBlockHashError=t.TransactionBlockTimeoutError=t.TransactionPollingTimeoutError=t.TransactionSendTimeoutError=t.TransactionDataAndInputError=t.UnsupportedTransactionTypeError=t.Eip1559NotSupportedError=t.UnableToPopulateNonceError=t.InvalidNonceOrChainIdError=t.InvalidTransactionObjectError=t.UnsupportedFeeMarketError=t.Eip1559GasPriceError=t.InvalidMaxPriorityFeePerGasOrMaxFeePerGas=t.InvalidGasOrGasPrice=t.TransactionGasMismatchError=t.TransactionGasMismatchInnerError=t.MissingGasError=t.MissingGasInnerError=t.MissingChainOrHardforkError=t.CommonOrChainAndHardforkError=t.HardforkMismatchError=t.ChainMismatchError=t.ChainIdMismatchError=t.MissingCustomChainIdError=t.MissingCustomChainError=t.InvalidTransactionCall=t.InvalidTransactionWithReceiver=t.InvalidTransactionWithSender=t.TransactionNotFound=t.UndefinedRawTransactionError=t.TransactionOutOfGasError=t.TransactionRevertedWithoutReasonError=t.ContractCodeNotStoredError=t.NoContractAddressFoundError=t.TransactionRevertWithCustomError=t.TransactionRevertInstructionError=t.RevertInstructionError=t.TransactionError=void 0;const i=r(7639),n=r(3685);class s extends n.BaseWeb3Error{constructor(e,t){super(e),this.receipt=t,this.code=i.ERR_TX}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{receipt:this.receipt})}}t.TransactionError=s;class a extends n.BaseWeb3Error{constructor(e,t){super(`Your request got reverted with the following reason string: ${e}`),this.reason=e,this.signature=t,this.code=i.ERR_TX_REVERT_INSTRUCTION}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,signature:this.signature})}}t.RevertInstructionError=a;class o extends n.BaseWeb3Error{constructor(e,t,r,s){super("Transaction has been reverted by the EVM"+(void 0===r?"":`:\n ${n.BaseWeb3Error.convertToString(r)}`)),this.reason=e,this.signature=t,this.receipt=r,this.data=s,this.code=i.ERR_TX_REVERT_TRANSACTION}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,signature:this.signature,receipt:this.receipt,data:this.data})}}t.TransactionRevertInstructionError=o,t.TransactionRevertWithCustomError=class extends o{constructor(e,t,r,n,s,a,o){super(e),this.reason=e,this.customErrorName=t,this.customErrorDecodedSignature=r,this.customErrorArguments=n,this.signature=s,this.receipt=a,this.data=o,this.code=i.ERR_TX_REVERT_TRANSACTION_CUSTOM_ERROR}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,customErrorName:this.customErrorName,customErrorDecodedSignature:this.customErrorDecodedSignature,customErrorArguments:this.customErrorArguments,signature:this.signature,receipt:this.receipt,data:this.data})}},t.NoContractAddressFoundError=class extends s{constructor(e){super("The transaction receipt didn't contain a contract address.",e),this.code=i.ERR_TX_NO_CONTRACT_ADDRESS}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{receipt:this.receipt})}},t.ContractCodeNotStoredError=class extends s{constructor(e){super("The contract code couldn't be stored, please check your gas limit.",e),this.code=i.ERR_TX_CONTRACT_NOT_STORED}},t.TransactionRevertedWithoutReasonError=class extends s{constructor(e){super("Transaction has been reverted by the EVM"+(void 0===e?"":`:\n ${n.BaseWeb3Error.convertToString(e)}`),e),this.code=i.ERR_TX_REVERT_WITHOUT_REASON}},t.TransactionOutOfGasError=class extends s{constructor(e){super(`Transaction ran out of gas. Please provide more gas:\n ${JSON.stringify(e,void 0,2)}`,e),this.code=i.ERR_TX_OUT_OF_GAS}},t.UndefinedRawTransactionError=class extends s{constructor(){super("Raw transaction undefined"),this.code=i.ERR_RAW_TX_UNDEFINED}},t.TransactionNotFound=class extends s{constructor(){super("Transaction not found"),this.code=i.ERR_TX_NOT_FOUND}};class c extends n.InvalidValueError{constructor(e){super(e,"invalid transaction with invalid sender"),this.code=i.ERR_TX_INVALID_SENDER}}t.InvalidTransactionWithSender=c;class l extends n.InvalidValueError{constructor(e){super(e,"invalid transaction with invalid receiver"),this.code=i.ERR_TX_INVALID_RECEIVER}}t.InvalidTransactionWithReceiver=l;class d extends n.InvalidValueError{constructor(e){super(e,"invalid transaction call"),this.code=i.ERR_TX_INVALID_CALL}}t.InvalidTransactionCall=d;class u extends n.InvalidValueError{constructor(){super("MissingCustomChainError","If tx.common is provided it must have tx.common.customChain"),this.code=i.ERR_TX_MISSING_CUSTOM_CHAIN}}t.MissingCustomChainError=u;class h extends n.InvalidValueError{constructor(){super("MissingCustomChainIdError","If tx.common is provided it must have tx.common.customChain and tx.common.customChain.chainId"),this.code=i.ERR_TX_MISSING_CUSTOM_CHAIN_ID}}t.MissingCustomChainIdError=h;class p extends n.InvalidValueError{constructor(e){super(JSON.stringify(e),"Chain Id doesnt match in tx.chainId tx.common.customChain.chainId"),this.code=i.ERR_TX_CHAIN_ID_MISMATCH}}t.ChainIdMismatchError=p;class f extends n.InvalidValueError{constructor(e){super(JSON.stringify(e),"Chain doesnt match in tx.chain tx.common.basechain"),this.code=i.ERR_TX_CHAIN_MISMATCH}}t.ChainMismatchError=f;class g extends n.InvalidValueError{constructor(e){super(JSON.stringify(e),"hardfork doesnt match in tx.hardfork tx.common.hardfork"),this.code=i.ERR_TX_HARDFORK_MISMATCH}}t.HardforkMismatchError=g;class m extends n.InvalidValueError{constructor(){super("CommonOrChainAndHardforkError","Please provide the common object or the chain and hardfork property but not all together."),this.code=i.ERR_TX_INVALID_CHAIN_INFO}}t.CommonOrChainAndHardforkError=m;class y extends n.InvalidValueError{constructor(e){var t,r;super("MissingChainOrHardforkError",`When specifying chain and hardfork, both values must be defined. Received "chain": ${null!==(t=e.chain)&&void 0!==t?t:"undefined"}, "hardfork": ${null!==(r=e.hardfork)&&void 0!==r?r:"undefined"}`),this.code=i.ERR_TX_MISSING_CHAIN_INFO}}t.MissingChainOrHardforkError=y;class v extends n.BaseWeb3Error{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions'),this.code=i.ERR_TX_MISSING_GAS_INNER_ERROR}}t.MissingGasInnerError=v;class b extends n.InvalidValueError{constructor(e){var t,r,n,s;super(`gas: ${null!==(t=e.gas)&&void 0!==t?t:"undefined"}, gasPrice: ${null!==(r=e.gasPrice)&&void 0!==r?r:"undefined"}, maxPriorityFeePerGas: ${null!==(n=e.maxPriorityFeePerGas)&&void 0!==n?n:"undefined"}, maxFeePerGas: ${null!==(s=e.maxFeePerGas)&&void 0!==s?s:"undefined"}`,'"gas" is missing'),this.code=i.ERR_TX_MISSING_GAS,this.innerError=new v}}t.MissingGasError=b;class T extends n.BaseWeb3Error{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions, not both'),this.code=i.ERR_TX_GAS_MISMATCH_INNER_ERROR}}t.TransactionGasMismatchInnerError=T;class _ extends n.InvalidValueError{constructor(e){var t,r,n,s;super(`gas: ${null!==(t=e.gas)&&void 0!==t?t:"undefined"}, gasPrice: ${null!==(r=e.gasPrice)&&void 0!==r?r:"undefined"}, maxPriorityFeePerGas: ${null!==(n=e.maxPriorityFeePerGas)&&void 0!==n?n:"undefined"}, maxFeePerGas: ${null!==(s=e.maxFeePerGas)&&void 0!==s?s:"undefined"}`,"transaction must specify legacy or fee market gas properties, not both"),this.code=i.ERR_TX_GAS_MISMATCH,this.innerError=new T}}t.TransactionGasMismatchError=_;class k extends n.InvalidValueError{constructor(e){var t,r;super(`gas: ${null!==(t=e.gas)&&void 0!==t?t:"undefined"}, gasPrice: ${null!==(r=e.gasPrice)&&void 0!==r?r:"undefined"}`,"Gas or gasPrice is lower than 0"),this.code=i.ERR_TX_INVALID_LEGACY_GAS}}t.InvalidGasOrGasPrice=k;class E extends n.InvalidValueError{constructor(e){var t,r;super(`maxPriorityFeePerGas: ${null!==(t=e.maxPriorityFeePerGas)&&void 0!==t?t:"undefined"}, maxFeePerGas: ${null!==(r=e.maxFeePerGas)&&void 0!==r?r:"undefined"}`,"maxPriorityFeePerGas or maxFeePerGas is lower than 0"),this.code=i.ERR_TX_INVALID_FEE_MARKET_GAS}}t.InvalidMaxPriorityFeePerGasOrMaxFeePerGas=E;class w extends n.InvalidValueError{constructor(e){super(e,"eip-1559 transactions don't support gasPrice"),this.code=i.ERR_TX_INVALID_FEE_MARKET_GAS_PRICE}}t.Eip1559GasPriceError=w;class A extends n.InvalidValueError{constructor(e){var t,r;super(`maxPriorityFeePerGas: ${null!==(t=e.maxPriorityFeePerGas)&&void 0!==t?t:"undefined"}, maxFeePerGas: ${null!==(r=e.maxFeePerGas)&&void 0!==r?r:"undefined"}`,"pre-eip-1559 transaction don't support maxFeePerGas/maxPriorityFeePerGas"),this.code=i.ERR_TX_INVALID_LEGACY_FEE_MARKET}}t.UnsupportedFeeMarketError=A;class I extends n.InvalidValueError{constructor(e){super(e,"invalid transaction object"),this.code=i.ERR_TX_INVALID_OBJECT}}t.InvalidTransactionObjectError=I;class R extends n.InvalidValueError{constructor(e){var t,r;super(`nonce: ${null!==(t=e.nonce)&&void 0!==t?t:"undefined"}, chainId: ${null!==(r=e.chainId)&&void 0!==r?r:"undefined"}`,"Nonce or chainId is lower than 0"),this.code=i.ERR_TX_INVALID_NONCE_OR_CHAIN_ID}}t.InvalidNonceOrChainIdError=R;class S extends n.InvalidValueError{constructor(){super("UnableToPopulateNonceError","unable to populate nonce, no from address available"),this.code=i.ERR_TX_UNABLE_TO_POPULATE_NONCE}}t.UnableToPopulateNonceError=S;class C extends n.InvalidValueError{constructor(){super("Eip1559NotSupportedError","Network doesn't support eip-1559"),this.code=i.ERR_TX_UNSUPPORTED_EIP_1559}}t.Eip1559NotSupportedError=C;class x extends n.InvalidValueError{constructor(e){super(e,"unsupported transaction type"),this.code=i.ERR_TX_UNSUPPORTED_TYPE}}t.UnsupportedTransactionTypeError=x;class P extends n.InvalidValueError{constructor(e){var t,r;super(`data: ${null!==(t=e.data)&&void 0!==t?t:"undefined"}, input: ${null!==(r=e.input)&&void 0!==r?r:"undefined"}`,'You can\'t have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.'),this.code=i.ERR_TX_DATA_AND_INPUT}}t.TransactionDataAndInputError=P;class O extends n.BaseWeb3Error{constructor(e){super(`The connected Ethereum Node did not respond within ${e.numberOfSeconds} seconds, please make sure your transaction was properly sent and you are connected to a healthy Node. Be aware that transaction might still be pending or mined!\n\tTransaction Hash: ${e.transactionHash?e.transactionHash.toString():"not available"}`),this.code=i.ERR_TX_SEND_TIMEOUT}}function L(e){return`Please make sure your transaction was properly sent and there are no previous pending transaction for the same account. However, be aware that it might still be mined!\n\tTransaction Hash: ${e?e.toString():"not available"}`}t.TransactionSendTimeoutError=O;class B extends n.BaseWeb3Error{constructor(e){super(`Transaction was not mined within ${e.numberOfSeconds} seconds. ${L(e.transactionHash)}`),this.code=i.ERR_TX_POLLING_TIMEOUT}}t.TransactionPollingTimeoutError=B;class N extends n.BaseWeb3Error{constructor(e){super(`Transaction started at ${e.starterBlockNumber} but was not mined within ${e.numberOfBlocks} blocks. ${L(e.transactionHash)}`),this.code=i.ERR_TX_BLOCK_TIMEOUT}}t.TransactionBlockTimeoutError=N;class M extends n.InvalidValueError{constructor(e){var t,r;super(`receipt: ${JSON.stringify(e.receipt)}, blockHash: ${null===(t=e.blockHash)||void 0===t?void 0:t.toString()}, transactionHash: ${null===(r=e.transactionHash)||void 0===r?void 0:r.toString()}`,"Receipt missing or blockHash null"),this.code=i.ERR_TX_RECEIPT_MISSING_OR_BLOCKHASH_NULL}}t.TransactionMissingReceiptOrBlockHashError=M;class D extends n.InvalidValueError{constructor(e){super(`receipt: ${JSON.stringify(e.receipt)}`,"Receipt missing block number"),this.code=i.ERR_TX_RECEIPT_MISSING_BLOCK_NUMBER}}t.TransactionReceiptMissingBlockNumberError=D;class U extends n.BaseWeb3Error{constructor(e){super(`Invalid signature. "${e}"`),this.code=i.ERR_TX_SIGNING}}t.TransactionSigningError=U;class F extends n.InvalidValueError{constructor(){super("LocalWalletNotAvailableError","Attempted to index account in local wallet, but no wallet is available"),this.code=i.ERR_TX_LOCAL_WALLET_NOT_AVAILABLE}}t.LocalWalletNotAvailableError=F;class j extends n.BaseWeb3Error{constructor(e,t){const r=[];e.forEach((e=>r.push(e.keyword))),super(`The following properties are invalid for the transaction type ${t}: ${r.join(", ")}`),this.code=i.ERR_TX_INVALID_PROPERTIES_FOR_TYPE}}t.InvalidPropertiesForTransactionTypeError=j},4618:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidTypeAbiInputError=t.InvalidBlockError=t.InvalidLargeValueError=t.InvalidSizeError=t.InvalidUnsignedIntegerError=t.InvalidBooleanError=t.InvalidTypeError=t.NibbleWidthError=t.HexProcessingError=t.InvalidUnitError=t.InvalidStringError=t.InvalidAddressError=t.InvalidNumberError=t.InvalidBytesError=void 0;const i=r(7639),n=r(3685);class s extends n.InvalidValueError{constructor(e){super(e,"can not parse as byte data"),this.code=i.ERR_INVALID_BYTES}}t.InvalidBytesError=s;class a extends n.InvalidValueError{constructor(e){super(e,"can not parse as number data"),this.code=i.ERR_INVALID_NUMBER}}t.InvalidNumberError=a;class o extends n.InvalidValueError{constructor(e){super(e,"invalid ethereum address"),this.code=i.ERR_INVALID_ADDRESS}}t.InvalidAddressError=o;class c extends n.InvalidValueError{constructor(e){super(e,"not a valid string"),this.code=i.ERR_INVALID_STRING}}t.InvalidStringError=c;class l extends n.InvalidValueError{constructor(e){super(e,"invalid unit"),this.code=i.ERR_INVALID_UNIT}}t.InvalidUnitError=l;class d extends n.InvalidValueError{constructor(e){super(e,"can not be converted to hex"),this.code=i.ERR_INVALID_HEX}}t.HexProcessingError=d;class u extends n.InvalidValueError{constructor(e){super(e,"value greater than the nibble width"),this.code=i.ERR_INVALID_NIBBLE_WIDTH}}t.NibbleWidthError=u;class h extends n.InvalidValueError{constructor(e){super(e,"invalid type, type not supported"),this.code=i.ERR_INVALID_TYPE}}t.InvalidTypeError=h;class p extends n.InvalidValueError{constructor(e){super(e,"not a valid boolean."),this.code=i.ERR_INVALID_BOOLEAN}}t.InvalidBooleanError=p;class f extends n.InvalidValueError{constructor(e){super(e,"not a valid unsigned integer."),this.code=i.ERR_INVALID_UNSIGNED_INTEGER}}t.InvalidUnsignedIntegerError=f;class g extends n.InvalidValueError{constructor(e){super(e,"invalid size given."),this.code=i.ERR_INVALID_SIZE}}t.InvalidSizeError=g;class m extends n.InvalidValueError{constructor(e){super(e,"value is larger than size."),this.code=i.ERR_INVALID_LARGE_VALUE}}t.InvalidLargeValueError=m;class y extends n.InvalidValueError{constructor(e){super(e,"invalid string given"),this.code=i.ERR_INVALID_BLOCK}}t.InvalidBlockError=y;class v extends n.InvalidValueError{constructor(e){super(e,"components found but type is not tuple"),this.code=i.ERR_INVALID_TYPE_ABI}}t.InvalidTypeAbiInputError=v},5071:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(7639),t),n(r(3685),t),n(r(8105),t),n(r(3789),t),n(r(510),t),n(r(1591),t),n(r(7297),t),n(r(7108),t),n(r(1075),t),n(r(8450),t),n(r(4618),t),n(r(9491),t),n(r(3628),t),n(r(655),t),n(r(4032),t),n(r(1066),t)},3685:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidValueError=t.BaseWeb3Error=void 0;class r extends Error{constructor(e,t){super(e),this.innerError=t,this.name=this.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(new.target.constructor):this.stack=(new Error).stack}static convertToString(e,t=!1){if(null==e)return"undefined";const r=JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString():t));return t&&["bigint","string"].includes(typeof e)?r.replace(/['\\"]+/g,""):r}toJSON(){return{name:this.name,code:this.code,message:this.message,innerError:this.innerError}}}t.BaseWeb3Error=r,t.InvalidValueError=class extends r{constructor(e,t){super(`Invalid value given "${r.convertToString(e,!0)}". Error: ${t}.`),this.name=this.constructor.name}}},9722:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeErrorSignature=void 0;const i=r(9634),n=r(5071),s=r(1583);t.encodeErrorSignature=e=>{if("string"!=typeof e&&!(0,s.isAbiErrorFragment)(e))throw new n.AbiError("Invalid parameter value in encodeErrorSignature");let t;return t=!e||"function"!=typeof e&&"object"!=typeof e?e:(0,s.jsonInterfaceMethodToString)(e),(0,i.sha3Raw)(t)}},5893:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeEventSignature=void 0;const i=r(9634),n=r(5071),s=r(1583);t.encodeEventSignature=e=>{if("string"!=typeof e&&!(0,s.isAbiEventFragment)(e))throw new n.AbiError("Invalid parameter value in encodeEventSignature");let t;return t=!e||"function"!=typeof e&&"object"!=typeof e?e:(0,s.jsonInterfaceMethodToString)(e),(0,i.sha3Raw)(t)}},3249:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeFunctionCall=t.encodeFunctionSignature=void 0;const i=r(5071),n=r(9634),s=r(1583),a=r(4566);t.encodeFunctionSignature=e=>{if("string"!=typeof e&&!(0,s.isAbiFunctionFragment)(e))throw new i.AbiError("Invalid parameter value in encodeFunctionSignature");let t;return t=!e||"function"!=typeof e&&"object"!=typeof e?e:(0,s.jsonInterfaceMethodToString)(e),(0,n.sha3Raw)(t).slice(0,10)},t.encodeFunctionCall=(e,r)=>{var n;if(!(0,s.isAbiFunctionFragment)(e))throw new i.AbiError("Invalid parameter value in encodeFunctionCall");return`${(0,t.encodeFunctionSignature)(e)}${(0,a.encodeParameters)(null!==(n=e.inputs)&&void 0!==n?n:[],null!=r?r:[]).replace("0x","")}`}},734:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeLog=void 0;const i=r(4566),n=["bool","string","int","uint","address","fixed","ufixed"];t.decodeLog=(e,t,r)=>{const s=Array.isArray(r)?r:[r],a={},o={};for(const[t,r]of e.entries())r.indexed?a[t]=r:o[t]=r;const c=t?(0,i.decodeParametersWith)(Object.values(o),t,!0):{__length__:0},l=s.length-Object.keys(a).length,d=Object.values(a).map(((e,t)=>{return n.some((t=>e.type.startsWith(t)))?(r=e.type,a=s[t+l],"string"===r?a:(0,i.decodeParameter)(r,a)):s[t+l];var r,a})),u={__length__:0};let h=0,p=0;for(const[t,r]of e.entries())u[t]="string"===r.type?"":void 0,a[t]&&(u[t]=d[h],h+=1),o[t]&&(u[t]=c[String(p)],p+=1),r.name&&(u[r.name]=u[t]),u.__length__+=1;return u}},4566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeParameter=t.decodeParameters=t.decodeParametersWith=t.encodeParameter=t.encodeParameters=void 0;const i=r(5071),n=r(6729),s=r(4581);t.encodeParameters=(e,t)=>(0,s.encodeParameters)(e,t),t.encodeParameter=(e,r)=>(0,t.encodeParameters)([e],[r]),t.decodeParametersWith=(e,t,r)=>{try{if(e.length>0&&(!t||"0x"===t||"0X"===t))throw new i.AbiError("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return(0,n.decodeParameters)(e,`0x${t.replace(/0x/i,"")}`,r)}catch(e){throw new i.AbiError(`Parameter decoding error: ${e.message}`,{internalErr:e})}},t.decodeParameters=(e,r)=>(0,t.decodeParametersWith)(e,r,!1),t.decodeParameter=(e,r)=>(0,t.decodeParameters)([e],r)[0]},1691:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeAddress=t.encodeAddress=void 0;const i=r(5071),n=r(9634),s=r(7345),a=r(3852),o=a.WORD_SIZE-20;t.encodeAddress=function(e,t){if("string"!=typeof t)throw new i.AbiError("address type expects string as input type",{value:t,name:e.name,type:e.type});let r=t.toLowerCase();if(r.startsWith("0x")||(r=`0x${r}`),!(0,s.isAddress)(r))throw new i.AbiError("provided input is not valid address",{value:t,name:e.name,type:e.type});const n=s.utils.hexToUint8Array(r),c=(0,a.alloc)(a.WORD_SIZE);return c.set(n,o),{dynamic:!1,encoded:c}},t.decodeAddress=function(e,t){const r=t.subarray(o,a.WORD_SIZE);if(20!==r.length)throw new i.AbiError("Invalid decoding input, not enough bytes to decode address",{bytes:t});const c=s.utils.uint8ArrayToHexString(r);return{result:(0,n.toChecksumAddress)(c),encoded:t.subarray(a.WORD_SIZE),consumed:a.WORD_SIZE}}},7064:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeArray=t.encodeArray=void 0;const i=r(5071),n=r(9634),s=r(5555),a=r(3852),o=r(8809),c=r(5433);t.encodeArray=function(e,t){if(!Array.isArray(t))throw new i.AbiError("Expected value to be array",{abi:e,values:t});const{size:r,param:o}=(0,a.extractArrayType)(e),l=t.map((e=>(0,s.encodeParamFromAbiParameter)(o,e))),d=-1===r,u=l.length>0&&l[0].dynamic;if(!d&&t.length!==r)throw new i.AbiError("Given arguments count doesn't match array length",{arrayLength:r,argumentsLength:t.length});if(d||u){const e=(0,c.encodeDynamicParams)(l);if(d){const t=(0,s.encodeNumber)({type:"uint256",name:""},l.length).encoded;return{dynamic:!0,encoded:l.length>0?(0,n.uint8ArrayConcat)(t,e):t}}return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:(0,n.uint8ArrayConcat)(...l.map((e=>e.encoded)))}},t.decodeArray=function(e,t){let{size:r,param:i}=(0,a.extractArrayType)(e),n=0;const c=[];let l=t;if(-1===r){const e=(0,o.decodeNumber)({type:"uint32",name:""},t);r=Number(e.result),n=e.consumed,l=e.encoded}if((0,a.isDynamic)(i)){for(let e=0;e<r;e+=1){const t=(0,o.decodeNumber)({type:"uint32",name:""},l.subarray(e*a.WORD_SIZE));n+=t.consumed;const r=(0,s.decodeParamFromAbiParameter)(i,l.subarray(Number(t.result)));n+=r.consumed,c.push(r.result)}return{result:c,encoded:l.subarray(n),consumed:n}}for(let e=0;e<r;e+=1){const e=(0,s.decodeParamFromAbiParameter)(i,t.subarray(n));n+=e.consumed,c.push(e.result)}return{result:c,encoded:t.subarray(n),consumed:n}}},2252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBool=t.encodeBoolean=void 0;const i=r(5071),n=r(9634),s=r(3852),a=r(8809);t.encodeBoolean=function(e,t){let r;try{r=(0,n.toBool)(t)}catch(r){if(r instanceof i.InvalidBooleanError)throw new i.AbiError("provided input is not valid boolean value",{type:e.type,value:t,name:e.name})}return(0,a.encodeNumber)({type:"uint8",name:""},Number(r))},t.decodeBool=function(e,t){const r=(0,a.decodeNumber)({type:"uint8",name:""},t);if(r.result>1||r.result<0)throw new i.AbiError("Invalid boolean value encoded",{boolBytes:t.subarray(0,s.WORD_SIZE),numberResult:r});return{result:r.result===BigInt(1),encoded:r.encoded,consumed:s.WORD_SIZE}}},7144:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBytes=t.encodeBytes=void 0;const i=r(5071),n=r(9634),s=r(7345),a=r(3852),o=r(8809);t.encodeBytes=function(e,t){if("string"==typeof t&&t.length%2!=0&&(t+="0"),!(0,s.isBytes)(t))throw new i.AbiError("provided input is not valid bytes value",{type:e.type,value:t,name:e.name});const r=(0,n.bytesToUint8Array)(t),[,c]=e.type.split("bytes");if(c){if(Number(c)>32||Number(c)<1)throw new i.AbiError("invalid bytes type. Static byte type can have between 1 and 32 bytes",{type:e.type});if(Number(c)<r.length)throw new i.AbiError("provided input size is different than type size",{type:e.type,value:t,name:e.name});const n=(0,a.alloc)(a.WORD_SIZE);return n.set(r),{dynamic:!1,encoded:n}}const l=Math.ceil(r.length/a.WORD_SIZE),d=(0,a.alloc)(a.WORD_SIZE+l*a.WORD_SIZE);return d.set((0,o.encodeNumber)({type:"uint32",name:""},r.length).encoded),d.set(r,a.WORD_SIZE),{dynamic:!0,encoded:d}},t.decodeBytes=function(e,t){const[,r]=e.type.split("bytes");let s=Number(r),c=t,l=1,d=0;if(!s){const e=(0,o.decodeNumber)({type:"uint32",name:""},c);s=Number(e.result),d+=e.consumed,c=e.encoded,l=Math.ceil(s/a.WORD_SIZE)}if(s>t.length)throw new i.AbiError("there is not enough data to decode",{type:e.type,encoded:t,size:s});return{result:(0,n.bytesToHex)(c.subarray(0,s)),encoded:c.subarray(l*a.WORD_SIZE),consumed:d+l*a.WORD_SIZE}}},5555:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeParamFromAbiParameter=t.encodeParamFromAbiParameter=t.decodeArray=t.encodeArray=t.decodeTuple=t.encodeTuple=t.decodeString=t.encodeString=t.decodeNumber=t.encodeNumber=t.decodeBytes=t.encodeBytes=t.decodeBool=t.encodeBoolean=t.decodeAddress=t.encodeAddress=void 0;const i=r(1691),n=r(2252),s=r(7144),a=r(8809),o=r(8574),c=r(4759),l=r(7064);var d=r(1691);Object.defineProperty(t,"encodeAddress",{enumerable:!0,get:function(){return d.encodeAddress}}),Object.defineProperty(t,"decodeAddress",{enumerable:!0,get:function(){return d.decodeAddress}});var u=r(2252);Object.defineProperty(t,"encodeBoolean",{enumerable:!0,get:function(){return u.encodeBoolean}}),Object.defineProperty(t,"decodeBool",{enumerable:!0,get:function(){return u.decodeBool}});var h=r(7144);Object.defineProperty(t,"encodeBytes",{enumerable:!0,get:function(){return h.encodeBytes}}),Object.defineProperty(t,"decodeBytes",{enumerable:!0,get:function(){return h.decodeBytes}});var p=r(8809);Object.defineProperty(t,"encodeNumber",{enumerable:!0,get:function(){return p.encodeNumber}}),Object.defineProperty(t,"decodeNumber",{enumerable:!0,get:function(){return p.decodeNumber}});var f=r(8574);Object.defineProperty(t,"encodeString",{enumerable:!0,get:function(){return f.encodeString}}),Object.defineProperty(t,"decodeString",{enumerable:!0,get:function(){return f.decodeString}});var g=r(4759);Object.defineProperty(t,"encodeTuple",{enumerable:!0,get:function(){return g.encodeTuple}}),Object.defineProperty(t,"decodeTuple",{enumerable:!0,get:function(){return g.decodeTuple}});var m=r(7064);Object.defineProperty(t,"encodeArray",{enumerable:!0,get:function(){return m.encodeArray}}),Object.defineProperty(t,"decodeArray",{enumerable:!0,get:function(){return m.decodeArray}}),t.encodeParamFromAbiParameter=function(e,t){if("string"===e.type)return(0,o.encodeString)(e,t);if("bool"===e.type)return(0,n.encodeBoolean)(e,t);if("address"===e.type)return(0,i.encodeAddress)(e,t);if("tuple"===e.type)return(0,c.encodeTuple)(e,t);if(e.type.endsWith("]"))return(0,l.encodeArray)(e,t);if(e.type.startsWith("bytes"))return(0,s.encodeBytes)(e,t);if(e.type.startsWith("uint")||e.type.startsWith("int"))return(0,a.encodeNumber)(e,t);throw new Error("Unsupported")},t.decodeParamFromAbiParameter=function(e,t){if("string"===e.type)return(0,o.decodeString)(e,t);if("bool"===e.type)return(0,n.decodeBool)(e,t);if("address"===e.type)return(0,i.decodeAddress)(e,t);if("tuple"===e.type)return(0,c.decodeTuple)(e,t);if(e.type.endsWith("]"))return(0,l.decodeArray)(e,t);if(e.type.startsWith("bytes"))return(0,s.decodeBytes)(e,t);if(e.type.startsWith("uint")||e.type.startsWith("int"))return(0,a.decodeNumber)(e,t);throw new Error("Unsupported")}},8809:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeNumber=t.encodeNumber=void 0;const i=r(5071),n=r(9634),s=r(7345),a=r(3852),o=r(5978),c=BigInt(1)<<BigInt(256);function l(e,t=a.WORD_SIZE){let r;return r=e<0?(c+e).toString(16):e.toString(16),r=(0,n.padLeft)(r,2*t),s.utils.hexToUint8Array(r)}t.encodeNumber=function(e,t){let r;try{r=(0,n.toBigInt)(t)}catch(r){throw new i.AbiError("provided input is not number value",{type:e.type,value:t,name:e.name})}const s=o.numberLimits.get(e.type);if(!s)throw new i.AbiError("provided abi contains invalid number datatype",{type:e.type});if(r<s.min)throw new i.AbiError("provided input is less then minimum for given type",{type:e.type,value:t,name:e.name,minimum:s.min.toString()});if(r>s.max)throw new i.AbiError("provided input is greater then maximum for given type",{type:e.type,value:t,name:e.name,maximum:s.max.toString()});return{dynamic:!1,encoded:l(r)}},t.decodeNumber=function(e,t){if(t.length<a.WORD_SIZE)throw new i.AbiError("Not enough bytes left to decode",{param:e,bytesLeft:t.length});const r=t.subarray(0,a.WORD_SIZE),n=o.numberLimits.get(e.type);if(!n)throw new i.AbiError("provided abi contains invalid number datatype",{type:e.type});const l=function(e,t){const r=s.utils.uint8ArrayToHexString(e),i=BigInt(r);return i<=t?i:i-c}(r,n.max);if(l<n.min)throw new i.AbiError("decoded value is less then minimum for given type",{type:e.type,value:l,name:e.name,minimum:n.min.toString()});if(l>n.max)throw new i.AbiError("decoded value is greater then maximum for given type",{type:e.type,value:l,name:e.name,maximum:n.max.toString()});return{result:l,encoded:t.subarray(a.WORD_SIZE),consumed:a.WORD_SIZE}}},5978:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numberLimits=void 0,t.numberLimits=new Map;let r=BigInt(256);for(let e=8;e<=256;e+=8)t.numberLimits.set(`uint${e}`,{min:BigInt(0),max:r-BigInt(1)}),t.numberLimits.set(`int${e}`,{min:-r/BigInt(2),max:r/BigInt(2)-BigInt(1)}),r*=BigInt(256);t.numberLimits.set("int",t.numberLimits.get("int256")),t.numberLimits.set("uint",t.numberLimits.get("uint256"))},8574:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeString=t.encodeString=void 0;const i=r(5071),n=r(9634),s=r(7144);t.encodeString=function(e,t){if("string"!=typeof t)throw new i.AbiError("invalid input, should be string",{input:t});const r=(0,n.utf8ToBytes)(t);return(0,s.encodeBytes)({type:"bytes",name:""},r)},t.decodeString=function(e,t){const r=(0,s.decodeBytes)({type:"bytes",name:""},t);return{result:(0,n.hexToUtf8)(r.result),encoded:r.encoded,consumed:r.consumed}}},4759:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeTuple=t.encodeTuple=void 0;const i=r(5071),n=r(9634),s=r(5555),a=r(5433),o=r(3852),c=r(8809);t.encodeTuple=function(e,t){var r,o,c;let l=!1;if(!Array.isArray(t)&&"object"!=typeof t)throw new i.AbiError("param must be either Array or Object",{param:e,input:t});const d=t,u=[];for(let n=0;n<(null!==(o=null===(r=e.components)||void 0===r?void 0:r.length)&&void 0!==o?o:0);n+=1){const r=e.components[n];let a;if(Array.isArray(d)){if(n>=d.length)throw new i.AbiError("input param length missmatch",{param:e,input:t});a=(0,s.encodeParamFromAbiParameter)(r,d[n])}else{const n=d[null!==(c=r.name)&&void 0!==c?c:""];if(null==n)throw new i.AbiError("missing input defined in abi",{param:e,input:t,paramName:r.name});a=(0,s.encodeParamFromAbiParameter)(r,n)}a.dynamic&&(l=!0),u.push(a)}return l?{dynamic:!0,encoded:(0,a.encodeDynamicParams)(u)}:{dynamic:!1,encoded:(0,n.uint8ArrayConcat)(...u.map((e=>e.encoded)))}},t.decodeTuple=function(e,t){const r={__length__:0};let i=0;if(!e.components)return{result:r,encoded:t,consumed:i};let n=0;for(const[a,l]of e.components.entries()){let e;if((0,o.isDynamic)(l)){const r=(0,c.decodeNumber)({type:"uint32",name:""},t.subarray(i));e=(0,s.decodeParamFromAbiParameter)(l,t.subarray(Number(r.result))),i+=r.consumed,n+=e.consumed}else e=(0,s.decodeParamFromAbiParameter)(l,t.subarray(i)),i+=e.consumed;r.__length__+=1,r[a]=e.result,l.name&&""!==l.name&&(r[l.name]=e.result)}return{encoded:t.subarray(i+n),result:r,consumed:i+n}}},5433:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeDynamicParams=void 0;const i=r(9634),n=r(3852),s=r(8809);t.encodeDynamicParams=function(e){let t=0,r=0;const a=[],o=[];for(const r of e)r.dynamic?t+=n.WORD_SIZE:t+=r.encoded.length;for(const i of e)i.dynamic?(a.push((0,s.encodeNumber)({type:"uint256",name:""},t+r)),o.push(i),r+=i.encoded.length):a.push(i);return(0,i.uint8ArrayConcat)(...a.map((e=>e.encoded)),...o.map((e=>e.encoded)))}},6729:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeParameters=void 0;const i=r(7345),n=r(4759),s=r(3852);t.decodeParameters=function(e,t,r){const a=(0,s.toAbiParams)(e),o=i.utils.hexToUint8Array(t);return(0,n.decodeTuple)({type:"tuple",name:"",components:a},o).result}},4581:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeParameters=void 0;const i=r(5071),n=r(7345),s=r(5555),a=r(3852);t.encodeParameters=function(e,t){if(e.length!==t.length)throw new i.AbiError("Invalid number of values received for given ABI",{expected:e.length,received:t.length});const r=(0,a.toAbiParams)(e);return n.utils.uint8ArrayToHexString((0,s.encodeTuple)({type:"tuple",name:"",components:r},t).encoded)}},3852:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDynamic=t.extractArrayType=t.toAbiParams=t.isAbiParameter=t.convertExternalAbiParameter=t.allocUnsafe=t.alloc=t.WORD_SIZE=void 0;const i=r(3879),n=r(5071),s=r(9634),a=r(1583);function o(e){var t,r;return Object.assign(Object.assign({},e),{name:null!==(t=e.name)&&void 0!==t?t:"",components:null===(r=e.components)||void 0===r?void 0:r.map((e=>o(e)))})}function c(e){return!(0,s.isNullish)(e)&&"object"==typeof e&&!(0,s.isNullish)(e.type)&&"string"==typeof e.type}function l(e){const t=e.type.lastIndexOf("["),r=e.type.substring(0,t),i=e.type.substring(t);let s=-1;if("[]"!==i&&(s=Number(i.slice(1,-1)),isNaN(s)))throw new n.AbiError("Invalid fixed array size",{size:i});return{param:{type:r,name:"",components:e.components},size:s}}t.WORD_SIZE=32,t.alloc=function(e=0){var t;if(void 0!==(null===(t=globalThis.Buffer)||void 0===t?void 0:t.alloc)){const t=globalThis.Buffer.alloc(e);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return new Uint8Array(e)},t.allocUnsafe=function(e=0){var t;if(void 0!==(null===(t=globalThis.Buffer)||void 0===t?void 0:t.allocUnsafe)){const t=globalThis.Buffer.allocUnsafe(e);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return new Uint8Array(e)},t.convertExternalAbiParameter=o,t.isAbiParameter=c,t.toAbiParams=function(e){return e.map((e=>{var t;if(c(e))return e;if("string"==typeof e)return o((0,i.parseAbiParameter)(e.replace(/tuple/,"")));if((0,a.isSimplifiedStructFormat)(e)){const r=Object.keys(e)[0],i=(0,a.mapStructNameAndType)(r);return i.name=null!==(t=i.name)&&void 0!==t?t:"",Object.assign(Object.assign({},i),{components:(0,a.mapStructToCoderFormat)(e[r])})}throw new n.AbiError("Invalid abi")}))},t.extractArrayType=l,t.isDynamic=function e(t){var r,i;return!("string"!==t.type&&"bytes"!==t.type&&!t.type.endsWith("[]"))||("tuple"===t.type?null!==(i=null===(r=t.components)||void 0===r?void 0:r.some(e))&&void 0!==i&&i:!!t.type.endsWith("]")&&e(l(t).param))}},5610:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeContractErrorData=void 0;const i=r(9722),n=r(4566),s=r(1583);t.decodeContractErrorData=(e,t)=>{if(null==t?void 0:t.data){let r,a,o;try{const c=t.data.slice(0,10),l=e.find((e=>(0,i.encodeErrorSignature)(e).startsWith(c)));(null==l?void 0:l.inputs)&&(r=l.name,a=(0,s.jsonInterfaceMethodToString)(l),o=(0,n.decodeParameters)([...l.inputs],t.data.substring(10)))}catch(e){console.error(e)}r&&t.setDecodedProperties(r,a,o)}}},6329:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMessage=void 0;const i=r(9634),n=r(4581),s=/^\w+/,a=/^(.*)\[([0-9]*?)]$/,o=(e,t,r=[])=>{const i=t.match(s)[0];return r.includes(i)?r:e.types[i]?[i,...e.types[i].reduce(((t,r)=>[...t,...o(e,r.type,t).filter((e=>!t.includes(e)))]),[])]:r},c=(e,t)=>(0,i.keccak256)(((e,t)=>{const[r,...i]=o(e,t);return[r,...i.sort()].map((t=>`${t}(${e.types[t].map((e=>`${e.type} ${e.name}`))})`)).join("")})(e,t)),l=(e,t,r)=>(0,i.keccak256)(u(e,t,r));t.getMessage=(e,t)=>{const r=`0x1901${l(e,"EIP712Domain",e.domain).substring(2)}${l(e,e.primaryType,e.message).substring(2)}`;return t?(0,i.keccak256)(r):r};const d=(e,t,r)=>{const s=t.match(a);if(s){const t=s[1],a=Number(s[2])||void 0;if(!Array.isArray(r))throw new Error("Cannot encode data: value is not of array type");if(a&&r.length!==a)throw new Error(`Cannot encode data: expected length of ${a}, but got ${r.length}`);const o=r.map((r=>d(e,t,r))),c=o.map((e=>e[0])),l=o.map((e=>e[1]));return["bytes32",(0,i.keccak256)((0,n.encodeParameters)(c,l))]}return e.types[t]?["bytes32",l(e,t,r)]:"string"===t||"bytes"===t?["bytes32",(0,i.keccak256)(r)]:[t,r]},u=(e,t,r)=>{const[s,a]=e.types[t].reduce((([t,n],s)=>{if((0,i.isNullish)(r[s.name])||(0,i.isNullish)(r[s.name]))throw new Error(`Cannot encode data: missing data for '${s.name}'`);const a=r[s.name],[o,c]=d(e,s.type,a);return[[...t,o],[...n,c]]}),[["bytes32"],[c(e,t)]]);return(0,n.encodeParameters)(s,a)}},8381:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.getEncodedEip712Data=void 0,n(r(9722),t),n(r(5893),t),n(r(3249),t),n(r(734),t),n(r(4566),t),n(r(1583),t),n(r(5610),t);var s=r(6329);Object.defineProperty(t,"getEncodedEip712Data",{enumerable:!0,get:function(){return s.getMessage}})},1583:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jsonInterfaceMethodToString=t.flattenTypes=t.formatParam=t.formatOddHexstrings=t.isOddHexstring=t.mapTypes=t.mapStructToCoderFormat=t.mapStructNameAndType=t.isSimplifiedStructFormat=t.isAbiConstructorFragment=t.isAbiFunctionFragment=t.isAbiEventFragment=t.isAbiErrorFragment=t.isAbiFragment=void 0;const i=r(5071),n=r(9634);t.isAbiFragment=e=>!(0,n.isNullish)(e)&&"object"==typeof e&&!(0,n.isNullish)(e.type)&&["function","event","constructor","error"].includes(e.type),t.isAbiErrorFragment=e=>!(0,n.isNullish)(e)&&"object"==typeof e&&!(0,n.isNullish)(e.type)&&"error"===e.type,t.isAbiEventFragment=e=>!(0,n.isNullish)(e)&&"object"==typeof e&&!(0,n.isNullish)(e.type)&&"event"===e.type,t.isAbiFunctionFragment=e=>!(0,n.isNullish)(e)&&"object"==typeof e&&!(0,n.isNullish)(e.type)&&"function"===e.type,t.isAbiConstructorFragment=e=>!(0,n.isNullish)(e)&&"object"==typeof e&&!(0,n.isNullish)(e.type)&&"constructor"===e.type,t.isSimplifiedStructFormat=e=>"object"==typeof e&&void 0===e.components&&void 0===e.name,t.mapStructNameAndType=e=>e.includes("[]")?{type:"tuple[]",name:e.slice(0,-2)}:{type:"tuple",name:e},t.mapStructToCoderFormat=e=>{const r=[];for(const i of Object.keys(e)){const n=e[i];"object"==typeof n?r.push(Object.assign(Object.assign({},(0,t.mapStructNameAndType)(i)),{components:(0,t.mapStructToCoderFormat)(n)})):r.push({name:i,type:e[i]})}return r},t.mapTypes=e=>{const r=[];for(const i of e){let e=i;if("object"==typeof i&&(e=Object.assign({},i)),"object"==typeof i&&"function"===i.type&&(e=Object.assign(Object.assign({},i),{type:"bytes24"})),(0,t.isSimplifiedStructFormat)(e)){const i=Object.keys(e)[0];r.push(Object.assign(Object.assign({},(0,t.mapStructNameAndType)(i)),{components:(0,t.mapStructToCoderFormat)(e[i])}))}else r.push(e)}return r},t.isOddHexstring=e=>"string"==typeof e&&/^(-)?0x[0-9a-f]*$/i.test(e)&&e.length%2==1,t.formatOddHexstrings=e=>(0,t.isOddHexstring)(e)?`0x0${e.substring(2)}`:e,t.formatParam=(e,r)=>{var i;const s="object"!=typeof r||Array.isArray(r)?r:Object.assign({},r);if(s instanceof BigInt)return s.toString(10);if(/^bytes([0-9]*)\[\]$/.exec(e)||/^(u?int)([0-9]*)\[\]$/.exec(e))return[...s].map((r=>(0,t.formatParam)(e.replace("[]",""),r)));let a=/^(u?int)([0-9]*)$/.exec(e);if(a){const e=parseInt(null!==(i=a[2])&&void 0!==i?i:"256",10);if(e/8<s.length)return(0,n.leftPad)(s,e)}if(a=/^bytes([0-9]*)$/.exec(e),a){const e=s instanceof Uint8Array?(0,n.toHex)(s):s,r=parseInt(a[1],10);if(r){let i=2*r;s.startsWith("0x")&&(i+=2);const a=e.length<i?(0,n.rightPad)(s,2*r):e;return(0,t.formatOddHexstrings)(a)}return(0,t.formatOddHexstrings)(e)}return s},t.flattenTypes=(e,r)=>{const n=[];return r.forEach((r=>{if("object"==typeof r.components){if(!r.type.startsWith("tuple"))throw new i.AbiError(`Invalid value given "${r.type}". Error: components found but type is not tuple.`);const s=r.type.indexOf("["),a=s>=0?r.type.substring(s):"",o=(0,t.flattenTypes)(e,r.components);Array.isArray(o)&&e?n.push(`tuple(${o.join(",")})${a}`):e?n.push(`(${o.join()})`):n.push(`(${o.join(",")})${a}`)}else n.push(r.type)})),n},t.jsonInterfaceMethodToString=e=>{var r,i,n,s;return(0,t.isAbiErrorFragment)(e)||(0,t.isAbiEventFragment)(e)||(0,t.isAbiFunctionFragment)(e)?(null===(r=e.name)||void 0===r?void 0:r.includes("("))?e.name:`${null!==(i=e.name)&&void 0!==i?i:""}(${(0,t.flattenTypes)(!1,null!==(n=e.inputs)&&void 0!==n?n:[]).join(",")})`:`(${(0,t.flattenTypes)(!1,null!==(s=e.inputs)&&void 0!==s?s:[]).join(",")})`}},1560:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.create=t.privateKeyToAccount=t.encrypt=t.privateKeyToPublicKey=t.privateKeyToAddress=t.recover=t.recoverTransaction=t.signTransaction=t.sign=t.hashMessage=t.parseAndValidatePrivateKey=void 0;const n=r(3072),s=r(8109),a=r(7002),o=r(5071),c=r(9634),l=r(7345),d=r(4555),u=r(5774),h=r(7668);t.parseAndValidatePrivateKey=(e,t)=>{let r;if(!t&&"string"==typeof e&&(0,l.isHexStrict)(e)&&66!==e.length)throw new o.PrivateKeyLengthError;try{r=e instanceof Uint8Array?e:(0,c.bytesToUint8Array)(e)}catch(e){throw new o.InvalidPrivateKeyError}if(!t&&32!==r.byteLength)throw new o.PrivateKeyLengthError;return r},t.hashMessage=e=>{const t=(0,l.isHexStrict)(e)?e:(0,c.utf8ToHex)(e),r=(0,c.hexToBytes)(t),i=(0,c.hexToBytes)((0,c.fromUtf8)(`Ethereum Signed Message:\n${r.byteLength}`)),n=(0,c.uint8ArrayConcat)(i,r);return(0,c.sha3Raw)(n)},t.sign=(e,r)=>{const i=(0,t.parseAndValidatePrivateKey)(r),n=(0,t.hashMessage)(e),s=d.secp256k1.sign(n.substring(2),i),a=s.toCompactRawBytes(),o=s.r.toString(16).padStart(64,"0"),l=s.s.toString(16).padStart(64,"0"),u=s.recovery+27;return{message:e,messageHash:n,v:(0,c.numberToHex)(u),r:`0x${o}`,s:`0x${l}`,signature:`${(0,c.bytesToHex)(a)}${u.toString(16)}`}},t.signTransaction=(e,t)=>i(void 0,void 0,void 0,(function*(){const r=e.sign((0,c.hexToBytes)(t));if((0,l.isNullish)(r.v)||(0,l.isNullish)(r.r)||(0,l.isNullish)(r.s))throw new o.TransactionSigningError("Signer Error");const i=r.validate(!0);if(i.length>0){let e="Signer Error ";for(const t of i)e+=`${e} ${t}.`;throw new o.TransactionSigningError(e)}const n=(0,c.bytesToHex)(r.serialize()),s=(0,c.sha3Raw)(n);return{messageHash:(0,c.bytesToHex)(r.getMessageToSign(!0)),v:`0x${r.v.toString(16)}`,r:`0x${r.r.toString(16).padStart(64,"0")}`,s:`0x${r.s.toString(16).padStart(64,"0")}`,rawTransaction:n,transactionHash:(0,c.bytesToHex)(s)}})),t.recoverTransaction=e=>{if((0,l.isNullish)(e))throw new o.UndefinedRawTransactionError;const t=h.TransactionFactory.fromSerializedData((0,c.hexToBytes)(e));return(0,c.toChecksumAddress)(t.getSenderAddress().toString())},t.recover=(e,r,i,n,s)=>{if("object"==typeof e){const r=`${e.r}${e.s.slice(2)}${e.v.slice(2)}`;return(0,t.recover)(e.messageHash,r,i)}if("string"==typeof r&&"string"==typeof i&&!(0,l.isNullish)(n)){const a=`${i}${n.slice(2)}${r.slice(2)}`;return(0,t.recover)(e,a,s)}if((0,l.isNullish)(r))throw new o.InvalidSignatureError("signature string undefined");const a=i?e:(0,t.hashMessage)(e);let u=parseInt(r.substring(130),16);u>26&&(u-=27);const h=d.secp256k1.Signature.fromCompact(r.slice(2,130)).addRecoveryBit(u).recoverPublicKey(a.replace("0x","")).toRawBytes(!1),p=(0,c.sha3Raw)(h.subarray(1));return(0,c.toChecksumAddress)(`0x${p.slice(-40)}`)},t.privateKeyToAddress=e=>{const r=(0,t.parseAndValidatePrivateKey)(e),i=d.secp256k1.getPublicKey(r,!1),n=(0,c.sha3Raw)(i.slice(1)).slice(-40);return(0,c.toChecksumAddress)(`0x${n}`)},t.privateKeyToPublicKey=(e,r)=>{const i=(0,t.parseAndValidatePrivateKey)(e);return`0x${(0,c.bytesToHex)(d.secp256k1.getPublicKey(i,r)).slice(4)}`},t.encrypt=(e,r,d)=>i(void 0,void 0,void 0,(function*(){var i,u,h,p,f,g,m;const y=(0,t.parseAndValidatePrivateKey)(e);let v;if(v=(null==d?void 0:d.salt)?"string"==typeof d.salt?(0,c.hexToBytes)(d.salt):d.salt:(0,c.randomBytes)(32),!((0,l.isString)(r)||r instanceof Uint8Array))throw new o.InvalidPasswordError;const b="string"==typeof r?(0,c.hexToBytes)((0,c.utf8ToHex)(r)):r;let T;if(null==d?void 0:d.iv){if(T="string"==typeof d.iv?(0,c.hexToBytes)(d.iv):d.iv,16!==T.length)throw new o.IVLengthError}else T=(0,c.randomBytes)(16);const _=null!==(i=null==d?void 0:d.kdf)&&void 0!==i?i:"scrypt";let k,E;if("pbkdf2"===_){if(E={dklen:null!==(u=null==d?void 0:d.dklen)&&void 0!==u?u:32,salt:(0,c.bytesToHex)(v).replace("0x",""),c:null!==(h=null==d?void 0:d.c)&&void 0!==h?h:262144,prf:"hmac-sha256"},E.c<1e3)throw new o.PBKDF2IterationsError;k=(0,s.pbkdf2Sync)(b,v,E.c,E.dklen,"sha256")}else{if("scrypt"!==_)throw new o.InvalidKdfError;E={n:null!==(p=null==d?void 0:d.n)&&void 0!==p?p:8192,r:null!==(f=null==d?void 0:d.r)&&void 0!==f?f:8,p:null!==(g=null==d?void 0:d.p)&&void 0!==g?g:1,dklen:null!==(m=null==d?void 0:d.dklen)&&void 0!==m?m:32,salt:(0,c.bytesToHex)(v).replace("0x","")},k=(0,a.scryptSync)(b,v,E.n,E.p,E.r,E.dklen)}const w=yield(0,n.encrypt)(y,k.slice(0,16),T,"aes-128-ctr"),A=(0,c.bytesToHex)(w).slice(2),I=(0,c.sha3Raw)((0,c.uint8ArrayConcat)(k.slice(16,32),w)).replace("0x","");return{version:3,id:(0,c.uuidV4)(),address:(0,t.privateKeyToAddress)(y).toLowerCase().replace("0x",""),crypto:{ciphertext:A,cipherparams:{iv:(0,c.bytesToHex)(T).replace("0x","")},cipher:"aes-128-ctr",kdf:_,kdfparams:E,mac:I}}})),t.privateKeyToAccount=(e,r)=>{const n=(0,t.parseAndValidatePrivateKey)(e,r);return{address:(0,t.privateKeyToAddress)(n),privateKey:(0,c.bytesToHex)(n),signTransaction:e=>{throw new o.TransactionSigningError("Do not have network access to sign the transaction")},sign:e=>(0,t.sign)("string"==typeof e?e:JSON.stringify(e),n),encrypt:(e,r)=>i(void 0,void 0,void 0,(function*(){return(0,t.encrypt)(n,e,r)}))}},t.create=()=>{const e=d.secp256k1.utils.randomPrivateKey();return(0,t.privateKeyToAccount)(`${(0,c.bytesToHex)(e)}`)},t.decrypt=(e,r,d)=>i(void 0,void 0,void 0,(function*(){const i="object"==typeof e?e:JSON.parse(d?e.toLowerCase():e);if(l.validator.validateJSONSchema(u.keyStoreSchema,i),3!==i.version)throw new o.KeyStoreVersionError;const h="string"==typeof r?(0,c.hexToBytes)((0,c.utf8ToHex)(r)):r;let p;if(l.validator.validate(["bytes"],[h]),"scrypt"===i.crypto.kdf){const e=i.crypto.kdfparams,t="string"==typeof e.salt?(0,c.hexToBytes)(e.salt):e.salt;p=(0,a.scryptSync)(h,t,e.n,e.p,e.r,e.dklen)}else{if("pbkdf2"!==i.crypto.kdf)throw new o.InvalidKdfError;{const e=i.crypto.kdfparams,t="string"==typeof e.salt?(0,c.hexToBytes)(e.salt):e.salt;p=(0,s.pbkdf2Sync)(h,t,e.c,e.dklen,"sha256")}}const f=(0,c.hexToBytes)(i.crypto.ciphertext);if((0,c.sha3Raw)((0,c.uint8ArrayConcat)(p.slice(16,32),f)).replace("0x","")!==i.crypto.mac)throw new o.KeyDerivationError;const g=yield(0,n.decrypt)((0,c.hexToBytes)(i.crypto.ciphertext),p.slice(0,16),(0,c.hexToBytes)(i.crypto.cipherparams.iv));return(0,t.privateKeyToAccount)(g)}))},7634:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"goerli",chainId:5,networkId:5,defaultHardfork:"merge",consensus:{type:"poa",algorithm:"clique",clique:{period:15,epoch:3e4}},comment:"Cross-client PoA test network",url:"https://github.com/goerli/testnet",genesis:{timestamp:"0x5c51a607",gasLimit:10485760,difficulty:1,nonce:"0x0000000000000000",extraData:"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},hardforks:[{name:"chainstart",block:0,forkHash:"0xa3f5ab08"},{name:"homestead",block:0,forkHash:"0xa3f5ab08"},{name:"tangerineWhistle",block:0,forkHash:"0xa3f5ab08"},{name:"spuriousDragon",block:0,forkHash:"0xa3f5ab08"},{name:"byzantium",block:0,forkHash:"0xa3f5ab08"},{name:"constantinople",block:0,forkHash:"0xa3f5ab08"},{name:"petersburg",block:0,forkHash:"0xa3f5ab08"},{name:"istanbul",block:1561651,forkHash:"0xc25efa5c"},{name:"berlin",block:4460644,forkHash:"0x757a1c47"},{name:"london",block:5062605,forkHash:"0xb8c6299d"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://goerli.etherscan.io/block/7382818",name:"merge",ttd:"10790000",block:7382819,forkHash:"0xb8c6299d"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.goerli.ethdisco.net"]}},3233:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"mainnet",chainId:1,networkId:1,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://etherscan.io/block/15537393",name:"merge",ttd:"58750000000000000000000",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]}},5077:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"sepolia",chainId:11155111,networkId:11155111,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"PoW test network to replace Ropsten",url:"https://github.com/ethereum/go-ethereum/pull/23730",genesis:{timestamp:"0x6159af19",gasLimit:3e7,difficulty:131072,nonce:"0x0000000000000000",extraData:"0x5365706f6c69612c20417468656e732c204174746963612c2047726565636521"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfe3366e7"},{name:"homestead",block:0,forkHash:"0xfe3366e7"},{name:"tangerineWhistle",block:0,forkHash:"0xfe3366e7"},{name:"spuriousDragon",block:0,forkHash:"0xfe3366e7"},{name:"byzantium",block:0,forkHash:"0xfe3366e7"},{name:"constantinople",block:0,forkHash:"0xfe3366e7"},{name:"petersburg",block:0,forkHash:"0xfe3366e7"},{name:"istanbul",block:0,forkHash:"0xfe3366e7"},{name:"muirGlacier",block:0,forkHash:"0xfe3366e7"},{name:"berlin",block:0,forkHash:"0xfe3366e7"},{name:"london",block:0,forkHash:"0xfe3366e7"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://sepolia.etherscan.io/block/1450408",name:"merge",ttd:"17000000000000000",block:1450409,forkHash:"0xfe3366e7"},{name:"mergeForkIdTransition",block:1735371,forkHash:"0xb96cbd13"},{name:"shanghai",block:null,timestamp:"1677557088",forkHash:"0xf7f9bc08"}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.sepolia.ethdisco.net"]}},6664:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Common=void 0;const n=i(r(1238)),s=r(9634),a=r(850),o=r(2290),c=i(r(7634)),l=i(r(3233)),d=i(r(5077)),u=r(5257),h=r(4443),p=r(9137),{buf:f}=n.default;class g extends s.EventEmitter{constructor(e){var t,r;super(),this._eips=[],this._customChains=null!==(t=e.customChains)&&void 0!==t?t:[],this._chainParams=this.setChain(e.chain),this.DEFAULT_HARDFORK=null!==(r=this._chainParams.defaultHardfork)&&void 0!==r?r:h.Hardfork.Merge,this.HARDFORK_CHANGES=this.hardforks().map((e=>[e.name,p.hardforks[e.name]])),this._hardfork=this.DEFAULT_HARDFORK,void 0!==e.hardfork&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips)}static custom(e,t={}){var r;const i=null!==(r=t.baseChain)&&void 0!==r?r:"mainnet",n=Object.assign({},g._getChainParams(i));if(n.name="custom-chain","string"!=typeof e)return new g(Object.assign({chain:Object.assign(Object.assign({},n),e)},t));if(e===h.CustomChain.PolygonMainnet)return g.custom({name:h.CustomChain.PolygonMainnet,chainId:137,networkId:137},t);if(e===h.CustomChain.PolygonMumbai)return g.custom({name:h.CustomChain.PolygonMumbai,chainId:80001,networkId:80001},t);if(e===h.CustomChain.ArbitrumRinkebyTestnet)return g.custom({name:h.CustomChain.ArbitrumRinkebyTestnet,chainId:421611,networkId:421611},t);if(e===h.CustomChain.ArbitrumOne)return g.custom({name:h.CustomChain.ArbitrumOne,chainId:42161,networkId:42161},t);if(e===h.CustomChain.xDaiChain)return g.custom({name:h.CustomChain.xDaiChain,chainId:100,networkId:100},t);if(e===h.CustomChain.OptimisticKovan)return g.custom({name:h.CustomChain.OptimisticKovan,chainId:69,networkId:69},Object.assign({hardfork:h.Hardfork.Berlin},t));if(e===h.CustomChain.OptimisticEthereum)return g.custom({name:h.CustomChain.OptimisticEthereum,chainId:10,networkId:10},Object.assign({hardfork:h.Hardfork.Berlin},t));throw new Error(`Custom chain ${e} not supported`)}static fromGethGenesis(e,{chain:t,eips:r,genesisHash:i,hardfork:n,mergeForkIdPostMerge:s}){var a;const c=(0,o.parseGethGenesis)(e,t,s),l=new g({chain:null!==(a=c.name)&&void 0!==a?a:"custom",customChains:[c],eips:r,hardfork:null!=n?n:c.hardfork});return void 0!==i&&l.setForkHashes(i),l}static isSupportedChainId(e){const t=this._getInitializedChains();return Boolean(t.names[e.toString()])}static _getChainParams(e,t){let r=e;const i=this._getInitializedChains(t);if("number"==typeof r||"bigint"==typeof r){if(r=r.toString(),i.names[r])return i[i.names[r]];throw new Error(`Chain with ID ${r} not supported`)}if(void 0!==i[r])return i[r];throw new Error(`Chain with name ${r} not supported`)}setChain(e){if("number"==typeof e||"bigint"==typeof e||"string"==typeof e)this._chainParams=g._getChainParams(e,this._customChains);else{if("object"!=typeof e)throw new Error("Wrong input format");{if(this._customChains.length>0)throw new Error("Chain must be a string, number, or bigint when initialized with customChains passed in");const t=["networkId","genesis","hardforks","bootstrapNodes"];for(const r of t)if(!(r in e))throw new Error(`Missing required chain parameter: ${r}`);this._chainParams=e}}for(const e of this.hardforks())if(void 0===e.block)throw new Error("Hardfork cannot have undefined block number");return this._chainParams}setHardfork(e){let t=!1;for(const r of this.HARDFORK_CHANGES)r[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this.emit("hardforkChanged",e)),t=!0);if(!t)throw new Error(`Hardfork with name ${e} not supported`)}getHardforkByBlockNumber(e,t,r){const i=(0,o.toType)(e,a.TypeOutput.BigInt),n=(0,o.toType)(t,a.TypeOutput.BigInt),s=(0,o.toType)(r,a.TypeOutput.Number),c=this.hardforks().filter((e=>null!==e.block||null!==e.ttd&&void 0!==e.ttd||void 0!==e.timestamp)),l=c.findIndex((e=>null!==e.ttd&&void 0!==e.ttd));if(c.slice(l+1).findIndex((e=>null!==e.ttd&&void 0!==e.ttd))>=0)throw Error("More than one merge hardforks found with ttd specified");let d=c.findIndex((e=>null!==e.block&&e.block>i||void 0!==s&&Number(e.timestamp)>s));if(-1===d)d=c.length;else if(0===d)throw Error("Must have at least one hardfork at block 0");if(void 0===s&&(d-=c.slice(0,d).reverse().findIndex((e=>null!==e.block||void 0!==e.ttd))),d-=1,null===c[d].block&&void 0===c[d].timestamp)(null==n||BigInt(c[d].ttd)>n)&&(d-=1);else if(l>=0&&null!=n){if(d>=l&&BigInt(c[l].ttd)>n)throw Error("Maximum HF determined by total difficulty is lower than the block number HF");if(d<l&&BigInt(c[l].ttd)<=n)throw Error("HF determined by block number is lower than the minimum total difficulty HF")}const u=d;for(;d<c.length-1&&c[d].block===c[d+1].block&&c[d].timestamp===c[d+1].timestamp;d+=1);if(s){if(c.slice(0,u).reduce(((e,t)=>{var r;return Math.max(Number(null!==(r=t.timestamp)&&void 0!==r?r:"0"),e)}),0)>s)throw Error("Maximum HF determined by timestamp is lower than the block number/ttd HF");if(c.slice(d+1).reduce(((e,t)=>{var r;return Math.min(Number(null!==(r=t.timestamp)&&void 0!==r?r:s),e)}),s)<s)throw Error("Maximum HF determined by block number/ttd is lower than timestamp HF")}return c[d].name}setHardforkByBlockNumber(e,t,r){const i=this.getHardforkByBlockNumber(e,t,r);return this.setHardfork(i),i}_getHardfork(e){const t=this.hardforks();for(const r of t)if(r.name===e)return r;return null}setEIPs(e=[]){for(const t of e){if(!(t in u.EIPs))throw new Error(`${t} not supported`);const r=this.gteHardfork(u.EIPs[t].minimumHardfork);if(!r)throw new Error(`${t} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${r}`);if(void 0!==u.EIPs[t].requiredEIPs)for(const r of u.EIPs[t].requiredEIPs)if(!e.includes(r)&&!this.isActivatedEIP(r))throw new Error(`${t} requires EIP ${r}, but is not included in the EIP list`)}this._eips=e}param(e,t){let r;for(const i of this._eips)if(r=this.paramByEIP(e,t,i),void 0!==r)return r;return this.paramByHardfork(e,t,this._hardfork)}paramByHardfork(e,t,r){let i=null;for(const n of this.HARDFORK_CHANGES){if("eips"in n[1]){const r=n[1].eips;for(const n of r){const r=this.paramByEIP(e,t,n);i="bigint"==typeof r?r:i}}else{if(void 0===n[1][e])throw new Error(`Topic ${e} not defined`);void 0!==n[1][e][t]&&(i=n[1][e][t].v)}if(n[0]===r)break}return BigInt(null!=i?i:0)}paramByEIP(e,t,r){if(!(r in u.EIPs))throw new Error(`${r} not supported`);const i=u.EIPs[r];if(!(e in i))throw new Error(`Topic ${e} not defined`);if(void 0===i[e][t])return;const n=i[e][t].v;return BigInt(n)}paramByBlock(e,t,r,i,n){const s=this.getHardforkByBlockNumber(r,i,n);return this.paramByHardfork(e,t,s)}isActivatedEIP(e){if(this.eips().includes(e))return!0;for(const t of this.HARDFORK_CHANGES){const r=t[1];if(this.gteHardfork(r.name)&&"eips"in r&&r.eips.includes(e))return!0}return!1}hardforkIsActiveOnBlock(e,t){const r=(0,o.toType)(t,a.TypeOutput.BigInt),i=null!=e?e:this._hardfork,n=this.hardforkBlock(i);return"bigint"==typeof n&&n!==BigInt(0)&&r>=n}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,t){const r=null!=e?e:this._hardfork,i=this.hardforks();let n=-1,s=-1,a=0;for(const e of i)e.name===r&&(n=a),e.name===t&&(s=a),a+=1;return n>=s&&-1!==s}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){var t;const r=null!=e?e:this._hardfork,i=null===(t=this._getHardfork(r))||void 0===t?void 0:t.block;return null==i?null:BigInt(i)}hardforkTimestamp(e){var t;const r=null!=e?e:this._hardfork,i=null===(t=this._getHardfork(r))||void 0===t?void 0:t.timestamp;return null==i?null:BigInt(i)}eipBlock(e){for(const t of this.HARDFORK_CHANGES){const r=t[1];if("eips"in r&&r.eips.includes(e))return this.hardforkBlock("number"==typeof t[0]?String(t[0]):t[0])}return null}hardforkTTD(e){var t;const r=null!=e?e:this._hardfork,i=null===(t=this._getHardfork(r))||void 0===t?void 0:t.ttd;return null==i?null:BigInt(i)}isHardforkBlock(e,t){const r=(0,o.toType)(e,a.TypeOutput.BigInt),i=null!=t?t:this._hardfork,n=this.hardforkBlock(i);return"bigint"==typeof n&&n!==BigInt(0)&&n===r}nextHardforkBlockOrTimestamp(e){var t,r;const i=null!=e?e:this._hardfork,n=this.hardforks();let s=n.findIndex((e=>e.name===i));if(i===h.Hardfork.Merge&&(s-=1),s<0)return null;let a=null!==(t=n[s].timestamp)&&void 0!==t?t:n[s].block;a=null!=a?Number(a):null;const o=n.slice(s+1).find((e=>{var t;let r=null!==(t=e.timestamp)&&void 0!==t?t:e.block;return r=null!=r?Number(r):null,e.name!==h.Hardfork.Merge&&null!=r&&r!==a}));if(void 0===o)return null;const c=null!==(r=o.timestamp)&&void 0!==r?r:o.block;return null==c?null:BigInt(c)}nextHardforkBlock(e){const t=null!=e?e:this._hardfork;let r=this.hardforkBlock(t);if(null===r&&t===h.Hardfork.Merge){const e=this.hardforks(),t=e.findIndex((e=>null!==e.ttd&&void 0!==e.ttd));if(t<0)throw Error("Merge hardfork should have been found");r=this.hardforkBlock(e[t-1].name)}return null===r?null:this.hardforks().reduce(((e,t)=>{const i=BigInt(null===t.block||void 0!==t.ttd&&null!==t.ttd?0:t.block);return i>r&&null===e?i:e}),null)}isNextHardforkBlock(e,t){const r=(0,o.toType)(e,a.TypeOutput.BigInt),i=null!=t?t:this._hardfork,n=this.nextHardforkBlock(i);return null!==n&&n===r}_calcForkHash(e,t){let r=new Uint8Array,i=0;for(const t of this.hardforks()){const{block:n,timestamp:a,name:o}=t;let c=null!=a?a:n;if(c=null!==c?Number(c):null,"number"==typeof c&&0!==c&&c!==i&&o!==h.Hardfork.Merge){const e=(0,s.hexToBytes)(c.toString(16).padStart(16,"0"));r=(0,s.uint8ArrayConcat)(r,e),i=c}if(t.name===e)break}const n=(0,s.uint8ArrayConcat)(t,r);return(0,s.bytesToHex)((0,o.intToUint8Array)(f(n)>>>0))}forkHash(e,t){const r=null!=e?e:this._hardfork,i=this._getHardfork(r);if(null===i||null===(null==i?void 0:i.block)&&void 0===(null==i?void 0:i.timestamp)&&void 0===(null==i?void 0:i.ttd))throw new Error("No fork hash calculation possible for future hardfork");if(null!==(null==i?void 0:i.forkHash)&&void 0!==(null==i?void 0:i.forkHash))return i.forkHash;if(!t)throw new Error("genesisHash required for forkHash calculation");return this._calcForkHash(r,t)}hardforkForForkHash(e){const t=this.hardforks().filter((t=>t.forkHash===e));return t.length>=1?t[t.length-1]:null}setForkHashes(e){var t;for(const r of this.hardforks()){const i=null!==(t=r.timestamp)&&void 0!==t?t:r.block;null!==r.forkHash&&void 0!==r.forkHash||null==i&&void 0===r.ttd||(r.forkHash=this.forkHash(r.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){return this._chainParams.hardforks}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}networkId(){return BigInt(this._chainParams.networkId)}eips(){return this._eips}consensusType(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.type),r[0]===e)break;return null!=t?t:this._chainParams.consensus.type}consensusAlgorithm(){const e=this.hardfork();let t;for(const r of this.HARDFORK_CHANGES)if("consensus"in r[1]&&(t=r[1].consensus.algorithm),r[0]===e)break;return null!=t?t:this._chainParams.consensus.algorithm}consensusConfig(){var e;const t=this.hardfork();let r;for(const e of this.HARDFORK_CHANGES)if("consensus"in e[1]&&(r=e[1].consensus[e[1].consensus.algorithm]),e[0]===t)break;return null!==(e=null!=r?r:this._chainParams.consensus[this.consensusAlgorithm()])&&void 0!==e?e:{}}copy(){const e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.removeAllListeners(),e}static _getInitializedChains(e){const t={};for(const[e,r]of Object.entries(h.Chain))t[r]=e.toLowerCase();const r={mainnet:l.default,goerli:c.default,sepolia:d.default};if(e)for(const i of e){const{name:e}=i;t[i.chainId.toString()]=e,r[e]=i}return r.names=t,r}}t.Common=g},2819:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-1153",number:1153,comment:"Transient Storage",url:"https://eips.ethereum.org/EIPS/eip-1153",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{tstore:{v:100,d:"Base fee of the TSTORE opcode"},tload:{v:100,d:"Base fee of the TLOAD opcode"}},vm:{},pow:{}}},4013:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-1559",number:1559,comment:"Fee market change for ETH 1.0 chain",url:"https://eips.ethereum.org/EIPS/eip-1559",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2930],gasConfig:{baseFeeMaxChangeDenominator:{v:8,d:"Maximum base fee change denominator"},elasticityMultiplier:{v:2,d:"Maximum block gas target elasticity"},initialBaseFee:{v:1e9,d:"Initial base fee on first EIP1559 block"}},gasPrices:{},vm:{},pow:{}}},1933:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-2315",number:2315,comment:"Simple subroutines for the EVM",url:"https://eips.ethereum.org/EIPS/eip-2315",status:"Draft",minimumHardfork:"istanbul",gasConfig:{},gasPrices:{beginsub:{v:2,d:"Base fee of the BEGINSUB opcode"},returnsub:{v:5,d:"Base fee of the RETURNSUB opcode"},jumpsub:{v:10,d:"Base fee of the JUMPSUB opcode"}},vm:{},pow:{}}},4638:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-2537",number:2537,comment:"BLS12-381 precompiles",url:"https://eips.ethereum.org/EIPS/eip-2537",status:"Draft",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{Bls12381G1AddGas:{v:600,d:"Gas cost of a single BLS12-381 G1 addition precompile-call"},Bls12381G1MulGas:{v:12e3,d:"Gas cost of a single BLS12-381 G1 multiplication precompile-call"},Bls12381G2AddGas:{v:4500,d:"Gas cost of a single BLS12-381 G2 addition precompile-call"},Bls12381G2MulGas:{v:55e3,d:"Gas cost of a single BLS12-381 G2 multiplication precompile-call"},Bls12381PairingBaseGas:{v:115e3,d:"Base gas cost of BLS12-381 pairing check"},Bls12381PairingPerPairGas:{v:23e3,d:"Per-pair gas cost of BLS12-381 pairing check"},Bls12381MapG1Gas:{v:5500,d:"Gas cost of BLS12-381 map field element to G1"},Bls12381MapG2Gas:{v:11e4,d:"Gas cost of BLS12-381 map field element to G2"},Bls12381MultiExpGasDiscount:{v:[[1,1200],[2,888],[3,764],[4,641],[5,594],[6,547],[7,500],[8,453],[9,438],[10,423],[11,408],[12,394],[13,379],[14,364],[15,349],[16,334],[17,330],[18,326],[19,322],[20,318],[21,314],[22,310],[23,306],[24,302],[25,298],[26,294],[27,289],[28,285],[29,281],[30,277],[31,273],[32,269],[33,268],[34,266],[35,265],[36,263],[37,262],[38,260],[39,259],[40,257],[41,256],[42,254],[43,253],[44,251],[45,250],[46,248],[47,247],[48,245],[49,244],[50,242],[51,241],[52,239],[53,238],[54,236],[55,235],[56,233],[57,232],[58,231],[59,229],[60,228],[61,226],[62,225],[63,223],[64,222],[65,221],[66,220],[67,219],[68,219],[69,218],[70,217],[71,216],[72,216],[73,215],[74,214],[75,213],[76,213],[77,212],[78,211],[79,211],[80,210],[81,209],[82,208],[83,208],[84,207],[85,206],[86,205],[87,205],[88,204],[89,203],[90,202],[91,202],[92,201],[93,200],[94,199],[95,199],[96,198],[97,197],[98,196],[99,196],[100,195],[101,194],[102,193],[103,193],[104,192],[105,191],[106,191],[107,190],[108,189],[109,188],[110,188],[111,187],[112,186],[113,185],[114,185],[115,184],[116,183],[117,182],[118,182],[119,181],[120,180],[121,179],[122,179],[123,178],[124,177],[125,176],[126,176],[127,175],[128,174]],d:"Discount gas costs of calls to the MultiExp precompiles with `k` (point, scalar) pair"}},vm:{},pow:{}}},6906:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-2565",number:2565,comment:"ModExp gas cost",url:"https://eips.ethereum.org/EIPS/eip-2565",status:"Final",minimumHardfork:"byzantium",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:3,d:"Gquaddivisor from modexp precompile for gas calculation"}},vm:{},pow:{}}},3399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-2718",comment:"Typed Transaction Envelope",url:"https://eips.ethereum.org/EIPS/eip-2718",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{},vm:{},pow:{}}},7387:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-2929",comment:"Gas cost increases for state access opcodes",url:"https://eips.ethereum.org/EIPS/eip-2929",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{coldsload:{v:2100,d:"Gas cost of the first read of storage from a given location (per transaction)"},coldaccountaccess:{v:2600,d:"Gas cost of the first read of a given address (per transaction)"},warmstorageread:{v:100,d:"Gas cost of reading storage locations which have already loaded 'cold'"},sstoreCleanGasEIP2200:{v:2900,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreNoopGasEIP2200:{v:100,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:100,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitRefundEIP2200:{v:19900,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanRefundEIP2200:{v:4900,d:"Once per SSTORE operation for resetting to the original non-zero value"},call:{v:0,d:"Base fee of the CALL opcode"},callcode:{v:0,d:"Base fee of the CALLCODE opcode"},delegatecall:{v:0,d:"Base fee of the DELEGATECALL opcode"},staticcall:{v:0,d:"Base fee of the STATICCALL opcode"},balance:{v:0,d:"Base fee of the BALANCE opcode"},extcodesize:{v:0,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:0,d:"Base fee of the EXTCODECOPY opcode"},extcodehash:{v:0,d:"Base fee of the EXTCODEHASH opcode"},sload:{v:0,d:"Base fee of the SLOAD opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"}},vm:{},pow:{}}},6299:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-2930",comment:"Optional access lists",url:"https://eips.ethereum.org/EIPS/eip-2930",status:"Final",minimumHardfork:"istanbul",requiredEIPs:[2718,2929],gasConfig:{},gasPrices:{accessListStorageKeyCost:{v:1900,d:"Gas cost per storage key in an Access List transaction"},accessListAddressCost:{v:2400,d:"Gas cost per storage key in an Access List transaction"}},vm:{},pow:{}}},1073:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-3198",number:3198,comment:"BASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-3198",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{basefee:{v:2,d:"Gas cost of the BASEFEE opcode"}},vm:{},pow:{}}},634:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-3529",comment:"Reduction in refunds",url:"https://eips.ethereum.org/EIPS/eip-3529",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2929],gasConfig:{maxRefundQuotient:{v:5,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{selfdestructRefund:{v:0,d:"Refunded following a selfdestruct operation"},sstoreClearRefundEIP2200:{v:4800,d:"Once per SSTORE operation for clearing an originally existing storage slot"}},vm:{},pow:{}}},3829:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-3540",number:3540,comment:"EVM Object Format (EOF) v1",url:"https://eips.ethereum.org/EIPS/eip-3540",status:"Review",minimumHardfork:"london",requiredEIPs:[3541],gasConfig:{},gasPrices:{},vm:{},pow:{}}},5729:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-3541",comment:"Reject new contracts starting with the 0xEF byte",url:"https://eips.ethereum.org/EIPS/eip-3541",status:"Final",minimumHardfork:"berlin",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}}},8958:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-3554",comment:"Reduction in refunds",url:"Difficulty Bomb Delay to December 1st 2021",status:"Final",minimumHardfork:"muirGlacier",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:95e5,d:"the amount of blocks to delay the difficulty bomb with"}}}},8334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-3607",number:3607,comment:"Reject transactions from senders with deployed code",url:"https://eips.ethereum.org/EIPS/eip-3607",status:"Final",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}}},3412:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-3651",number:3198,comment:"Warm COINBASE",url:"https://eips.ethereum.org/EIPS/eip-3651",status:"Review",minimumHardfork:"london",requiredEIPs:[2929],gasConfig:{},gasPrices:{},vm:{},pow:{}}},6337:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-3670",number:3670,comment:"EOF - Code Validation",url:"https://eips.ethereum.org/EIPS/eip-3670",status:"Review",minimumHardfork:"london",requiredEIPs:[3540],gasConfig:{},gasPrices:{},vm:{},pow:{}}},2610:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-3675",number:3675,comment:"Upgrade consensus to Proof-of-Stake",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Final",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}}},7619:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-3855",number:3855,comment:"PUSH0 instruction",url:"https://eips.ethereum.org/EIPS/eip-3855",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{push0:{v:2,d:"Base fee of the PUSH0 opcode"}},vm:{},pow:{}}},8018:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-3860",number:3860,comment:"Limit and meter initcode",url:"https://eips.ethereum.org/EIPS/eip-3860",status:"Review",minimumHardfork:"spuriousDragon",requiredEIPs:[],gasConfig:{},gasPrices:{initCodeWordCost:{v:2,d:"Gas to pay for each word (32 bytes) of initcode when creating a contract"}},vm:{maxInitCodeSize:{v:49152,d:"Maximum length of initialization code when creating a contract"}},pow:{}}},6779:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-4345",number:4345,comment:"Difficulty Bomb Delay to June 2022",url:"https://eips.ethereum.org/EIPS/eip-4345",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:107e5,d:"the amount of blocks to delay the difficulty bomb with"}}}},623:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-4399",number:4399,comment:"Supplant DIFFICULTY opcode with PREVRANDAO",url:"https://eips.ethereum.org/EIPS/eip-4399",status:"Review",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}}},797:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"EIP-5133",number:5133,comment:"Delaying Difficulty Bomb to mid-September 2022",url:"https://eips.ethereum.org/EIPS/eip-5133",status:"Draft",minimumHardfork:"grayGlacier",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:114e5,d:"the amount of blocks to delay the difficulty bomb with"}}}},5257:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EIPs=void 0;const n=i(r(2819)),s=i(r(4013)),a=i(r(1933)),o=i(r(4638)),c=i(r(6906)),l=i(r(3399)),d=i(r(7387)),u=i(r(6299)),h=i(r(1073)),p=i(r(634)),f=i(r(3829)),g=i(r(5729)),m=i(r(8958)),y=i(r(8334)),v=i(r(3412)),b=i(r(6337)),T=i(r(2610)),_=i(r(7619)),k=i(r(8018)),E=i(r(6779)),w=i(r(623)),A=i(r(797));t.EIPs={1153:n.default,1559:s.default,2315:a.default,2537:o.default,2565:c.default,2718:l.default,2929:d.default,2930:u.default,3198:h.default,3529:p.default,3540:f.default,3541:g.default,3554:m.default,3607:y.default,3651:v.default,3670:b.default,3675:T.default,3855:_.default,3860:k.default,4345:E.default,4399:w.default,5133:A.default}},4443:(e,t)=>{"use strict";var r,i,n,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.CustomChain=t.ConsensusAlgorithm=t.ConsensusType=t.Hardfork=t.Chain=void 0,(a=t.Chain||(t.Chain={}))[a.Mainnet=1]="Mainnet",a[a.Goerli=5]="Goerli",a[a.Sepolia=11155111]="Sepolia",(s=t.Hardfork||(t.Hardfork={})).Chainstart="chainstart",s.Homestead="homestead",s.Dao="dao",s.TangerineWhistle="tangerineWhistle",s.SpuriousDragon="spuriousDragon",s.Byzantium="byzantium",s.Constantinople="constantinople",s.Petersburg="petersburg",s.Istanbul="istanbul",s.MuirGlacier="muirGlacier",s.Berlin="berlin",s.London="london",s.ArrowGlacier="arrowGlacier",s.GrayGlacier="grayGlacier",s.MergeForkIdTransition="mergeForkIdTransition",s.Merge="merge",s.Shanghai="shanghai",s.ShardingForkDev="shardingFork",(n=t.ConsensusType||(t.ConsensusType={})).ProofOfStake="pos",n.ProofOfWork="pow",n.ProofOfAuthority="poa",(i=t.ConsensusAlgorithm||(t.ConsensusAlgorithm={})).Ethash="ethash",i.Clique="clique",i.Casper="casper",(r=t.CustomChain||(t.CustomChain={})).PolygonMainnet="polygon-mainnet",r.PolygonMumbai="polygon-mumbai",r.ArbitrumRinkebyTestnet="arbitrum-rinkeby-testnet",r.ArbitrumOne="arbitrum-one",r.xDaiChain="x-dai-chain",r.OptimisticKovan="optimistic-kovan",r.OptimisticEthereum="optimistic-ethereum"},3923:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"arrowGlacier",comment:"HF to delay the difficulty bomb",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/arrow-glacier.md",status:"Final",eips:[4345],gasConfig:{},gasPrices:{},vm:{},pow:{}}},9126:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"berlin",comment:"HF targeted for July 2020 following the Muir Glacier HF",url:"https://eips.ethereum.org/EIPS/eip-2070",status:"Final",eips:[2565,2929,2718,2930]}},7251:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"byzantium",comment:"Hardfork with new precompiles, instructions and other protocol changes",url:"https://eips.ethereum.org/EIPS/eip-609",status:"Final",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:20,d:"Gquaddivisor from modexp precompile for gas calculation"},ecAdd:{v:500,d:"Gas costs for curve addition precompile"},ecMul:{v:4e4,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:1e5,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:8e4,d:"Gas costs regarding curve pairing precompile input length"},revert:{v:0,d:"Base fee of the REVERT opcode"},staticcall:{v:700,d:"Base fee of the STATICCALL opcode"},returndatasize:{v:2,d:"Base fee of the RETURNDATASIZE opcode"},returndatacopy:{v:3,d:"Base fee of the RETURNDATACOPY opcode"}},vm:{},pow:{minerReward:{v:"3000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:3e6,d:"the amount of blocks to delay the difficulty bomb with"}}}},9454:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"chainstart",comment:"Start of the Ethereum main chain",url:"",status:"",gasConfig:{minGasLimit:{v:5e3,d:"Minimum the gas limit may ever be"},gasLimitBoundDivisor:{v:1024,d:"The bound divisor of the gas limit, used in update calculations"},maxRefundQuotient:{v:2,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{base:{v:2,d:"Gas base cost, used e.g. for ChainID opcode (Istanbul)"},tierStep:{v:[0,2,3,5,8,10,20],d:"Once per operation, for a selection of them"},exp:{v:10,d:"Base fee of the EXP opcode"},expByte:{v:10,d:"Times ceil(log256(exponent)) for the EXP instruction"},sha3:{v:30,d:"Base fee of the SHA3 opcode"},sha3Word:{v:6,d:"Once per word of the SHA3 operation's data"},sload:{v:50,d:"Base fee of the SLOAD opcode"},sstoreSet:{v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero"},sstoreReset:{v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero"},sstoreRefund:{v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero"},jumpdest:{v:1,d:"Base fee of the JUMPDEST opcode"},log:{v:375,d:"Base fee of the LOG opcode"},logData:{v:8,d:"Per byte in a LOG* operation's data"},logTopic:{v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},create:{v:32e3,d:"Base fee of the CREATE opcode"},call:{v:40,d:"Base fee of the CALL opcode"},callStipend:{v:2300,d:"Free gas given at beginning of call"},callValueTransfer:{v:9e3,d:"Paid for CALL when the value transfor is non-zero"},callNewAccount:{v:25e3,d:"Paid for CALL when the destination address didn't exist prior"},selfdestructRefund:{v:24e3,d:"Refunded following a selfdestruct operation"},memory:{v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},quadCoeffDiv:{v:512,d:"Divisor for the quadratic particle of the memory cost equation"},createData:{v:200,d:""},tx:{v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions"},txCreation:{v:32e3,d:"The cost of creating a contract via tx"},txDataZero:{v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},txDataNonZero:{v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},copy:{v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},ecRecover:{v:3e3,d:""},sha256:{v:60,d:""},sha256Word:{v:12,d:""},ripemd160:{v:600,d:""},ripemd160Word:{v:120,d:""},identity:{v:15,d:""},identityWord:{v:3,d:""},stop:{v:0,d:"Base fee of the STOP opcode"},add:{v:3,d:"Base fee of the ADD opcode"},mul:{v:5,d:"Base fee of the MUL opcode"},sub:{v:3,d:"Base fee of the SUB opcode"},div:{v:5,d:"Base fee of the DIV opcode"},sdiv:{v:5,d:"Base fee of the SDIV opcode"},mod:{v:5,d:"Base fee of the MOD opcode"},smod:{v:5,d:"Base fee of the SMOD opcode"},addmod:{v:8,d:"Base fee of the ADDMOD opcode"},mulmod:{v:8,d:"Base fee of the MULMOD opcode"},signextend:{v:5,d:"Base fee of the SIGNEXTEND opcode"},lt:{v:3,d:"Base fee of the LT opcode"},gt:{v:3,d:"Base fee of the GT opcode"},slt:{v:3,d:"Base fee of the SLT opcode"},sgt:{v:3,d:"Base fee of the SGT opcode"},eq:{v:3,d:"Base fee of the EQ opcode"},iszero:{v:3,d:"Base fee of the ISZERO opcode"},and:{v:3,d:"Base fee of the AND opcode"},or:{v:3,d:"Base fee of the OR opcode"},xor:{v:3,d:"Base fee of the XOR opcode"},not:{v:3,d:"Base fee of the NOT opcode"},byte:{v:3,d:"Base fee of the BYTE opcode"},address:{v:2,d:"Base fee of the ADDRESS opcode"},balance:{v:20,d:"Base fee of the BALANCE opcode"},origin:{v:2,d:"Base fee of the ORIGIN opcode"},caller:{v:2,d:"Base fee of the CALLER opcode"},callvalue:{v:2,d:"Base fee of the CALLVALUE opcode"},calldataload:{v:3,d:"Base fee of the CALLDATALOAD opcode"},calldatasize:{v:2,d:"Base fee of the CALLDATASIZE opcode"},calldatacopy:{v:3,d:"Base fee of the CALLDATACOPY opcode"},codesize:{v:2,d:"Base fee of the CODESIZE opcode"},codecopy:{v:3,d:"Base fee of the CODECOPY opcode"},gasprice:{v:2,d:"Base fee of the GASPRICE opcode"},extcodesize:{v:20,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:20,d:"Base fee of the EXTCODECOPY opcode"},blockhash:{v:20,d:"Base fee of the BLOCKHASH opcode"},coinbase:{v:2,d:"Base fee of the COINBASE opcode"},timestamp:{v:2,d:"Base fee of the TIMESTAMP opcode"},number:{v:2,d:"Base fee of the NUMBER opcode"},difficulty:{v:2,d:"Base fee of the DIFFICULTY opcode"},gaslimit:{v:2,d:"Base fee of the GASLIMIT opcode"},pop:{v:2,d:"Base fee of the POP opcode"},mload:{v:3,d:"Base fee of the MLOAD opcode"},mstore:{v:3,d:"Base fee of the MSTORE opcode"},mstore8:{v:3,d:"Base fee of the MSTORE8 opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"},jump:{v:8,d:"Base fee of the JUMP opcode"},jumpi:{v:10,d:"Base fee of the JUMPI opcode"},pc:{v:2,d:"Base fee of the PC opcode"},msize:{v:2,d:"Base fee of the MSIZE opcode"},gas:{v:2,d:"Base fee of the GAS opcode"},push:{v:3,d:"Base fee of the PUSH opcode"},dup:{v:3,d:"Base fee of the DUP opcode"},swap:{v:3,d:"Base fee of the SWAP opcode"},callcode:{v:40,d:"Base fee of the CALLCODE opcode"},return:{v:0,d:"Base fee of the RETURN opcode"},invalid:{v:0,d:"Base fee of the INVALID opcode"},selfdestruct:{v:0,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{stackLimit:{v:1024,d:"Maximum size of VM stack allowed"},callCreateDepth:{v:1024,d:"Maximum depth of call/create stack"},maxExtraDataSize:{v:32,d:"Maximum size extra data may be after Genesis"}},pow:{minimumDifficulty:{v:131072,d:"The minimum that the difficulty may ever be"},difficultyBoundDivisor:{v:2048,d:"The bound divisor of the difficulty, used in the update calculations"},durationLimit:{v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},epochDuration:{v:3e4,d:"Duration between proof-of-work epochs"},timebombPeriod:{v:1e5,d:"Exponential difficulty timebomb period"},minerReward:{v:"5000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:0,d:"the amount of blocks to delay the difficulty bomb with"}}}},1353:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"constantinople",comment:"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)",url:"https://eips.ethereum.org/EIPS/eip-1013",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:200,d:"Once per SSTORE operation if the value doesn't change"},netSstoreInitGas:{v:2e4,d:"Once per SSTORE operation from clean zero"},netSstoreCleanGas:{v:5e3,d:"Once per SSTORE operation from clean non-zero"},netSstoreDirtyGas:{v:200,d:"Once per SSTORE operation from dirty"},netSstoreClearRefund:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},netSstoreResetRefund:{v:4800,d:"Once per SSTORE operation for resetting to the original non-zero value"},netSstoreResetClearRefund:{v:19800,d:"Once per SSTORE operation for resetting to the original zero value"},shl:{v:3,d:"Base fee of the SHL opcode"},shr:{v:3,d:"Base fee of the SHR opcode"},sar:{v:3,d:"Base fee of the SAR opcode"},extcodehash:{v:400,d:"Base fee of the EXTCODEHASH opcode"},create2:{v:32e3,d:"Base fee of the CREATE2 opcode"}},vm:{},pow:{minerReward:{v:"2000000000000000000",d:"The amount a miner gets rewarded for mining a block"},difficultyBombDelay:{v:5e6,d:"the amount of blocks to delay the difficulty bomb with"}}}},3810:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"dao",comment:"DAO rescue hardfork",url:"https://eips.ethereum.org/EIPS/eip-779",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{}}},6257:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"grayGlacier",comment:"Delaying the difficulty bomb to Mid September 2022",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/gray-glacier.md",status:"Draft",eips:[5133],gasConfig:{},gasPrices:{},vm:{},pow:{}}},7446:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"homestead",comment:"Homestead hardfork with protocol and network changes",url:"https://eips.ethereum.org/EIPS/eip-606",status:"Final",gasConfig:{},gasPrices:{delegatecall:{v:40,d:"Base fee of the DELEGATECALL opcode"}},vm:{},pow:{}}},9137:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hardforks=void 0;const n=i(r(9454)),s=i(r(3810)),a=i(r(7446)),o=i(r(7458)),c=i(r(2546)),l=i(r(7251)),d=i(r(1353)),u=i(r(5338)),h=i(r(9597)),p=i(r(7931)),f=i(r(9126)),g=i(r(1233)),m=i(r(2761)),y=i(r(3923)),v=i(r(6257)),b=i(r(6697)),T=i(r(6668));t.hardforks={chainstart:n.default,homestead:a.default,dao:s.default,tangerineWhistle:o.default,spuriousDragon:c.default,byzantium:l.default,constantinople:d.default,petersburg:u.default,istanbul:h.default,muirGlacier:p.default,berlin:f.default,london:g.default,shanghai:m.default,arrowGlacier:y.default,grayGlacier:v.default,mergeForkIdTransition:b.default,merge:T.default}},9597:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"istanbul",comment:"HF targeted for December 2019 following the Constantinople/Petersburg HF",url:"https://eips.ethereum.org/EIPS/eip-1679",status:"Final",gasConfig:{},gasPrices:{blake2Round:{v:1,d:"Gas cost per round for the Blake2 F precompile"},ecAdd:{v:150,d:"Gas costs for curve addition precompile"},ecMul:{v:6e3,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:45e3,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:34e3,d:"Gas costs regarding curve pairing precompile input length"},txDataNonZero:{v:16,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},sstoreSentryGasEIP2200:{v:2300,d:"Minimum gas required to be present for an SSTORE call, not consumed"},sstoreNoopGasEIP2200:{v:800,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:800,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitGasEIP2200:{v:2e4,d:"Once per SSTORE operation from clean zero to non-zero"},sstoreInitRefundEIP2200:{v:19200,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanGasEIP2200:{v:5e3,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreCleanRefundEIP2200:{v:4200,d:"Once per SSTORE operation for resetting to the original non-zero value"},sstoreClearRefundEIP2200:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},balance:{v:700,d:"Base fee of the BALANCE opcode"},extcodehash:{v:700,d:"Base fee of the EXTCODEHASH opcode"},chainid:{v:2,d:"Base fee of the CHAINID opcode"},selfbalance:{v:5,d:"Base fee of the SELFBALANCE opcode"},sload:{v:800,d:"Base fee of the SLOAD opcode"}},vm:{},pow:{}}},1233:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"london",comment:"HF targeted for July 2021 following the Berlin fork",url:"https://github.com/ethereum/eth1.0-specs/blob/master/network-upgrades/mainnet-upgrades/london.md",status:"Final",eips:[1559,3198,3529,3541]}},6668:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"merge",comment:"Hardfork to upgrade the consensus mechanism to Proof-of-Stake",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/merge.md",status:"Final",consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]}},6697:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"mergeForkIdTransition",comment:"Pre-merge hardfork to fork off non-upgraded clients",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Draft",eips:[]}},7931:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"muirGlacier",comment:"HF to delay the difficulty bomb",url:"https://eips.ethereum.org/EIPS/eip-2384",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:9e6,d:"the amount of blocks to delay the difficulty bomb with"}}}},5338:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"petersburg",comment:"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople",url:"https://eips.ethereum.org/EIPS/eip-1716",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:null,d:"Removed along EIP-1283"},netSstoreInitGas:{v:null,d:"Removed along EIP-1283"},netSstoreCleanGas:{v:null,d:"Removed along EIP-1283"},netSstoreDirtyGas:{v:null,d:"Removed along EIP-1283"},netSstoreClearRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetClearRefund:{v:null,d:"Removed along EIP-1283"}},vm:{},pow:{}}},2761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"shanghai",comment:"Next feature hardfork after the merge hardfork having withdrawals, warm coinbase, push0, limit/meter initcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md",status:"Final",eips:[3651,3855,3860,4895]}},2546:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"spuriousDragon",comment:"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit",url:"https://eips.ethereum.org/EIPS/eip-607",status:"Final",gasConfig:{},gasPrices:{expByte:{v:50,d:"Times ceil(log256(exponent)) for the EXP instruction"}},vm:{maxCodeSize:{v:24576,d:"Maximum length of contract code"}},pow:{}}},7458:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"tangerineWhistle",comment:"Hardfork with gas cost changes for IO-heavy operations",url:"https://eips.ethereum.org/EIPS/eip-608",status:"Final",gasConfig:{},gasPrices:{sload:{v:200,d:"Once per SLOAD operation"},call:{v:700,d:"Once per CALL operation & message call transaction"},extcodesize:{v:700,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:700,d:"Base fee of the EXTCODECOPY opcode"},balance:{v:400,d:"Base fee of the BALANCE opcode"},delegatecall:{v:700,d:"Base fee of the DELEGATECALL opcode"},callcode:{v:700,d:"Base fee of the CALLCODE opcode"},selfdestruct:{v:5e3,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{},pow:{}}},8317:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(6664),t),n(r(4443),t),n(r(850),t),n(r(2290),t)},850:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TypeOutput=void 0,(r=t.TypeOutput||(t.TypeOutput={}))[r.Number=0]="Number",r[r.BigInt=1]="BigInt",r[r.Uint8Array=2]="Uint8Array",r[r.PrefixedHexString=3]="PrefixedHexString"},2290:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toType=t.ecrecover=t.bigIntToUnpaddedUint8Array=t.bigIntToHex=t.unpadUint8Array=t.stripZeros=t.setLengthLeft=t.assertIsUint8Array=t.zeros=t.bigIntToUint8Array=t.uint8ArrayToBigInt=t.toUint8Array=t.intToUint8Array=t.padToEven=t.parseGethGenesis=t.stripHexPrefix=void 0;const i=r(7345),n=r(9634),s=r(4555),a=r(4443),o=r(850);t.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return(0,i.isHexPrefixed)(e)?e.slice(2):e};const c=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};function l(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}function d(e){const t=(0,n.bytesToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function u(e){return(0,t.toUint8Array)(`0x${e.toString(16)}`)}function h(e){if(!(e instanceof Uint8Array))throw new Error(`This method only supports Uint8Array but input was: ${e}`)}function p(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e}t.parseGethGenesis=function(e,r,n){try{if(["config","difficulty","gasLimit","alloc"].some((t=>!(t in e))))throw new Error("Invalid format, expected geth genesis fields missing");return void 0!==r&&(e.name=r),function(e,r=!0){var n,s;const{name:o,config:l,difficulty:d,mixHash:u,gasLimit:h,coinbase:p,baseFeePerGas:f}=e;let{extraData:g,timestamp:m,nonce:y}=e;const v=Number(m),{chainId:b}=l;if(""===g&&(g="0x"),(0,i.isHexPrefixed)(m)||(m=c(parseInt(m))),18!==y.length&&(y=function(e){return e&&"0x0"!==e?(0,i.isHexPrefixed)(e)?`0x${(0,t.stripHexPrefix)(e).padStart(16,"0")}`:`0x${e.padStart(16,"0")}`:"0x0000000000000000"}(y)),l.eip155Block!==l.eip158Block)throw new Error("EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork");const T={name:o,chainId:b,networkId:b,genesis:{timestamp:m,gasLimit:parseInt(h),difficulty:parseInt(d),nonce:y,extraData:g,mixHash:u,coinbase:p,baseFeePerGas:f},hardfork:void 0,hardforks:[],bootstrapNodes:[],consensus:void 0!==l.clique?{type:"poa",algorithm:"clique",clique:{period:null!==(n=l.clique.period)&&void 0!==n?n:l.clique.blockperiodseconds,epoch:null!==(s=l.clique.epoch)&&void 0!==s?s:l.clique.epochlength}}:{type:"pow",algorithm:"ethash",ethash:{}}},_={[a.Hardfork.Homestead]:{name:"homesteadBlock"},[a.Hardfork.Dao]:{name:"daoForkBlock"},[a.Hardfork.TangerineWhistle]:{name:"eip150Block"},[a.Hardfork.SpuriousDragon]:{name:"eip155Block"},[a.Hardfork.Byzantium]:{name:"byzantiumBlock"},[a.Hardfork.Constantinople]:{name:"constantinopleBlock"},[a.Hardfork.Petersburg]:{name:"petersburgBlock"},[a.Hardfork.Istanbul]:{name:"istanbulBlock"},[a.Hardfork.MuirGlacier]:{name:"muirGlacierBlock"},[a.Hardfork.Berlin]:{name:"berlinBlock"},[a.Hardfork.London]:{name:"londonBlock"},[a.Hardfork.MergeForkIdTransition]:{name:"mergeForkBlock",postMerge:r},[a.Hardfork.Shanghai]:{name:"shanghaiTime",postMerge:!0,isTimestamp:!0},[a.Hardfork.ShardingForkDev]:{name:"shardingForkTime",postMerge:!0,isTimestamp:!0}},k=Object.keys(_).reduce(((e,t)=>(e[_[t].name]=t,e)),{}),E=Object.keys(l).filter((e=>void 0!==k[e]&&void 0!==l[e]&&null!==l[e]));if(T.hardforks=E.map((e=>({name:k[e],block:!0===_[k[e]].isTimestamp||"number"!=typeof l[e]?null:l[e],timestamp:!0===_[k[e]].isTimestamp&&"number"==typeof l[e]?l[e]:void 0}))).filter((e=>null!==e.block||void 0!==e.timestamp)),T.hardforks.sort(((e,t)=>{var r,i;return(null!==(r=e.block)&&void 0!==r?r:1/0)-(null!==(i=t.block)&&void 0!==i?i:1/0)})),T.hardforks.sort(((e,t)=>{var r,i;return(null!==(r=e.timestamp)&&void 0!==r?r:v)-(null!==(i=t.timestamp)&&void 0!==i?i:v)})),void 0!==l.terminalTotalDifficulty){const e={name:a.Hardfork.Merge,ttd:l.terminalTotalDifficulty,block:null},t=T.hardforks.findIndex((e=>{var t;return!0===(null===(t=_[e.name])||void 0===t?void 0:t.postMerge)}));-1!==t?T.hardforks.splice(t,0,e):T.hardforks.push(e)}const w=T.hardforks.length>0?T.hardforks.slice(-1)[0]:void 0;return T.hardfork=null==w?void 0:w.name,T.hardforks.unshift({name:a.Hardfork.Chainstart,block:0}),T}(e,n)}catch(e){throw new Error(`Error parsing parameters file: ${e.message}`)}},t.padToEven=l,t.intToUint8Array=function(e){const t=c(e);return(0,n.hexToBytes)(`0x${l(t.slice(2))}`)},t.toUint8Array=function(e){if(null==e)return new Uint8Array;if(e instanceof Uint8Array)return e;if(Array.isArray(e))return Uint8Array.from(e);if("string"==typeof e){if(!(0,i.isHexString)(e))throw new Error(`Cannot convert string to Uint8Array. only supports 0x-prefixed hex strings and this string was given: ${e}`);return(0,n.hexToBytes)(l((0,t.stripHexPrefix)(e)))}if("number"==typeof e)return(0,t.toUint8Array)((0,n.numberToHex)(e));if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${e}`);let r=e.toString(16);return r.length%2&&(r=`0${r}`),(0,t.toUint8Array)(`0x${r}`)}if(e.toArray)return Uint8Array.from(e.toArray());throw new Error("invalid type")},t.uint8ArrayToBigInt=d,t.bigIntToUint8Array=u,t.zeros=function(e){return new Uint8Array(e).fill(0)},t.assertIsUint8Array=h,t.setLengthLeft=function(e,r){return h(e),function(e,r,i){const n=(0,t.zeros)(r);return e.length<r?(n.set(e,r-e.length),n):e.subarray(-r)}(e,r)},t.stripZeros=p,t.unpadUint8Array=function(e){return h(e),p(e)},t.bigIntToHex=e=>`0x${e.toString(16)}`,t.bigIntToUnpaddedUint8Array=function(e){return(0,t.unpadUint8Array)(u(e))},t.ecrecover=function(e,t,r,i,n){const a=function(e,t){return e===BigInt(0)||e===BigInt(1)?e:void 0===t?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}(t,n);if(!function(e){return e===BigInt(0)||e===BigInt(1)}(a))throw new Error("Invalid signature v value");return new s.secp256k1.Signature(d(r),d(i)).addRecoveryBit(Number(a)).recoverPublicKey(e).toRawBytes(!1).slice(1)},t.toType=function(e,r){if(null===e)return null;if(void 0===e)return;if("string"==typeof e&&!(0,i.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const s=(0,t.toUint8Array)(e);switch(r){case o.TypeOutput.Uint8Array:return s;case o.TypeOutput.BigInt:return d(s);case o.TypeOutput.Number:{const e=d(s);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case o.TypeOutput.PrefixedHexString:return(0,n.bytesToHex)(s);default:throw new Error("unknown outputType")}}},9247:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(8632),t),n(r(1560),t),n(r(4874),t),n(r(5774),t),n(r(8317),t),n(r(9275),t)},5774:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keyStoreSchema=void 0,t.keyStoreSchema={type:"object",required:["crypto","id","version","address"],properties:{crypto:{type:"object",required:["cipher","ciphertext","cipherparams","kdf","kdfparams","mac"],properties:{cipher:{type:"string"},ciphertext:{type:"string"},cipherparams:{type:"object"},kdf:{type:"string"},kdfparams:{type:"object"},salt:{type:"string"},mac:{type:"string"}}},id:{type:"string"},version:{type:"number"},address:{type:"string"}}}},7592:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Address=void 0;const i=r(7423),n=r(9634),s=r(4555),a=r(2290);class o{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new o((0,a.zeros)(20))}equals(e){return(0,n.uint8ArrayEquals)(this.buf,e.buf)}isZero(){return this.equals(o.zero())}toString(){return(0,n.bytesToHex)(this.buf)}toArray(){return this.buf}static publicToAddress(e,t=!1){let r=e;if((0,a.assertIsUint8Array)(r),t&&64!==r.length&&(r=s.secp256k1.ProjectivePoint.fromHex(r).toRawBytes(!1).slice(1)),64!==r.length)throw new Error("Expected pubKey to be of length 64");return(0,i.keccak256)(r).slice(-20)}}t.Address=o},915:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTransaction=void 0;const i=r(9634),n=r(4555),s=r(2290),a=r(6664),o=r(4443),c=r(9964),l=r(7592),d=r(4562);t.BaseTransaction=class{constructor(e,t){var r,i;this.cache={hash:void 0,dataFee:void 0},this.activeCapabilities=[],this.DEFAULT_CHAIN=o.Chain.Mainnet,this.DEFAULT_HARDFORK=o.Hardfork.Merge;const{nonce:n,gasLimit:a,to:c,value:u,data:h,v:p,r:f,s:g,type:m}=e;this._type=Number((0,s.uint8ArrayToBigInt)((0,s.toUint8Array)(m))),this.txOptions=t;const y=(0,s.toUint8Array)(""===c?"0x":c),v=(0,s.toUint8Array)(""===p?"0x":p),b=(0,s.toUint8Array)(""===f?"0x":f),T=(0,s.toUint8Array)(""===g?"0x":g);this.nonce=(0,s.uint8ArrayToBigInt)((0,s.toUint8Array)(""===n?"0x":n)),this.gasLimit=(0,s.uint8ArrayToBigInt)((0,s.toUint8Array)(""===a?"0x":a)),this.to=y.length>0?new l.Address(y):void 0,this.value=(0,s.uint8ArrayToBigInt)((0,s.toUint8Array)(""===u?"0x":u)),this.data=(0,s.toUint8Array)(""===h?"0x":h),this.v=v.length>0?(0,s.uint8ArrayToBigInt)(v):void 0,this.r=b.length>0?(0,s.uint8ArrayToBigInt)(b):void 0,this.s=T.length>0?(0,s.uint8ArrayToBigInt)(T):void 0,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const _=void 0===this.to||null===this.to,k=null!==(r=t.allowUnlimitedInitCodeSize)&&void 0!==r&&r,E=null!==(i=t.common)&&void 0!==i?i:this._getCommon();_&&E.isActivatedEIP(3860)&&!k&&(0,d.checkMaxInitCodeSize)(E,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(e=!1){const t=[];return this.getBaseFee()>this.gasLimit&&t.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),this.isSigned()&&!this.verifySignature()&&t.push("Invalid Signature"),e?t:0===t.length}_validateYParity(){const{v:e}=this;if(void 0!==e&&e!==BigInt(0)&&e!==BigInt(1)){const e=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(e)}}_validateHighS(){const{s:e}=this;if(this.common.gteHardfork("homestead")&&void 0!==e&&e>n.SECP256K1_ORDER_DIV_2){const e=this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(e)}}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let r=BigInt(0);for(let i=0;i<this.data.length;i+=1)0===this.data[i]?r+=e:r+=t;if((void 0===this.to||null===this.to)&&this.common.isActivatedEIP(3860)){const e=BigInt(Math.ceil(this.data.length/32));r+=this.common.param("gasPrices","initCodeWordCost")*e}return r}toCreationAddress(){return void 0===this.to||0===this.to.buf.length}isSigned(){const{v:e,r:t,s:r}=this;return void 0!==e&&void 0!==t&&void 0!==r}verifySignature(){try{const e=this.getSenderPublicKey();return 0!==(0,s.unpadUint8Array)(e).length}catch(e){return!1}}getSenderAddress(){return new l.Address(l.Address.publicToAddress(this.getSenderPublicKey()))}sign(e){if(32!==e.length){const e=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(e)}let t=!1;0===this.type&&this.common.gteHardfork("spuriousDragon")&&!this.supports(c.Capability.EIP155ReplayProtection)&&(this.activeCapabilities.push(c.Capability.EIP155ReplayProtection),t=!0);const r=this.getMessageToSign(!0),{v:i,r:n,s:s}=this._ecsign(r,e),a=this._processSignature(i,n,s);if(t){const e=this.activeCapabilities.indexOf(c.Capability.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return a}_getCommon(e,t){var r;if(void 0!==t){const r=(0,s.uint8ArrayToBigInt)((0,s.toUint8Array)(t));if(e){if(e.chainId()!==r){const e=this._errorMsg("The chain ID does not match the chain ID of Common");throw new Error(e)}return e.copy()}return a.Common.isSupportedChainId(r)?new a.Common({chain:r,hardfork:this.DEFAULT_HARDFORK}):a.Common.custom({name:"custom-chain",networkId:r,chainId:r},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}return null!==(r=null==e?void 0:e.copy())&&void 0!==r?r:new a.Common({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e,t=256,r=!1){for(const[i,s]of Object.entries(e))switch(t){case 64:if(r){if(void 0!==s&&s>=n.MAX_UINT64){const e=this._errorMsg(`${i} cannot equal or exceed MAX_UINT64 (2^64-1), given ${s}`);throw new Error(e)}}else if(void 0!==s&&s>n.MAX_UINT64){const e=this._errorMsg(`${i} cannot exceed MAX_UINT64 (2^64-1), given ${s}`);throw new Error(e)}break;case 256:if(r){if(void 0!==s&&s>=n.MAX_INTEGER){const e=this._errorMsg(`${i} cannot equal or exceed MAX_INTEGER (2^256-1), given ${s}`);throw new Error(e)}}else if(void 0!==s&&s>n.MAX_INTEGER){const e=this._errorMsg(`${i} cannot exceed MAX_INTEGER (2^256-1), given ${s}`);throw new Error(e)}break;default:{const e=this._errorMsg("unimplemented bits value");throw new Error(e)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[r,i]of Object.entries(e))if(t.includes(r)&&Array.isArray(i))throw new Error(`${r} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?(0,i.bytesToHex)(this.hash()):"not available (unsigned)"}catch(t){e="error"}let t="";try{t=this.isSigned().toString()}catch(t){e="error"}let r="";try{r=this.common.hardfork()}catch(e){r="error"}let n=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return n+=`signed=${t} hf=${r}`,n}_ecsign(e,t,r){const i=n.secp256k1.sign(e,t),s=i.toCompactRawBytes();return{r:s.subarray(0,32),s:s.subarray(32,64),v:void 0===r?BigInt(i.recovery+27):BigInt(i.recovery+35)+BigInt(r)*BigInt(2)}}static fromSerializedTx(e,t={}){}static fromTxData(e,t={}){}}},4555:function(e,t,r){"use strict";var i,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SECP256K1_ORDER_DIV_2=t.SECP256K1_ORDER=t.MAX_INTEGER=t.MAX_UINT64=t.secp256k1=void 0;const o=a(r(5473));t.secp256k1=null!==(i=o.secp256k1)&&void 0!==i?i:o,t.MAX_UINT64=BigInt("0xffffffffffffffff"),t.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),t.SECP256K1_ORDER=t.secp256k1.CURVE.n,t.SECP256K1_ORDER_DIV_2=t.SECP256K1_ORDER/BigInt(2)},6135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeeMarketEIP1559Transaction=void 0;const i=r(7423),n=r(7345),s=r(7256),a=r(9634),o=r(4555),c=r(915),l=r(4562),d=r(2290),u=(0,a.hexToBytes)(2..toString(16).padStart(2,"0"));class h extends c.BaseTransaction{constructor(e,t={}){var r;super(Object.assign(Object.assign({},e),{type:2}),t),this.DEFAULT_HARDFORK="london";const{chainId:i,accessList:n,maxFeePerGas:s,maxPriorityFeePerGas:a}=e;if(this.common=this._getCommon(t.common,i),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const u=(0,l.getAccessListData)(null!=n?n:[]);if(this.accessList=u.accessList,this.AccessListJSON=u.AccessListJSON,(0,l.verifyAccessList)(this.accessList),this.maxFeePerGas=(0,d.uint8ArrayToBigInt)((0,d.toUint8Array)(""===s?"0x":s)),this.maxPriorityFeePerGas=(0,d.uint8ArrayToBigInt)((0,d.toUint8Array)(""===a?"0x":a)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),c.BaseTransaction._validateNotArray(e),this.gasLimit*this.maxFeePerGas>o.MAX_INTEGER){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}this._validateYParity(),this._validateHighS(),(null===(r=null==t?void 0:t.freeze)||void 0===r||r)&&Object.freeze(this)}static fromTxData(e,t={}){return new h(e,t)}static fromSerializedTx(e,t={}){if(!(0,a.uint8ArrayEquals)(e.subarray(0,1),u))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: 2, received: ${(0,a.bytesToHex)(e.subarray(0,1))}`);const r=s.RLP.decode(e.subarray(1));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return h.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(9!==e.length&&12!==e.length)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[r,i,s,a,o,c,l,u,p,f,g,m]=e;return this._validateNotArray({chainId:r,v:f}),(0,n.validateNoLeadingZeroes)({nonce:i,maxPriorityFeePerGas:s,maxFeePerGas:a,gasLimit:o,value:l,v:f,r:g,s:m}),new h({chainId:(0,d.uint8ArrayToBigInt)(r),nonce:i,maxPriorityFeePerGas:s,maxFeePerGas:a,gasLimit:o,to:c,value:l,data:u,accessList:null!=p?p:[],v:void 0!==f?(0,d.uint8ArrayToBigInt)(f):void 0,r:g,s:m},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt((0,l.getDataFeeEIP2930)(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(e=BigInt(0)){const t=this.maxPriorityFeePerGas,r=this.maxFeePerGas-e,i=(t<r?t:r)+e;return this.gasLimit*i+this.value}raw(){return[(0,d.bigIntToUnpaddedUint8Array)(this.chainId),(0,d.bigIntToUnpaddedUint8Array)(this.nonce),(0,d.bigIntToUnpaddedUint8Array)(this.maxPriorityFeePerGas),(0,d.bigIntToUnpaddedUint8Array)(this.maxFeePerGas),(0,d.bigIntToUnpaddedUint8Array)(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),(0,d.bigIntToUnpaddedUint8Array)(this.value),this.data,this.accessList,void 0!==this.v?(0,d.bigIntToUnpaddedUint8Array)(this.v):Uint8Array.from([]),void 0!==this.r?(0,d.bigIntToUnpaddedUint8Array)(this.r):Uint8Array.from([]),void 0!==this.s?(0,d.bigIntToUnpaddedUint8Array)(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return(0,a.uint8ArrayConcat)(u,s.RLP.encode(e))}getMessageToSign(e=!0){const t=this.raw().slice(0,9),r=(0,a.uint8ArrayConcat)(u,s.RLP.encode(t));return e?(0,i.keccak256)(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=(0,i.keccak256)(this.serialize())),this.cache.hash):(0,i.keccak256)(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r:r,s:i}=this;this._validateHighS();try{return(0,d.ecrecover)(e,t+BigInt(27),(0,d.bigIntToUnpaddedUint8Array)(r),(0,d.bigIntToUnpaddedUint8Array)(i))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){const i=Object.assign(Object.assign({},this.txOptions),{common:this.common});return h.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:(0,d.uint8ArrayToBigInt)(t),s:(0,d.uint8ArrayToBigInt)(r)},i)}toJSON(){const e=(0,l.getAccessListJSON)(this.accessList);return{chainId:(0,d.bigIntToHex)(this.chainId),nonce:(0,d.bigIntToHex)(this.nonce),maxPriorityFeePerGas:(0,d.bigIntToHex)(this.maxPriorityFeePerGas),maxFeePerGas:(0,d.bigIntToHex)(this.maxFeePerGas),gasLimit:(0,d.bigIntToHex)(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:(0,d.bigIntToHex)(this.value),data:(0,a.bytesToHex)(this.data),accessList:e,v:void 0!==this.v?(0,d.bigIntToHex)(this.v):void 0,r:void 0!==this.r?(0,d.bigIntToHex)(this.r):void 0,s:void 0!==this.s?(0,d.bigIntToHex)(this.s):void 0}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}t.FeeMarketEIP1559Transaction=h},9013:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessListEIP2930Transaction=void 0;const i=r(7423),n=r(7345),s=r(7256),a=r(9634),o=r(4555),c=r(4562),l=r(2290),d=r(915),u=(0,a.hexToBytes)(1..toString(16).padStart(2,"0"));class h extends d.BaseTransaction{constructor(e,t={}){var r;super(Object.assign(Object.assign({},e),{type:1}),t),this.DEFAULT_HARDFORK="berlin";const{chainId:i,accessList:n,gasPrice:s}=e;if(this.common=this._getCommon(t.common,i),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const a=(0,c.getAccessListData)(null!=n?n:[]);if(this.accessList=a.accessList,this.AccessListJSON=a.AccessListJSON,(0,c.verifyAccessList)(this.accessList),this.gasPrice=(0,l.uint8ArrayToBigInt)((0,l.toUint8Array)(""===s?"0x":s)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),d.BaseTransaction._validateNotArray(e),this.gasPrice*this.gasLimit>o.MAX_INTEGER){const e=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(e)}this._validateYParity(),this._validateHighS(),(null===(r=null==t?void 0:t.freeze)||void 0===r||r)&&Object.freeze(this)}static fromTxData(e,t={}){return new h(e,t)}static fromSerializedTx(e,t={}){if(!(0,a.uint8ArrayEquals)(e.subarray(0,1),u))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: 1, received: ${(0,a.bytesToHex)(e.subarray(0,1))}`);const r=s.RLP.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(r))throw new Error("Invalid serialized tx input: must be array");return h.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(8!==e.length&&11!==e.length)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[r,i,s,a,o,c,d,u,p,f,g]=e;return this._validateNotArray({chainId:r,v:p}),(0,n.validateNoLeadingZeroes)({nonce:i,gasPrice:s,gasLimit:a,value:c,v:p,r:f,s:g}),new h({chainId:(0,l.uint8ArrayToBigInt)(r),nonce:i,gasPrice:s,gasLimit:a,to:o,value:c,data:d,accessList:null!=u?u:[],v:void 0!==p?(0,l.uint8ArrayToBigInt)(p):void 0,r:f,s:g},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt((0,c.getDataFeeEIP2930)(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[(0,l.bigIntToUnpaddedUint8Array)(this.chainId),(0,l.bigIntToUnpaddedUint8Array)(this.nonce),(0,l.bigIntToUnpaddedUint8Array)(this.gasPrice),(0,l.bigIntToUnpaddedUint8Array)(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),(0,l.bigIntToUnpaddedUint8Array)(this.value),this.data,this.accessList,void 0!==this.v?(0,l.bigIntToUnpaddedUint8Array)(this.v):Uint8Array.from([]),void 0!==this.r?(0,l.bigIntToUnpaddedUint8Array)(this.r):Uint8Array.from([]),void 0!==this.s?(0,l.bigIntToUnpaddedUint8Array)(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return(0,a.uint8ArrayConcat)(u,s.RLP.encode(e))}getMessageToSign(e=!0){const t=this.raw().slice(0,8),r=(0,a.uint8ArrayConcat)(u,s.RLP.encode(t));return e?(0,i.keccak256)(r):r}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=(0,i.keccak256)(this.serialize())),this.cache.hash):(0,i.keccak256)(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r:r,s:i}=this;this._validateHighS();try{return(0,l.ecrecover)(e,t+BigInt(27),(0,l.bigIntToUnpaddedUint8Array)(r),(0,l.bigIntToUnpaddedUint8Array)(i))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){const i=Object.assign(Object.assign({},this.txOptions),{common:this.common});return h.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:(0,l.uint8ArrayToBigInt)(t),s:(0,l.uint8ArrayToBigInt)(r)},i)}toJSON(){const e=(0,c.getAccessListJSON)(this.accessList);return{chainId:(0,l.bigIntToHex)(this.chainId),nonce:(0,l.bigIntToHex)(this.nonce),gasPrice:(0,l.bigIntToHex)(this.gasPrice),gasLimit:(0,l.bigIntToHex)(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:(0,l.bigIntToHex)(this.value),data:(0,a.bytesToHex)(this.data),accessList:e,v:void 0!==this.v?(0,l.bigIntToHex)(this.v):void 0,r:void 0!==this.r?(0,l.bigIntToHex)(this.r):void 0,s:void 0!==this.s?(0,l.bigIntToHex)(this.s):void 0}}errorStr(){var e,t;let r=this._getSharedErrorPostfix();return r+=` gasPrice=${this.gasPrice} accessListCount=${null!==(t=null===(e=this.accessList)||void 0===e?void 0:e.length)&&void 0!==t?t:0}`,r}_errorMsg(e){return`${e} (${this.errorStr()})`}}t.AccessListEIP2930Transaction=h},9275:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.txUtils=t.BaseTransaction=t.TransactionFactory=t.Transaction=t.AccessListEIP2930Transaction=t.FeeMarketEIP1559Transaction=void 0;var o=r(6135);Object.defineProperty(t,"FeeMarketEIP1559Transaction",{enumerable:!0,get:function(){return o.FeeMarketEIP1559Transaction}});var c=r(9013);Object.defineProperty(t,"AccessListEIP2930Transaction",{enumerable:!0,get:function(){return c.AccessListEIP2930Transaction}});var l=r(5381);Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return l.Transaction}});var d=r(7668);Object.defineProperty(t,"TransactionFactory",{enumerable:!0,get:function(){return d.TransactionFactory}});var u=r(915);Object.defineProperty(t,"BaseTransaction",{enumerable:!0,get:function(){return u.BaseTransaction}}),t.txUtils=s(r(4562)),a(r(9964),t)},5381:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=void 0;const i=r(7256),n=r(7423),s=r(9634),a=r(7345),o=r(2290),c=r(4555),l=r(915),d=r(9964);function u(e,t){const r=Number(e),i=2*Number(t);return r===i+35||r===i+36}class h extends l.BaseTransaction{constructor(e,t={}){var r;if(super(Object.assign(Object.assign({},e),{type:0}),t),this.common=this._validateTxV(this.v,t.common),this.gasPrice=(0,o.uint8ArrayToBigInt)((0,o.toUint8Array)(""===e.gasPrice?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>c.MAX_INTEGER){const e=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),l.BaseTransaction._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?u(this.v,this.common.chainId())&&this.activeCapabilities.push(d.Capability.EIP155ReplayProtection):this.activeCapabilities.push(d.Capability.EIP155ReplayProtection)),(null===(r=null==t?void 0:t.freeze)||void 0===r||r)&&Object.freeze(this)}static fromTxData(e,t={}){return new h(e,t)}static fromSerializedTx(e,t={}){const r=i.RLP.decode(e);if(!Array.isArray(r))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(r,t)}static fromValuesArray(e,t={}){if(6!==e.length&&9!==e.length)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[r,i,n,s,o,c,l,d,u]=e;return(0,a.validateNoLeadingZeroes)({nonce:r,gasPrice:i,gasLimit:n,value:o,v:l,r:d,s:u}),new h({nonce:r,gasPrice:i,gasLimit:n,to:s,value:o,data:c,v:l,r:d,s:u},t)}raw(){return[(0,o.bigIntToUnpaddedUint8Array)(this.nonce),(0,o.bigIntToUnpaddedUint8Array)(this.gasPrice),(0,o.bigIntToUnpaddedUint8Array)(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),(0,o.bigIntToUnpaddedUint8Array)(this.value),this.data,void 0!==this.v?(0,o.bigIntToUnpaddedUint8Array)(this.v):Uint8Array.from([]),void 0!==this.r?(0,o.bigIntToUnpaddedUint8Array)(this.r):Uint8Array.from([]),void 0!==this.s?(0,o.bigIntToUnpaddedUint8Array)(this.s):Uint8Array.from([])]}serialize(){return i.RLP.encode(this.raw())}_getMessageToSign(){const e=[(0,o.bigIntToUnpaddedUint8Array)(this.nonce),(0,o.bigIntToUnpaddedUint8Array)(this.gasPrice),(0,o.bigIntToUnpaddedUint8Array)(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),(0,o.bigIntToUnpaddedUint8Array)(this.value),this.data];return this.supports(d.Capability.EIP155ReplayProtection)&&(e.push((0,o.toUint8Array)(this.common.chainId())),e.push((0,o.unpadUint8Array)((0,o.toUint8Array)(0))),e.push((0,o.unpadUint8Array)((0,o.toUint8Array)(0)))),e}getMessageToSign(e=!0){const t=this._getMessageToSign();return e?(0,n.keccak256)(i.RLP.encode(t)):t}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=(0,n.keccak256)(i.RLP.encode(this.raw()))),this.cache.hash):(0,n.keccak256)(i.RLP.encode(this.raw()))}getMessageToVerifySignature(){if(!this.isSigned()){const e=this._errorMsg("This transaction is not signed");throw new Error(e)}const e=this._getMessageToSign();return(0,n.keccak256)(i.RLP.encode(e))}getSenderPublicKey(){const e=this.getMessageToVerifySignature(),{v:t,r:r,s:i}=this;this._validateHighS();try{return(0,o.ecrecover)(e,t,(0,o.bigIntToUnpaddedUint8Array)(r),(0,o.bigIntToUnpaddedUint8Array)(i),this.supports(d.Capability.EIP155ReplayProtection)?this.common.chainId():void 0)}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,r){let i=e;this.supports(d.Capability.EIP155ReplayProtection)&&(i+=this.common.chainId()*BigInt(2)+BigInt(8));const n=Object.assign(Object.assign({},this.txOptions),{common:this.common});return h.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:i,r:(0,o.uint8ArrayToBigInt)(t),s:(0,o.uint8ArrayToBigInt)(r)},n)}toJSON(){return{nonce:(0,o.bigIntToHex)(this.nonce),gasPrice:(0,o.bigIntToHex)(this.gasPrice),gasLimit:(0,o.bigIntToHex)(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:(0,o.bigIntToHex)(this.value),data:(0,s.bytesToHex)(this.data),v:void 0!==this.v?(0,o.bigIntToHex)(this.v):void 0,r:void 0!==this.r?(0,o.bigIntToHex)(this.r):void 0,s:void 0!==this.s?(0,o.bigIntToHex)(this.s):void 0}}_validateTxV(e,t){let r;const i=void 0!==e?Number(e):void 0;if(void 0!==i&&i<37&&27!==i&&28!==i)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${i}`);if(void 0!==i&&0!==i&&(!t||t.gteHardfork("spuriousDragon"))&&27!==i&&28!==i)if(t){if(!u(BigInt(i),t.chainId()))throw new Error(`Incompatible EIP155-based V ${i} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let e;e=(i-35)%2==0?35:36,r=BigInt(i-e)/BigInt(2)}return this._getCommon(t,r)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}t.Transaction=h},7668:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionFactory=void 0;const i=r(2290),n=r(6135),s=r(9013),a=r(5381),o=new Map;class c{constructor(){}static typeToInt(e){return Number((0,i.uint8ArrayToBigInt)((0,i.toUint8Array)(e)))}static registerTransactionType(e,t){const r=c.typeToInt(e);o.set(r,t)}static fromTxData(e,t={}){if(!("type"in e)||void 0===e.type)return a.Transaction.fromTxData(e,t);const r=c.typeToInt(e.type);if(0===r)return a.Transaction.fromTxData(e,t);if(1===r)return s.AccessListEIP2930Transaction.fromTxData(e,t);if(2===r)return n.FeeMarketEIP1559Transaction.fromTxData(e,t);const i=o.get(r);if(null==i?void 0:i.fromTxData)return i.fromTxData(e,t);throw new Error(`Tx instantiation with type ${r} not supported`)}static fromSerializedData(e,t={}){if(!(e[0]<=127))return a.Transaction.fromSerializedTx(e,t);switch(e[0]){case 1:return s.AccessListEIP2930Transaction.fromSerializedTx(e,t);case 2:return n.FeeMarketEIP1559Transaction.fromSerializedTx(e,t);default:{const r=o.get(Number(e[0]));if(null==r?void 0:r.fromSerializedTx)return r.fromSerializedTx(e,t);throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}}static fromBlockBodyData(e,t={}){if(e instanceof Uint8Array)return this.fromSerializedData(e,t);if(Array.isArray(e))return a.Transaction.fromValuesArray(e,t);throw new Error("Cannot decode transaction: unknown type input")}}t.TransactionFactory=c},9964:(e,t)=>{"use strict";function r(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}var i;Object.defineProperty(t,"__esModule",{value:!0}),t.isAccessList=t.isAccessListUint8Array=t.Capability=void 0,(i=t.Capability||(t.Capability={}))[i.EIP155ReplayProtection=155]="EIP155ReplayProtection",i[i.EIP1559FeeMarket=1559]="EIP1559FeeMarket",i[i.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",i[i.EIP2930AccessLists=2930]="EIP2930AccessLists",t.isAccessListUint8Array=r,t.isAccessList=function(e){return!r(e)}},4562:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDataFeeEIP2930=t.getAccessListJSON=t.verifyAccessList=t.getAccessListData=t.checkMaxInitCodeSize=void 0;const i=r(9634),n=r(2290),s=r(9964);t.checkMaxInitCodeSize=(e,t)=>{const r=e.param("vm","maxInitCodeSize");if(r&&BigInt(t)>r)throw new Error(`the initcode size of this transaction is too large: it is ${t} while the max is ${e.param("vm","maxInitCodeSize")}`)},t.getAccessListData=e=>{let t,r;if((0,s.isAccessList)(e)){t=e;const i=[];for(let t=0;t<e.length;t+=1){const r=e[t],s=(0,n.toUint8Array)(r.address),a=[];for(let e=0;e<r.storageKeys.length;e+=1)a.push((0,n.toUint8Array)(r.storageKeys[e]));i.push([s,a])}r=i}else{r=null!=e?e:[];const n=[];for(let e=0;e<r.length;e+=1){const t=r[e],s=(0,i.bytesToHex)(t[0]),a=[];for(let e=0;e<t[1].length;e+=1)a.push((0,i.bytesToHex)(t[1][e]));const o={address:s,storageKeys:a};n.push(o)}t=n}return{AccessListJSON:t,accessList:r}},t.verifyAccessList=e=>{for(let t=0;t<e.length;t+=1){const r=e[t],i=r[0],n=r[1];if(void 0!==r[2])throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(20!==i.length)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let e=0;e<n.length;e+=1)if(32!==n[e].length)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}},t.getAccessListJSON=e=>{const t=[];for(let r=0;r<e.length;r+=1){const s=e[r],a={address:(0,i.bytesToHex)((0,n.setLengthLeft)(s[0],20)),storageKeys:[]},o=s&&s[1];for(let e=0;e<o.length;e+=1){const t=o[e];a.storageKeys.push((0,i.bytesToHex)((0,n.setLengthLeft)(t,32)))}t.push(a)}return t},t.getDataFeeEIP2930=(e,t)=>{const r=t.param("gasPrices","accessListStorageKeyCost"),i=t.param("gasPrices","accessListAddressCost");let n=0;for(let t=0;t<e.length;t+=1)n+=e[t][1].length;return e.length*Number(i)+n*Number(r)}},4874:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8632:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Wallet=void 0;const n=r(9970),s=r(7345);class a extends n.Web3BaseWallet{constructor(){super(...arguments),this._addressMap=new Map,this._defaultKeyName="web3js_wallet"}static getStorage(){let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return!t||22!==t.code&&1014!==t.code&&"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||(0,s.isNullish)(e)||0===e.length?void 0:e}}create(e){for(let t=0;t<e;t+=1)this.add(this._accountProvider.create());return this}add(e){var t;if("string"==typeof e)return this.add(this._accountProvider.privateKeyToAccount(e));let r=this.length;return this.get(e.address)&&(console.warn(`Account ${e.address.toLowerCase()} already exists.`),r=null!==(t=this._addressMap.get(e.address.toLowerCase()))&&void 0!==t?t:r),this._addressMap.set(e.address.toLowerCase(),r),this[r]=e,this}get(e){if("string"==typeof e){const t=this._addressMap.get(e.toLowerCase());return(0,s.isNullish)(t)?void 0:this[t]}return this[e]}remove(e){if("string"==typeof e){const t=this._addressMap.get(e.toLowerCase());return!(0,s.isNullish)(t)&&(this._addressMap.delete(e.toLowerCase()),this.splice(t,1),!0)}return!!this[e]&&(this.splice(e,1),!0)}clear(){return this._addressMap.clear(),this.length=0,this}encrypt(e,t){return i(this,void 0,void 0,(function*(){return Promise.all(this.map((r=>i(this,void 0,void 0,(function*(){return r.encrypt(e,t)})))))}))}decrypt(e,t,r){return i(this,void 0,void 0,(function*(){const n=yield Promise.all(e.map((e=>i(this,void 0,void 0,(function*(){return this._accountProvider.decrypt(e,t,r)})))));for(const e of n)this.add(e);return this}))}save(e,t){return i(this,void 0,void 0,(function*(){const r=a.getStorage();if(!r)throw new Error("Local storage not available.");return r.setItem(null!=t?t:this._defaultKeyName,JSON.stringify(yield this.encrypt(e))),!0}))}load(e,t){return i(this,void 0,void 0,(function*(){const r=a.getStorage();if(!r)throw new Error("Local storage not available.");const i=r.getItem(null!=t?t:this._defaultKeyName);return i&&(yield this.decrypt(JSON.parse(i)||[],e)),this}))}}t.Wallet=a},6658:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Contract=void 0;const n=r(6527),s=r(5071),a=r(6637),o=r(8381),c=r(9970),l=r(9634),d=r(7345),u=r(5537),h=r(7388),p=r(3948),f={logs:h.LogsSubscription,newHeads:a.NewHeadsSubscription,newBlockHeaders:a.NewHeadsSubscription};class g extends n.Web3Context{constructor(e,t,r,i,a){var o,u,h;const m=(0,p.isContractInitOptions)(t)?t:(0,p.isContractInitOptions)(r)?r:void 0;let y,v;if(y=(0,p.isWeb3ContractContext)(t)?t:(0,p.isWeb3ContractContext)(r)?r:i,v="object"==typeof t&&"provider"in t?t.provider:"object"==typeof r&&"provider"in r?r.provider:"object"==typeof i&&"provider"in i?i.provider:g.givenProvider,super(Object.assign(Object.assign({},y),{provider:v,registeredSubscriptions:f})),this.syncWithContext=!1,this._functions={},!(0,d.isNullish)(m)&&!(0,d.isNullish)(m.data)&&!(0,d.isNullish)(m.input)&&"both"!==this.config.contractDataInputFill)throw new s.ContractTransactionDataAndInputError({data:m.data,input:m.input});this._overloadedMethodAbis=new Map;const b=(0,l.isDataFormat)(i)?i:(0,l.isDataFormat)(r)?r:null!=a?a:c.DEFAULT_RETURN_FORMAT,T="string"==typeof t?t:void 0;"both"===this.config.contractDataInputFill?this._dataInputFill=this.config.contractDataInputFill:this._dataInputFill=null!==(o=null==m?void 0:m.dataInputFill)&&void 0!==o?o:this.config.contractDataInputFill,this._parseAndSetJsonInterface(e,b),(0,d.isNullish)(T)||this._parseAndSetAddress(T,b),this.options={address:T,jsonInterface:this._jsonInterface,gas:null!==(u=null==m?void 0:m.gas)&&void 0!==u?u:null==m?void 0:m.gasLimit,gasPrice:null==m?void 0:m.gasPrice,from:null==m?void 0:m.from,input:null==m?void 0:m.input,data:null==m?void 0:m.data},this.syncWithContext=null!==(h=null==m?void 0:m.syncWithContext)&&void 0!==h&&h,y instanceof n.Web3Context&&this.subscribeToContextEvents(y),Object.defineProperty(this.options,"address",{set:e=>this._parseAndSetAddress(e,b),get:()=>this._address}),Object.defineProperty(this.options,"jsonInterface",{set:e=>this._parseAndSetJsonInterface(e,b),get:()=>this._jsonInterface})}get events(){return this._events}get methods(){return this._methods}clone(){let e;return e=this.options.address?new g([...this._jsonInterface,...this._errorsInterface],this.options.address,{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this._dataInputFill},this.getContextObject()):new g([...this._jsonInterface,...this._errorsInterface],{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this._dataInputFill},this.getContextObject()),this.context&&e.subscribeToContextEvents(this.context),e}deploy(e){var t,r,n;let a=this._jsonInterface.find((e=>"constructor"===e.type));a||(a={type:"constructor",inputs:[],stateMutability:""});const o=(0,l.format)({format:"bytes"},null!==(t=null==e?void 0:e.input)&&void 0!==t?t:this.options.input,c.DEFAULT_RETURN_FORMAT),d=(0,l.format)({format:"bytes"},null!==(r=null==e?void 0:e.data)&&void 0!==r?r:this.options.data,c.DEFAULT_RETURN_FORMAT);if(!(o&&"0x"!==o.trim()||d&&"0x"!==d.trim()))throw new s.Web3ContractError("contract creation without any data provided.");const h=null!==(n=null==e?void 0:e.arguments)&&void 0!==n?n:[],p=Object.assign(Object.assign({},this.options),{input:o,data:d}),f=null!=o?o:d;return{arguments:h,send:e=>{const t=Object.assign({},e);return this._contractMethodDeploySend(a,h,t,p)},estimateGas:(e,t=c.DEFAULT_RETURN_FORMAT)=>i(this,void 0,void 0,(function*(){const r=Object.assign({},e);return this._contractMethodEstimateGas({abi:a,params:h,returnFormat:t,options:r,contractOptions:p})})),encodeABI:()=>(0,u.encodeMethodABI)(a,h,(0,l.format)({format:"bytes"},f,c.DEFAULT_RETURN_FORMAT))}}getPastEvents(e,t,r){var n;return i(this,void 0,void 0,(function*(){const i="string"==typeof e?e:a.ALL_EVENTS,o="string"==typeof e||(0,l.isDataFormat)(e)?(0,l.isDataFormat)(t)?{}:t:e,d=(0,l.isDataFormat)(e)?e:(0,l.isDataFormat)(t)?t:null!=r?r:c.DEFAULT_RETURN_FORMAT,h="allEvents"===i||i===a.ALL_EVENTS?a.ALL_EVENTS_ABI:this._jsonInterface.find((e=>"name"in e&&e.name===i));if(!h)throw new s.Web3ContractError(`Event ${i} not found.`);const{fromBlock:p,toBlock:f,topics:g,address:m}=(0,u.encodeEventABI)(this.options,h,null!=o?o:{}),y=(yield(0,a.getLogs)(this,{fromBlock:p,toBlock:f,topics:g,address:m},d)).map((e=>"string"==typeof e?e:(0,a.decodeEventABI)(h,e,this._jsonInterface,d))),v=null!==(n=null==o?void 0:o.filter)&&void 0!==n?n:{},b=Object.keys(v);return b.length>0?y.filter((e=>"string"==typeof e||b.every((t=>{var r;if(Array.isArray(v[t]))return v[t].some((r=>String(e.returnValues[t]).toUpperCase()===String(r).toUpperCase()));const i=null===(r=h.inputs)||void 0===r?void 0:r.filter((e=>e.name===t))[0];return!(!(null==i?void 0:i.indexed)||"string"!==i.type||(0,l.keccak256)(v[t])!==String(e.returnValues[t]))||String(e.returnValues[t]).toUpperCase()===String(v[t]).toUpperCase()})))):y}))}_parseAndSetAddress(e,t=c.DEFAULT_RETURN_FORMAT){this._address=e?(0,l.toChecksumAddress)((0,l.format)({format:"address"},e,t)):e}_parseAndSetJsonInterface(e,t=c.DEFAULT_RETURN_FORMAT){var r,i,n,s,l;this._functions={},this._methods={},this._events={};let d=[];const u=e.filter((e=>"error"!==e.type)),h=e.filter((e=>(0,o.isAbiErrorFragment)(e)));for(const e of u){const a=Object.assign(Object.assign({},e),{signature:""});if((0,o.isAbiFunctionFragment)(a)){const e=(0,o.jsonInterfaceMethodToString)(a),t=(0,o.encodeFunctionSignature)(e);a.signature=t,a.constant=null!==(i=null!==(r="view"===a.stateMutability)&&void 0!==r?r:"pure"===a.stateMutability)&&void 0!==i?i:a.constant,a.payable=null!==(n="payable"===a.stateMutability)&&void 0!==n?n:a.payable,this._overloadedMethodAbis.set(a.name,[...null!==(s=this._overloadedMethodAbis.get(a.name))&&void 0!==s?s:[],a]);const c=null!==(l=this._overloadedMethodAbis.get(a.name))&&void 0!==l?l:[],d=this._createContractMethod(c,h);this._functions[e]={signature:t,method:d},this._methods[a.name]=this._functions[e].method,this._methods[e]=this._functions[e].method,this._methods[t]=this._functions[e].method}else if((0,o.isAbiEventFragment)(a)){const e=(0,o.jsonInterfaceMethodToString)(a),r=(0,o.encodeEventSignature)(e),i=this._createContractEvent(a,t);a.signature=r,e in this._events&&"bound"!==a.name||(this._events[e]=i),this._events[a.name]=i,this._events[r]=i}d=[...d,a]}this._events.allEvents=this._createContractEvent(a.ALL_EVENTS_ABI,t),this._jsonInterface=[...d],this._errorsInterface=h}_getAbiParams(e,t){var r;try{return d.utils.transformJsonDataToAbiFormat(null!==(r=e.inputs)&&void 0!==r?r:[],t)}catch(t){throw new s.Web3ContractError(`Invalid parameters for method ${e.name}: ${t.message}`)}}_createContractMethod(e,t){const r=e[e.length-1];return(...e)=>{var n,s;let a;const o=null!==(n=this._overloadedMethodAbis.get(r.name))&&void 0!==n?n:[];let l=o[0];const h=t,p=o.filter((t=>{var r;return(null!==(r=t.inputs)&&void 0!==r?r:[]).length===e.length}));if(1===o.length||0===p.length)a=this._getAbiParams(l,e),d.validator.validate(null!==(s=r.inputs)&&void 0!==s?s:[],a);else{const t=[];for(const r of p)try{a=this._getAbiParams(r,e),d.validator.validate(r.inputs,a),l=r;break}catch(e){t.push(e)}if(t.length===p.length)throw new d.Web3ValidatorError(t)}const f={arguments:a,call:(e,t)=>i(this,void 0,void 0,(function*(){return this._contractMethodCall(l,a,h,e,t)})),send:e=>this._contractMethodSend(l,a,h,e),estimateGas:(e,t=c.DEFAULT_RETURN_FORMAT)=>i(this,void 0,void 0,(function*(){return this._contractMethodEstimateGas({abi:l,params:a,returnFormat:t,options:e})})),encodeABI:()=>(0,u.encodeMethodABI)(l,a),createAccessList:(e,t)=>i(this,void 0,void 0,(function*(){return this._contractMethodCreateAccessList(l,a,h,e,t)}))};return l.stateMutability,f}}_contractMethodCall(e,t,r,n,l){var d;return i(this,void 0,void 0,(function*(){const i=(0,p.getEthTxCallParams)({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this._dataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:null!==(d=this.options.from)&&void 0!==d?d:this.config.defaultAccount})});try{const t=yield(0,a.call)(this,i,l,c.DEFAULT_RETURN_FORMAT);return(0,u.decodeMethodReturn)(e,t)}catch(e){throw e instanceof s.ContractExecutionError&&(0,o.decodeContractErrorData)(r,e.innerError),e}}))}_contractMethodCreateAccessList(e,t,r,n,l){var d;return i(this,void 0,void 0,(function*(){const i=(0,p.getCreateAccessListParams)({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:null!==(d=this.options.from)&&void 0!==d?d:this.config.defaultAccount})});try{return(0,a.createAccessList)(this,i,l,c.DEFAULT_RETURN_FORMAT)}catch(e){throw e instanceof s.ContractExecutionError&&(0,o.decodeContractErrorData)(r,e.innerError),e}}))}_contractMethodSend(e,t,r,i,n){var l,d;let u=null!=n?n:this.options;u=Object.assign(Object.assign({},u),{input:void 0,from:null!==(d=null!==(l=u.from)&&void 0!==l?l:this.defaultAccount)&&void 0!==d?d:void 0});const h=(0,p.getSendTxParams)({abi:e,params:t,options:Object.assign(Object.assign({},i),{dataInputFill:this.config.contractDataInputFill}),contractOptions:u}),f=(0,a.sendTransaction)(this,h,c.DEFAULT_RETURN_FORMAT,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface});return f.on("error",(e=>{e instanceof s.ContractExecutionError&&(0,o.decodeContractErrorData)(r,e.innerError)})),f}_contractMethodDeploySend(e,t,r,i){var n,o;let l=null!=i?i:this.options;l=Object.assign(Object.assign({},l),{from:null!==(o=null!==(n=l.from)&&void 0!==n?n:this.defaultAccount)&&void 0!==o?o:void 0});const d=(0,p.getSendTxParams)({abi:e,params:t,options:Object.assign(Object.assign({},r),{dataInputFill:this.config.contractDataInputFill}),contractOptions:l});return(0,a.sendTransaction)(this,d,c.DEFAULT_RETURN_FORMAT,{transactionResolver:e=>{if(e.status===BigInt(0))throw new s.Web3ContractError("code couldn't be stored",e);const t=this.clone();return t.options.address=e.contractAddress,t},contractAbi:this._jsonInterface,checkRevertBeforeSending:!1})}_contractMethodEstimateGas({abi:e,params:t,returnFormat:r,options:n,contractOptions:s}){return i(this,void 0,void 0,(function*(){const i=(0,p.getEstimateGasParams)({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:null!=s?s:this.options});return(0,a.estimateGas)(this,i,c.BlockTags.LATEST,r)}))}_createContractEvent(e,t=c.DEFAULT_RETURN_FORMAT){return(...r)=>{var i;const{topics:n,fromBlock:a}=(0,u.encodeEventABI)(this.options,e,r[0]),o=new h.LogsSubscription({address:this.options.address,topics:n,abi:e,jsonInterface:this._jsonInterface},{subscriptionManager:this.subscriptionManager,returnFormat:t});return(0,d.isNullish)(a)||this.getPastEvents(e.name,{fromBlock:a,topics:n},t).then((e=>{e.forEach((e=>o.emit("data",e)))})).catch((e=>{o.emit("error",new s.SubscriptionError("Failed to get past events.",e))})),null===(i=this.subscriptionManager)||void 0===i||i.addSubscription(o).catch((e=>{o.emit("error",new s.SubscriptionError("Failed to subscribe.",e))})),o}}subscribeToContextEvents(e){const t=this;this.context=e,t.syncWithContext&&e.on(n.Web3ConfigEvent.CONFIG_CHANGE,(e=>{t.setConfig({[e.name]:e.newValue})}))}}t.Contract=g},5537:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeMethodReturn=t.encodeMethodABI=t.encodeEventABI=t.decodeEventABI=void 0;const i=r(9634),n=r(9970),s=r(8381),a=r(6637),o=r(5071);var c=r(6637);Object.defineProperty(t,"decodeEventABI",{enumerable:!0,get:function(){return c.decodeEventABI}}),t.encodeEventABI=({address:e},t,r)=>{var o,c;const l=null==r?void 0:r.topics,d=null!==(o=null==r?void 0:r.filter)&&void 0!==o?o:{},u={};if((0,i.isNullish)(null==r?void 0:r.fromBlock)||(u.fromBlock=(0,i.format)(a.blockSchema.properties.number,null==r?void 0:r.fromBlock,{number:n.FMT_NUMBER.HEX,bytes:n.FMT_BYTES.HEX})),(0,i.isNullish)(null==r?void 0:r.toBlock)||(u.toBlock=(0,i.format)(a.blockSchema.properties.number,null==r?void 0:r.toBlock,{number:n.FMT_NUMBER.HEX,bytes:n.FMT_BYTES.HEX})),l&&Array.isArray(l))u.topics=[...l];else if(u.topics=[],!t||t.anonymous||[a.ALL_EVENTS,"allEvents"].includes(t.name)||u.topics.push(null!==(c=t.signature)&&void 0!==c?c:(0,s.encodeEventSignature)((0,s.jsonInterfaceMethodToString)(t))),![a.ALL_EVENTS,"allEvents"].includes(t.name)&&t.inputs)for(const e of t.inputs){if(!e.indexed)continue;const t=d[e.name];t?Array.isArray(t)?u.topics.push(t.map((t=>(0,s.encodeParameter)(e.type,t)))):"string"===e.type?u.topics.push((0,i.keccak256)(t)):u.topics.push((0,s.encodeParameter)(e.type,t)):u.topics.push(null)}return u.topics.length||delete u.topics,e&&(u.address=e.toLowerCase()),u},t.encodeMethodABI=(e,t,r)=>{const i=Array.isArray(e.inputs)?e.inputs.length:0;if(i!==t.length)throw new o.Web3ContractError(`The number of arguments is not matching the methods required number. You need to pass ${i} arguments.`);const n=(0,s.encodeParameters)(Array.isArray(e.inputs)?e.inputs:[],t).replace("0x","");if((0,s.isAbiConstructorFragment)(e)){if(!r)throw new o.Web3ContractError("The contract has no contract data option set. This is necessary to append the constructor parameters.");return r.startsWith("0x")?`${r}${n}`:`0x${r}${n}`}return`${(0,s.encodeFunctionSignature)(e)}${n}`},t.decodeMethodReturn=(e,t)=>{if("constructor"===e.type)return t;if(!t)return null;const r=t.length>=2?t.slice(2):t;if(!e.outputs)return null;const i=(0,s.decodeParameters)([...e.outputs],r);return 1===i.__length__?i[0]:i}},3211:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const s=r(6658);n(r(5537),t),n(r(6658),t),n(r(7388),t),n(r(3951),t),t.default=s.Contract},7388:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogsSubscription=void 0;const i=r(6527),n=r(6637);class s extends i.Web3Subscription{constructor(e,t){super(e,t),this.address=e.address,this.topics=e.topics,this.abi=e.abi,this.jsonInterface=e.jsonInterface}_buildSubscriptionParams(){return["logs",{address:this.address,topics:this.topics}]}formatSubscriptionResult(e){return(0,n.decodeEventABI)(this.abi,e,this.jsonInterface,super.returnFormat)}}t.LogsSubscription=s},3951:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3948:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCreateAccessListParams=t.isWeb3ContractContext=t.isContractInitOptions=t.getEstimateGasParams=t.getEthTxCallParams=t.getSendTxParams=void 0;const i=r(5071),n=r(9634),s=r(5537),a=(e,t,r,i)=>{var a,o;const c={};return(0,n.isNullish)(e.data)&&"both"!==i||(c.data=(0,s.encodeMethodABI)(t,r,null!==(a=e.data)&&void 0!==a?a:e.input)),(0,n.isNullish)(e.input)&&"both"!==i||(c.input=(0,s.encodeMethodABI)(t,r,null!==(o=e.input)&&void 0!==o?o:e.data)),(0,n.isNullish)(c.input)&&(0,n.isNullish)(c.data)&&(c[i]=(0,s.encodeMethodABI)(t,r)),{data:c.data,input:c.input}};t.getSendTxParams=({abi:e,params:t,options:r,contractOptions:s})=>{var o,c,l;if(!(null!==(l=null!==(c=null!==(o=null==r?void 0:r.input)&&void 0!==o?o:null==r?void 0:r.data)&&void 0!==c?c:s.input)&&void 0!==l?l:s.data)&&!(null==r?void 0:r.to)&&!s.address)throw new i.Web3ContractError("Contract address not specified");if(!(null==r?void 0:r.from)&&!s.from)throw new i.Web3ContractError('Contract "from" address not specified');let d=(0,n.mergeDeep)({to:s.address,gas:s.gas,gasPrice:s.gasPrice,from:s.from,input:s.input,maxPriorityFeePerGas:s.maxPriorityFeePerGas,maxFeePerGas:s.maxFeePerGas,data:s.data},r);const u=a(d,e,t,null==r?void 0:r.dataInputFill);return d=Object.assign(Object.assign({},d),{data:u.data,input:u.input}),d},t.getEthTxCallParams=({abi:e,params:t,options:r,contractOptions:s})=>{if(!(null==r?void 0:r.to)&&!s.address)throw new i.Web3ContractError("Contract address not specified");let o=(0,n.mergeDeep)({to:s.address,gas:s.gas,gasPrice:s.gasPrice,from:s.from,input:s.input,maxPriorityFeePerGas:s.maxPriorityFeePerGas,maxFeePerGas:s.maxFeePerGas,data:s.data},r);const c=a(o,e,t,null==r?void 0:r.dataInputFill);return o=Object.assign(Object.assign({},o),{data:c.data,input:c.input}),o},t.getEstimateGasParams=({abi:e,params:t,options:r,contractOptions:i})=>{let s=(0,n.mergeDeep)({to:i.address,gas:i.gas,gasPrice:i.gasPrice,from:i.from,input:i.input,data:i.data},r);const o=a(s,e,t,null==r?void 0:r.dataInputFill);return s=Object.assign(Object.assign({},s),{data:o.data,input:o.input}),s},t.isContractInitOptions=e=>"object"==typeof e&&!(0,n.isNullish)(e)&&["input","data","from","gas","gasPrice","gasLimit","address","jsonInterface","syncWithContext","dataInputFill"].some((t=>t in e)),t.isWeb3ContractContext=e=>"object"==typeof e&&!(0,n.isNullish)(e)&&!(0,t.isContractInitOptions)(e),t.getCreateAccessListParams=({abi:e,params:t,options:r,contractOptions:s})=>{if(!(null==r?void 0:r.to)&&!s.address)throw new i.Web3ContractError("Contract address not specified");if(!(null==r?void 0:r.from)&&!s.from)throw new i.Web3ContractError('Contract "from" address not specified');let o=(0,n.mergeDeep)({to:s.address,gas:s.gas,gasPrice:s.gasPrice,from:s.from,input:s.input,maxPriorityFeePerGas:s.maxPriorityFeePerGas,maxFeePerGas:s.maxFeePerGas,data:s.data},r);const c=a(o,e,t,null==r?void 0:r.dataInputFill);return o=Object.assign(Object.assign({},o),{data:c.data,input:c.input}),o}},6919:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ENSRegistryAbi=void 0,t.ENSRegistryAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"label",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"recordExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"resolver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"ttl",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"}]},172:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PublicResolverAbi=void 0,t.PublicResolverAbi=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"coinType",type:"uint256"},{indexed:!1,internalType:"bytes",name:"newAddress",type:"bytes"}],name:"AddressChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"},{indexed:!1,internalType:"bytes",name:"record",type:"bytes"}],name:"DNSRecordChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"}],name:"DNSRecordDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"}],name:"DNSZoneCleared",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"lastzonehash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"zonehash",type:"bytes"}],name:"DNSZonehashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes4",name:"interfaceID",type:"bytes4"},{indexed:!1,internalType:"address",name:"implementer",type:"address"}],name:"InterfaceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"x",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"string",name:"indexedKey",type:"string"},{indexed:!1,internalType:"string",name:"key",type:"string"}],name:"TextChanged",type:"event"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"addr",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"coinType",type:"uint256"}],name:"addr",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"contenthash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"uint16",name:"resource",type:"uint16"}],name:"dnsRecord",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"}],name:"hasDNSRecords",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"interfaceImplementer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"pubkey",outputs:[{internalType:"bytes32",name:"x",type:"bytes32"},{internalType:"bytes32",name:"y",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"string",name:"key",type:"string"}],name:"text",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"zonehash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"}]},8677:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.networkIds=t.registryAddresses=t.methodsInInterface=t.interfaceIds=void 0,t.interfaceIds={addr:"0x3b3b57de",name:"0x691f3431",abi:"0x2203ab56",pubkey:"0xc8690233",text:"0x59d1d43c",contenthash:"0xbc1c58d1"},t.methodsInInterface={setAddr:"addr",addr:"addr",setPubkey:"pubkey",pubkey:"pubkey",setContenthash:"contenthash",contenthash:"contenthash"},t.registryAddresses={main:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",goerli:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},t.networkIds={"0x1":"main","0x5":"goerli"}},9142:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ENS=void 0;const n=r(6527),s=r(5071),a=r(6637),o=r(9820),c=r(9970),l=r(8677),d=r(67),u=r(8067);class h extends n.Web3Context{constructor(e,t){super(null!=t?t:""),this.registryAddress=null!=e?e:l.registryAddresses.main,this._registry=new d.Registry(this.getContextObject(),e),this._resolver=new u.Resolver(this._registry)}getResolver(e){return i(this,void 0,void 0,(function*(){return this._registry.getResolver(e)}))}recordExists(e){return i(this,void 0,void 0,(function*(){return this._registry.recordExists(e)}))}getTTL(e){return i(this,void 0,void 0,(function*(){return this._registry.getTTL(e)}))}getOwner(e){return i(this,void 0,void 0,(function*(){return this._registry.getOwner(e)}))}getAddress(e,t=60){return i(this,void 0,void 0,(function*(){return this._resolver.getAddress(e,t)}))}getPubkey(e){return i(this,void 0,void 0,(function*(){return this._resolver.getPubkey(e)}))}getContenthash(e){return i(this,void 0,void 0,(function*(){return this._resolver.getContenthash(e)}))}checkNetwork(){return i(this,void 0,void 0,(function*(){const e=Date.now()/1e3;if(!this._lastSyncCheck||e-this._lastSyncCheck>3600){const t=yield(0,a.isSyncing)(this);if("boolean"!=typeof t||t)throw new s.ENSNetworkNotSyncedError;this._lastSyncCheck=e}if(this._detectedAddress)return this._detectedAddress;const t=yield(0,o.getId)(this,Object.assign(Object.assign({},c.DEFAULT_RETURN_FORMAT),{number:c.FMT_NUMBER.HEX})),r=l.registryAddresses[l.networkIds[t]];if(void 0===r)throw new s.ENSUnsupportedNetworkError(t);return this._detectedAddress=r,this._detectedAddress}))}supportsInterface(e,t){return i(this,void 0,void 0,(function*(){return this._resolver.supportsInterface(e,t)}))}get events(){return this._registry.events}}t.ENS=h},1698:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.registryAddresses=void 0;const s=r(8677);Object.defineProperty(t,"registryAddresses",{enumerable:!0,get:function(){return s.registryAddresses}}),n(r(9142),t)},67:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Registry=void 0;const n=r(3211),s=r(6919),a=r(172),o=r(8677),c=r(8196);t.Registry=class{constructor(e,t){this.contract=new n.Contract(s.ENSRegistryAbi,null!=t?t:o.registryAddresses.main,e),this.context=e}getOwner(e){return i(this,void 0,void 0,(function*(){try{return this.contract.methods.owner((0,c.namehash)(e)).call()}catch(e){throw new Error}}))}getTTL(e){return i(this,void 0,void 0,(function*(){try{return this.contract.methods.ttl((0,c.namehash)(e)).call()}catch(e){throw new Error}}))}recordExists(e){return i(this,void 0,void 0,(function*(){try{return this.contract.methods.recordExists((0,c.namehash)(e)).call()}catch(e){throw new Error}}))}getResolver(e){return i(this,void 0,void 0,(function*(){try{return this.contract.methods.resolver((0,c.namehash)(e)).call().then((e=>{if("string"==typeof e)return new n.Contract(a.PublicResolverAbi,e,this.context);throw new Error}))}catch(e){throw new Error}}))}get events(){return this.contract.events}}},8067:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Resolver=void 0;const n=r(5071),s=r(9634),a=r(7345),o=r(8677),c=r(8196);t.Resolver=class{constructor(e){this.registry=e}getResolverContractAdapter(e){return i(this,void 0,void 0,(function*(){return this.registry.getResolver(e)}))}checkInterfaceSupport(e,t){var r,a;return i(this,void 0,void 0,(function*(){if((0,s.isNullish)(o.interfaceIds[t]))throw new n.ResolverMethodMissingError(null!==(r=e.options.address)&&void 0!==r?r:"",t);if(!(yield e.methods.supportsInterface(o.interfaceIds[t]).call()))throw new n.ResolverMethodMissingError(null!==(a=e.options.address)&&void 0!==a?a:"",t)}))}supportsInterface(e,t){var r;return i(this,void 0,void 0,(function*(){const i=yield this.getResolverContractAdapter(e);let n=t;if(!(0,a.isHexStrict)(n)){if(n=null!==(r=(0,s.sha3)(t))&&void 0!==r?r:"",""===t)throw new Error("Invalid interface Id");n=n.slice(0,10)}return i.methods.supportsInterface(n).call()}))}getAddress(e,t=60){return i(this,void 0,void 0,(function*(){const r=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(r,o.methodsInInterface.addr),r.methods.addr((0,c.namehash)(e),t).call()}))}getPubkey(e){return i(this,void 0,void 0,(function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,o.methodsInInterface.pubkey),t.methods.pubkey((0,c.namehash)(e)).call()}))}getContenthash(e){return i(this,void 0,void 0,(function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,o.methodsInInterface.contenthash),t.methods.contenthash((0,c.namehash)(e)).call()}))}}},8196:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.namehash=t.normalize=void 0;const i=r(9634),n=r(6608);t.normalize=e=>(0,n.ens_normalize)(e),t.namehash=e=>{let r="";for(let e=0;e<32;e+=1)r+="00";if(e){const n=(0,t.normalize)(e).split(".");for(let e=n.length-1;e>=0;e-=1){const t=(0,i.sha3Raw)(n[e]).slice(2);r=(0,i.sha3Raw)(`0x${r}${t}`).slice(2)}}return`0x${r}`}},5609:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Iban=void 0;const i=r(9634),n=r(7345),s=r(5071);class a{constructor(e){if(this.toAddress=()=>{if(this.isDirect()){const e=this._iban.slice(4),t=a._parseInt(e,36),r=(0,i.leftPad)(t,40);return(0,i.toChecksumAddress)(r)}throw new Error("Iban is indirect and cannot be converted. Must be length of 34 or 35")},!a.isIndirect(e)&&!a.isDirect(e))throw new Error("Invalid IBAN was provided");this._iban=e}static isDirect(e){return 34===e.length||35===e.length}isDirect(){return a.isDirect(this._iban)}static isIndirect(e){return 20===e.length}isIndirect(){return a.isIndirect(this._iban)}static isValid(e){return/^XE[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(e)&&1===a._mod9710(a._iso13616Prepare(e))}isValid(){return a.isValid(this._iban)}static fromBban(e){const t=`0${(98-this._mod9710(this._iso13616Prepare(`XE00${e}`))).toString()}`.slice(-2);return new a(`XE${t}${e}`)}static createIndirect(e){return a.fromBban(`ETH${e.institution}${e.identifier}`)}static fromAddress(e){if(!(0,n.isAddress)(e))throw new s.InvalidAddressError(e);const t=BigInt((0,i.hexToNumber)(e)).toString(36),r=(0,i.leftPad)(t,15);return a.fromBban(r.toUpperCase())}static toIban(e){return a.fromAddress(e).toString()}client(){return this.isIndirect()?this._iban.slice(11):""}checksum(){return this._iban.slice(2,4)}institution(){return this.isIndirect()?this._iban.slice(7,11):""}toString(){return this._iban}}t.Iban=a,a._iso13616Prepare=e=>{const t="A".charCodeAt(0),r="Z".charCodeAt(0),i=e.toUpperCase();return`${i.slice(4)}${i.slice(0,4)}`.split("").map((e=>{const i=e.charCodeAt(0);return i>=t&&i<=r?i-t+10:e})).join("")},a._parseInt=(e,t)=>[...e].reduce(((e,r)=>BigInt(parseInt(r,t))+BigInt(t)*e),BigInt(0)),a._mod9710=e=>{let t,r=e;for(;r.length>2;)t=r.slice(0,9),r=`${(parseInt(t,10)%97).toString()}${r.slice(t.length)}`;return parseInt(r,10)%97},a.toAddress=e=>new a(e).toAddress()},9910:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const s=r(5609);n(r(5609),t),n(r(1965),t),t.default=s.Iban},1965:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9757:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const s=r(9638);n(r(9638),t),t.default=s.Personal},9638:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Personal=void 0;const o=r(6527),c=s(r(706));class l extends o.Web3Context{getAccounts(){return a(this,void 0,void 0,(function*(){return c.getAccounts(this.requestManager)}))}newAccount(e){return a(this,void 0,void 0,(function*(){return c.newAccount(this.requestManager,e)}))}unlockAccount(e,t,r){return a(this,void 0,void 0,(function*(){return c.unlockAccount(this.requestManager,e,t,r)}))}lockAccount(e){return a(this,void 0,void 0,(function*(){return c.lockAccount(this.requestManager,e)}))}importRawKey(e,t){return a(this,void 0,void 0,(function*(){return c.importRawKey(this.requestManager,e,t)}))}sendTransaction(e,t){return a(this,void 0,void 0,(function*(){return c.sendTransaction(this.requestManager,e,t)}))}signTransaction(e,t){return a(this,void 0,void 0,(function*(){return c.signTransaction(this.requestManager,e,t)}))}sign(e,t,r){return a(this,void 0,void 0,(function*(){return c.sign(this.requestManager,e,t,r)}))}ecRecover(e,t){return a(this,void 0,void 0,(function*(){return c.ecRecover(this.requestManager,e,t)}))}}t.Personal=l},706:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ecRecover=t.sign=t.signTransaction=t.sendTransaction=t.importRawKey=t.lockAccount=t.unlockAccount=t.newAccount=t.getAccounts=void 0;const n=r(9634),s=r(6637),a=r(9970),o=r(7345),c=r(1181);t.getAccounts=e=>i(void 0,void 0,void 0,(function*(){return(yield c.personalRpcMethods.getAccounts(e)).map(n.toChecksumAddress)})),t.newAccount=(e,t)=>i(void 0,void 0,void 0,(function*(){o.validator.validate(["string"],[t]);const r=yield c.personalRpcMethods.newAccount(e,t);return(0,n.toChecksumAddress)(r)})),t.unlockAccount=(e,t,r,n)=>i(void 0,void 0,void 0,(function*(){return o.validator.validate(["address","string","uint"],[t,r,n]),c.personalRpcMethods.unlockAccount(e,t,r,n)})),t.lockAccount=(e,t)=>i(void 0,void 0,void 0,(function*(){return o.validator.validate(["address"],[t]),c.personalRpcMethods.lockAccount(e,t)})),t.importRawKey=(e,t,r)=>i(void 0,void 0,void 0,(function*(){return o.validator.validate(["string","string"],[t,r]),c.personalRpcMethods.importRawKey(e,t,r)})),t.sendTransaction=(e,t,r)=>i(void 0,void 0,void 0,(function*(){const i=(0,s.formatTransaction)(t,a.ETH_DATA_FORMAT);return c.personalRpcMethods.sendTransaction(e,i,r)})),t.signTransaction=(e,t,r)=>i(void 0,void 0,void 0,(function*(){const i=(0,s.formatTransaction)(t,a.ETH_DATA_FORMAT);return c.personalRpcMethods.signTransaction(e,i,r)})),t.sign=(e,t,r,s)=>i(void 0,void 0,void 0,(function*(){o.validator.validate(["string","address","string"],[t,r,s]);const i=(0,o.isHexStrict)(t)?t:(0,n.utf8ToHex)(t);return c.personalRpcMethods.sign(e,i,r,s)})),t.ecRecover=(e,t,r)=>i(void 0,void 0,void 0,(function*(){o.validator.validate(["string","string"],[t,r]);const i=(0,o.isHexStrict)(t)?t:(0,n.utf8ToHex)(t);return c.personalRpcMethods.ecRecover(e,i,r)}))},9326:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NUMBER_DATA_FORMAT=t.ALL_EVENTS_ABI=t.ALL_EVENTS=void 0;const i=r(9970);t.ALL_EVENTS="ALLEVENTS",t.ALL_EVENTS_ABI={name:t.ALL_EVENTS,signature:"",type:"event",inputs:[]},t.NUMBER_DATA_FORMAT={bytes:i.FMT_BYTES.HEX,number:i.FMT_NUMBER.NUMBER}},6637:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.transactionBuilder=t.detectTransactionType=void 0,r(6985);const s=r(1435);n(r(1435),t),n(r(7543),t),n(r(1922),t),n(r(9326),t),n(r(4832),t),n(r(8650),t),n(r(3222),t),n(r(5140),t),n(r(1258),t),n(r(7460),t);var a=r(7350);Object.defineProperty(t,"detectTransactionType",{enumerable:!0,get:function(){return a.detectTransactionType}});var o=r(223);Object.defineProperty(t,"transactionBuilder",{enumerable:!0,get:function(){return o.transactionBuilder}}),t.default=s.Web3Eth},3222:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.signTypedData=t.createAccessList=t.getFeeHistory=t.getProof=t.getChainId=t.getLogs=t.estimateGas=t.call=t.signTransaction=t.sign=t.sendSignedTransaction=t.sendTransaction=t.getTransactionCount=t.getTransactionReceipt=t.getTransactionFromBlock=t.getPendingTransactions=t.getTransaction=t.getUncle=t.getBlockUncleCount=t.getBlockTransactionCount=t.getBlock=t.getCode=t.getStorageAt=t.getBalance=t.getBlockNumber=t.getGasPrice=t.getHashRate=t.isMining=t.getCoinbase=t.isSyncing=t.getProtocolVersion=void 0;const s=r(9970),a=r(6527),o=r(9634),c=r(9247),l=r(7345),d=r(5071),u=r(1181),h=r(5900),p=r(1922),f=r(223),g=r(5140),m=r(8425),y=r(4745),v=r(9326),b=r(7322);t.getProtocolVersion=e=>i(void 0,void 0,void 0,(function*(){return u.ethRpcMethods.getProtocolVersion(e.requestManager)})),t.isSyncing=e=>i(void 0,void 0,void 0,(function*(){return u.ethRpcMethods.getSyncing(e.requestManager)})),t.getCoinbase=e=>i(void 0,void 0,void 0,(function*(){return u.ethRpcMethods.getCoinbase(e.requestManager)})),t.isMining=e=>i(void 0,void 0,void 0,(function*(){return u.ethRpcMethods.getMining(e.requestManager)})),t.getHashRate=function(e,t){return i(this,void 0,void 0,(function*(){const r=yield u.ethRpcMethods.getHashRate(e.requestManager);return(0,o.format)({format:"uint"},r,t)}))},t.getGasPrice=function(e,t){return i(this,void 0,void 0,(function*(){const r=yield u.ethRpcMethods.getGasPrice(e.requestManager);return(0,o.format)({format:"uint"},r,t)}))},t.getBlockNumber=function(e,t){return i(this,void 0,void 0,(function*(){const r=yield u.ethRpcMethods.getBlockNumber(e.requestManager);return(0,o.format)({format:"uint"},r,t)}))},t.getBalance=function(e,t,r=e.defaultBlock,n){return i(this,void 0,void 0,(function*(){const i=(0,l.isBlockTag)(r)?r:(0,o.format)({format:"uint"},r,s.ETH_DATA_FORMAT),a=yield u.ethRpcMethods.getBalance(e.requestManager,t,i);return(0,o.format)({format:"uint"},a,n)}))},t.getStorageAt=function(e,t,r,n=e.defaultBlock,a){return i(this,void 0,void 0,(function*(){const i=(0,o.format)({format:"uint"},r,s.ETH_DATA_FORMAT),c=(0,l.isBlockTag)(n)?n:(0,o.format)({format:"uint"},n,s.ETH_DATA_FORMAT),d=yield u.ethRpcMethods.getStorageAt(e.requestManager,t,i,c);return(0,o.format)({format:"bytes"},d,a)}))},t.getCode=function(e,t,r=e.defaultBlock,n){return i(this,void 0,void 0,(function*(){const i=(0,l.isBlockTag)(r)?r:(0,o.format)({format:"uint"},r,s.ETH_DATA_FORMAT),a=yield u.ethRpcMethods.getCode(e.requestManager,t,i);return(0,o.format)({format:"bytes"},a,n)}))},t.getBlock=function(e,t=e.defaultBlock,r=!1,n){return i(this,void 0,void 0,(function*(){let i;if((0,l.isBytes)(t)){const n=(0,o.format)({format:"bytes32"},t,s.ETH_DATA_FORMAT);i=yield u.ethRpcMethods.getBlockByHash(e.requestManager,n,r)}else{const n=(0,l.isBlockTag)(t)?t:(0,o.format)({format:"uint"},t,s.ETH_DATA_FORMAT);i=yield u.ethRpcMethods.getBlockByNumber(e.requestManager,n,r)}return(0,o.format)(p.blockSchema,i,n)}))},t.getBlockTransactionCount=function(e,t=e.defaultBlock,r){return i(this,void 0,void 0,(function*(){let i;if((0,l.isBytes)(t)){const r=(0,o.format)({format:"bytes32"},t,s.ETH_DATA_FORMAT);i=yield u.ethRpcMethods.getBlockTransactionCountByHash(e.requestManager,r)}else{const r=(0,l.isBlockTag)(t)?t:(0,o.format)({format:"uint"},t,s.ETH_DATA_FORMAT);i=yield u.ethRpcMethods.getBlockTransactionCountByNumber(e.requestManager,r)}return(0,o.format)({format:"uint"},i,r)}))},t.getBlockUncleCount=function(e,t=e.defaultBlock,r){return i(this,void 0,void 0,(function*(){let i;if((0,l.isBytes)(t)){const r=(0,o.format)({format:"bytes32"},t,s.ETH_DATA_FORMAT);i=yield u.ethRpcMethods.getUncleCountByBlockHash(e.requestManager,r)}else{const r=(0,l.isBlockTag)(t)?t:(0,o.format)({format:"uint"},t,s.ETH_DATA_FORMAT);i=yield u.ethRpcMethods.getUncleCountByBlockNumber(e.requestManager,r)}return(0,o.format)({format:"uint"},i,r)}))},t.getUncle=function(e,t=e.defaultBlock,r,n){return i(this,void 0,void 0,(function*(){const i=(0,o.format)({format:"uint"},r,s.ETH_DATA_FORMAT);let a;if((0,l.isBytes)(t)){const r=(0,o.format)({format:"bytes32"},t,s.ETH_DATA_FORMAT);a=yield u.ethRpcMethods.getUncleByBlockHashAndIndex(e.requestManager,r,i)}else{const r=(0,l.isBlockTag)(t)?t:(0,o.format)({format:"uint"},t,s.ETH_DATA_FORMAT);a=yield u.ethRpcMethods.getUncleByBlockNumberAndIndex(e.requestManager,r,i)}return(0,o.format)(p.blockSchema,a,n)}))},t.getTransaction=function(e,t,r){return i(this,void 0,void 0,(function*(){const i=(0,o.format)({format:"bytes32"},t,s.DEFAULT_RETURN_FORMAT),n=yield u.ethRpcMethods.getTransactionByHash(e.requestManager,i);return(0,l.isNullish)(n)?n:(0,g.formatTransaction)(n,r,{fillInputAndData:!0})}))},t.getPendingTransactions=function(e,t){return i(this,void 0,void 0,(function*(){return(yield u.ethRpcMethods.getPendingTransactions(e.requestManager)).map((e=>(0,g.formatTransaction)(e,t,{fillInputAndData:!0})))}))},t.getTransactionFromBlock=function(e,t=e.defaultBlock,r,n){return i(this,void 0,void 0,(function*(){const i=(0,o.format)({format:"uint"},r,s.ETH_DATA_FORMAT);let a;if((0,l.isBytes)(t)){const r=(0,o.format)({format:"bytes32"},t,s.ETH_DATA_FORMAT);a=yield u.ethRpcMethods.getTransactionByBlockHashAndIndex(e.requestManager,r,i)}else{const r=(0,l.isBlockTag)(t)?t:(0,o.format)({format:"uint"},t,s.ETH_DATA_FORMAT);a=yield u.ethRpcMethods.getTransactionByBlockNumberAndIndex(e.requestManager,r,i)}return(0,l.isNullish)(a)?a:(0,g.formatTransaction)(a,n,{fillInputAndData:!0})}))},t.getTransactionReceipt=function(e,t,r){return i(this,void 0,void 0,(function*(){const i=(0,o.format)({format:"bytes32"},t,s.DEFAULT_RETURN_FORMAT),n=yield u.ethRpcMethods.getTransactionReceipt(e.requestManager,i);return(0,l.isNullish)(n)?n:(0,o.format)(p.transactionReceiptSchema,n,r)}))},t.getTransactionCount=function(e,t,r=e.defaultBlock,n){return i(this,void 0,void 0,(function*(){const i=(0,l.isBlockTag)(r)?r:(0,o.format)({format:"uint"},r,s.ETH_DATA_FORMAT),a=yield u.ethRpcMethods.getTransactionCount(e.requestManager,t,i);return(0,o.format)({format:"uint"},a,n)}))},t.sendTransaction=function(e,t,r,n={checkRevertBeforeSending:!0}){const c=new a.Web3PromiEvent(((a,d)=>{setImmediate((()=>{(()=>{i(this,void 0,void 0,(function*(){const i=new b.SendTxHelper({web3Context:e,promiEvent:c,options:n,returnFormat:r});let u=(0,g.formatTransaction)(Object.assign(Object.assign({},t),{from:(0,f.getTransactionFromOrToAttr)("from",e,t),to:(0,f.getTransactionFromOrToAttr)("to",e,t)}),s.ETH_DATA_FORMAT);try{let n;u=yield i.populateGasPrice({transaction:t,transactionFormatted:u}),yield i.checkRevertBeforeSending(u),i.emitSending(u),e.wallet&&!(0,l.isNullish)(u.from)&&(n=e.wallet.get(u.from));const s=yield i.signAndSend({wallet:n,tx:u}),c=(0,o.format)({format:"bytes32"},s,r);i.emitSent(u),i.emitTransactionHash(c);const d=yield(0,y.waitForTransactionReceipt)(e,s,r),h=i.getReceiptWithEvents((0,o.format)(p.transactionReceiptSchema,d,r));i.emitReceipt(h),a(yield i.handleResolve({receipt:h,tx:u})),i.emitConfirmation({receipt:h,transactionHash:s})}catch(e){d(yield i.handleError({error:e,tx:u}))}}))})()}))}));return c},t.sendSignedTransaction=function(e,t,r,l={checkRevertBeforeSending:!0}){const d=new a.Web3PromiEvent(((a,h)=>{setImmediate((()=>{(()=>{i(this,void 0,void 0,(function*(){const f=new b.SendTxHelper({web3Context:e,promiEvent:d,options:l,returnFormat:r}),g=(0,o.format)({format:"bytes"},t,s.ETH_DATA_FORMAT),v=c.TransactionFactory.fromSerializedData((0,o.bytesToUint8Array)((0,o.hexToBytes)(g))),T=Object.assign(Object.assign({},v.toJSON()),{from:v.getSenderAddress().toString()});try{const{v:t,r:s,s:c}=T,l=n(T,["v","r","s"]);yield f.checkRevertBeforeSending(l),f.emitSending(g);const d=yield(0,m.trySendTransaction)(e,(()=>i(this,void 0,void 0,(function*(){return u.ethRpcMethods.sendRawTransaction(e.requestManager,g)}))));f.emitSent(g);const h=(0,o.format)({format:"bytes32"},d,r);f.emitTransactionHash(h);const v=yield(0,y.waitForTransactionReceipt)(e,d,r),b=f.getReceiptWithEvents((0,o.format)(p.transactionReceiptSchema,v,r));f.emitReceipt(b),a(yield f.handleResolve({receipt:b,tx:T})),f.emitConfirmation({receipt:b,transactionHash:d})}catch(e){h(yield f.handleError({error:e,tx:T}))}}))})()}))}));return d},t.sign=function(e,t,r,n){var a;return i(this,void 0,void 0,(function*(){const i=(0,o.format)({format:"bytes"},t,s.DEFAULT_RETURN_FORMAT);if(null===(a=e.wallet)||void 0===a?void 0:a.get(r)){const t=e.wallet.get(r).sign(i);return(0,o.format)(p.SignatureObjectSchema,t,n)}if("number"==typeof r)throw new d.SignatureError(t,'RPC method "eth_sign" does not support index signatures');const c=yield u.ethRpcMethods.sign(e.requestManager,r,i);return(0,o.format)({format:"bytes"},c,n)}))},t.signTransaction=function(e,t,r){return i(this,void 0,void 0,(function*(){const i=yield u.ethRpcMethods.signTransaction(e.requestManager,(0,g.formatTransaction)(t,s.ETH_DATA_FORMAT));return(0,l.isString)(i)?(0,h.decodeSignedTransaction)(i,r,{fillInputAndData:!0}):{raw:(0,o.format)({format:"bytes"},i.raw,r),tx:(0,g.formatTransaction)(i.tx,r,{fillInputAndData:!0})}}))},t.call=function(e,t,r=e.defaultBlock,n){return i(this,void 0,void 0,(function*(){const i=(0,l.isBlockTag)(r)?r:(0,o.format)({format:"uint"},r,s.ETH_DATA_FORMAT),a=yield u.ethRpcMethods.call(e.requestManager,(0,g.formatTransaction)(t,s.ETH_DATA_FORMAT),i);return(0,o.format)({format:"bytes"},a,n)}))},t.estimateGas=function(e,t,r=e.defaultBlock,n){return i(this,void 0,void 0,(function*(){const i=(0,g.formatTransaction)(t,s.ETH_DATA_FORMAT),a=(0,l.isBlockTag)(r)?r:(0,o.format)({format:"uint"},r,s.ETH_DATA_FORMAT),c=yield u.ethRpcMethods.estimateGas(e.requestManager,i,a);return(0,o.format)({format:"uint"},c,n)}))},t.getLogs=function(e,t,r){return i(this,void 0,void 0,(function*(){let{toBlock:i,fromBlock:n}=t;(0,l.isNullish)(i)||"number"!=typeof i&&"bigint"!=typeof i||(i=(0,o.numberToHex)(i)),(0,l.isNullish)(n)||"number"!=typeof n&&"bigint"!=typeof n||(n=(0,o.numberToHex)(n));const s=Object.assign(Object.assign({},t),{fromBlock:n,toBlock:i});return(yield u.ethRpcMethods.getLogs(e.requestManager,s)).map((e=>"string"==typeof e?e:(0,o.format)(p.logSchema,e,r)))}))},t.getChainId=function(e,t){return i(this,void 0,void 0,(function*(){const r=yield u.ethRpcMethods.getChainId(e.requestManager);return(0,o.format)({format:"uint"},r,t)}))},t.getProof=function(e,t,r,n=e.defaultBlock,a){return i(this,void 0,void 0,(function*(){const i=r.map((e=>(0,o.format)({format:"bytes"},e,s.ETH_DATA_FORMAT))),c=(0,l.isBlockTag)(n)?n:(0,o.format)({format:"uint"},n,s.ETH_DATA_FORMAT),d=yield u.ethRpcMethods.getProof(e.requestManager,t,i,c);return(0,o.format)(p.accountSchema,d,a)}))},t.getFeeHistory=function(e,t,r=e.defaultBlock,n,a){return i(this,void 0,void 0,(function*(){const i=(0,o.format)({format:"uint"},t,s.ETH_DATA_FORMAT),c=(0,l.isBlockTag)(r)?r:(0,o.format)({format:"uint"},r,s.ETH_DATA_FORMAT),d=(0,o.format)({type:"array",items:{format:"uint"}},n,v.NUMBER_DATA_FORMAT),h=yield u.ethRpcMethods.getFeeHistory(e.requestManager,i,c,d);return(0,o.format)(p.feeHistorySchema,h,a)}))},t.createAccessList=function(e,t,r=e.defaultBlock,n){return i(this,void 0,void 0,(function*(){const i=(0,l.isBlockTag)(r)?r:(0,o.format)({format:"uint"},r,s.ETH_DATA_FORMAT),a=yield u.ethRpcMethods.createAccessList(e.requestManager,(0,g.formatTransaction)(t,s.ETH_DATA_FORMAT),i);return(0,o.format)(p.accessListResultSchema,a,n)}))},t.signTypedData=function(e,t,r,n,s){return i(this,void 0,void 0,(function*(){const i=yield u.ethRpcMethods.signTypedData(e.requestManager,t,r,n);return(0,o.format)({format:"bytes"},i,s)}))}},1922:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accountSchema=t.storageProofSchema=t.feeHistorySchema=t.SignatureObjectSchema=t.transactionReceiptSchema=t.syncSchema=t.logSchema=t.blockHeaderSchema=t.withdrawalsSchema=t.blockSchema=t.transactionInfoSchema=t.transactionSchema=t.customChainSchema=t.hardforkSchema=t.chainSchema=t.accessListResultSchema=t.accessListSchema=t.accessListItemSchema=void 0,t.accessListItemSchema={type:"object",properties:{address:{format:"address"},storageKeys:{type:"array",items:{format:"bytes32"}}}},t.accessListSchema={type:"array",items:Object.assign({},t.accessListItemSchema)},t.accessListResultSchema={type:"object",properties:{accessList:Object.assign({},t.accessListSchema),gasUsed:{type:"string"}}},t.chainSchema={type:"string",enum:["goerli","kovan","mainnet","rinkeby","ropsten","sepolia"]},t.hardforkSchema={type:"string",enum:["arrowGlacier","berlin","byzantium","chainstart","constantinople","dao","homestead","istanbul","london","merge","muirGlacier","petersburg","shanghai","spuriousDragon","tangerineWhistle"]},t.customChainSchema={type:"object",properties:{name:{format:"string"},networkId:{format:"uint"},chainId:{format:"uint"}}},t.transactionSchema={type:"object",properties:{from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},t.accessListSchema),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},chain:Object.assign({},t.chainSchema),hardfork:Object.assign({},t.hardforkSchema),chainId:{format:"uint"},networkId:{format:"uint"},common:{type:"object",properties:{customChain:Object.assign({},t.customChainSchema),baseChain:Object.assign({},t.chainSchema),hardfork:Object.assign({},t.hardforkSchema)}},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}}},t.transactionInfoSchema={type:"object",properties:Object.assign(Object.assign({},t.transactionSchema.properties),{blockHash:{format:"bytes32"},blockNumber:{format:"uint"},hash:{format:"bytes32"},transactionIndex:{format:"uint"},from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},t.accessListSchema),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}})},t.blockSchema={type:"object",properties:{parentHash:{format:"bytes32"},sha3Uncles:{format:"bytes32"},miner:{format:"bytes"},stateRoot:{format:"bytes32"},transactionsRoot:{format:"bytes32"},receiptsRoot:{format:"bytes32"},logsBloom:{format:"bytes256"},difficulty:{format:"uint"},number:{format:"uint"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},timestamp:{format:"uint"},extraData:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},totalDifficulty:{format:"uint"},baseFeePerGas:{format:"uint"},size:{format:"uint"},transactions:{oneOf:[{type:"array",items:Object.assign({},t.transactionInfoSchema)},{type:"array",items:{format:"bytes32"}}]},uncles:{type:"array",items:{format:"bytes32"}},hash:{format:"bytes32"}}},t.withdrawalsSchema={type:"object",properties:{index:{format:"uint"},validatorIndex:{format:"uint"},address:{format:"address"},amount:{format:"uint"}}},t.blockHeaderSchema={type:"object",properties:{author:{format:"bytes32"},hash:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},miner:{format:"bytes"},stateRoot:{format:"bytes32"},transactionsRoot:{format:"bytes32"},withdrawalsRoot:{format:"bytes32"},logsBloom:{format:"bytes256"},difficulty:{format:"uint"},totalDifficulty:{format:"uint"},number:{format:"uint"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},timestamp:{format:"uint"},extraData:{format:"bytes"},nonce:{format:"uint"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},baseFeePerGas:{format:"uint"},excessDataGas:{format:"uint"},mixHash:{format:"bytes32"},transactions:{type:"array",items:{format:"bytes32"}},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},t.withdrawalsSchema)}}},t.logSchema={type:"object",properties:{removed:{format:"bool"},logIndex:{format:"uint"},transactionIndex:{format:"uint"},transactionHash:{format:"bytes32"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},address:{format:"address"},data:{format:"bytes"},topics:{type:"array",items:{format:"bytes32"}}}},t.syncSchema={type:"object",properties:{startingBlock:{format:"string"},currentBlock:{format:"string"},highestBlock:{format:"string"},knownStates:{format:"string"},pulledStates:{format:"string"}}},t.transactionReceiptSchema={type:"object",properties:{transactionHash:{format:"bytes32"},transactionIndex:{format:"uint"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},from:{format:"address"},to:{format:"address"},cumulativeGasUsed:{format:"uint"},gasUsed:{format:"uint"},effectiveGasPrice:{format:"uint"},contractAddress:{format:"address"},logs:{type:"array",items:Object.assign({},t.logSchema)},logsBloom:{format:"bytes"},root:{format:"bytes"},status:{format:"uint"},type:{format:"uint"}}},t.SignatureObjectSchema={type:"object",properties:{messageHash:{format:"bytes"},r:{format:"bytes32"},s:{format:"bytes32"},v:{format:"bytes"},message:{format:"bytes"},signature:{format:"bytes"}}},t.feeHistorySchema={type:"object",properties:{oldestBlock:{format:"uint"},baseFeePerGas:{type:"array",items:{format:"uint"}},reward:{type:"array",items:{type:"array",items:{format:"uint"}}},gasUsedRatio:{type:"array",items:{type:"number"}}}},t.storageProofSchema={type:"object",properties:{key:{format:"bytes32"},value:{format:"uint"},proof:{type:"array",items:{format:"bytes32"}}}},t.accountSchema={type:"object",properties:{balance:{format:"uint"},codeHash:{format:"bytes32"},nonce:{format:"uint"},storageHash:{format:"bytes32"},accountProof:{type:"array",items:{format:"bytes32"}},storageProof:{type:"array",items:Object.assign({},t.storageProofSchema)}}}},4832:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSignedTransaction=void 0;const i=r(9634),n=r(9247),s=r(7350),a=r(5140);t.decodeSignedTransaction=function(e,t,r={fillInputAndData:!1}){return{raw:(0,i.format)({format:"bytes"},e,t),tx:(0,a.formatTransaction)(Object.assign(Object.assign({},n.TransactionFactory.fromSerializedData((0,i.hexToBytes)(e)).toJSON()),{hash:(0,i.bytesToHex)((0,i.keccak256)((0,i.hexToBytes)(e))),type:(0,s.detectRawTransactionType)((0,i.hexToBytes)(e))}),t,{fillInputAndData:r.fillInputAndData})}}},7543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeEventABI=void 0;const i=r(9634),n=r(9970),s=r(8381),a=r(1922),o=r(9326);t.decodeEventABI=(e,t,r,c=n.DEFAULT_RETURN_FORMAT)=>{var l,d,u,h,p;let f=Object.assign({},e);const g=(0,i.format)(a.logSchema,t,c);if([o.ALL_EVENTS,"allEvents"].includes(f.name)&&(f=r.find((e=>e.signature===t.topics[0]))||{anonymous:!0}),f.inputs=null!==(d=null!==(l=f.inputs)&&void 0!==l?l:e.inputs)&&void 0!==d?d:[],!f.anonymous){let e=0;(null!==(u=f.inputs)&&void 0!==u?u:[]).forEach((t=>{t.indexed&&(e+=1)})),e>0&&(null==t?void 0:t.topics)&&(null==t?void 0:t.topics.length)!==e+1&&(f=Object.assign(Object.assign({},f),{anonymous:!0,inputs:[]}))}const m=f.anonymous?t.topics:(null!==(h=t.topics)&&void 0!==h?h:[]).slice(1);return Object.assign(Object.assign({},g),{returnValues:(0,s.decodeLog)([...null!==(p=f.inputs)&&void 0!==p?p:[]],t.data,m),event:f.name,signature:!f.anonymous&&t.topics&&0!==t.topics.length&&t.topics[0]?t.topics[0]:void 0,raw:{data:t.data,topics:t.topics}})}},7350:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detectRawTransactionType=t.detectTransactionType=t.defaultTransactionTypeParser=void 0;const i=r(9634),n=r(9970),s=r(7345),a=r(5071),o={type:"object",properties:{accessList:{type:"null"},maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},c={type:"object",properties:{maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},l={type:"object",properties:{gasPrice:{type:"null"}}},d=(e,t,r)=>{try{s.validator.validateJSONSchema(e,t)}catch(e){if(e instanceof s.Web3ValidatorError)throw new a.InvalidPropertiesForTransactionTypeError(e.errors,r);throw e}};t.defaultTransactionTypeParser=e=>{var t,r;const a=e;if(!(0,s.isNullish)(a.type)){let e;switch(a.type){case"0x0":e=o;break;case"0x1":e=c;break;case"0x2":e=l;break;default:return(0,i.format)({format:"uint"},a.type,n.ETH_DATA_FORMAT)}return d(e,a,a.type),(0,i.format)({format:"uint"},a.type,n.ETH_DATA_FORMAT)}if(!(0,s.isNullish)(a.maxFeePerGas)||!(0,s.isNullish)(a.maxPriorityFeePerGas))return d(l,a,"0x2"),"0x2";if(!(0,s.isNullish)(a.accessList))return d(c,a,"0x1"),"0x1";const u=null!==(t=a.hardfork)&&void 0!==t?t:null===(r=a.common)||void 0===r?void 0:r.hardfork;if(!(0,s.isNullish)(u)){const e=Object.keys(n.HardforksOrdered).indexOf(u);if(e>=Object.keys(n.HardforksOrdered).indexOf("london"))return(0,s.isNullish)(a.gasPrice)?"0x2":"0x0";if(e===Object.keys(n.HardforksOrdered).indexOf("berlin"))return"0x0"}return(0,s.isNullish)(a.gasPrice)?void 0:(d(o,a,"0x0"),"0x0")},t.detectTransactionType=(e,r)=>{var i;return(null!==(i=null==r?void 0:r.transactionTypeParser)&&void 0!==i?i:t.defaultTransactionTypeParser)(e)},t.detectRawTransactionType=e=>e[0]>127?"0x0":(0,i.toHex)(e[0])},5140:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatTransaction=void 0;const i=r(9970),n=r(7345),s=r(9634),a=r(5071),o=r(1922);t.formatTransaction=function(e,t=i.DEFAULT_RETURN_FORMAT,r={transactionSchema:o.transactionInfoSchema,fillInputAndData:!1}){var c,l;let d=(0,s.mergeDeep)({},e);if((0,n.isNullish)(null==e?void 0:e.common)||(d.common=Object.assign({},e.common),(0,n.isNullish)(null===(c=e.common)||void 0===c?void 0:c.customChain)||(d.common.customChain=Object.assign({},e.common.customChain))),d=(0,s.format)(null!==(l=r.transactionSchema)&&void 0!==l?l:o.transactionInfoSchema,d,t),!(0,n.isNullish)(d.data)&&!(0,n.isNullish)(d.input)&&(0,s.toHex)(d.data)!==(0,s.toHex)(d.input))throw new a.TransactionDataAndInputError({data:(0,s.bytesToHex)(d.data),input:(0,s.bytesToHex)(d.input)});return r.fillInputAndData&&((0,n.isNullish)(d.data)?(0,n.isNullish)(d.input)||(d.data=d.input):d.input=d.data),(0,n.isNullish)(d.gasLimit)||(d.gas=d.gasLimit,delete d.gasLimit),d}},4429:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getRevertReason=t.parseTransactionError=void 0;const n=r(5071),s=r(8381),a=r(9970),o=r(3222);t.parseTransactionError=(e,t)=>{var r,i,a,o;if(e instanceof n.ContractExecutionError&&e.innerError instanceof n.Eip838ExecutionError){if(void 0!==t){const n=t.filter((e=>(0,s.isAbiErrorFragment)(e)));return(0,s.decodeContractErrorData)(n,e.innerError),{reason:e.innerError.message,signature:null===(r=e.innerError.data)||void 0===r?void 0:r.slice(0,10),data:null===(i=e.innerError.data)||void 0===i?void 0:i.substring(10),customErrorName:e.innerError.errorName,customErrorDecodedSignature:e.innerError.errorSignature,customErrorArguments:e.innerError.errorArgs}}return{reason:e.innerError.message,signature:null===(a=e.innerError.data)||void 0===a?void 0:a.slice(0,10),data:null===(o=e.innerError.data)||void 0===o?void 0:o.substring(10)}}if(e instanceof n.InvalidResponseError&&!Array.isArray(e.innerError)&&void 0!==e.innerError)return e.innerError.message;throw e},t.getRevertReason=function(e,r,n,s=a.DEFAULT_RETURN_FORMAT){return i(this,void 0,void 0,(function*(){try{return void(yield(0,o.call)(e,r,e.defaultBlock,s))}catch(e){return(0,t.parseTransactionError)(e,n)}}))}},1882:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getTransactionError=void 0;const n=r(5071),s=r(4429);t.getTransactionError=function(e,t,r,a,o,c){return i(this,void 0,void 0,(function*(){let i,l=c;if(void 0===l&&(void 0!==a?l=(0,s.parseTransactionError)(a):e.handleRevert&&void 0!==t&&(l=yield(0,s.getRevertReason)(e,t,o))),void 0===l)i=new n.TransactionRevertedWithoutReasonError(r);else if("string"==typeof l)i=new n.TransactionRevertInstructionError(l,void 0,r);else if(void 0!==l.customErrorName&&void 0!==l.customErrorDecodedSignature&&void 0!==l.customErrorArguments){const e=l;i=new n.TransactionRevertWithCustomError(e.reason,e.customErrorName,e.customErrorDecodedSignature,e.customErrorArguments,e.signature,r,e.data)}else i=new n.TransactionRevertInstructionError(l.reason,l.signature,r,l.data);return i}))}},8736:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getTransactionGasPricing=void 0;const n=r(7345),s=r(5071),a=r(9634),o=r(3222),c=r(223);t.getTransactionGasPricing=function(e,t,r){return i(this,void 0,void 0,(function*(){const l=(0,c.getTransactionType)(e,t);if(!(0,n.isNullish)(l)){if(l.startsWith("-"))throw new s.UnsupportedTransactionTypeError(l);if(Number(l)<0||Number(l)>127)throw new s.UnsupportedTransactionTypeError(l);if((0,n.isNullish)(e.gasPrice)&&("0x0"===l||"0x1"===l))return{gasPrice:yield(0,o.getGasPrice)(t,r),maxPriorityFeePerGas:void 0,maxFeePerGas:void 0};if("0x2"===l)return Object.assign({gasPrice:void 0},yield function(e,t,r){var c,l,d;return i(this,void 0,void 0,(function*(){const i=yield(0,o.getBlock)(t,t.defaultBlock,!1,r);if((0,n.isNullish)(i.baseFeePerGas))throw new s.Eip1559NotSupportedError;if(!(0,n.isNullish)(e.gasPrice)){const t=(0,a.format)({format:"uint"},e.gasPrice,r);return{maxPriorityFeePerGas:t,maxFeePerGas:t}}return{maxPriorityFeePerGas:(0,a.format)({format:"uint"},null!==(c=e.maxPriorityFeePerGas)&&void 0!==c?c:t.defaultMaxPriorityFeePerGas,r),maxFeePerGas:(0,a.format)({format:"uint"},null!==(l=e.maxFeePerGas)&&void 0!==l?l:BigInt(i.baseFeePerGas)*BigInt(2)+BigInt(null!==(d=e.maxPriorityFeePerGas)&&void 0!==d?d:t.defaultMaxPriorityFeePerGas),r)}}))}(e,t,r))}}))}},1258:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.prepareTransactionForSigning=void 0;const n=r(9970),s=r(9634),a=r(9247),o=r(7345),c=r(8650),l=r(5140),d=r(223);t.prepareTransactionForSigning=(e,t,r,u=!1,h=!0)=>i(void 0,void 0,void 0,(function*(){const i=yield(0,d.transactionBuilder)({transaction:e,web3Context:t,privateKey:r,fillGasPrice:u,fillGasLimit:h}),p=(0,l.formatTransaction)(i,n.ETH_DATA_FORMAT);return(0,c.validateTransactionForSigning)(p),a.TransactionFactory.fromTxData((e=>{var t,r;return{nonce:e.nonce,gasPrice:e.gasPrice,gasLimit:null!==(t=e.gasLimit)&&void 0!==t?t:e.gas,to:e.to,value:e.value,data:null!==(r=e.data)&&void 0!==r?r:e.input,type:e.type,chainId:e.chainId,accessList:e.accessList,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas}})(p),((e,t)=>{var r,i,n,c,l,d,u,h,p,f,g,m,y,v,b,T,_,k;let E;if(((0,o.isNullish)(e.chain)||(0,o.isNullish)(e.hardfork))&&(0,o.isNullish)(e.common))t.defaultCommon?(E=t.defaultCommon,(0,o.isNullish)(E.hardfork)&&(E.hardfork=null!==(r=e.hardfork)&&void 0!==r?r:t.defaultHardfork),(0,o.isNullish)(E.baseChain)&&(E.baseChain=t.defaultChain)):E=a.Common.custom({name:"custom-network",chainId:(0,s.toNumber)(e.chainId),networkId:(0,o.isNullish)(e.networkId)?void 0:(0,s.toNumber)(e.networkId),defaultHardfork:null!==(i=e.hardfork)&&void 0!==i?i:t.defaultHardfork},{baseChain:t.defaultChain});else{const r=null!==(d=null!==(l=null===(c=null===(n=null==e?void 0:e.common)||void 0===n?void 0:n.customChain)||void 0===c?void 0:c.name)&&void 0!==l?l:e.chain)&&void 0!==d?d:"custom-network",i=(0,s.toNumber)(null!==(p=null===(h=null===(u=null==e?void 0:e.common)||void 0===u?void 0:u.customChain)||void 0===h?void 0:h.chainId)&&void 0!==p?p:null==e?void 0:e.chainId),o=(0,s.toNumber)(null!==(m=null===(g=null===(f=null==e?void 0:e.common)||void 0===f?void 0:f.customChain)||void 0===g?void 0:g.networkId)&&void 0!==m?m:null==e?void 0:e.networkId),w=null!==(b=null!==(v=null===(y=null==e?void 0:e.common)||void 0===y?void 0:y.hardfork)&&void 0!==v?v:null==e?void 0:e.hardfork)&&void 0!==b?b:t.defaultHardfork,A=null!==(k=null!==(_=null===(T=e.common)||void 0===T?void 0:T.baseChain)&&void 0!==_?_:e.chain)&&void 0!==k?k:t.defaultChain;i&&o&&r&&(E=a.Common.custom({name:r,chainId:i,networkId:o,defaultHardfork:w},{baseChain:A}))}return{common:E}})(p,t))}))},4659:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.rejectIfBlockTimeout=void 0;const n=r(9634),s=r(5071),a=r(9326),o=r(3222);function c(e,t,r){const c=e.transactionPollingInterval,[l,d]=(0,n.rejectIfConditionAtInterval)((()=>i(this,void 0,void 0,(function*(){let i;try{i=yield(0,o.getBlockNumber)(e,a.NUMBER_DATA_FORMAT)}catch(e){return void console.warn("An error happen while trying to get the block number",e)}const n=i-t;if(n>=e.transactionBlockTimeout)return new s.TransactionBlockTimeoutError({starterBlockNumber:t,numberOfBlocks:n,transactionHash:r})}))),c);return[d,{clean:()=>{clearInterval(l)}}]}t.rejectIfBlockTimeout=function(e,t){var r,n;return i(this,void 0,void 0,(function*(){const{provider:l}=e.requestManager;let d;const u=yield(0,o.getBlockNumber)(e,a.NUMBER_DATA_FORMAT);return d=(null===(n=(r=l).supportsSubscriptions)||void 0===n?void 0:n.call(r))&&e.enableExperimentalFeatures.useSubscriptionWhenCheckingBlockTimeout?yield function(e,t,r){var n;return i(this,void 0,void 0,(function*(){let i,a,o=!0;function l(i,n){n&&console.warn("error happened at subscription. So revert to polling...",n),a.clean(),o=!1;const[s,l]=c(e,t,r);a.clean=l.clean,s.catch((e=>i(e)))}try{i=yield null===(n=e.subscriptionManager)||void 0===n?void 0:n.subscribe("newHeads"),a={clean:()=>{var t;i.id&&(null===(t=e.subscriptionManager)||void 0===t||t.removeSubscription(i).then((()=>{})).catch((()=>{})))}}}catch(i){return c(e,t,r)}return[new Promise(((n,a)=>{try{i.on("data",(i=>{if(o=!1,!(null==i?void 0:i.number))return;const n=Number(BigInt(i.number)-BigInt(t));n>=e.transactionBlockTimeout&&a(new s.TransactionBlockTimeoutError({starterBlockNumber:t,numberOfBlocks:n,transactionHash:r}))})),i.on("error",(e=>{l(a,e)}))}catch(e){l(a,e)}setTimeout((()=>{o&&l(a)}),1e3*e.blockHeaderTimeout)})),a]}))}(e,u,t):c(e,u,t),d}))}},7322:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SendTxHelper=void 0;const n=r(9970),s=r(7345),a=r(5071),o=r(1181),c=r(8736),l=r(8425),d=r(2117),u=r(9326),h=r(1882),p=r(4429),f=r(7543);t.SendTxHelper=class{constructor({options:e,web3Context:t,promiEvent:r,returnFormat:i}){this.options={checkRevertBeforeSending:!0},this.options=e,this.web3Context=t,this.promiEvent=r,this.returnFormat=i}getReceiptWithEvents(e){var t,r;const i=Object.assign({},null!=e?e:{});if((null===(t=this.options)||void 0===t?void 0:t.contractAbi)&&i.logs&&i.logs.length>0){i.events={};for(const e of i.logs){const t=(0,f.decodeEventABI)(u.ALL_EVENTS_ABI,e,null===(r=this.options)||void 0===r?void 0:r.contractAbi,this.returnFormat);t.event&&(i.events[t.event]=t)}}return i}checkRevertBeforeSending(e){return i(this,void 0,void 0,(function*(){if(!1!==this.options.checkRevertBeforeSending){const t=yield(0,p.getRevertReason)(this.web3Context,e,this.options.contractAbi);if(void 0!==t)throw yield(0,h.getTransactionError)(this.web3Context,e,void 0,void 0,this.options.contractAbi,t)}}))}emitSending(e){this.promiEvent.listenerCount("sending")>0&&this.promiEvent.emit("sending",e)}populateGasPrice({transactionFormatted:e,transaction:t}){var r;return i(this,void 0,void 0,(function*(){let i=e;return!(null===(r=this.options)||void 0===r?void 0:r.ignoreGasPricing)&&(0,s.isNullish)(e.gasPrice)&&((0,s.isNullish)(t.maxPriorityFeePerGas)||(0,s.isNullish)(t.maxFeePerGas))&&(i=Object.assign(Object.assign({},e),yield(0,c.getTransactionGasPricing)(e,this.web3Context,n.ETH_DATA_FORMAT))),i}))}signAndSend({wallet:e,tx:t}){return i(this,void 0,void 0,(function*(){if(e){const r=yield e.signTransaction(t);return(0,l.trySendTransaction)(this.web3Context,(()=>i(this,void 0,void 0,(function*(){return o.ethRpcMethods.sendRawTransaction(this.web3Context.requestManager,r.rawTransaction)}))),r.transactionHash)}return(0,l.trySendTransaction)(this.web3Context,(()=>i(this,void 0,void 0,(function*(){return o.ethRpcMethods.sendTransaction(this.web3Context.requestManager,t)}))))}))}emitSent(e){this.promiEvent.listenerCount("sent")>0&&this.promiEvent.emit("sent",e)}emitTransactionHash(e){this.promiEvent.listenerCount("transactionHash")>0&&this.promiEvent.emit("transactionHash",e)}emitReceipt(e){this.promiEvent.listenerCount("receipt")>0&&this.promiEvent.emit("receipt",e)}handleError({error:e,tx:t}){var r;return i(this,void 0,void 0,(function*(){let i=e;return i instanceof a.ContractExecutionError&&this.web3Context.handleRevert&&(i=yield(0,h.getTransactionError)(this.web3Context,t,void 0,void 0,null===(r=this.options)||void 0===r?void 0:r.contractAbi)),(i instanceof a.InvalidResponseError||i instanceof a.ContractExecutionError||i instanceof a.TransactionRevertWithCustomError||i instanceof a.TransactionRevertedWithoutReasonError||i instanceof a.TransactionRevertInstructionError)&&this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",i),i}))}emitConfirmation({receipt:e,transactionHash:t}){this.promiEvent.listenerCount("confirmation")>0&&(0,d.watchTransactionForConfirmations)(this.web3Context,this.promiEvent,e,t,this.returnFormat)}handleResolve({receipt:e,tx:t}){var r,n,s;return i(this,void 0,void 0,(function*(){if(null===(r=this.options)||void 0===r?void 0:r.transactionResolver)return null===(n=this.options)||void 0===n?void 0:n.transactionResolver(e);if(e.status===BigInt(0)){const r=yield(0,h.getTransactionError)(this.web3Context,t,e,void 0,null===(s=this.options)||void 0===s?void 0:s.contractAbi);throw this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",r),r}return e}))}}},223:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.transactionBuilder=t.defaultTransactionBuilder=t.getTransactionType=t.getTransactionNonce=t.getTransactionFromOrToAttr=void 0;const n=r(9970),s=r(9247),a=r(9820),o=r(7345),c=r(5071),l=r(9634),d=r(9326),u=r(3222),h=r(7350),p=r(1922),f=r(8736);function g(e){var r,s;return i(this,void 0,void 0,(function*(){let i=(0,l.format)(p.transactionSchema,e.transaction,n.DEFAULT_RETURN_FORMAT);if((0,o.isNullish)(i.from)&&(i.from=(0,t.getTransactionFromOrToAttr)("from",e.web3Context,void 0,e.privateKey)),(0,o.isNullish)(i.nonce)&&(i.nonce=yield(0,t.getTransactionNonce)(e.web3Context,i.from,n.ETH_DATA_FORMAT)),(0,o.isNullish)(i.value)&&(i.value="0x0"),(0,o.isNullish)(i.data))(0,o.isNullish)(i.input)?i.input="0x":i.input.startsWith("0x")||(i.input=`0x${i.input}`);else{if(!(0,o.isNullish)(i.input)&&i.data!==i.input)throw new c.TransactionDataAndInputError({data:(0,l.bytesToHex)(i.data),input:(0,l.bytesToHex)(i.input)});i.data.startsWith("0x")||(i.data=`0x${i.data}`)}if((0,o.isNullish)(i.common)){if(e.web3Context.defaultCommon){const t=e.web3Context.defaultCommon,r=t.customChain.chainId,n=t.customChain.networkId,s=t.customChain.name;i.common=Object.assign(Object.assign({},t),{customChain:{chainId:r,networkId:n,name:s}})}(0,o.isNullish)(i.chain)&&(i.chain=e.web3Context.defaultChain),(0,o.isNullish)(i.hardfork)&&(i.hardfork=e.web3Context.defaultHardfork)}if((0,o.isNullish)(i.chainId)&&(0,o.isNullish)(null===(r=i.common)||void 0===r?void 0:r.customChain.chainId)&&(i.chainId=yield(0,u.getChainId)(e.web3Context,n.ETH_DATA_FORMAT)),(0,o.isNullish)(i.networkId)&&(i.networkId=null!==(s=e.web3Context.defaultNetworkId)&&void 0!==s?s:yield(0,a.getId)(e.web3Context,n.ETH_DATA_FORMAT)),(0,o.isNullish)(i.gasLimit)&&!(0,o.isNullish)(i.gas)&&(i.gasLimit=i.gas),i.type=(0,t.getTransactionType)(i,e.web3Context),!(0,o.isNullish)(i.accessList)||"0x1"!==i.type&&"0x2"!==i.type||(i.accessList=[]),e.fillGasPrice&&(i=Object.assign(Object.assign({},i),yield(0,f.getTransactionGasPricing)(i,e.web3Context,n.ETH_DATA_FORMAT))),(0,o.isNullish)(i.gas)&&(0,o.isNullish)(i.gasLimit)&&e.fillGasLimit){const t=yield(0,u.estimateGas)(e.web3Context,i,"latest",n.ETH_DATA_FORMAT);i=Object.assign(Object.assign({},i),{gas:(0,l.format)({format:"uint"},t,n.ETH_DATA_FORMAT)})}return i}))}t.getTransactionFromOrToAttr=(e,t,r,i)=>{if(void 0!==r&&e in r&&void 0!==r[e]){if("string"==typeof r[e]&&(0,o.isAddress)(r[e]))return r[e];if(!(0,o.isHexStrict)(r[e])&&(0,o.isNumber)(r[e])){if(t.wallet){const i=t.wallet.get((0,l.format)({format:"uint"},r[e],d.NUMBER_DATA_FORMAT));if(!(0,o.isNullish)(i))return i.address;throw new c.LocalWalletNotAvailableError}throw new c.LocalWalletNotAvailableError}throw"from"===e?new c.InvalidTransactionWithSender(r.from):new c.InvalidTransactionWithReceiver(r.to)}if("from"===e){if(!(0,o.isNullish)(i))return(0,s.privateKeyToAddress)(i);if(!(0,o.isNullish)(t.defaultAccount))return t.defaultAccount}},t.getTransactionNonce=(e,t,r=n.DEFAULT_RETURN_FORMAT)=>i(void 0,void 0,void 0,(function*(){if((0,o.isNullish)(t))throw new c.UnableToPopulateNonceError;return(0,u.getTransactionCount)(e,t,e.defaultBlock,r)})),t.getTransactionType=(e,t)=>{const r=(0,h.detectTransactionType)(e,t);return(0,o.isNullish)(r)?(0,o.isNullish)(t.defaultTransactionType)?void 0:(0,l.format)({format:"uint"},t.defaultTransactionType,n.ETH_DATA_FORMAT):r},t.defaultTransactionBuilder=g,t.transactionBuilder=e=>i(void 0,void 0,void 0,(function*(){var t;return(null!==(t=e.web3Context.transactionBuilder)&&void 0!==t?t:g)(Object.assign(Object.assign({},e),{transaction:e.transaction}))}))},8425:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.trySendTransaction=void 0;const n=r(9634),s=r(5071),a=r(4659);t.trySendTransaction=function(e,t,r){return i(this,void 0,void 0,(function*(){const[i,o]=(0,n.rejectIfTimeout)(e.transactionSendTimeout,new s.TransactionSendTimeoutError({numberOfSeconds:e.transactionSendTimeout/1e3,transactionHash:r})),[c,l]=yield(0,a.rejectIfBlockTimeout)(e,r);try{return yield Promise.race([t(),o,c])}finally{clearTimeout(i),l.clean()}}))}},4745:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.waitForTransactionReceipt=void 0;const n=r(5071),s=r(9634),a=r(4659),o=r(3222);t.waitForTransactionReceipt=function(e,t,r){var c;return i(this,void 0,void 0,(function*(){const l=null!==(c=e.transactionReceiptPollingInterval)&&void 0!==c?c:e.transactionPollingInterval,[d,u]=(0,s.pollTillDefinedAndReturnIntervalId)((()=>i(this,void 0,void 0,(function*(){try{return(0,o.getTransactionReceipt)(e,t,r)}catch(e){return void console.warn("An error happen while trying to get the transaction receipt",e)}}))),l),[h,p]=(0,s.rejectIfTimeout)(e.transactionPollingTimeout,new n.TransactionPollingTimeoutError({numberOfSeconds:e.transactionPollingTimeout/1e3,transactionHash:t})),[f,g]=yield(0,a.rejectIfBlockTimeout)(e,t);try{return yield Promise.race([d,p,f])}finally{h&&clearTimeout(h),u&&clearInterval(u),g.clean()}}))}},8002:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.watchTransactionByPolling=void 0;const n=r(9634),s=r(1181),a=r(1922);t.watchTransactionByPolling=({web3Context:e,transactionReceipt:t,transactionPromiEvent:r,returnFormat:o})=>{var c;let l=1;const d=setInterval((()=>{i(void 0,void 0,void 0,(function*(){l>=e.transactionConfirmationBlocks&&clearInterval(d);const i=yield s.ethRpcMethods.getBlockByNumber(e.requestManager,(0,n.numberToHex)(BigInt(t.blockNumber)+BigInt(l)),!1);(null==i?void 0:i.hash)&&(l+=1,r.emit("confirmation",{confirmations:(0,n.format)({format:"uint"},l,o),receipt:(0,n.format)(a.transactionReceiptSchema,t,o),latestBlockHash:(0,n.format)({format:"bytes32"},i.hash,o)}))}))}),null!==(c=e.transactionReceiptPollingInterval)&&void 0!==c?c:e.transactionPollingInterval)}},2539:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.watchTransactionBySubscription=void 0;const n=r(9634),s=r(1922),a=r(8002);t.watchTransactionBySubscription=({web3Context:e,transactionReceipt:t,transactionPromiEvent:r,returnFormat:o})=>{let c,l=!0;setImmediate((()=>{var d;null===(d=e.subscriptionManager)||void 0===d||d.subscribe("newHeads").then((d=>{d.on("data",(a=>i(void 0,void 0,void 0,(function*(){var i;if(l=!1,!(null==a?void 0:a.number)||c===(null==a?void 0:a.parentHash))return;c=null==a?void 0:a.parentHash;const u=BigInt(a.number)-BigInt(t.blockNumber)+BigInt(1);r.emit("confirmation",{confirmations:(0,n.format)({format:"uint"},u,o),receipt:(0,n.format)(s.transactionReceiptSchema,t,o),latestBlockHash:(0,n.format)({format:"bytes32"},a.parentHash,o)}),u>=e.transactionConfirmationBlocks&&(yield null===(i=e.subscriptionManager)||void 0===i?void 0:i.removeSubscription(d))})))),d.on("error",(()=>i(void 0,void 0,void 0,(function*(){var i;yield null===(i=e.subscriptionManager)||void 0===i?void 0:i.removeSubscription(d),l=!1,(0,a.watchTransactionByPolling)({web3Context:e,transactionReceipt:t,transactionPromiEvent:r,returnFormat:o})}))))})).catch((()=>{l=!1,(0,a.watchTransactionByPolling)({web3Context:e,transactionReceipt:t,transactionPromiEvent:r,returnFormat:o})}))})),setTimeout((()=>{l&&(0,a.watchTransactionByPolling)({web3Context:e,transactionReceipt:t,transactionPromiEvent:r,returnFormat:o})}),1e3*e.blockHeaderTimeout)}},2117:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.watchTransactionForConfirmations=void 0;const i=r(9634),n=r(7345),s=r(5071),a=r(1922),o=r(8002),c=r(2539);t.watchTransactionForConfirmations=function(e,t,r,l,d){if((0,n.isNullish)(r)||(0,n.isNullish)(r.blockHash))throw new s.TransactionMissingReceiptOrBlockHashError({receipt:r,blockHash:(0,i.format)({format:"bytes32"},null==r?void 0:r.blockHash,d),transactionHash:(0,i.format)({format:"bytes32"},l,d)});if(!r.blockNumber)throw new s.TransactionReceiptMissingBlockNumberError({receipt:r});t.emit("confirmation",{confirmations:(0,i.format)({format:"uint"},1,d),receipt:(0,i.format)(a.transactionReceiptSchema,r,d),latestBlockHash:(0,i.format)({format:"bytes32"},r.blockHash,d)});const u=e.requestManager.provider;u&&"supportsSubscriptions"in u&&u.supportsSubscriptions()?(0,c.watchTransactionBySubscription)({web3Context:e,transactionReceipt:r,transactionPromiEvent:t,returnFormat:d}):(0,o.watchTransactionByPolling)({web3Context:e,transactionReceipt:r,transactionPromiEvent:t,returnFormat:d})}},8650:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTransactionForSigning=t.validateGas=t.validateFeeMarketGas=t.validateLegacyGas=t.validateHardfork=t.validateBaseChain=t.validateChainInfo=t.validateCustomChainInfo=t.validateTransactionCall=t.isTransactionCall=t.validateTransactionWithSender=t.isTransactionWithSender=t.isTransactionLegacyUnsigned=t.isTransaction2930Unsigned=t.isTransaction1559Unsigned=t.isAccessList=t.isAccessListEntry=t.isBaseTransaction=void 0;const i=r(9970),n=r(7345),s=r(5071),a=r(5140);function o(e){return!(!(0,n.isNullish)(e.to)&&!(0,n.isAddress)(e.to)||!(0,n.isHexStrict)(e.type)&&!(0,n.isNullish)(e.type)&&2!==e.type.length||!(0,n.isHexStrict)(e.nonce)||!(0,n.isHexStrict)(e.gas)||!(0,n.isHexStrict)(e.value)||!(0,n.isHexStrict)(e.input)||e.chainId&&!(0,n.isHexStrict)(e.chainId))}function c(e){return!(!(0,n.isNullish)(e.address)&&!(0,n.isAddress)(e.address)||!(0,n.isNullish)(e.storageKeys)&&!e.storageKeys.every((e=>(0,n.isHexString32Bytes)(e))))}function l(e){return!(!Array.isArray(e)||!e.every((e=>c(e))))}function d(e){return!!(o(e)&&(0,n.isHexStrict)(e.maxFeePerGas)&&(0,n.isHexStrict)(e.maxPriorityFeePerGas)&&l(e.accessList))}function u(e){return!!o(e)&&!!(0,n.isHexStrict)(e.gasPrice)&&!!l(e.accessList)}function h(e){return!!o(e)&&!!(0,n.isHexStrict)(e.gasPrice)}function p(e){return!!(0,n.isAddress)(e.from)&&!!o(e)&&!!(d(e)||u(e)||h(e))}function f(e){return!(!(0,n.isNullish)(e.from)&&!(0,n.isAddress)(e.from)||!(0,n.isAddress)(e.to)||!(0,n.isNullish)(e.gas)&&!(0,n.isHexStrict)(e.gas)||!(0,n.isNullish)(e.gasPrice)&&!(0,n.isHexStrict)(e.gasPrice)||!(0,n.isNullish)(e.value)&&!(0,n.isHexStrict)(e.value)||!(0,n.isNullish)(e.data)&&!(0,n.isHexStrict)(e.data)||!(0,n.isNullish)(e.input)&&!(0,n.isHexStrict)(e.input)||!(0,n.isNullish)(e.type)||d(e)||u(e))}t.isBaseTransaction=o,t.isAccessListEntry=c,t.isAccessList=l,t.isTransaction1559Unsigned=d,t.isTransaction2930Unsigned=u,t.isTransactionLegacyUnsigned=h,t.isTransactionWithSender=p,t.validateTransactionWithSender=function(e){if(!p(e))throw new s.InvalidTransactionWithSender(e)},t.isTransactionCall=f,t.validateTransactionCall=function(e){if(!f(e))throw new s.InvalidTransactionCall(e)},t.validateCustomChainInfo=e=>{if(!(0,n.isNullish)(e.common)){if((0,n.isNullish)(e.common.customChain))throw new s.MissingCustomChainError;if((0,n.isNullish)(e.common.customChain.chainId))throw new s.MissingCustomChainIdError;if(!(0,n.isNullish)(e.chainId)&&e.chainId!==e.common.customChain.chainId)throw new s.ChainIdMismatchError({txChainId:e.chainId,customChainId:e.common.customChain.chainId})}},t.validateChainInfo=e=>{if(!(0,n.isNullish)(e.common)&&!(0,n.isNullish)(e.chain)&&!(0,n.isNullish)(e.hardfork))throw new s.CommonOrChainAndHardforkError;if(!(0,n.isNullish)(e.chain)&&(0,n.isNullish)(e.hardfork)||!(0,n.isNullish)(e.hardfork)&&(0,n.isNullish)(e.chain))throw new s.MissingChainOrHardforkError({chain:e.chain,hardfork:e.hardfork})},t.validateBaseChain=e=>{if(!(0,n.isNullish)(e.common)&&!(0,n.isNullish)(e.common.baseChain)&&!(0,n.isNullish)(e.chain)&&e.chain!==e.common.baseChain)throw new s.ChainMismatchError({txChain:e.chain,baseChain:e.common.baseChain})},t.validateHardfork=e=>{if(!(0,n.isNullish)(e.common)&&!(0,n.isNullish)(e.common.hardfork)&&!(0,n.isNullish)(e.hardfork)&&e.hardfork!==e.common.hardfork)throw new s.HardforkMismatchError({txHardfork:e.hardfork,commonHardfork:e.common.hardfork})},t.validateLegacyGas=e=>{if((0,n.isNullish)(e.gas)||!(0,n.isUInt)(e.gas)||(0,n.isNullish)(e.gasPrice)||!(0,n.isUInt)(e.gasPrice))throw new s.InvalidGasOrGasPrice({gas:e.gas,gasPrice:e.gasPrice});if(!(0,n.isNullish)(e.maxFeePerGas)||!(0,n.isNullish)(e.maxPriorityFeePerGas))throw new s.UnsupportedFeeMarketError({maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas})},t.validateFeeMarketGas=e=>{if(!(0,n.isNullish)(e.gasPrice)&&"0x2"===e.type)throw new s.Eip1559GasPriceError(e.gasPrice);if("0x0"===e.type||"0x1"===e.type)throw new s.UnsupportedFeeMarketError({maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas});if((0,n.isNullish)(e.maxFeePerGas)||!(0,n.isUInt)(e.maxFeePerGas)||(0,n.isNullish)(e.maxPriorityFeePerGas)||!(0,n.isUInt)(e.maxPriorityFeePerGas))throw new s.InvalidMaxPriorityFeePerGasOrMaxFeePerGas({maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas})},t.validateGas=e=>{const r=!(0,n.isNullish)(e.gas)||!(0,n.isNullish)(e.gasLimit),i=r&&!(0,n.isNullish)(e.gasPrice),a=r&&!(0,n.isNullish)(e.maxPriorityFeePerGas)&&!(0,n.isNullish)(e.maxFeePerGas);if(!i&&!a)throw new s.MissingGasError({gas:e.gas,gasPrice:e.gasPrice,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas});if(i&&a)throw new s.TransactionGasMismatchError({gas:e.gas,gasPrice:e.gasPrice,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas});(i?t.validateLegacyGas:t.validateFeeMarketGas)(e),(!(0,n.isNullish)(e.type)&&e.type>"0x1"?t.validateFeeMarketGas:t.validateLegacyGas)(e)},t.validateTransactionForSigning=(e,r)=>{if(!(0,n.isNullish)(r))return void r(e);if("object"!=typeof e||(0,n.isNullish)(e))throw new s.InvalidTransactionObjectError(e);(0,t.validateCustomChainInfo)(e),(0,t.validateChainInfo)(e),(0,t.validateBaseChain)(e),(0,t.validateHardfork)(e);const o=(0,a.formatTransaction)(e,i.ETH_DATA_FORMAT);if((0,t.validateGas)(o),(0,n.isNullish)(o.nonce)||(0,n.isNullish)(o.chainId)||o.nonce.startsWith("-")||o.chainId.startsWith("-"))throw new s.InvalidNonceOrChainIdError({nonce:e.nonce,chainId:e.chainId})}},1435:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Web3Eth=t.registeredSubscriptions=void 0;const o=r(9970),c=r(6527),l=r(5071),d=r(9634),u=r(1181),h=s(r(3222)),p=r(7460);t.registeredSubscriptions={logs:p.LogsSubscription,newPendingTransactions:p.NewPendingTransactionsSubscription,newHeads:p.NewHeadsSubscription,syncing:p.SyncingSubscription,pendingTransactions:p.NewPendingTransactionsSubscription,newBlockHeaders:p.NewHeadsSubscription};class f extends c.Web3Context{constructor(e){"string"==typeof e||(0,c.isSupportedProvider)(e)?super({provider:e,registeredSubscriptions:t.registeredSubscriptions}):e.registeredSubscriptions?super(e):super(Object.assign(Object.assign({},e),{registeredSubscriptions:t.registeredSubscriptions}))}getProtocolVersion(){return a(this,void 0,void 0,(function*(){return u.ethRpcMethods.getProtocolVersion(this.requestManager)}))}isSyncing(){return a(this,void 0,void 0,(function*(){return u.ethRpcMethods.getSyncing(this.requestManager)}))}getCoinbase(){return a(this,void 0,void 0,(function*(){return u.ethRpcMethods.getCoinbase(this.requestManager)}))}isMining(){return a(this,void 0,void 0,(function*(){return u.ethRpcMethods.getMining(this.requestManager)}))}getHashrate(e=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return this.getHashRate(e)}))}getHashRate(e=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getHashRate(this,e)}))}getGasPrice(e=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getGasPrice(this,e)}))}getAccounts(){var e;return a(this,void 0,void 0,(function*(){return(null!==(e=yield u.ethRpcMethods.getAccounts(this.requestManager))&&void 0!==e?e:[]).map((e=>(0,d.toChecksumAddress)(e)))}))}getBlockNumber(e=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getBlockNumber(this,e)}))}getBalance(e,t=this.defaultBlock,r=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getBalance(this,e,t,r)}))}getStorageAt(e,t,r=this.defaultBlock,i=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getStorageAt(this,e,t,r,i)}))}getCode(e,t=this.defaultBlock,r=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getCode(this,e,t,r)}))}getBlock(e=this.defaultBlock,t=!1,r=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getBlock(this,e,t,r)}))}getBlockTransactionCount(e=this.defaultBlock,t=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getBlockTransactionCount(this,e,t)}))}getBlockUncleCount(e=this.defaultBlock,t=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getBlockUncleCount(this,e,t)}))}getUncle(e=this.defaultBlock,t,r=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getUncle(this,e,t,r)}))}getTransaction(e,t=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){const r=yield h.getTransaction(this,e,t);if(!r)throw new l.TransactionNotFound;return r}))}getPendingTransactions(e=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getPendingTransactions(this,e)}))}getTransactionFromBlock(e=this.defaultBlock,t,r=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getTransactionFromBlock(this,e,t,r)}))}getTransactionReceipt(e,t=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){const r=yield h.getTransactionReceipt(this,e,t);if(!r)throw new l.TransactionNotFound;return r}))}getTransactionCount(e,t=this.defaultBlock,r=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getTransactionCount(this,e,t,r)}))}sendTransaction(e,t=o.DEFAULT_RETURN_FORMAT,r){return h.sendTransaction(this,e,t,r)}sendSignedTransaction(e,t=o.DEFAULT_RETURN_FORMAT,r){return h.sendSignedTransaction(this,e,t,r)}sign(e,t,r=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.sign(this,e,t,r)}))}signTransaction(e,t=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.signTransaction(this,e,t)}))}call(e,t=this.defaultBlock,r=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.call(this,e,t,r)}))}estimateGas(e,t=this.defaultBlock,r=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.estimateGas(this,e,t,r)}))}getPastLogs(e,t=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getLogs(this,e,t)}))}getWork(){return a(this,void 0,void 0,(function*(){return u.ethRpcMethods.getWork(this.requestManager)}))}submitWork(e,t,r){return a(this,void 0,void 0,(function*(){return u.ethRpcMethods.submitWork(this.requestManager,e,t,r)}))}requestAccounts(){return a(this,void 0,void 0,(function*(){return u.ethRpcMethods.requestAccounts(this.requestManager)}))}getChainId(e=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getChainId(this,e)}))}getNodeInfo(){return a(this,void 0,void 0,(function*(){return u.ethRpcMethods.getNodeInfo(this.requestManager)}))}getProof(e,t,r=this.defaultBlock,i=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getProof(this,e,t,r,i)}))}getFeeHistory(e,t=this.defaultBlock,r,i=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.getFeeHistory(this,e,t,r,i)}))}createAccessList(e,t=this.defaultBlock,r=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.createAccessList(this,e,t,r)}))}signTypedData(e,t,r=!1,i=o.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return h.signTypedData(this,e,t,r,i)}))}subscribe(e,t,r=o.DEFAULT_RETURN_FORMAT){var i;return a(this,void 0,void 0,(function*(){const n=yield null===(i=this.subscriptionManager)||void 0===i?void 0:i.subscribe(e,t,r);return n instanceof p.LogsSubscription&&"logs"===e&&"object"==typeof t&&!(0,d.isNullish)(t.fromBlock)&&Number.isFinite(Number(t.fromBlock))&&setImmediate((()=>{this.getPastLogs(t).then((e=>{for(const t of e)n._processSubscriptionResult(t)})).catch((e=>{n._processSubscriptionError(e)}))})),n}))}static shouldClearSubscription({sub:e}){return!(e instanceof p.SyncingSubscription)}clearSubscriptions(e=!1){var t;return null===(t=this.subscriptionManager)||void 0===t?void 0:t.unsubscribe(e?f.shouldClearSubscription:void 0)}}t.Web3Eth=f},7460:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncingSubscription=t.NewHeadsSubscription=t.NewPendingTransactionsSubscription=t.LogsSubscription=void 0;const i=r(9634),n=r(6527),s=r(1922);class a extends n.Web3Subscription{_buildSubscriptionParams(){return["logs",this.args]}formatSubscriptionResult(e){return(0,i.format)(s.logSchema,e,super.returnFormat)}}t.LogsSubscription=a;class o extends n.Web3Subscription{_buildSubscriptionParams(){return["newPendingTransactions"]}formatSubscriptionResult(e){return(0,i.format)({format:"string"},e,super.returnFormat)}}t.NewPendingTransactionsSubscription=o;class c extends n.Web3Subscription{_buildSubscriptionParams(){return["newHeads"]}formatSubscriptionResult(e){return(0,i.format)(s.blockHeaderSchema,e,super.returnFormat)}}t.NewHeadsSubscription=c;class l extends n.Web3Subscription{_buildSubscriptionParams(){return["syncing"]}_processSubscriptionResult(e){if("boolean"==typeof e)this.emit("changed",e);else{const t=Object.fromEntries(Object.entries(e.status).map((([e,t])=>[e.charAt(0).toLowerCase()+e.substring(1),t])));this.emit("changed",e.syncing),this.emit("data",(0,i.format)(s.syncSchema,t,super.returnFormat))}}}t.SyncingSubscription=l},9820:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const s=r(2491);n(r(2491),t),n(r(7961),t),t.default=s.Net},2491:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Net=void 0;const o=r(6527),c=r(9970),l=s(r(7961));class d extends o.Web3Context{getId(e=c.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return l.getId(this,e)}))}getPeerCount(e=c.DEFAULT_RETURN_FORMAT){return a(this,void 0,void 0,(function*(){return l.getPeerCount(this,e)}))}isListening(){return a(this,void 0,void 0,(function*(){return l.isListening(this)}))}}t.Net=d},7961:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.isListening=t.getPeerCount=t.getId=void 0;const n=r(9634),s=r(1181);t.getId=function(e,t){return i(this,void 0,void 0,(function*(){const r=yield s.netRpcMethods.getId(e.requestManager);return(0,n.format)({format:"uint"},r,t)}))},t.getPeerCount=function(e,t){return i(this,void 0,void 0,(function*(){const r=yield s.netRpcMethods.getPeerCount(e.requestManager);return(0,n.format)({format:"uint"},r,t)}))},t.isListening=e=>i(void 0,void 0,void 0,(function*(){return s.netRpcMethods.isListening(e.requestManager)}))},2636:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpProvider=void 0;const s=n(r(6279)),a=r(9970),o=r(5071);class c extends a.Web3BaseProvider{constructor(e,t){if(super(),!c.validateClientUrl(e))throw new o.InvalidClientError(e);this.clientUrl=e,this.httpProviderOptions=t}static validateClientUrl(e){return"string"==typeof e&&/^http(s)?:\/\//i.test(e)}getStatus(){throw new o.MethodNotImplementedError}supportsSubscriptions(){return!1}request(e,t){var r;return i(this,void 0,void 0,(function*(){const i=Object.assign(Object.assign({},null===(r=this.httpProviderOptions)||void 0===r?void 0:r.providerOptions),t),n=yield(0,s.default)(this.clientUrl,Object.assign(Object.assign({},i),{method:"POST",headers:Object.assign(Object.assign({},i.headers),{"Content-Type":"application/json"}),body:JSON.stringify(e)}));if(!n.ok)throw new o.ResponseError(yield n.json());return yield n.json()}))}on(){throw new o.MethodNotImplementedError}removeListener(){throw new o.MethodNotImplementedError}once(){throw new o.MethodNotImplementedError}removeAllListeners(){throw new o.MethodNotImplementedError}connect(){throw new o.MethodNotImplementedError}disconnect(){throw new o.MethodNotImplementedError}reset(){throw new o.MethodNotImplementedError}reconnect(){throw new o.MethodNotImplementedError}}t.default=c,t.HttpProvider=c},1161:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketProvider=void 0;const n=i(r(7475)),s=r(9634),a=r(5071);class o extends s.SocketProvider{constructor(e,t,r){super(e,t,r)}_validateProviderPath(e){return"string"==typeof e&&/^ws(s)?:\/\//i.test(e)}getStatus(){if(this._socketConnection&&!(0,s.isNullish)(this._socketConnection))switch(this._socketConnection.readyState){case this._socketConnection.CONNECTING:return"connecting";case this._socketConnection.OPEN:return"connected";default:return"disconnected"}return"disconnected"}_openSocketConnection(){this._socketConnection=new n.default(this._socketPath,void 0,this._socketOptions&&0===Object.keys(this._socketOptions).length?void 0:this._socketOptions)}_closeSocketConnection(e,t){var r;null===(r=this._socketConnection)||void 0===r||r.close(e,t)}_sendToSocket(e){var t;if("disconnected"===this.getStatus())throw new a.ConnectionNotOpenError;null===(t=this._socketConnection)||void 0===t||t.send(JSON.stringify(e))}_parseResponses(e){return this.chunkResponseParser.parseResponse(e.data)}_addSocketListeners(){var e,t,r,i;null===(e=this._socketConnection)||void 0===e||e.addEventListener("open",this._onOpenHandler),null===(t=this._socketConnection)||void 0===t||t.addEventListener("message",this._onMessageHandler),null===(r=this._socketConnection)||void 0===r||r.addEventListener("close",(e=>this._onCloseHandler(e))),null===(i=this._socketConnection)||void 0===i||i.addEventListener("error",this._onErrorHandler)}_removeSocketListeners(){var e,t,r;null===(e=this._socketConnection)||void 0===e||e.removeEventListener("message",this._onMessageHandler),null===(t=this._socketConnection)||void 0===t||t.removeEventListener("open",this._onOpenHandler),null===(r=this._socketConnection)||void 0===r||r.removeEventListener("close",this._onCloseHandler)}_onCloseEvent(e){var t;!this._reconnectOptions.autoReconnect||[1e3,1001].includes(e.code)&&e.wasClean?(this._clearQueues(e),this._removeSocketListeners(),this._onDisconnect(e.code,e.reason),null===(t=this._socketConnection)||void 0===t||t.removeEventListener("error",this._onErrorHandler)):this._reconnect()}}t.default=o,t.WebSocketProvider=o},9298:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeInfo=t.getProof=t.getChainId=t.requestAccounts=t.getPendingTransactions=t.getFeeHistory=t.submitHashrate=t.submitWork=t.getWork=t.getLogs=t.getFilterLogs=t.getFilterChanges=t.uninstallFilter=t.newPendingTransactionFilter=t.newBlockFilter=t.newFilter=t.compileSerpent=t.compileLLL=t.compileSolidity=t.getCompilers=t.getUncleByBlockNumberAndIndex=t.getUncleByBlockHashAndIndex=t.getTransactionReceipt=t.getTransactionByBlockNumberAndIndex=t.getTransactionByBlockHashAndIndex=t.getTransactionByHash=t.getBlockByNumber=t.getBlockByHash=t.estimateGas=t.call=t.sendRawTransaction=t.sendTransaction=t.signTransaction=t.sign=t.getCode=t.getUncleCountByBlockNumber=t.getUncleCountByBlockHash=t.getBlockTransactionCountByNumber=t.getBlockTransactionCountByHash=t.getTransactionCount=t.getStorageAt=t.getBalance=t.getBlockNumber=t.getAccounts=t.getGasPrice=t.getHashRate=t.getMining=t.getCoinbase=t.getSyncing=t.getProtocolVersion=void 0,t.signTypedData=t.createAccessList=void 0;const n=r(7345);t.getProtocolVersion=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_protocolVersion",params:[]})}))},t.getSyncing=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_syncing",params:[]})}))},t.getCoinbase=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_coinbase",params:[]})}))},t.getMining=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_mining",params:[]})}))},t.getHashRate=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_hashrate",params:[]})}))},t.getGasPrice=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_gasPrice",params:[]})}))},t.getAccounts=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_accounts",params:[]})}))},t.getBlockNumber=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_blockNumber",params:[]})}))},t.getBalance=function(e,t,r){return i(this,void 0,void 0,(function*(){return n.validator.validate(["address","blockNumberOrTag"],[t,r]),e.send({method:"eth_getBalance",params:[t,r]})}))},t.getStorageAt=function(e,t,r,s){return i(this,void 0,void 0,(function*(){return n.validator.validate(["address","hex","blockNumberOrTag"],[t,r,s]),e.send({method:"eth_getStorageAt",params:[t,r,s]})}))},t.getTransactionCount=function(e,t,r){return i(this,void 0,void 0,(function*(){return n.validator.validate(["address","blockNumberOrTag"],[t,r]),e.send({method:"eth_getTransactionCount",params:[t,r]})}))},t.getBlockTransactionCountByHash=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["bytes32"],[t]),e.send({method:"eth_getBlockTransactionCountByHash",params:[t]})}))},t.getBlockTransactionCountByNumber=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["blockNumberOrTag"],[t]),e.send({method:"eth_getBlockTransactionCountByNumber",params:[t]})}))},t.getUncleCountByBlockHash=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["bytes32"],[t]),e.send({method:"eth_getUncleCountByBlockHash",params:[t]})}))},t.getUncleCountByBlockNumber=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["blockNumberOrTag"],[t]),e.send({method:"eth_getUncleCountByBlockNumber",params:[t]})}))},t.getCode=function(e,t,r){return i(this,void 0,void 0,(function*(){return n.validator.validate(["address","blockNumberOrTag"],[t,r]),e.send({method:"eth_getCode",params:[t,r]})}))},t.sign=function(e,t,r){return i(this,void 0,void 0,(function*(){return n.validator.validate(["address","hex"],[t,r]),e.send({method:"eth_sign",params:[t,r]})}))},t.signTransaction=function(e,t){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_signTransaction",params:[t]})}))},t.sendTransaction=function(e,t){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_sendTransaction",params:[t]})}))},t.sendRawTransaction=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["hex"],[t]),e.send({method:"eth_sendRawTransaction",params:[t]})}))},t.call=function(e,t,r){return i(this,void 0,void 0,(function*(){return n.validator.validate(["blockNumberOrTag"],[r]),e.send({method:"eth_call",params:[t,r]})}))},t.estimateGas=function(e,t,r){return i(this,void 0,void 0,(function*(){return n.validator.validate(["blockNumberOrTag"],[r]),e.send({method:"eth_estimateGas",params:[t,r]})}))},t.getBlockByHash=function(e,t,r){return i(this,void 0,void 0,(function*(){return n.validator.validate(["bytes32","bool"],[t,r]),e.send({method:"eth_getBlockByHash",params:[t,r]})}))},t.getBlockByNumber=function(e,t,r){return i(this,void 0,void 0,(function*(){return n.validator.validate(["blockNumberOrTag","bool"],[t,r]),e.send({method:"eth_getBlockByNumber",params:[t,r]})}))},t.getTransactionByHash=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["bytes32"],[t]),e.send({method:"eth_getTransactionByHash",params:[t]})}))},t.getTransactionByBlockHashAndIndex=function(e,t,r){return i(this,void 0,void 0,(function*(){return n.validator.validate(["bytes32","hex"],[t,r]),e.send({method:"eth_getTransactionByBlockHashAndIndex",params:[t,r]})}))},t.getTransactionByBlockNumberAndIndex=function(e,t,r){return i(this,void 0,void 0,(function*(){return n.validator.validate(["blockNumberOrTag","hex"],[t,r]),e.send({method:"eth_getTransactionByBlockNumberAndIndex",params:[t,r]})}))},t.getTransactionReceipt=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["bytes32"],[t]),e.send({method:"eth_getTransactionReceipt",params:[t]})}))},t.getUncleByBlockHashAndIndex=function(e,t,r){return i(this,void 0,void 0,(function*(){return n.validator.validate(["bytes32","hex"],[t,r]),e.send({method:"eth_getUncleByBlockHashAndIndex",params:[t,r]})}))},t.getUncleByBlockNumberAndIndex=function(e,t,r){return i(this,void 0,void 0,(function*(){return n.validator.validate(["blockNumberOrTag","hex"],[t,r]),e.send({method:"eth_getUncleByBlockNumberAndIndex",params:[t,r]})}))},t.getCompilers=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_getCompilers",params:[]})}))},t.compileSolidity=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["string"],[t]),e.send({method:"eth_compileSolidity",params:[t]})}))},t.compileLLL=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["string"],[t]),e.send({method:"eth_compileLLL",params:[t]})}))},t.compileSerpent=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["string"],[t]),e.send({method:"eth_compileSerpent",params:[t]})}))},t.newFilter=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["filter"],[t]),e.send({method:"eth_newFilter",params:[t]})}))},t.newBlockFilter=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_newBlockFilter",params:[]})}))},t.newPendingTransactionFilter=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_newPendingTransactionFilter",params:[]})}))},t.uninstallFilter=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["hex"],[t]),e.send({method:"eth_uninstallFilter",params:[t]})}))},t.getFilterChanges=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["hex"],[t]),e.send({method:"eth_getFilterChanges",params:[t]})}))},t.getFilterLogs=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["hex"],[t]),e.send({method:"eth_getFilterLogs",params:[t]})}))},t.getLogs=function(e,t){return i(this,void 0,void 0,(function*(){return n.validator.validate(["filter"],[t]),e.send({method:"eth_getLogs",params:[t]})}))},t.getWork=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_getWork",params:[]})}))},t.submitWork=function(e,t,r,s){return i(this,void 0,void 0,(function*(){return n.validator.validate(["bytes8","bytes32","bytes32"],[t,r,s]),e.send({method:"eth_submitWork",params:[t,r,s]})}))},t.submitHashrate=function(e,t,r){return i(this,void 0,void 0,(function*(){return n.validator.validate(["bytes32","bytes32"],[t,r]),e.send({method:"eth_submitHashrate",params:[t,r]})}))},t.getFeeHistory=function(e,t,r,s){return i(this,void 0,void 0,(function*(){n.validator.validate(["hex","blockNumberOrTag"],[t,r]);for(const e of s)n.validator.validate(["number"],[e]);return e.send({method:"eth_feeHistory",params:[t,r,s]})}))},t.getPendingTransactions=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_pendingTransactions",params:[]})}))},t.requestAccounts=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_requestAccounts",params:[]})}))},t.getChainId=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"eth_chainId",params:[]})}))},t.getProof=function(e,t,r,s){return i(this,void 0,void 0,(function*(){return n.validator.validate(["address","bytes32[]","blockNumberOrTag"],[t,r,s]),e.send({method:"eth_getProof",params:[t,r,s]})}))},t.getNodeInfo=function(e){return i(this,void 0,void 0,(function*(){return e.send({method:"web3_clientVersion",params:[]})}))},t.createAccessList=function(e,t,r){return i(this,void 0,void 0,(function*(){return n.validator.validate(["blockNumberOrTag"],[r]),e.send({method:"eth_createAccessList",params:[t,r]})}))},t.signTypedData=function(e,t,r,s=!1){return i(this,void 0,void 0,(function*(){return n.validator.validate(["address"],[t]),e.send({method:"eth_signTypedData"+(s?"":"_v4"),params:[t,r]})}))}},1181:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.personalRpcMethods=t.netRpcMethods=t.ethRpcMethods=void 0;const a=s(r(9298));t.ethRpcMethods=a;const o=s(r(9960));t.netRpcMethods=o;const c=s(r(6745));t.personalRpcMethods=c},9960:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.isListening=t.getPeerCount=t.getId=void 0,t.getId=function(e){return r(this,void 0,void 0,(function*(){return e.send({method:"net_version",params:[]})}))},t.getPeerCount=function(e){return r(this,void 0,void 0,(function*(){return e.send({method:"net_peerCount",params:[]})}))},t.isListening=function(e){return r(this,void 0,void 0,(function*(){return e.send({method:"net_listening",params:[]})}))}},6745:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ecRecover=t.sign=t.signTransaction=t.sendTransaction=t.importRawKey=t.lockAccount=t.unlockAccount=t.newAccount=t.getAccounts=void 0,t.getAccounts=e=>r(void 0,void 0,void 0,(function*(){return e.send({method:"personal_listAccounts",params:[]})})),t.newAccount=(e,t)=>r(void 0,void 0,void 0,(function*(){return e.send({method:"personal_newAccount",params:[t]})})),t.unlockAccount=(e,t,i,n)=>r(void 0,void 0,void 0,(function*(){return e.send({method:"personal_unlockAccount",params:[t,i,n]})})),t.lockAccount=(e,t)=>r(void 0,void 0,void 0,(function*(){return e.send({method:"personal_lockAccount",params:[t]})})),t.importRawKey=(e,t,i)=>r(void 0,void 0,void 0,(function*(){return e.send({method:"personal_importRawKey",params:[t,i]})})),t.sendTransaction=(e,t,i)=>r(void 0,void 0,void 0,(function*(){return e.send({method:"personal_sendTransaction",params:[t,i]})})),t.signTransaction=(e,t,i)=>r(void 0,void 0,void 0,(function*(){return e.send({method:"personal_signTransaction",params:[t,i]})})),t.sign=(e,t,i,n)=>r(void 0,void 0,void 0,(function*(){return e.send({method:"personal_sign",params:[t,i,n]})})),t.ecRecover=(e,t,i)=>r(void 0,void 0,void 0,(function*(){return e.send({method:"personal_ecRecover",params:[t,i]})}))},6325:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5529:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2453:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2856:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6877:(e,t)=>{"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.ETH_DATA_FORMAT=t.DEFAULT_RETURN_FORMAT=t.FMT_BYTES=t.FMT_NUMBER=void 0,function(e){e.NUMBER="NUMBER_NUMBER",e.HEX="NUMBER_HEX",e.STR="NUMBER_STR",e.BIGINT="NUMBER_BIGINT"}(r=t.FMT_NUMBER||(t.FMT_NUMBER={})),function(e){e.HEX="BYTES_HEX",e.UINT8ARRAY="BYTES_UINT8ARRAY"}(i=t.FMT_BYTES||(t.FMT_BYTES={})),t.DEFAULT_RETURN_FORMAT={number:r.BIGINT,bytes:i.HEX},t.ETH_DATA_FORMAT={number:r.HEX,bytes:i.HEX}},9779:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1517:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8223:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4205:(e,t)=>{"use strict";var r,i;Object.defineProperty(t,"__esModule",{value:!0}),t.HardforksOrdered=t.BlockTags=void 0,(i=t.BlockTags||(t.BlockTags={})).EARLIEST="earliest",i.LATEST="latest",i.PENDING="pending",i.SAFE="safe",i.FINALIZED="finalized",(r=t.HardforksOrdered||(t.HardforksOrdered={})).chainstart="chainstart",r.frontier="frontier",r.homestead="homestead",r.dao="dao",r.tangerineWhistle="tangerineWhistle",r.spuriousDragon="spuriousDragon",r.byzantium="byzantium",r.constantinople="constantinople",r.petersburg="petersburg",r.istanbul="istanbul",r.muirGlacier="muirGlacier",r.berlin="berlin",r.london="london",r.altair="altair",r.arrowGlacier="arrowGlacier",r.grayGlacier="grayGlacier",r.bellatrix="bellatrix",r.merge="merge",r.capella="capella",r.shanghai="shanghai"},9970:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(9779),t),n(r(6325),t),n(r(2453),t),n(r(2856),t),n(r(5529),t),n(r(6877),t),n(r(4205),t),n(r(1517),t),n(r(8223),t),n(r(2196),t),n(r(8887),t),n(r(8173),t),n(r(1040),t),n(r(5640),t),n(r(1436),t),n(r(4933),t)},2196:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8887:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypedArray=void 0,t.TypedArray=Object.getPrototypeOf(Uint8Array)},8173:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1040:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5640:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Web3BaseProvider=void 0;const i=Symbol.for("web3/base-provider");class n{static isWeb3Provider(e){return e instanceof n||Boolean(e&&e[i])}get[i](){return!0}send(e,t){this.request(e).then((e=>{t(null,e)})).catch((e=>{t(e)}))}sendAsync(e){return r(this,void 0,void 0,(function*(){return this.request(e)}))}asEIP1193Provider(){const e=Object.create(this),t=e.request;return e.request=function(e){return r(this,void 0,void 0,(function*(){return(yield t(e)).result}))},e.asEIP1193Provider=void 0,e}}t.Web3BaseProvider=n},1436:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Web3BaseWallet=void 0,t.Web3BaseWallet=class extends Array{constructor(e){super(),this._accountProvider=e}}},4933:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4108:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkResponseParser=void 0;const i=r(5071);t.ChunkResponseParser=class{constructor(e,t){this.eventEmitter=e,this.autoReconnect=t}clearQueues(){"function"==typeof this._clearQueues&&this._clearQueues()}onError(e){this._clearQueues=e}parseResponse(e){const t=[];return e.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((e=>{let r,n=e;this.lastChunk&&(n=this.lastChunk+n);try{r=JSON.parse(n)}catch(e){return this.lastChunk=n,this.lastChunkTimeout&&clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.autoReconnect||(this.clearQueues(),this.eventEmitter.emit("error",new i.InvalidResponseError({id:1,jsonrpc:"2.0",error:{code:2,message:"Chunk timeout"}})))}),15e3))}clearTimeout(this.lastChunkTimeout),this.lastChunk=void 0,r&&t.push(r)})),t}}},7086:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toBool=t.toChecksumAddress=t.toWei=t.fromWei=t.toBigInt=t.toNumber=t.toHex=t.toAscii=t.hexToAscii=t.fromAscii=t.asciiToHex=t.hexToString=t.utf8ToBytes=t.toUtf8=t.hexToUtf8=t.stringToHex=t.fromUtf8=t.utf8ToHex=t.hexToNumberString=t.fromDecimal=t.numberToHex=t.toDecimal=t.hexToNumber=t.hexToBytes=t.bytesToHex=t.bytesToUint8Array=t.ethUnitMap=void 0;const i=r(3687),n=r(5487),s=r(7345),a=r(5071);t.ethUnitMap={noether:BigInt(0),wei:BigInt(1),kwei:BigInt(1e3),Kwei:BigInt(1e3),babbage:BigInt(1e3),femtoether:BigInt(1e3),mwei:BigInt(1e6),Mwei:BigInt(1e6),lovelace:BigInt(1e6),picoether:BigInt(1e6),gwei:BigInt(1e9),Gwei:BigInt(1e9),shannon:BigInt(1e9),nanoether:BigInt(1e9),nano:BigInt(1e9),szabo:BigInt(1e12),microether:BigInt(1e12),micro:BigInt(1e12),finney:BigInt(1e15),milliether:BigInt(1e15),milli:BigInt(1e15),ether:BigInt("1000000000000000000"),kether:BigInt("1000000000000000000000"),grand:BigInt("1000000000000000000000"),mether:BigInt("1000000000000000000000000"),gether:BigInt("1000000000000000000000000000"),tether:BigInt("1000000000000000000000000000000")},t.bytesToUint8Array=e=>{if(s.validator.validate(["bytes"],[e]),e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if("string"==typeof e)return s.utils.hexToUint8Array(e);throw new a.InvalidBytesError(e)};const{uint8ArrayToHexString:o}=s.utils;t.bytesToHex=e=>o((0,t.bytesToUint8Array)(e)),t.hexToBytes=e=>"string"==typeof e&&"0x"!==e.slice(0,2).toLowerCase()?(0,t.bytesToUint8Array)(`0x${e}`):(0,t.bytesToUint8Array)(e),t.hexToNumber=e=>(s.validator.validate(["hex"],[e]),s.utils.hexToNumber(e)),t.toDecimal=t.hexToNumber,t.numberToHex=(e,t)=>{"bigint"!=typeof e&&s.validator.validate(["int"],[e]);let r=s.utils.numberToHex(e);return t&&(r.startsWith("-")||r.length%2!=1?r.length%2==0&&r.startsWith("-")&&(r="-0x0".concat(r.slice(3))):r="0x0".concat(r.slice(2))),r},t.fromDecimal=t.numberToHex,t.hexToNumberString=e=>(0,t.hexToNumber)(e).toString(),t.utf8ToHex=e=>{s.validator.validate(["string"],[e]);let r=e.replace(/^(?:\u0000)/,"");return r=r.replace(/(?:\u0000)$/,""),(0,t.bytesToHex)((new TextEncoder).encode(r))},t.fromUtf8=t.utf8ToHex,t.stringToHex=t.utf8ToHex,t.hexToUtf8=e=>(0,n.bytesToUtf8)((0,t.hexToBytes)(e)),t.toUtf8=e=>"string"==typeof e?(0,t.hexToUtf8)(e):(s.validator.validate(["bytes"],[e]),(0,n.bytesToUtf8)(e)),t.utf8ToBytes=n.utf8ToBytes,t.hexToString=t.hexToUtf8,t.asciiToHex=e=>{s.validator.validate(["string"],[e]);let t="";for(let r=0;r<e.length;r+=1){const i=e.charCodeAt(r).toString(16);t+=i.length%2!=0?`0${i}`:i}return`0x${t}`},t.fromAscii=t.asciiToHex,t.hexToAscii=e=>new TextDecoder("ascii").decode((0,t.hexToBytes)(e)),t.toAscii=t.hexToAscii,t.toHex=(e,r)=>{if("string"==typeof e&&(0,s.isAddress)(e))return r?"address":`0x${e.toLowerCase().replace(/^0x/i,"")}`;if("boolean"==typeof e)return r?"bool":e?"0x01":"0x00";if("number"==typeof e)return r?e<0?"int256":"uint256":(0,t.numberToHex)(e);if("bigint"==typeof e)return r?"bigint":(0,t.numberToHex)(e);if("object"==typeof e&&e)return r?"string":(0,t.utf8ToHex)(JSON.stringify(e));if("string"==typeof e){if(e.startsWith("-0x")||e.startsWith("-0X"))return r?"int256":(0,t.numberToHex)(e);if((0,s.isHexStrict)(e))return r?"bytes":e;if((0,s.isHex)(e)&&!(0,s.isInt)(e))return r?"bytes":`0x${e}`;if(!Number.isFinite(e))return r?"string":(0,t.utf8ToHex)(e)}throw new a.HexProcessingError(e)},t.toNumber=e=>{if("number"==typeof e)return e;if("bigint"==typeof e)return e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?Number(e):e;if("string"==typeof e&&(0,s.isHexStrict)(e))return(0,t.hexToNumber)(e);try{return(0,t.toNumber)(BigInt(e))}catch(t){throw new a.InvalidNumberError(e)}},t.toBigInt=e=>{if("number"==typeof e)return BigInt(e);if("bigint"==typeof e)return e;if("string"==typeof e&&(0,s.isHex)(e))return e.startsWith("-")?-BigInt(e.substring(1)):BigInt(e);throw new a.InvalidNumberError(e)},t.fromWei=(e,r)=>{const i=t.ethUnitMap[r];if(!i)throw new a.InvalidUnitError(r);const n=String((0,t.toNumber)(e)),s=i.toString().length-1;if(s<=0)return n.toString();const o=n.padStart(s,"0"),c=o.slice(0,-s),l=o.slice(-s).replace(/\.?0+$/,"");return""===c?`0.${l}`:""===l?c:`${c}.${l}`},t.toWei=(e,r)=>{s.validator.validate(["number"],[e]);const i=t.ethUnitMap[r];if(!i)throw new a.InvalidUnitError(r);const[n,o]=String("string"!=typeof e||(0,s.isHexStrict)(e)?(0,t.toNumber)(e):e).split(".").concat(""),c=BigInt(`${n}${o}`)*i,l=i.toString().length-1,d=Math.min(o.length,l);return 0===d?c.toString():c.toString().padStart(d,"0").slice(0,-d)},t.toChecksumAddress=e=>{if(!(0,s.isAddress)(e,!1))throw new a.InvalidAddressError(e);const r=e.toLowerCase().replace(/^0x/i,""),n=s.utils.uint8ArrayToHexString((0,i.keccak256)((0,t.utf8ToBytes)(r)));if((0,s.isNullish)(n)||"0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"===n)return"";let o="0x";const c=n.replace(/^0x/i,"");for(let e=0;e<r.length;e+=1)parseInt(c[e],16)>7?o+=r[e].toUpperCase():o+=r[e];return o},t.toBool=e=>{if("boolean"==typeof e)return e;if("number"==typeof e&&(0===e||1===e))return Boolean(e);if("bigint"==typeof e&&(e===BigInt(0)||e===BigInt(1)))return Boolean(e);if("string"==typeof e&&!(0,s.isHexStrict)(e)&&("1"===e||"0"===e||"false"===e||"true"===e))return"true"===e||"false"!==e&&Boolean(Number(e));if("string"==typeof e&&(0,s.isHexStrict)(e)&&("0x1"===e||"0x0"===e))return Boolean((0,t.toNumber)(e));throw new a.InvalidBooleanError(e)}},8512:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EventEmitter=void 0;const n=r(2699);class s extends EventTarget{constructor(){super(...arguments),this._listeners={},this.maxListeners=Number.MAX_SAFE_INTEGER}on(e,t){return this.addEventListener(e,t),this}once(e,t){const r=n=>i(this,void 0,void 0,(function*(){this.off(e,r),yield t(n)}));return this.on(e,r)}off(e,t){return this.removeEventListener(e,t),this}emit(e,t){const r=new CustomEvent(e,{detail:t});return super.dispatchEvent(r)}listenerCount(e){const t=this._listeners[e];return t?t.length:0}listeners(e){return this._listeners[e].map((e=>e[0]))||[]}eventNames(){return Object.keys(this._listeners)}removeAllListeners(){return Object.keys(this._listeners).forEach((e=>{this._listeners[e].forEach((t=>{super.removeEventListener(e,t[1])}))})),this._listeners={},this}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}addEventListener(e,t){const r=(e=>t=>e(t.detail))(t);super.addEventListener(e,r),this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push([t,r])}removeEventListener(e,t){const r=this._listeners[e];if(r){const i=r.findIndex((e=>e[0]===t));-1!==i&&(super.removeEventListener(e,r[i][1]),r.splice(i,1))}}}let a;a="undefined"==typeof window?n.EventEmitter:s,t.EventEmitter=class extends a{}},3065:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.format=t.convert=t.convertScalarValue=t.isDataFormat=void 0;const i=r(5071),n=r(9970),s=r(7345),a=r(7086),o=r(7151),c=r(2557),l=r(7541),{parseBaseType:d}=s.utils;t.isDataFormat=e=>"object"==typeof e&&!(0,s.isNullish)(e)&&"number"in e&&"bytes"in e;const u=(e,t,r=[])=>{let i,n=Object.assign({},e);for(const e of t){if(n.oneOf&&i){const e=r.find((function(e){return this===e[0]}),null!=i?i:"");e&&e[0]===i&&(n=n.oneOf[e[1]])}if(!n.properties&&!n.items)return;if(n.properties)n=n.properties[e];else if(n.items&&n.items.properties){const t=n.items.properties;if(!t)return;n=t[e]}else n.items&&(0,s.isObject)(n.items)?n=n.items:n.items&&Array.isArray(n.items)&&(n=n.items[parseInt(e,10)]);n&&e&&(i=e)}return n};t.convertScalarValue=(e,t,r)=>{try{const{baseType:s,baseTypeSize:o}=d(t);if("int"===s||"uint"===s)switch(r.number){case n.FMT_NUMBER.NUMBER:return Number((0,a.toBigInt)(e));case n.FMT_NUMBER.HEX:return(0,a.numberToHex)((0,a.toBigInt)(e));case n.FMT_NUMBER.STR:return(0,a.toBigInt)(e).toString();case n.FMT_NUMBER.BIGINT:return(0,a.toBigInt)(e);default:throw new i.FormatterError(`Invalid format: ${String(r.number)}`)}if("bytes"===s){let t;switch(o?"string"==typeof e?t=(0,c.padLeft)(e,2*o):e instanceof Uint8Array&&(t=(0,l.uint8ArrayConcat)(new Uint8Array(o-e.length),e)):t=e,r.bytes){case n.FMT_BYTES.HEX:return(0,a.bytesToHex)((0,a.bytesToUint8Array)(t));case n.FMT_BYTES.UINT8ARRAY:return(0,a.bytesToUint8Array)(t);default:throw new i.FormatterError(`Invalid format: ${String(r.bytes)}`)}}}catch(t){return e}return e},t.convert=(e,r,i,n,a=[])=>{var o,c;if(!(0,s.isObject)(e)&&!Array.isArray(e))return(0,t.convertScalarValue)(e,null==r?void 0:r.format,n);const l=e;for(const[e,d]of Object.entries(l)){i.push(e);const h=u(r,i,a);if((0,s.isNullish)(h))delete l[e],i.pop();else if((0,s.isObject)(d))(0,t.convert)(d,r,i,n),i.pop();else{if(Array.isArray(d)){let u=h;if(void 0!==(null==h?void 0:h.oneOf)&&h.oneOf.forEach(((t,r)=>{var i,n;!Array.isArray(null==h?void 0:h.items)&&("object"==typeof d[0]&&"object"===(null===(i=null==t?void 0:t.items)||void 0===i?void 0:i.type)||"string"==typeof d[0]&&"object"!==(null===(n=null==t?void 0:t.items)||void 0===n?void 0:n.type))&&(u=t,a.push([e,r]))})),(0,s.isNullish)(null==u?void 0:u.items)){delete l[e],i.pop();continue}if((0,s.isObject)(u.items)&&!(0,s.isNullish)(u.items.format)){for(let r=0;r<d.length;r+=1)l[e][r]=(0,t.convertScalarValue)(d[r],null===(o=null==u?void 0:u.items)||void 0===o?void 0:o.format,n);i.pop();continue}if(!Array.isArray(null==u?void 0:u.items)&&"object"===(null===(c=null==u?void 0:u.items)||void 0===c?void 0:c.type)){for(const e of d)(0,t.convert)(e,r,i,n,a);i.pop();continue}if(Array.isArray(null==u?void 0:u.items)){for(let r=0;r<d.length;r+=1)l[e][r]=(0,t.convertScalarValue)(d[r],u.items[r].format,n);i.pop();continue}}l[e]=(0,t.convertScalarValue)(d,h.format,n),i.pop()}}return l},t.format=(e,r,n)=>{let a;a=(0,s.isObject)(r)?(0,o.mergeDeep)({},r):Array.isArray(r)?[...r]:r;const c=(0,s.isObject)(e)?e:s.utils.ethAbiToJsonSchema(e);if(!c.properties&&!c.items&&!c.format)throw new i.FormatterError("Invalid json schema for formatting");return(0,t.convert)(a,c,[],n)}},3561:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStorageSlotNumForLongString=t.soliditySha3Raw=t.soliditySha3=t.encodePacked=t.processSolidityEncodePackedArgs=t.keccak256=t.keccak256Wrapper=t.sha3Raw=t.sha3=void 0;const i=r(3687),n=r(5487),s=r(5071),a=r(7345),o=r(7086),c=r(2557),l="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";t.sha3=e=>{let t;t="string"==typeof e?e.startsWith("0x")&&(0,a.isHexStrict)(e)?(0,o.hexToBytes)(e):(0,n.utf8ToBytes)(e):e;const r=(0,o.bytesToHex)((0,i.keccak256)(t));return r===l?void 0:r},t.sha3Raw=e=>{const r=(0,t.sha3)(e);return(0,a.isNullish)(r)?l:r},t.keccak256Wrapper=e=>{let t;return t="bigint"==typeof e||"number"==typeof e?(0,n.utf8ToBytes)(e.toString()):Array.isArray(e)?new Uint8Array(e):"string"!=typeof e||(0,a.isHexStrict)(e)?(0,o.bytesToUint8Array)(e):(0,n.utf8ToBytes)(e),(0,o.bytesToHex)((0,i.keccak256)(t))},t.keccak256=t.keccak256Wrapper;const d=(e,t)=>{const r=/^(\d+).*$/.exec(e.slice(t));return r?parseInt(r[1],10):0},u=e=>e.toString(2).length,h=(e,t)=>{const r=t.toString();if("string"===e){if("string"==typeof t)return(0,o.utf8ToHex)(t);throw new s.InvalidStringError(t)}if("bool"===e||"boolean"===e){if("boolean"==typeof t)return t?"01":"00";throw new s.InvalidBooleanError(t)}if("address"===e){if(!(0,a.isAddress)(r))throw new s.InvalidAddressError(r);return r}const i=(e=>e.startsWith("int[")?`int256${e.slice(3)}`:"int"===e?"int256":e.startsWith("uint[")?`uint256'${e.slice(4)}`:"uint"===e?"uint256":e)(e);if(e.startsWith("uint")){const e=d(i,4);if(e%8||e<8||e>256)throw new s.InvalidSizeError(r);const t=(0,o.toNumber)(r);if(u(t)>e)throw new s.InvalidLargeValueError(r);if(t<BigInt(0))throw new s.InvalidUnsignedIntegerError(r);return e?(0,c.leftPad)(t.toString(16),e/8*2):t.toString(16)}if(e.startsWith("int")){const t=d(i,3);if(t%8||t<8||t>256)throw new s.InvalidSizeError(e);const n=(0,o.toNumber)(r);if(u(n)>t)throw new s.InvalidLargeValueError(r);return n<BigInt(0)?(0,c.toTwosComplement)(n.toString(),t/8*2):t?(0,c.leftPad)(n.toString(16),t/4):n.toString(16)}if("bytes"===i){if(r.replace(/^0x/i,"").length%2!=0)throw new s.InvalidBytesError(r);return r}if(e.startsWith("bytes")){if(r.replace(/^0x/i,"").length%2!=0)throw new s.InvalidBytesError(r);const t=d(e,5);if(!t||t<1||t>64||t<r.replace(/^0x/i,"").length/2)throw new s.InvalidBytesError(r);return(0,c.rightPad)(r,2*t)}return""};t.processSolidityEncodePackedArgs=e=>{const[t,r]=(e=>{if(Array.isArray(e))throw new Error("Autodetection of array types is not supported.");let t,r;if("object"==typeof e&&("t"in e||"type"in e)&&("v"in e||"value"in e))t="t"in e?e.t:e.type,r="v"in e?e.v:e.value,t="bigint"===t.toLowerCase()?"int":t;else{if("bigint"==typeof e)return["int",e];t=(0,o.toHex)(e,!0),r=(0,o.toHex)(e),t.startsWith("int")||t.startsWith("uint")||(t="bytes")}return!t.startsWith("int")&&!t.startsWith("uint")||"string"!=typeof r||/^(-)?0x/i.test(r)||(r=(0,o.toBigInt)(r)),[t,r]})(e);return Array.isArray(r)?r.map((e=>h(t,e).replace("0x",""))).join(""):h(t,r).replace("0x","")},t.encodePacked=(...e)=>`0x${Array.prototype.slice.call(e).map(t.processSolidityEncodePackedArgs).join("").toLowerCase()}`,t.soliditySha3=(...e)=>(0,t.sha3)((0,t.encodePacked)(...e)),t.soliditySha3Raw=(...e)=>(0,t.sha3Raw)((0,t.encodePacked)(...e)),t.getStorageSlotNumForLongString=e=>(0,t.sha3)(`0x${("number"==typeof e?e.toString():e).padStart(64,"0")}`)},9634:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.jsonRpc=void 0,s(r(7086),t),s(r(8512),t),s(r(4578),t),s(r(3065),t),s(r(3561),t),s(r(4822),t),s(r(2557),t),s(r(7151),t),s(r(3718),t),s(r(9250),t),t.jsonRpc=a(r(9250)),s(r(6982),t),s(r(4108),t),s(r(7717),t),s(r(997),t),s(r(222),t),s(r(7541),t)},9250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBatchRequest=t.toBatchPayload=t.toPayload=t.setRequestIdStart=t.isBatchResponse=t.isValidResponse=t.validateResponse=t.isSubscriptionResult=t.isResponseWithNotification=t.isResponseWithError=t.isResponseWithResult=t.isResponseRpcError=void 0;const i=r(7345),n=r(5071),s=r(7717);let a;t.isResponseRpcError=e=>{const t=e.error.code;return n.rpcErrorsMap.has(t)||t>=-32099&&t<=-32e3},t.isResponseWithResult=e=>!Array.isArray(e)&&!!e&&"2.0"===e.jsonrpc&&"result"in e&&(0,i.isNullish)(e.error)&&("number"==typeof e.id||"string"==typeof e.id),t.isResponseWithError=e=>!Array.isArray(e)&&"2.0"===e.jsonrpc&&!!e&&(0,i.isNullish)(e.result)&&"error"in e&&("number"==typeof e.id||"string"==typeof e.id),t.isResponseWithNotification=e=>!(Array.isArray(e)||!e||"2.0"!==e.jsonrpc||(0,i.isNullish)(e.params)||(0,i.isNullish)(e.method)),t.isSubscriptionResult=e=>!Array.isArray(e)&&!!e&&"2.0"===e.jsonrpc&&"id"in e&&"result"in e,t.validateResponse=e=>(0,t.isResponseWithResult)(e)||(0,t.isResponseWithError)(e),t.isValidResponse=e=>Array.isArray(e)?e.every(t.validateResponse):(0,t.validateResponse)(e),t.isBatchResponse=e=>Array.isArray(e)&&e.length>0&&(0,t.isValidResponse)(e),t.setRequestIdStart=e=>{a=e},t.toPayload=e=>{var t,r,i,n;return void 0!==a&&(a+=1),{jsonrpc:null!==(t=e.jsonrpc)&&void 0!==t?t:"2.0",id:null!==(i=null!==(r=e.id)&&void 0!==r?r:a)&&void 0!==i?i:(0,s.uuidV4)(),method:e.method,params:null!==(n=e.params)&&void 0!==n?n:void 0}},t.toBatchPayload=e=>e.map((e=>(0,t.toPayload)(e))),t.isBatchRequest=e=>Array.isArray(e)&&e.length>0},7151:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeDeep=void 0;const i=r(9970),n=r(7345),s=e=>!("object"!=typeof e||(0,n.isNullish)(e)||Array.isArray(e)||e instanceof i.TypedArray);t.mergeDeep=(e,...r)=>{const a=e;if(!s(a))return a;for(const e of r)for(const r in e)s(e[r])?(a[r]||(a[r]={}),(0,t.mergeDeep)(a[r],e[r])):!(0,n.isNullish)(e[r])&&Object.hasOwnProperty.call(e,r)&&(Array.isArray(e[r])||e[r]instanceof i.TypedArray?a[r]=e[r].slice(0):a[r]=e[r]);return a}},3718:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.rejectIfConditionAtInterval=t.rejectIfTimeout=t.pollTillDefined=t.pollTillDefinedAndReturnIntervalId=t.waitWithTimeout=t.isPromise=void 0;const n=r(7345);function s(e,t,r){return i(this,void 0,void 0,(function*(){let i;const n=yield Promise.race([e instanceof Promise?e:e(),new Promise(((e,n)=>{i=setTimeout((()=>r?n(r):e(void 0)),t)}))]);if(i&&clearTimeout(i),n instanceof Error)throw n;return n}))}function a(e,t){let r;return[new Promise(((a,o)=>{r=setInterval(function c(){return(()=>{i(this,void 0,void 0,(function*(){try{const i=yield s(e,t);(0,n.isNullish)(i)||(clearInterval(r),a(i))}catch(e){clearInterval(r),o(e)}}))})(),c}(),t)})),r]}t.isPromise=function(e){return("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then},t.waitWithTimeout=s,t.pollTillDefinedAndReturnIntervalId=a,t.pollTillDefined=function(e,t){return i(this,void 0,void 0,(function*(){return a(e,t)[0]}))},t.rejectIfTimeout=function(e,t){let r;const i=new Promise(((i,n)=>{r=setTimeout((()=>{n(t)}),e)}));return[r,i]},t.rejectIfConditionAtInterval=function(e,t){let r;const n=new Promise(((n,s)=>{r=setInterval((()=>{(()=>{i(this,void 0,void 0,(function*(){const t=yield e();t&&(clearInterval(r),s(t))}))})()}),t)}));return[r,n]}},4822:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomHex=t.randomBytes=void 0;const i=r(1341),n=r(7086);t.randomBytes=e=>(0,i.getRandomBytesSync)(e),t.randomHex=e=>(0,n.bytesToHex)((0,t.randomBytes)(e))},222:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},a=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SocketProvider=void 0;const o=r(5071),c=r(997),l=r(4108),d=r(4578),u=r(6982),h=s(r(9250)),p={autoReconnect:!0,delay:5e3,maxAttempts:5};class f extends c.Eip1193Provider{constructor(e,t,r){if(super(),this._connectionStatus="connecting",this._onMessageHandler=this._onMessage.bind(this),this._onOpenHandler=this._onConnect.bind(this),this._onCloseHandler=this._onCloseEvent.bind(this),this._onErrorHandler=this._onError.bind(this),!this._validateProviderPath(e))throw new o.InvalidClientError(e);this._socketPath=e,this._socketOptions=t,this._reconnectOptions=Object.assign(Object.assign({},p),null!=r?r:{}),this._pendingRequestsQueue=new Map,this._sentRequestsQueue=new Map,this._init(),this.connect(),this.chunkResponseParser=new l.ChunkResponseParser(this._eventEmitter,this._reconnectOptions.autoReconnect),this.chunkResponseParser.onError((()=>{this._clearQueues()})),this.isReconnecting=!1}get SocketConnection(){return this._socketConnection}_init(){this._reconnectAttempts=0}connect(){try{this._openSocketConnection(),this._connectionStatus="connecting",this._addSocketListeners()}catch(e){if(!this.isReconnecting)throw this._connectionStatus="disconnected",e&&e.message?new o.ConnectionError(`Error while connecting to ${this._socketPath}. Reason: ${e.message}`):new o.InvalidClientError(this._socketPath);setImmediate((()=>{this._reconnect()}))}}_validateProviderPath(e){return!!e}supportsSubscriptions(){return!0}on(e,t){this._eventEmitter.on(e,t)}once(e,t){this._eventEmitter.once(e,t)}removeListener(e,t){this._eventEmitter.removeListener(e,t)}_onDisconnect(e,t){this._connectionStatus="disconnected",super._onDisconnect(e,t)}disconnect(e,t){const r=null!=e?e:1e3;this._removeSocketListeners(),"disconnected"!==this.getStatus()&&this._closeSocketConnection(r,t),this._onDisconnect(r,t)}removeAllListeners(e){this._eventEmitter.removeAllListeners(e)}_onError(e){this.isReconnecting?this._reconnect():this._eventEmitter.emit("error",e)}reset(){this._sentRequestsQueue.clear(),this._pendingRequestsQueue.clear(),this._init(),this._removeSocketListeners(),this._addSocketListeners()}_reconnect(){this.isReconnecting||(this.isReconnecting=!0,this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach(((e,t)=>{e.deferredPromise.reject(new o.PendingRequestsOnReconnectingError),this._sentRequestsQueue.delete(t)})),this._reconnectAttempts<this._reconnectOptions.maxAttempts?(this._reconnectAttempts+=1,setTimeout((()=>{this._removeSocketListeners(),this.connect(),this.isReconnecting=!1}),this._reconnectOptions.delay)):(this.isReconnecting=!1,this._clearQueues(),this._removeSocketListeners(),this._eventEmitter.emit("error",new o.MaxAttemptsReachedOnReconnectingError(this._reconnectOptions.maxAttempts))))}request(e){return a(this,void 0,void 0,(function*(){if((0,d.isNullish)(this._socketConnection))throw new Error("Connection is undefined");"disconnected"===this.getStatus()&&this.connect();const t=h.isBatchRequest(e)?e[0].id:e.id;if(!t)throw new o.Web3WSProviderError("Request Id not defined");if(this._sentRequestsQueue.has(t))throw new o.RequestAlreadySentError(t);const r=new u.Web3DeferredPromise;r.catch((e=>{this._eventEmitter.emit("error",e)}));const i={payload:e,deferredPromise:r};if("connecting"===this.getStatus())return this._pendingRequestsQueue.set(t,i),i.deferredPromise;this._sentRequestsQueue.set(t,i);try{this._sendToSocket(i.payload)}catch(e){this._sentRequestsQueue.delete(t),this._eventEmitter.emit("error",e)}return r}))}_onConnect(){this._connectionStatus="connected",this._reconnectAttempts=0,super._onConnect(),this._sendPendingRequests()}_sendPendingRequests(){for(const[e,t]of this._pendingRequestsQueue.entries())this._sendToSocket(t.payload),this._pendingRequestsQueue.delete(e),this._sentRequestsQueue.set(e,t)}_onMessage(e){const t=this._parseResponses(e);if(!(0,d.isNullish)(t)&&0!==t.length)for(const e of t){if(h.isResponseWithNotification(e)&&e.method.endsWith("_subscription"))return void this._eventEmitter.emit("message",e);const t=h.isBatchResponse(e)?e[0].id:e.id,r=this._sentRequestsQueue.get(t);if(!r)return;(h.isBatchResponse(e)||h.isResponseWithResult(e)||h.isResponseWithError(e))&&(this._eventEmitter.emit("message",e),r.deferredPromise.resolve(e)),this._sentRequestsQueue.delete(t)}}_clearQueues(e){this._pendingRequestsQueue.size>0&&this._pendingRequestsQueue.forEach(((t,r)=>{t.deferredPromise.reject(new o.ConnectionNotOpenError(e)),this._pendingRequestsQueue.delete(r)})),this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach(((t,r)=>{t.deferredPromise.reject(new o.ConnectionNotOpenError(e)),this._sentRequestsQueue.delete(r)})),this._removeSocketListeners()}}t.SocketProvider=f},2557:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromTwosComplement=t.toTwosComplement=t.leftPad=t.rightPad=t.padRight=t.padLeft=void 0;const i=r(5071),n=r(7345),s=r(7086);t.padLeft=(e,t,r="0")=>"string"==typeof e?(0,n.isHexStrict)(e)?n.utils.padLeft(e,t,r):e.padStart(t,r):(n.validator.validate(["int"],[e]),n.utils.padLeft(e,t,r)),t.padRight=(e,t,r="0")=>{if("string"==typeof e&&!(0,n.isHexStrict)(e))return e.padEnd(t,r);n.validator.validate(["int"],[e]);const i="string"==typeof e&&(0,n.isHexStrict)(e)?e:(0,s.numberToHex)(e),a=i.startsWith("-")?3:2;return i.padEnd(t+a,r)},t.rightPad=t.padRight,t.leftPad=t.padLeft,t.toTwosComplement=(e,r=64)=>{n.validator.validate(["int"],[e]);const a=(0,s.toNumber)(e);if(a>=0)return(0,t.padLeft)((0,s.toHex)(a),r);const o=(0,n.bigintPower)(BigInt(2),BigInt(4*r));if(-a>=o)throw new i.NibbleWidthError(`value: ${e}, nibbleWidth: ${r}`);const c=BigInt(a)+o;return(0,t.padLeft)((0,s.numberToHex)(c),r)},t.fromTwosComplement=(e,t=64)=>{n.validator.validate(["int"],[e]);const r=(0,s.toNumber)(e);if(r<0)return r;const a=Math.ceil(Math.log(Number(r))/Math.log(2));if(a>4*t)throw new i.NibbleWidthError(`value: "${e}", nibbleWidth: "${t}"`);if(4*t!==a)return r;const o=(0,n.bigintPower)(BigInt(2),BigInt(t)*BigInt(4));return(0,s.toNumber)(BigInt(r)-o)}},7541:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uint8ArrayEquals=t.uint8ArrayConcat=void 0,t.uint8ArrayConcat=function(...e){const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let i=0;for(const t of e)r.set(t,i),i+=t.length;return r},t.uint8ArrayEquals=function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r+=1)if(e[r]!==t[r])return!1;return!0}},7717:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuidV4=void 0;const i=r(7086),n=r(4822);t.uuidV4=()=>{const e=(0,n.randomBytes)(16);e[6]=15&e[6]|64,e[8]=63&e[8]|128;const t=(0,i.bytesToHex)(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")}},4578:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNullish=t.compareBlockNumbers=t.isTopicInBloom=t.isTopic=t.isContractAddressInBloom=t.isUserEthereumAddressInBloom=t.isInBloom=t.isBloom=t.isAddress=t.checkAddressCheckSum=t.isHex=t.isHexStrict=void 0;const i=r(5071),n=r(7345),s=r(9970);t.isHexStrict=n.isHexStrict,t.isHex=n.isHex,t.checkAddressCheckSum=n.checkAddressCheckSum,t.isAddress=n.isAddress,t.isBloom=n.isBloom,t.isInBloom=n.isInBloom,t.isUserEthereumAddressInBloom=n.isUserEthereumAddressInBloom,t.isContractAddressInBloom=n.isContractAddressInBloom,t.isTopic=n.isTopic,t.isTopicInBloom=n.isTopicInBloom,t.compareBlockNumbers=(e,t)=>{const r="string"==typeof e&&(0,n.isBlockTag)(e),a="string"==typeof t&&(0,n.isBlockTag)(t);if(e===t||("earliest"===e||0===e)&&("earliest"===t||0===t))return 0;if("earliest"===e&&t>0)return-1;if("earliest"===t&&e>0)return 1;if(r&&a){const r={[s.BlockTags.EARLIEST]:1,[s.BlockTags.FINALIZED]:2,[s.BlockTags.SAFE]:3,[s.BlockTags.LATEST]:4,[s.BlockTags.PENDING]:5};return r[e]<r[t]?-1:1}if(r&&!a||!r&&a)throw new i.InvalidBlockError("Cannot compare blocktag with provided non-blocktag input.");const o=BigInt(e),c=BigInt(t);return o<c?-1:o===c?0:1},t.isNullish=n.isNullish},6982:function(e,t,r){"use strict";var i,n=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Web3DeferredPromise=void 0;const s=r(5071);t.Web3DeferredPromise=class{constructor({timeout:e,eagerStart:t,timeoutMessage:r}={timeout:0,eagerStart:!1,timeoutMessage:"DeferredPromise timed out"}){this[i]="Promise",this._state="pending",this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})),this._timeoutMessage=r,this._timeoutInterval=e,t&&this.startTimer()}get state(){return this._state}then(e,t){return n(this,void 0,void 0,(function*(){return this._promise.then(e,t)}))}catch(e){return n(this,void 0,void 0,(function*(){return this._promise.catch(e)}))}finally(e){return n(this,void 0,void 0,(function*(){return this._promise.finally(e)}))}resolve(e){this._resolve(e),this._state="fulfilled",this._clearTimeout()}reject(e){this._reject(e),this._state="rejected",this._clearTimeout()}startTimer(){this._timeoutInterval&&this._timeoutInterval>0&&(this._timeoutId=setTimeout(this._checkTimeout.bind(this),this._timeoutInterval))}_checkTimeout(){"pending"===this._state&&this._timeoutId&&this.reject(new s.OperationTimeoutError(this._timeoutMessage))}_clearTimeout(){this._timeoutId&&clearTimeout(this._timeoutId)}},i=Symbol.toStringTag},997:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))((function(n,s){function a(e){try{c(i.next(e))}catch(e){s(e)}}function o(e){try{c(i.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Eip1193Provider=void 0;const n=r(9970),s=r(2699),a=r(5071),o=r(9250);class c extends n.Web3BaseProvider{constructor(){super(...arguments),this._eventEmitter=new s.EventEmitter,this._chainId="",this._accounts=[]}_getChainId(){var e;return i(this,void 0,void 0,(function*(){const t=yield this.request((0,o.toPayload)({method:"eth_chainId",params:[]}));return null!==(e=null==t?void 0:t.result)&&void 0!==e?e:""}))}_getAccounts(){var e;return i(this,void 0,void 0,(function*(){const t=yield this.request((0,o.toPayload)({method:"eth_accounts",params:[]}));return null!==(e=null==t?void 0:t.result)&&void 0!==e?e:[]}))}_onConnect(){Promise.all([this._getChainId().then((e=>{e!==this._chainId&&(this._chainId=e,this._eventEmitter.emit("chainChanged",this._chainId))})).catch((e=>{console.error(e)})),this._getAccounts().then((e=>{this._accounts.length===e.length&&e.every((t=>e.includes(t)))||(this._accounts=e,this._onAccountsChanged())})).catch((e=>{console.error(e)}))]).then((()=>this._eventEmitter.emit("connect",{chainId:this._chainId}))).catch((e=>{console.error(e)}))}_onDisconnect(e,t){this._eventEmitter.emit("disconnect",new a.EIP1193ProviderRpcError(e,t))}_onAccountsChanged(){this._eventEmitter.emit("accountsChanged",this._accounts)}}t.Eip1193Provider=c},1438:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VALID_ETH_BASE_TYPES=void 0,t.VALID_ETH_BASE_TYPES=["bool","int","uint","bytes","string","address","tuple"]},3637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validator=void 0;const i=r(7985);t.validator=new i.Web3Validator},356:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Web3ValidatorError=void 0;const i=r(5071),n=e=>e.message?e.message:"unspecified error";class s extends i.BaseWeb3Error{constructor(e){super(),this.code=i.ERR_VALIDATION,this.errors=e,super.message=`Web3 validator found ${e.length} error[s]:\n${this._compileErrors().join("\n")}`}_compileErrors(){return this.errors.map(n)}}t.Web3ValidatorError=s},2677:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(2681),n=r(6660),s=r(5191),a=r(4416),o=r(3921),c=r(5164),l=r(7420),d=r(6378),u={address:e=>(0,i.isAddress)(e),bloom:e=>(0,s.isBloom)(e),blockNumber:e=>(0,n.isBlockNumber)(e),blockTag:e=>(0,n.isBlockTag)(e),blockNumberOrTag:e=>(0,n.isBlockNumberOrTag)(e),bool:e=>(0,a.isBoolean)(e),bytes:e=>(0,o.isBytes)(e),filter:e=>(0,c.isFilterObject)(e),hex:e=>(0,l.isHexStrict)(e),uint:e=>(0,d.isUInt)(e),int:e=>(0,d.isInt)(e),number:e=>(0,d.isNumber)(e),string:e=>(0,l.isString)(e)};for(let e=8;e<=256;e+=8)u[`int${e}`]=t=>(0,d.isInt)(t,{bitSize:e}),u[`uint${e}`]=t=>(0,d.isUInt)(t,{bitSize:e});for(let e=1;e<=32;e+=1)u[`bytes${e}`]=t=>(0,o.isBytes)(t,{size:e});u.bytes256=u.bytes,t.default=u},7345:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.utils=void 0,s(r(7985),t),s(r(3637),t),s(r(5421),t),t.utils=a(r(8171)),s(r(356),t),s(r(1438),t),s(r(1851),t)},5421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8171:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexToUint8Array=t.uint8ArrayToHexString=t.padLeft=t.numberToHex=t.hexToNumber=t.codePointToInt=t.transformJsonDataToAbiFormat=t.fetchArrayElement=t.ethAbiToJsonSchema=t.abiSchemaToJsonSchema=t.parseBaseType=void 0;const i=r(5071),n=r(1438),s=r(1283),a=r(7420),o=r(356),c=["hex","number","blockNumber","blockNumberOrTag","filter","bloom"];t.parseBaseType=e=>{let t,r=e.replace(/ /,""),i=!1,s=[];if(e.includes("[")&&(r=r.slice(0,r.indexOf("[")),s=[...e.matchAll(/(?:\[(\d*)\])/g)].map((e=>parseInt(e[1],10))).map((e=>Number.isNaN(e)?-1:e)),i=s.length>0),n.VALID_ETH_BASE_TYPES.includes(r))return{baseType:r,isArray:i,baseTypeSize:t,arraySizes:s};if(r.startsWith("int"))t=parseInt(r.substring(3),10),r="int";else if(r.startsWith("uint"))t=parseInt(e.substring(4),10),r="uint";else{if(!r.startsWith("bytes"))return{baseType:void 0,isArray:!1,baseTypeSize:void 0,arraySizes:s};t=parseInt(r.substring(5),10),r="bytes"}return{baseType:r,isArray:i,baseTypeSize:t,arraySizes:s}};const l=(e,r={})=>{if(Object.keys(r).includes("type"))throw new o.Web3ValidatorError([{keyword:"eth",message:'Either "eth" or "type" can be presented in schema',params:{eth:e},instancePath:"",schemaPath:""}]);const{baseType:i,baseTypeSize:n}=(0,t.parseBaseType)(e);if(!i&&!c.includes(e))throw new o.Web3ValidatorError([{keyword:"eth",message:`Eth data type "${e}" is not valid`,params:{eth:e},instancePath:"",schemaPath:""}]);if(i){if("tuple"===i)throw new Error('"tuple" type is not implemented directly.');return{format:`${i}${null!=n?n:""}`,required:!0}}return e?{format:e,required:!0}:{}};t.abiSchemaToJsonSchema=(e,r="/0")=>{const i={type:"array",items:[],maxItems:e.length,minItems:e.length};for(const[n,a]of e.entries()){let e,o,c=[];(0,s.isAbiParameterSchema)(a)?(e=a.type,o=a.name,c=a.components):"string"==typeof a?(e=a,o=`${r}/${n}`):Array.isArray(a)&&(a[0]&&"string"==typeof a[0]&&a[0].startsWith("tuple")&&!Array.isArray(a[0])&&a[1]&&Array.isArray(a[1])?(e=a[0],o=`${r}/${n}`,c=a[1]):(e="tuple",o=`${r}/${n}`,c=a));const{baseType:d,isArray:u,arraySizes:h}=(0,t.parseBaseType)(e);let p,f=i;for(let e=h.length-1;e>0;e-=1)p={type:"array",items:[],maxItems:h[e],minItems:h[e]},h[e]<0&&(delete p.maxItems,delete p.minItems),Array.isArray(f.items)?0===f.items.length?f.items=p:f.items.push(p):f.items=[f.items,p],f=p;if("tuple"!==d||u)if("tuple"===d&&u){const e=h[0],r={$id:o,type:"array",items:(0,t.abiSchemaToJsonSchema)(c,o),maxItems:e,minItems:e};e<0&&(delete r.maxItems,delete r.minItems),f.items.push(r)}else if(u){const e=h[0],t={type:"array",$id:o,items:l(String(d)),minItems:e,maxItems:e};e<0&&(delete t.maxItems,delete t.minItems),f.items.push(t)}else Array.isArray(f.items)?f.items.push(Object.assign({$id:o},l(e))):f.items.items.push(Object.assign({$id:o},l(e)));else{const e=(0,t.abiSchemaToJsonSchema)(c,o);e.$id=o,f.items.push(e)}f=i}return i},t.ethAbiToJsonSchema=e=>(0,t.abiSchemaToJsonSchema)(e),t.fetchArrayElement=(e,r)=>1===r?e:(0,t.fetchArrayElement)(e[0],r-1),t.transformJsonDataToAbiFormat=(e,r,i)=>{const n=[];for(const[a,o]of e.entries()){let e,c,l=[];(0,s.isAbiParameterSchema)(o)?(e=o.type,c=o.name,l=o.components):"string"==typeof o?e=o:Array.isArray(o)&&(o[1]&&Array.isArray(o[1])?(e=o[0],l=o[1]):(e="tuple",l=o));const{baseType:d,isArray:u,arraySizes:h}=(0,t.parseBaseType)(e),p=Array.isArray(r)?r[a]:r[c];if("tuple"!==d||u)if("tuple"===d&&u){const e=[];for(const r of p)if(h.length>1){const n=(0,t.fetchArrayElement)(r,h.length-1),s=[];for(const e of n)s.push((0,t.transformJsonDataToAbiFormat)(l,e,i));e.push(s)}else e.push((0,t.transformJsonDataToAbiFormat)(l,r,i));n.push(e)}else n.push(p);else n.push((0,t.transformJsonDataToAbiFormat)(l,p,i))}return(i=null!=i?i:[]).push(...n),i},t.codePointToInt=e=>{if(e>=48&&e<=57)return e-48;if(e>=65&&e<=70)return e-55;if(e>=97&&e<=102)return e-87;throw new Error(`Invalid code point: ${e}`)},t.hexToNumber=e=>{if(!(0,a.isHexStrict)(e))throw new Error("Invalid hex string");const[t,r]=e.startsWith("-")?[!0,e.slice(1)]:[!1,e],i=BigInt(r);return i>Number.MAX_SAFE_INTEGER?t?-i:i:i<Number.MIN_SAFE_INTEGER?i:t?-1*Number(i):Number(i)},t.numberToHex=e=>{if(("number"==typeof e||"bigint"==typeof e)&&e<0)return`-0x${e.toString(16).slice(1)}`;if(("number"==typeof e||"bigint"==typeof e)&&e>=0)return`0x${e.toString(16)}`;if("string"==typeof e&&(0,a.isHexStrict)(e)){const[t,r]=e.startsWith("-")?[!0,e.slice(1)]:[!1,e];return`${t?"-":""}0x${r.split(/^(-)?0(x|X)/).slice(-1)[0].replace(/^0+/,"").toLowerCase()}`}if("string"==typeof e&&!(0,a.isHexStrict)(e))return(0,t.numberToHex)(BigInt(e));throw new i.InvalidNumberError(e)},t.padLeft=(e,r,i="0")=>{if("string"==typeof e&&!(0,a.isHexStrict)(e))return e.padStart(r,i);const n="string"==typeof e&&(0,a.isHexStrict)(e)?e:(0,t.numberToHex)(e),[s,o]=n.startsWith("-")?["-0x",n.slice(3)]:["0x",n.slice(2)];return`${s}${o.padStart(r,i)}`},t.uint8ArrayToHexString=function(e){let t="0x";for(const r of e){const e=r.toString(16);t+=1===e.length?`0${e}`:e}return t},t.hexToUint8Array=function(e){let t;if(t=e.toLowerCase().startsWith("0x")?e.slice(2):e,t.length%2!=0)throw new i.InvalidBytesError(`hex string has odd length: ${e}`);const r=new Uint8Array(Math.ceil(t.length/2));for(let e=0;e<r.length;e+=1){const i=parseInt(t.substring(2*e,2*e+2),16);r[e]=i}return r}},1283:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAbiParameterSchema=void 0,t.isAbiParameterSchema=e=>"object"==typeof e&&"type"in e&&"name"in e},2681:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAddress=t.checkAddressCheckSum=void 0;const i=r(4488),n=r(7737),s=r(8171),a=r(7420);t.checkAddressCheckSum=e=>{if(!/^(0x)?[0-9a-f]{40}$/i.test(e))return!1;const t=e.slice(2),r=(0,n.utf8ToBytes)(t.toLowerCase()),a=(0,s.uint8ArrayToHexString)((0,i.keccak256)(r)).slice(2);for(let e=0;e<40;e+=1)if(parseInt(a[e],16)>7&&t[e].toUpperCase()!==t[e]||parseInt(a[e],16)<=7&&t[e].toLowerCase()!==t[e])return!1;return!0},t.isAddress=(e,r=!0)=>{if("string"!=typeof e&&!(e instanceof Uint8Array))return!1;let i;return i=e instanceof Uint8Array?(0,s.uint8ArrayToHexString)(e):"string"!=typeof e||(0,a.isHexStrict)(e)||e.toLowerCase().startsWith("0x")?e:`0x${e}`,!!/^(0x)?[0-9a-f]{40}$/i.test(i)&&(!(!/^(0x|0X)?[0-9a-f]{40}$/.test(i)&&!/^(0x|0X)?[0-9A-F]{40}$/.test(i))||!r||(0,t.checkAddressCheckSum)(i))}},6660:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBlockNumberOrTag=t.isBlockTag=t.isBlockNumber=void 0;const i=r(9970),n=r(6378);t.isBlockNumber=e=>(0,n.isUInt)(e),t.isBlockTag=e=>Object.values(i.BlockTags).includes(e),t.isBlockNumberOrTag=e=>(0,t.isBlockTag)(e)||(0,t.isBlockNumber)(e)},5191:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isContractAddressInBloom=t.isUserEthereumAddressInBloom=t.isInBloom=t.isBloom=void 0;const i=r(4488),n=r(8171),s=r(2681),a=r(7420);t.isBloom=e=>!("string"!=typeof e||!/^(0x)?[0-9a-f]{512}$/i.test(e)||!/^(0x)?[0-9a-f]{512}$/.test(e)&&!/^(0x)?[0-9A-F]{512}$/.test(e)),t.isInBloom=(e,r)=>{if("string"==typeof r&&!(0,a.isHexStrict)(r))return!1;if(!(0,t.isBloom)(e))return!1;const s="string"==typeof r?(0,n.hexToUint8Array)(r):r,o=(0,n.uint8ArrayToHexString)((0,i.keccak256)(s)).slice(2);for(let t=0;t<12;t+=4){const r=(parseInt(o.slice(t,t+2),16)<<8)+parseInt(o.slice(t+2,t+4),16)&2047,i=1<<r%4;if(((0,n.codePointToInt)(e.charCodeAt(e.length-1-Math.floor(r/4)))&i)!==i)return!1}return!0},t.isUserEthereumAddressInBloom=(e,r)=>{if(!(0,t.isBloom)(e))return!1;if(!(0,s.isAddress)(r))return!1;const i=(0,n.padLeft)(r,64);return(0,t.isInBloom)(e,i)},t.isContractAddressInBloom=(e,r)=>!!(0,t.isBloom)(e)&&!!(0,s.isAddress)(r)&&(0,t.isInBloom)(e,r)},4416:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBoolean=void 0;const i=r(7420);t.isBoolean=e=>!!["number","string","boolean"].includes(typeof e)&&("boolean"==typeof e||("string"!=typeof e||(0,i.isHexStrict)(e)?"string"==typeof e&&(0,i.isHexStrict)(e)?"0x1"===e||"0x0"===e:1===e||0===e:"1"===e||"0"===e))},3921:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBytes=t.isUint8Array=void 0;const i=r(8171),n=r(7420);t.isUint8Array=e=>e instanceof Uint8Array,t.isBytes=(e,t={abiType:"bytes"})=>{if(!("string"==typeof e||Array.isArray(e)||e instanceof Uint8Array))return!1;if("string"==typeof e&&(0,n.isHexStrict)(e)&&e.startsWith("-"))return!1;if("string"==typeof e&&!(0,n.isHexStrict)(e))return!1;let r;if("string"==typeof e){if(e.length%2!=0)return!1;r=(0,i.hexToUint8Array)(e)}else if(Array.isArray(e)){if(e.some((e=>e<0||e>255||!Number.isInteger(e))))return!1;r=new Uint8Array(e)}else r=e;if(null==t?void 0:t.abiType){const{baseTypeSize:e}=(0,i.parseBaseType)(t.abiType);return!e||r.length===e}return!(null==t?void 0:t.size)||r.length===(null==t?void 0:t.size)}},1478:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidEthBaseType=void 0;const i=r(8171);t.isValidEthBaseType=e=>{const{baseType:t,baseTypeSize:r}=(0,i.parseBaseType)(e);return!!t&&(t===e||("int"!==t&&"uint"!==t||!r||r<=256&&r%8==0)&&("bytes"!==t||!r||r>=1&&r<=32))}},5164:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFilterObject=void 0;const i=r(2681),n=r(6660),s=r(2102),a=r(5702);t.isFilterObject=e=>{const t=["fromBlock","toBlock","address","topics","blockHash"];if((0,s.isNullish)(e)||"object"!=typeof e)return!1;if(!Object.keys(e).every((e=>t.includes(e))))return!1;if(!(0,s.isNullish)(e.fromBlock)&&!(0,n.isBlockNumberOrTag)(e.fromBlock)||!(0,s.isNullish)(e.toBlock)&&!(0,n.isBlockNumberOrTag)(e.toBlock))return!1;if(!(0,s.isNullish)(e.address))if(Array.isArray(e.address)){if(!e.address.every((e=>(0,i.isAddress)(e))))return!1}else if(!(0,i.isAddress)(e.address))return!1;return!(!(0,s.isNullish)(e.topics)&&!e.topics.every((e=>!!(0,s.isNullish)(e)||(Array.isArray(e)?e.every((e=>(0,a.isTopic)(e))):!!(0,a.isTopic)(e)))))}},1851:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(2681),t),n(r(6660),t),n(r(5191),t),n(r(4416),t),n(r(3921),t),n(r(1478),t),n(r(5164),t),n(r(6378),t),n(r(7420),t),n(r(5702),t),n(r(2102),t)},6378:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNumber=t.isInt=t.isUInt=t.bigintPower=t.isBigInt=void 0;const i=r(8171),n=r(7420);t.isBigInt=e=>"bigint"==typeof e,t.bigintPower=(e,t)=>{let r=e;for(let i=1;i<t;i+=1)r*=e;return r},t.isUInt=(e,r={abiType:"uint"})=>{if(!["number","string","bigint"].includes(typeof e)||"string"==typeof e&&0===e.length)return!1;let s;if(null==r?void 0:r.abiType){const{baseTypeSize:e}=(0,i.parseBaseType)(r.abiType);e&&(s=e)}else r.bitSize&&(s=r.bitSize);const a=(0,t.bigintPower)(BigInt(2),BigInt(null!=s?s:256))-BigInt(1);try{const t="string"==typeof e&&(0,n.isHexStrict)(e)?BigInt((0,i.hexToNumber)(e)):BigInt(e);return t>=0&&t<=a}catch(e){return!1}},t.isInt=(e,r={abiType:"int"})=>{if(!["number","string","bigint"].includes(typeof e))return!1;if("number"==typeof e&&e>Number.MAX_SAFE_INTEGER)return!1;let s;if(null==r?void 0:r.abiType){const{baseTypeSize:e,baseType:t}=(0,i.parseBaseType)(r.abiType);if("int"!==t)return!1;e&&(s=e)}else r.bitSize&&(s=r.bitSize);const a=(0,t.bigintPower)(BigInt(2),BigInt((null!=s?s:256)-1)),o=BigInt(-1)*(0,t.bigintPower)(BigInt(2),BigInt((null!=s?s:256)-1));try{const t="string"==typeof e&&(0,n.isHexStrict)(e)?BigInt((0,i.hexToNumber)(e)):BigInt(e);return t>=o&&t<=a}catch(e){return!1}},t.isNumber=e=>!!(0,t.isInt)(e)||!("string"!=typeof e||!/[0-9.]/.test(e)||e.indexOf(".")!==e.lastIndexOf("."))||"number"==typeof e},2102:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=t.isNullish=void 0;const i=r(9970);t.isNullish=e=>null==e,t.isObject=e=>!("object"!=typeof e||(0,t.isNullish)(e)||Array.isArray(e)||e instanceof i.TypedArray)},7420:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateNoLeadingZeroes=t.isHexPrefixed=t.isHexString32Bytes=t.isHexString8Bytes=t.isHex=t.isHexString=t.isHexStrict=t.isString=void 0,t.isString=e=>"string"==typeof e,t.isHexStrict=e=>"string"==typeof e&&/^((-)?0x[0-9a-f]+|(0x))$/i.test(e),t.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||void 0!==t&&t>0&&e.length!==2+2*t)},t.isHex=e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e&&/^((-0x|0x|-)?[0-9a-f]+|(0x))$/i.test(e),t.isHexString8Bytes=(e,r=!0)=>r?(0,t.isHexStrict)(e)&&18===e.length:(0,t.isHex)(e)&&16===e.length,t.isHexString32Bytes=(e,r=!0)=>r?(0,t.isHexStrict)(e)&&66===e.length:(0,t.isHex)(e)&&64===e.length,t.isHexPrefixed=function(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return e.startsWith("0x")},t.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(void 0!==r&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString()}`)}},5702:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTopicInBloom=t.isTopic=void 0;const i=r(5191);t.isTopic=e=>!("string"!=typeof e||!/^(0x)?[0-9a-f]{64}$/i.test(e)||!/^(0x)?[0-9a-f]{64}$/.test(e)&&!/^(0x)?[0-9A-F]{64}$/.test(e)),t.isTopicInBloom=(e,r)=>!!(0,i.isBloom)(e)&&!!(0,t.isTopic)(r)&&(0,i.isInBloom)(e,r)},1714:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Validator=void 0;const n=r(5071),s=r(6750),a=r(356),o=i(r(2677)),c=e=>{if((!(null==e?void 0:e.type)||"object"===(null==e?void 0:e.type))&&(null==e?void 0:e.properties)){const t={};for(const r of Object.keys(e.properties)){const i=c(e.properties[r]);i&&(t[r]=i)}return Array.isArray(e.required)?s.z.object(t).partial().required(e.required.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:!0})),{})):s.z.object(t).partial()}if("array"===(null==e?void 0:e.type)&&(null==e?void 0:e.items)){if(Array.isArray(e.items)&&e.items.length>0){const t=[];for(const r of e.items){const e=c(r);e&&t.push(e)}return s.z.tuple(t)}return s.z.array(c(e.items))}if(e.oneOf&&Array.isArray(e.oneOf))return s.z.union(e.oneOf.map((e=>c(e))));if(null==e?void 0:e.format){if(!o.default[e.format])throw new n.SchemaFormatError(e.format);return s.z.any().refine(o.default[e.format],(t=>({params:{value:t,format:e.format}})))}return(null==e?void 0:e.type)&&"object"!==(null==e?void 0:e.type)&&"function"==typeof s.z[String(e.type)]?s.z[String(e.type)]():s.z.object({data:s.z.any()}).partial()};class l{static factory(){return l.validatorInstance||(l.validatorInstance=new l),l.validatorInstance}validate(e,t,r){var i,n;const s=c(e).safeParse(t);if(!s.success){const e=this.convertErrors(null!==(n=null===(i=s.error)||void 0===i?void 0:i.issues)&&void 0!==n?n:[]);if(e){if(null==r?void 0:r.silent)return e;throw new a.Web3ValidatorError(e)}}}convertErrors(e){if(e&&Array.isArray(e)&&e.length>0)return e.map((e=>{var t;let r,i,n,a;a=e.path.join("/");const o=String(e.path[e.path.length-1]),c=e.path.join("/");if(e.code===s.ZodIssueCode.too_big)i="maxItems",a=`${c}/maxItems`,n={limit:e.maximum},r=`must NOT have more than ${e.maximum} items`;else if(e.code===s.ZodIssueCode.too_small)i="minItems",a=`${c}/minItems`,n={limit:e.minimum},r=`must NOT have fewer than ${e.minimum} items`;else if(e.code===s.ZodIssueCode.custom){const{value:i,format:s}=null!==(t=e.params)&&void 0!==t?t:{};r=void 0===i?`value at "/${a}" is required`:`value "${"object"==typeof i?JSON.stringify(i):i}" at "/${a}" must pass "${s}" validation`,n={value:i}}return{keyword:null!=i?i:o,instancePath:c?`/${c}`:"",schemaPath:a?`#${a}`:"#",params:null!=n?n:{value:e.message},message:null!=r?r:e.message}}))}}t.Validator=l},7985:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Web3Validator=void 0;const i=r(1714),n=r(8171),s=r(356);t.Web3Validator=class{constructor(){this._validator=i.Validator.factory()}validateJSONSchema(e,t,r){return this._validator.validate(e,t,r)}validate(e,t,r={silent:!1}){var i,a;const o=(0,n.ethAbiToJsonSchema)(e);if(!Array.isArray(o.items)||0!==(null===(i=o.items)||void 0===i?void 0:i.length)||0!==t.length){if(Array.isArray(o.items)&&0===(null===(a=o.items)||void 0===a?void 0:a.length)&&0!==t.length)throw new s.Web3ValidatorError([{instancePath:"/0",schemaPath:"/",keyword:"required",message:"empty schema against data can not be validated",params:t}]);return this._validator.validate(o,t,r)}}}},3879:(e,t,r)=>{"use strict";function i(e,t){return e.exec(t)?.groups}r.r(t),r.d(t,{BaseError:()=>l,narrow:()=>d,parseAbi:()=>N,parseAbiItem:()=>M,parseAbiParameter:()=>D,parseAbiParameters:()=>U});var n=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,s=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,a=/^\(.+?\).*?$/,o=Object.defineProperty,c=(e,t,r)=>(((e,t,r)=>{t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r),l=class extends Error{constructor(e,t={}){const r=t.cause instanceof l?t.cause.details:t.cause?.message?t.cause.message:t.details,i=t.cause instanceof l&&t.cause.docsPath||t.docsPath;super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: https://abitype.dev${i}`]:[],...r?[`Details: ${r}`]:[],"Version: abitype@0.7.1"].join("\n")),c(this,"details"),c(this,"docsPath"),c(this,"metaMessages"),c(this,"shortMessage"),c(this,"name","AbiTypeError"),t.cause&&(this.cause=t.cause),this.details=r,this.docsPath=i,this.metaMessages=t.metaMessages,this.shortMessage=e}};function d(e){return e}var u=/^error (?<name>[a-zA-Z0-9_]+)\((?<parameters>.*?)\)$/,h=/^event (?<name>[a-zA-Z0-9_]+)\((?<parameters>.*?)\)$/,p=/^function (?<name>[a-zA-Z0-9_]+)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns \((?<returns>.*?)\))?$/,f=/^struct (?<name>[a-zA-Z0-9_]+) \{(?<properties>.*?)\}$/;function g(e){return f.test(e)}function m(e){return i(f,e)}var y=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/,v=/^fallback\(\)$/,b=/^receive\(\) external payable$/,T=new Set(["memory","indexed","storage","calldata"]),_=new Set(["indexed"]),k=new Set(["calldata","memory","storage"]),E=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function w(e,t={}){if(function(e){return p.test(e)}(e)){const r=function(e){return i(p,e)}(e);if(!r)throw new l("Invalid function signature.",{details:e});const n=C(r.parameters),s=[],a=n.length;for(let e=0;e<a;e++)s.push(S(n[e],{modifiers:k,structs:t,type:"function"}));const o=[];if(r.returns){const e=C(r.returns),i=e.length;for(let r=0;r<i;r++)o.push(S(e[r],{modifiers:k,structs:t,type:"function"}))}return{name:r.name,type:"function",stateMutability:r.stateMutability??"nonpayable",inputs:s,outputs:o}}if(function(e){return h.test(e)}(e)){const r=function(e){return i(h,e)}(e);if(!r)throw new l("Invalid event signature.",{details:e});const n=C(r.parameters),s=[],a=n.length;for(let e=0;e<a;e++)s.push(S(n[e],{modifiers:_,structs:t,type:"event"}));return{name:r.name,type:"event",inputs:s}}if(function(e){return u.test(e)}(e)){const r=function(e){return i(u,e)}(e);if(!r)throw new l("Invalid error signature.",{details:e});const n=C(r.parameters),s=[],a=n.length;for(let e=0;e<a;e++)s.push(S(n[e],{structs:t,type:"error"}));return{name:r.name,type:"error",inputs:s}}if(function(e){return y.test(e)}(e)){const r=function(e){return i(y,e)}(e);if(!r)throw new l("Invalid constructor signature.",{details:e});const n=C(r.parameters),s=[],a=n.length;for(let e=0;e<a;e++)s.push(S(n[e],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:r.stateMutability??"nonpayable",inputs:s}}if(function(e){return v.test(e)}(e))return{type:"fallback"};if(function(e){return b.test(e)}(e))return{type:"receive",stateMutability:"payable"};throw new l("Unknown signature.",{details:e})}var A=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,I=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,R=/^u?int$/;function S(e,t){const r=function(e,t){return t?`${t}:${e}`:e}(e,t?.type);if(E.has(r))return E.get(r);const o=a.test(e),c=i(o?I:A,e);if(!c)throw new l("Invalid ABI parameter.",{details:e});if(c.name&&function(e){return"address"===e||"bool"===e||"function"===e||"string"===e||"tuple"===e||n.test(e)||s.test(e)||P.test(e)}(c.name))throw new l("Invalid ABI parameter.",{details:e,metaMessages:[`"${c.name}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]});const d=c.name?{name:c.name}:{},u="indexed"===c.modifier?{indexed:!0}:{},h=t?.structs??{};let p,f={};if(o){p="tuple";const e=C(c.type),t=[],r=e.length;for(let i=0;i<r;i++)t.push(S(e[i],{structs:h}));f={components:t}}else if(c.type in h)p="tuple",f={components:h[c.type]};else if(R.test(c.type))p=`${c.type}256`;else if(p=c.type,"struct"!==t?.type&&!x(p))throw new l("Unknown type.",{metaMessages:[`Type "${p}" is not a valid ABI type.`]});if(c.modifier){if(!t?.modifiers?.has?.(c.modifier))throw new l("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${c.modifier}" not allowed${t?.type?` in "${t.type}" type`:""}.`]});if(k.has(c.modifier)&&!function(e,t){return t||"bytes"===e||"string"===e||"tuple"===e}(p,!!c.array))throw new l("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${c.modifier}" not allowed${t?.type?` in "${t.type}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${c.modifier}" was given.`]})}const g={type:`${p}${c.array??""}`,...d,...u,...f};return E.set(r,g),g}function C(e,t=[],r="",i=0){if(""===e){if(""===r)return t;if(0!==i)throw new l("Unbalanced parentheses.",{metaMessages:[`"${r.trim()}" has too many ${i>0?"opening":"closing"} parentheses.`],details:`Depth "${i}"`});return[...t,r.trim()]}const n=e.length;for(let s=0;s<n;s++){const n=e[s],a=e.slice(s+1);switch(n){case",":return 0===i?C(a,[...t,r.trim()]):C(a,t,`${r}${n}`,i);case"(":return C(a,t,`${r}${n}`,i+1);case")":return C(a,t,`${r}${n}`,i-1);default:return C(a,t,`${r}${n}`,i)}}return[]}function x(e){return"address"===e||"bool"===e||"function"===e||"string"===e||n.test(e)||s.test(e)}var P=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function O(e){const t={},r=e.length;for(let i=0;i<r;i++){const r=e[i];if(!g(r))continue;const n=m(r);if(!n)throw new l("Invalid struct signature.",{details:r});const s=n.properties.split(";"),a=[],o=s.length;for(let e=0;e<o;e++){const t=s[e].trim();if(!t)continue;const r=S(t,{type:"struct"});a.push(r)}if(!a.length)throw new l("Invalid struct signature.",{details:r,metaMessages:["No properties exist."]});t[n.name]=a}const i={},n=Object.entries(t),s=n.length;for(let e=0;e<s;e++){const[r,s]=n[e];i[r]=B(s,t)}return i}var L=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?$/;function B(e,t,r=new Set){const n=[],s=e.length;for(let o=0;o<s;o++){const s=e[o];if(a.test(s.type))n.push(s);else{const e=i(L,s.type);if(!e?.type)throw new l("Invalid ABI parameter.",{details:JSON.stringify(s,null,2),metaMessages:["ABI parameter type is invalid."]});const{array:a,type:o}=e;if(o in t){if(r.has(o))throw new l("Circular reference detected.",{metaMessages:[`Struct "${o}" is a circular reference.`]});n.push({...s,type:`tuple${a??""}`,components:B(t[o]??[],t,new Set([...r,o]))})}else{if(!x(o))throw new l("Unknown type.",{metaMessages:[`Type "${o}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]});n.push(s)}}}return n}function N(e){const t=O(e),r=[],i=e.length;for(let n=0;n<i;n++){const i=e[n];g(i)||r.push(w(i,t))}return r}function M(e){let t;if("string"==typeof e)t=w(e);else{const r=O(e),i=e.length;for(let n=0;n<i;n++){const i=e[n];if(!g(i)){t=w(i,r);break}}}if(!t)throw new l("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human.html#parseabiitem-1"});return t}function D(e){let t;if("string"==typeof e)t=S(e,{modifiers:T});else{const r=O(e),i=e.length;for(let n=0;n<i;n++){const i=e[n];if(!g(i)){t=S(i,{modifiers:T,structs:r});break}}}if(!t)throw new l("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(e,null,2)})`,docsPath:"/api/human.html#parseabiparameter-1"});return t}function U(e){const t=[];if("string"==typeof e){const r=C(e),i=r.length;for(let e=0;e<i;e++)t.push(S(r[e],{modifiers:T}))}else{const r=O(e),i=e.length;for(let n=0;n<i;n++){const i=e[n];if(g(i))continue;const s=C(i),a=s.length;for(let e=0;e<a;e++)t.push(S(s[e],{modifiers:T,structs:r}))}}if(0===t.length)throw new l("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human.html#parseabiparameters-1"});return t}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var s=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}return r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r(9375).default})()));